var z4=Object.defineProperty,R4=Object.defineProperties;var F4=Object.getOwnPropertyDescriptors;var py=Object.getOwnPropertySymbols;var UM=Object.prototype.hasOwnProperty,$M=Object.prototype.propertyIsEnumerable;var GM=(e,t,n)=>t in e?z4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jt=(e,t)=>{for(var n in t||(t={}))UM.call(t,n)&&GM(e,n,t[n]);if(py)for(var n of py(t))$M.call(t,n)&&GM(e,n,t[n]);return e},Ai=(e,t)=>R4(e,F4(t));var jp=(e,t)=>{var n={};for(var r in e)UM.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&py)for(var r of py(e))t.indexOf(r)<0&&$M.call(e,r)&&(n[r]=e[r]);return n};function WM(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}var Ls=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function B4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HM(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var ke={exports:{}},Yn={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qM=Object.getOwnPropertySymbols,N4=Object.prototype.hasOwnProperty,V4=Object.prototype.propertyIsEnumerable;function j4(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function U4(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(u){return t[u]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(u){s[u]=u}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var YM=U4()?Object.assign:function(e,t){for(var n,r=j4(e),s,u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var d in n)N4.call(n,d)&&(r[d]=n[d]);if(qM){s=qM(n);for(var o=0;o<s.length;o++)V4.call(n,s[o])&&(r[s[o]]=n[s[o]])}}return r};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb=YM,Zh=60103,ZM=60106;Yn.Fragment=60107;Yn.StrictMode=60108;Yn.Profiler=60114;var XM=60109,KM=60110,JM=60112;Yn.Suspense=60113;var QM=60115,ek=60116;if(typeof Symbol=="function"&&Symbol.for){var zs=Symbol.for;Zh=zs("react.element"),ZM=zs("react.portal"),Yn.Fragment=zs("react.fragment"),Yn.StrictMode=zs("react.strict_mode"),Yn.Profiler=zs("react.profiler"),XM=zs("react.provider"),KM=zs("react.context"),JM=zs("react.forward_ref"),Yn.Suspense=zs("react.suspense"),QM=zs("react.memo"),ek=zs("react.lazy")}var tk=typeof Symbol=="function"&&Symbol.iterator;function $4(e){return e===null||typeof e!="object"?null:(e=tk&&e[tk]||e["@@iterator"],typeof e=="function"?e:null)}function Up(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ik={};function Xh(e,t,n){this.props=e,this.context=t,this.refs=ik,this.updater=n||nk}Xh.prototype.isReactComponent={};Xh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Up(85));this.updater.enqueueSetState(this,e,t,"setState")};Xh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rk(){}rk.prototype=Xh.prototype;function ib(e,t,n){this.props=e,this.context=t,this.refs=ik,this.updater=n||nk}var rb=ib.prototype=new rk;rb.constructor=ib;nb(rb,Xh.prototype);rb.isPureReactComponent=!0;var ob={current:null},ok=Object.prototype.hasOwnProperty,sk={key:!0,ref:!0,__self:!0,__source:!0};function ak(e,t,n){var r,s={},u=null,d=null;if(t!=null)for(r in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(u=""+t.key),t)ok.call(t,r)&&!sk.hasOwnProperty(r)&&(s[r]=t[r]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var y=Array(o),w=0;w<o;w++)y[w]=arguments[w+2];s.children=y}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Zh,type:e,key:u,ref:d,props:s,_owner:ob.current}}function G4(e,t){return{$$typeof:Zh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Zh}function W4(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lk=/\/+/g;function ab(e,t){return typeof e=="object"&&e!==null&&e.key!=null?W4(""+e.key):t.toString(36)}function my(e,t,n,r,s){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(u){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Zh:case ZM:d=!0}}if(d)return d=e,s=s(d),e=r===""?"."+ab(d,0):r,Array.isArray(s)?(n="",e!=null&&(n=e.replace(lk,"$&/")+"/"),my(s,t,n,"",function(w){return w})):s!=null&&(sb(s)&&(s=G4(s,n+(!s.key||d&&d.key===s.key?"":(""+s.key).replace(lk,"$&/")+"/")+e)),t.push(s)),1;if(d=0,r=r===""?".":r+":",Array.isArray(e))for(var o=0;o<e.length;o++){u=e[o];var y=r+ab(u,o);d+=my(u,t,n,y,s)}else if(y=$4(e),typeof y=="function")for(e=y.call(e),o=0;!(u=e.next()).done;)u=u.value,y=r+ab(u,o++),d+=my(u,t,n,y,s);else if(u==="object")throw t=""+e,Error(Up(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return d}function gy(e,t,n){if(e==null)return e;var r=[],s=0;return my(e,r,"","",function(u){return t.call(n,u,s++)}),r}function H4(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var ck={current:null};function qa(){var e=ck.current;if(e===null)throw Error(Up(321));return e}var q4={ReactCurrentDispatcher:ck,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:ob,IsSomeRendererActing:{current:!1},assign:nb};Yn.Children={map:gy,forEach:function(e,t,n){gy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return gy(e,function(){t++}),t},toArray:function(e){return gy(e,function(t){return t})||[]},only:function(e){if(!sb(e))throw Error(Up(143));return e}};Yn.Component=Xh;Yn.PureComponent=ib;Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q4;Yn.cloneElement=function(e,t,n){if(e==null)throw Error(Up(267,e));var r=nb({},e.props),s=e.key,u=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,d=ob.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(y in t)ok.call(t,y)&&!sk.hasOwnProperty(y)&&(r[y]=t[y]===void 0&&o!==void 0?o[y]:t[y])}var y=arguments.length-2;if(y===1)r.children=n;else if(1<y){o=Array(y);for(var w=0;w<y;w++)o[w]=arguments[w+2];r.children=o}return{$$typeof:Zh,type:e.type,key:s,ref:u,props:r,_owner:d}};Yn.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:KM,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:XM,_context:e},e.Consumer=e};Yn.createElement=ak;Yn.createFactory=function(e){var t=ak.bind(null,e);return t.type=e,t};Yn.createRef=function(){return{current:null}};Yn.forwardRef=function(e){return{$$typeof:JM,render:e}};Yn.isValidElement=sb;Yn.lazy=function(e){return{$$typeof:ek,_payload:{_status:-1,_result:e},_init:H4}};Yn.memo=function(e,t){return{$$typeof:QM,type:e,compare:t===void 0?null:t}};Yn.useCallback=function(e,t){return qa().useCallback(e,t)};Yn.useContext=function(e,t){return qa().useContext(e,t)};Yn.useDebugValue=function(){};Yn.useEffect=function(e,t){return qa().useEffect(e,t)};Yn.useImperativeHandle=function(e,t,n){return qa().useImperativeHandle(e,t,n)};Yn.useLayoutEffect=function(e,t){return qa().useLayoutEffect(e,t)};Yn.useMemo=function(e,t){return qa().useMemo(e,t)};Yn.useReducer=function(e,t,n){return qa().useReducer(e,t,n)};Yn.useRef=function(e){return qa().useRef(e)};Yn.useState=function(e){return qa().useState(e)};Yn.version="17.0.2";ke.exports=Yn;var Zr=ke.exports,uk=Object.freeze(WM({__proto__:null,[Symbol.toStringTag]:"Module",default:Zr},[ke.exports])),$p={exports:{}},ls={},hk={exports:{}},dk={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,n,r,s;if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var d=Date,o=d.now();e.unstable_now=function(){return d.now()-o}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var y=null,w=null,M=function(){if(y!==null)try{var st=e.unstable_now();y(!0,st),y=null}catch(at){throw setTimeout(M,0),at}};t=function(st){y!==null?setTimeout(t,0,st):(y=st,setTimeout(M,0))},n=function(st,at){w=setTimeout(st,at)},r=function(){clearTimeout(w)},e.unstable_shouldYield=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var k=window.setTimeout,O=window.clearTimeout;if(typeof console!="undefined"){var $=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof $!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var j=!1,G=null,B=-1,U=5,Z=0;e.unstable_shouldYield=function(){return e.unstable_now()>=Z},s=function(){},e.unstable_forceFrameRate=function(st){0>st||125<st?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<st?Math.floor(1e3/st):5};var re=new MessageChannel,ie=re.port2;re.port1.onmessage=function(){if(G!==null){var st=e.unstable_now();Z=st+U;try{G(!0,st)?ie.postMessage(null):(j=!1,G=null)}catch(at){throw ie.postMessage(null),at}}else j=!1},t=function(st){G=st,j||(j=!0,ie.postMessage(null))},n=function(st,at){B=k(function(){st(e.unstable_now())},at)},r=function(){O(B),B=-1}}function de(st,at){var xt=st.length;st.push(at);e:for(;;){var Vt=xt-1>>>1,Gt=st[Vt];if(Gt!==void 0&&0<je(Gt,at))st[Vt]=at,st[xt]=Gt,xt=Vt;else break e}}function xe(st){return st=st[0],st===void 0?null:st}function Ce(st){var at=st[0];if(at!==void 0){var xt=st.pop();if(xt!==at){st[0]=xt;e:for(var Vt=0,Gt=st.length;Vt<Gt;){var hn=2*(Vt+1)-1,Tn=st[hn],ci=hn+1,Oi=st[ci];if(Tn!==void 0&&0>je(Tn,xt))Oi!==void 0&&0>je(Oi,Tn)?(st[Vt]=Oi,st[ci]=xt,Vt=ci):(st[Vt]=Tn,st[hn]=xt,Vt=hn);else if(Oi!==void 0&&0>je(Oi,xt))st[Vt]=Oi,st[ci]=xt,Vt=ci;else break e}}return at}return null}function je(st,at){var xt=st.sortIndex-at.sortIndex;return xt!==0?xt:st.id-at.id}var ze=[],pt=[],mt=1,ot=null,kt=3,Ne=!1,Ve=!1,tt=!1;function ct(st){for(var at=xe(pt);at!==null;){if(at.callback===null)Ce(pt);else if(at.startTime<=st)Ce(pt),at.sortIndex=at.expirationTime,de(ze,at);else break;at=xe(pt)}}function Ot(st){if(tt=!1,ct(st),!Ve)if(xe(ze)!==null)Ve=!0,t(Ut);else{var at=xe(pt);at!==null&&n(Ot,at.startTime-st)}}function Ut(st,at){Ve=!1,tt&&(tt=!1,r()),Ne=!0;var xt=kt;try{for(ct(at),ot=xe(ze);ot!==null&&(!(ot.expirationTime>at)||st&&!e.unstable_shouldYield());){var Vt=ot.callback;if(typeof Vt=="function"){ot.callback=null,kt=ot.priorityLevel;var Gt=Vt(ot.expirationTime<=at);at=e.unstable_now(),typeof Gt=="function"?ot.callback=Gt:ot===xe(ze)&&Ce(ze),ct(at)}else Ce(ze);ot=xe(ze)}if(ot!==null)var hn=!0;else{var Tn=xe(pt);Tn!==null&&n(Ot,Tn.startTime-at),hn=!1}return hn}finally{ot=null,kt=xt,Ne=!1}}var un=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(st){st.callback=null},e.unstable_continueExecution=function(){Ve||Ne||(Ve=!0,t(Ut))},e.unstable_getCurrentPriorityLevel=function(){return kt},e.unstable_getFirstCallbackNode=function(){return xe(ze)},e.unstable_next=function(st){switch(kt){case 1:case 2:case 3:var at=3;break;default:at=kt}var xt=kt;kt=at;try{return st()}finally{kt=xt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=un,e.unstable_runWithPriority=function(st,at){switch(st){case 1:case 2:case 3:case 4:case 5:break;default:st=3}var xt=kt;kt=st;try{return at()}finally{kt=xt}},e.unstable_scheduleCallback=function(st,at,xt){var Vt=e.unstable_now();switch(typeof xt=="object"&&xt!==null?(xt=xt.delay,xt=typeof xt=="number"&&0<xt?Vt+xt:Vt):xt=Vt,st){case 1:var Gt=-1;break;case 2:Gt=250;break;case 5:Gt=1073741823;break;case 4:Gt=1e4;break;default:Gt=5e3}return Gt=xt+Gt,st={id:mt++,callback:at,priorityLevel:st,startTime:xt,expirationTime:Gt,sortIndex:-1},xt>Vt?(st.sortIndex=xt,de(pt,st),xe(ze)===null&&st===xe(pt)&&(tt?r():tt=!0,n(Ot,xt-Vt))):(st.sortIndex=Gt,de(ze,st),Ve||Ne||(Ve=!0,t(Ut))),st},e.unstable_wrapCallback=function(st){var at=kt;return function(){var xt=kt;kt=at;try{return st.apply(this,arguments)}finally{kt=xt}}}})(dk);hk.exports=dk;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y=ke.exports,Gi=YM,kr=hk.exports;function It(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!_y)throw Error(It(227));var fk=new Set,Gp={};function du(e,t){Kh(e,t),Kh(e+"Capture",t)}function Kh(e,t){for(Gp[e]=t,e=0;e<t.length;e++)fk.add(t[e])}var Ya=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Y4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pk=Object.prototype.hasOwnProperty,mk={},gk={};function Z4(e){return pk.call(gk,e)?!0:pk.call(mk,e)?!1:Y4.test(e)?gk[e]=!0:(mk[e]=!0,!1)}function X4(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function K4(e,t,n,r){if(t===null||typeof t=="undefined"||X4(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function go(e,t,n,r,s,u,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=d}var Fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fr[e]=new go(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fr[t]=new go(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fr[e]=new go(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fr[e]=new go(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fr[e]=new go(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fr[e]=new go(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fr[e]=new go(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fr[e]=new go(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fr[e]=new go(e,5,!1,e.toLowerCase(),null,!1,!1)});var lb=/[\-:]([a-z])/g;function cb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(lb,cb);Fr[t]=new go(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(lb,cb);Fr[t]=new go(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(lb,cb);Fr[t]=new go(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fr[e]=new go(e,1,!1,e.toLowerCase(),null,!1,!1)});Fr.xlinkHref=new go("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fr[e]=new go(e,1,!1,e.toLowerCase(),null,!0,!0)});function ub(e,t,n,r){var s=Fr.hasOwnProperty(t)?Fr[t]:null,u=s!==null?s.type===0:r?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");u||(K4(t,n,s,r)&&(n=null),r||s===null?Z4(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var fu=_y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wp=60103,pu=60106,Wl=60107,hb=60108,Hp=60114,db=60109,fb=60110,yy=60112,qp=60113,vy=60120,xy=60115,pb=60116,mb=60121,gb=60128,_k=60129,_b=60130,yb=60131;if(typeof Symbol=="function"&&Symbol.for){var Ar=Symbol.for;Wp=Ar("react.element"),pu=Ar("react.portal"),Wl=Ar("react.fragment"),hb=Ar("react.strict_mode"),Hp=Ar("react.profiler"),db=Ar("react.provider"),fb=Ar("react.context"),yy=Ar("react.forward_ref"),qp=Ar("react.suspense"),vy=Ar("react.suspense_list"),xy=Ar("react.memo"),pb=Ar("react.lazy"),mb=Ar("react.block"),Ar("react.scope"),gb=Ar("react.opaque.id"),_k=Ar("react.debug_trace_mode"),_b=Ar("react.offscreen"),yb=Ar("react.legacy_hidden")}var yk=typeof Symbol=="function"&&Symbol.iterator;function Yp(e){return e===null||typeof e!="object"?null:(e=yk&&e[yk]||e["@@iterator"],typeof e=="function"?e:null)}var vb;function Zp(e){if(vb===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);vb=t&&t[1]||""}return`
`+vb+e}var xb=!1;function by(e,t){if(!e||xb)return"";xb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var r=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){r=y}e.call(t.prototype)}else{try{throw Error()}catch(y){r=y}e()}}catch(y){if(y&&r&&typeof y.stack=="string"){for(var s=y.stack.split(`
`),u=r.stack.split(`
`),d=s.length-1,o=u.length-1;1<=d&&0<=o&&s[d]!==u[o];)o--;for(;1<=d&&0<=o;d--,o--)if(s[d]!==u[o]){if(d!==1||o!==1)do if(d--,o--,0>o||s[d]!==u[o])return`
`+s[d].replace(" at new "," at ");while(1<=d&&0<=o);break}}}finally{xb=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zp(e):""}function J4(e){switch(e.tag){case 5:return Zp(e.type);case 16:return Zp("Lazy");case 13:return Zp("Suspense");case 19:return Zp("SuspenseList");case 0:case 2:case 15:return e=by(e.type,!1),e;case 11:return e=by(e.type.render,!1),e;case 22:return e=by(e.type._render,!1),e;case 1:return e=by(e.type,!0),e;default:return""}}function Jh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wl:return"Fragment";case pu:return"Portal";case Hp:return"Profiler";case hb:return"StrictMode";case qp:return"Suspense";case vy:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case fb:return(e.displayName||"Context")+".Consumer";case db:return(e._context.displayName||"Context")+".Provider";case yy:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case xy:return Jh(e.type);case mb:return Jh(e._render);case pb:t=e._payload,e=e._init;try{return Jh(e(t))}catch{}}return null}function Hl(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function vk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Q4(e){var t=vk(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){r=""+d,u.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(d){r=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wy(e){e._valueTracker||(e._valueTracker=Q4(e))}function xk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vk(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ey(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function bb(e,t){var n=t.checked;return Gi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function bk(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Hl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wk(e,t){t=t.checked,t!=null&&ub(e,"checked",t,!1)}function wb(e,t){wk(e,t);var n=Hl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Eb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Eb(e,t.type,Hl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ek(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Eb(e,t,n){(t!=="number"||Ey(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function eB(e){var t="";return _y.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function Sb(e,t){return e=Gi({children:void 0},t),(t=eB(t.children))&&(e.children=t),e}function Qh(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Hl(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Tb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(It(91));return Gi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sk(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(It(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(It(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Hl(n)}}function Tk(e,t){var n=Hl(t.value),r=Hl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ck(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var Cb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Mk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Mk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Sy,kk=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!==Cb.svg||"innerHTML"in e)e.innerHTML=t;else{for(Sy=Sy||document.createElement("div"),Sy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Sy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tB=["Webkit","ms","Moz","O"];Object.keys(Kp).forEach(function(e){tB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kp[t]=Kp[e]})});function Ak(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kp.hasOwnProperty(e)&&Kp[e]?(""+t).trim():t+"px"}function Dk(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ak(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var nB=Gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kb(e,t){if(t){if(nB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(It(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(It(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(It(61))}if(t.style!=null&&typeof t.style!="object")throw Error(It(62))}}function Ab(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Db(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ib=null,ed=null,td=null;function Ik(e){if(e=gm(e)){if(typeof Ib!="function")throw Error(It(280));var t=e.stateNode;t&&(t=Uy(t),Ib(e.stateNode,e.type,t))}}function Pk(e){ed?td?td.push(e):td=[e]:ed=e}function Ok(){if(ed){var e=ed,t=td;if(td=ed=null,Ik(e),t)for(e=0;e<t.length;e++)Ik(t[e])}}function Pb(e,t){return e(t)}function Lk(e,t,n,r,s){return e(t,n,r,s)}function Ob(){}var zk=Pb,mu=!1,Lb=!1;function zb(){(ed!==null||td!==null)&&(Ob(),Ok())}function iB(e,t,n){if(Lb)return e(t,n);Lb=!0;try{return zk(e,t,n)}finally{Lb=!1,zb()}}function Jp(e,t){var n=e.stateNode;if(n===null)return null;var r=Uy(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(It(231,t,typeof n));return n}var Rb=!1;if(Ya)try{var Qp={};Object.defineProperty(Qp,"passive",{get:function(){Rb=!0}}),window.addEventListener("test",Qp,Qp),window.removeEventListener("test",Qp,Qp)}catch{Rb=!1}function rB(e,t,n,r,s,u,d,o,y){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(M){this.onError(M)}}var em=!1,Ty=null,Cy=!1,Fb=null,oB={onError:function(e){em=!0,Ty=e}};function sB(e,t,n,r,s,u,d,o,y){em=!1,Ty=null,rB.apply(oB,arguments)}function aB(e,t,n,r,s,u,d,o,y){if(sB.apply(this,arguments),em){if(em){var w=Ty;em=!1,Ty=null}else throw Error(It(198));Cy||(Cy=!0,Fb=w)}}function gu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!=0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Rk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fk(e){if(gu(e)!==e)throw Error(It(188))}function lB(e){var t=e.alternate;if(!t){if(t=gu(e),t===null)throw Error(It(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var u=s.alternate;if(u===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===u.child){for(u=s.child;u;){if(u===n)return Fk(s),e;if(u===r)return Fk(s),t;u=u.sibling}throw Error(It(188))}if(n.return!==r.return)n=s,r=u;else{for(var d=!1,o=s.child;o;){if(o===n){d=!0,n=s,r=u;break}if(o===r){d=!0,r=s,n=u;break}o=o.sibling}if(!d){for(o=u.child;o;){if(o===n){d=!0,n=u,r=s;break}if(o===r){d=!0,r=u,n=s;break}o=o.sibling}if(!d)throw Error(It(189))}}if(n.alternate!==r)throw Error(It(190))}if(n.tag!==3)throw Error(It(188));return n.stateNode.current===n?e:t}function Bk(e){if(e=lB(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Nk(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var Vk,Bb,jk,Uk,Nb=!1,ca=[],ql=null,Yl=null,Zl=null,tm=new Map,nm=new Map,im=[],$k="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vb(e,t,n,r,s){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:s,targetContainers:[r]}}function Gk(e,t){switch(e){case"focusin":case"focusout":ql=null;break;case"dragenter":case"dragleave":Yl=null;break;case"mouseover":case"mouseout":Zl=null;break;case"pointerover":case"pointerout":tm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nm.delete(t.pointerId)}}function rm(e,t,n,r,s,u){return e===null||e.nativeEvent!==u?(e=Vb(t,n,r,s,u),t!==null&&(t=gm(t),t!==null&&Bb(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cB(e,t,n,r,s){switch(t){case"focusin":return ql=rm(ql,e,t,n,r,s),!0;case"dragenter":return Yl=rm(Yl,e,t,n,r,s),!0;case"mouseover":return Zl=rm(Zl,e,t,n,r,s),!0;case"pointerover":var u=s.pointerId;return tm.set(u,rm(tm.get(u)||null,e,t,n,r,s)),!0;case"gotpointercapture":return u=s.pointerId,nm.set(u,rm(nm.get(u)||null,e,t,n,r,s)),!0}return!1}function uB(e){var t=_u(e.target);if(t!==null){var n=gu(t);if(n!==null){if(t=n.tag,t===13){if(t=Rk(n),t!==null){e.blockedOn=t,Uk(e.lanePriority,function(){kr.unstable_runWithPriority(e.priority,function(){jk(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function My(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Hb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=gm(n),t!==null&&Bb(t),e.blockedOn=n,!1;t.shift()}return!0}function Wk(e,t,n){My(e)&&n.delete(t)}function hB(){for(Nb=!1;0<ca.length;){var e=ca[0];if(e.blockedOn!==null){e=gm(e.blockedOn),e!==null&&Vk(e);break}for(var t=e.targetContainers;0<t.length;){var n=Hb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&ca.shift()}ql!==null&&My(ql)&&(ql=null),Yl!==null&&My(Yl)&&(Yl=null),Zl!==null&&My(Zl)&&(Zl=null),tm.forEach(Wk),nm.forEach(Wk)}function om(e,t){e.blockedOn===t&&(e.blockedOn=null,Nb||(Nb=!0,kr.unstable_scheduleCallback(kr.unstable_NormalPriority,hB)))}function Hk(e){function t(s){return om(s,e)}if(0<ca.length){om(ca[0],e);for(var n=1;n<ca.length;n++){var r=ca[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ql!==null&&om(ql,e),Yl!==null&&om(Yl,e),Zl!==null&&om(Zl,e),tm.forEach(t),nm.forEach(t),n=0;n<im.length;n++)r=im[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<im.length&&(n=im[0],n.blockedOn===null);)uB(n),n.blockedOn===null&&im.shift()}function ky(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nd={animationend:ky("Animation","AnimationEnd"),animationiteration:ky("Animation","AnimationIteration"),animationstart:ky("Animation","AnimationStart"),transitionend:ky("Transition","TransitionEnd")},jb={},qk={};Ya&&(qk=document.createElement("div").style,"AnimationEvent"in window||(delete nd.animationend.animation,delete nd.animationiteration.animation,delete nd.animationstart.animation),"TransitionEvent"in window||delete nd.transitionend.transition);function Ay(e){if(jb[e])return jb[e];if(!nd[e])return e;var t=nd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qk)return jb[e]=t[n];return e}var Yk=Ay("animationend"),Zk=Ay("animationiteration"),Xk=Ay("animationstart"),Kk=Ay("transitionend"),Jk=new Map,Ub=new Map,dB=["abort","abort",Yk,"animationEnd",Zk,"animationIteration",Xk,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Kk,"transitionEnd","waiting","waiting"];function $b(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],s=e[n+1];s="on"+(s[0].toUpperCase()+s.slice(1)),Ub.set(r,t),Jk.set(r,s),du(s,[r])}}var fB=kr.unstable_now;fB();var Di=8;function id(e){if((1&e)!=0)return Di=15,1;if((2&e)!=0)return Di=14,2;if((4&e)!=0)return Di=13,4;var t=24&e;return t!==0?(Di=12,t):(e&32)!=0?(Di=11,32):(t=192&e,t!==0?(Di=10,t):(e&256)!=0?(Di=9,256):(t=3584&e,t!==0?(Di=8,t):(e&4096)!=0?(Di=7,4096):(t=4186112&e,t!==0?(Di=6,t):(t=62914560&e,t!==0?(Di=5,t):e&67108864?(Di=4,67108864):(e&134217728)!=0?(Di=3,134217728):(t=805306368&e,t!==0?(Di=2,t):(1073741824&e)!=0?(Di=1,1073741824):(Di=8,e))))))}function pB(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function mB(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(It(358,e))}}function sm(e,t){var n=e.pendingLanes;if(n===0)return Di=0;var r=0,s=0,u=e.expiredLanes,d=e.suspendedLanes,o=e.pingedLanes;if(u!==0)r=u,s=Di=15;else if(u=n&134217727,u!==0){var y=u&~d;y!==0?(r=id(y),s=Di):(o&=u,o!==0&&(r=id(o),s=Di))}else u=n&~d,u!==0?(r=id(u),s=Di):o!==0&&(r=id(o),s=Di);if(r===0)return 0;if(r=31-Xl(r),r=n&((0>r?0:1<<r)<<1)-1,t!==0&&t!==r&&(t&d)==0){if(id(t),s<=Di)return t;Di=s}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xl(t),s=1<<n,r|=e[n],t&=~s;return r}function Qk(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dy(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=rd(24&~t),e===0?Dy(10,t):e;case 10:return e=rd(192&~t),e===0?Dy(8,t):e;case 8:return e=rd(3584&~t),e===0&&(e=rd(4186112&~t),e===0&&(e=512)),e;case 2:return t=rd(805306368&~t),t===0&&(t=268435456),t}throw Error(It(358,e))}function rd(e){return e&-e}function Gb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Iy(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,e=e.eventTimes,t=31-Xl(t),e[t]=n}var Xl=Math.clz32?Math.clz32:yB,gB=Math.log,_B=Math.LN2;function yB(e){return e===0?32:31-(gB(e)/_B|0)|0}var vB=kr.unstable_UserBlockingPriority,xB=kr.unstable_runWithPriority,Py=!0;function bB(e,t,n,r){mu||Ob();var s=Wb,u=mu;mu=!0;try{Lk(s,e,t,n,r)}finally{(mu=u)||zb()}}function wB(e,t,n,r){xB(vB,Wb.bind(null,e,t,n,r))}function Wb(e,t,n,r){if(Py){var s;if((s=(t&4)==0)&&0<ca.length&&-1<$k.indexOf(e))e=Vb(null,e,t,n,r),ca.push(e);else{var u=Hb(e,t,n,r);if(u===null)s&&Gk(e,r);else{if(s){if(-1<$k.indexOf(e)){e=Vb(u,e,t,n,r),ca.push(e);return}if(cB(u,e,t,n,r))return;Gk(e,r)}AA(e,t,r,null,n)}}}}function Hb(e,t,n,r){var s=Db(r);if(s=_u(s),s!==null){var u=gu(s);if(u===null)s=null;else{var d=u.tag;if(d===13){if(s=Rk(u),s!==null)return s;s=null}else if(d===3){if(u.stateNode.hydrate)return u.tag===3?u.stateNode.containerInfo:null;s=null}else u!==s&&(s=null)}}return AA(e,t,r,s,n),null}var Kl=null,qb=null,Oy=null;function eA(){if(Oy)return Oy;var e,t=qb,n=t.length,r,s="value"in Kl?Kl.value:Kl.textContent,u=s.length;for(e=0;e<n&&t[e]===s[e];e++);var d=n-e;for(r=1;r<=d&&t[n-r]===s[u-r];r++);return Oy=s.slice(e,1<r?1-r:void 0)}function Ly(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zy(){return!0}function tA(){return!1}function Ho(e){function t(n,r,s,u,d){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?zy:tA,this.isPropagationStopped=tA,this}return Gi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zy)},persist:function(){},isPersistent:zy}),t}var od={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yb=Ho(od),am=Gi({},od,{view:0,detail:0}),EB=Ho(am),Zb,Xb,lm,Ry=Gi({},am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lm&&(lm&&e.type==="mousemove"?(Zb=e.screenX-lm.screenX,Xb=e.screenY-lm.screenY):Xb=Zb=0,lm=e),Zb)},movementY:function(e){return"movementY"in e?e.movementY:Xb}}),nA=Ho(Ry),SB=Gi({},Ry,{dataTransfer:0}),TB=Ho(SB),CB=Gi({},am,{relatedTarget:0}),Kb=Ho(CB),MB=Gi({},od,{animationName:0,elapsedTime:0,pseudoElement:0}),kB=Ho(MB),AB=Gi({},od,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),DB=Ho(AB),IB=Gi({},od,{data:0}),iA=Ho(IB),PB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zB(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=LB[e])?!!t[e]:!1}function Jb(){return zB}var RB=Gi({},am,{key:function(e){if(e.key){var t=PB[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ly(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?OB[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jb,charCode:function(e){return e.type==="keypress"?Ly(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ly(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FB=Ho(RB),BB=Gi({},Ry,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rA=Ho(BB),NB=Gi({},am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jb}),VB=Ho(NB),jB=Gi({},od,{propertyName:0,elapsedTime:0,pseudoElement:0}),UB=Ho(jB),$B=Gi({},Ry,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GB=Ho($B),WB=[9,13,27,32],Qb=Ya&&"CompositionEvent"in window,cm=null;Ya&&"documentMode"in document&&(cm=document.documentMode);var HB=Ya&&"TextEvent"in window&&!cm,oA=Ya&&(!Qb||cm&&8<cm&&11>=cm),sA=String.fromCharCode(32),aA=!1;function lA(e,t){switch(e){case"keyup":return WB.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var sd=!1;function qB(e,t){switch(e){case"compositionend":return cA(t);case"keypress":return t.which!==32?null:(aA=!0,sA);case"textInput":return e=t.data,e===sA&&aA?null:e;default:return null}}function YB(e,t){if(sd)return e==="compositionend"||!Qb&&lA(e,t)?(e=eA(),Oy=qb=Kl=null,sd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oA&&t.locale!=="ko"?null:t.data;default:return null}}var ZB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ZB[e.type]:t==="textarea"}function hA(e,t,n,r){Pk(r),t=By(t,"onChange"),0<t.length&&(n=new Yb("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var um=null,hm=null;function XB(e){SA(e,0)}function Fy(e){var t=hd(e);if(xk(t))return e}function KB(e,t){if(e==="change")return t}var dA=!1;if(Ya){var ew;if(Ya){var tw="oninput"in document;if(!tw){var fA=document.createElement("div");fA.setAttribute("oninput","return;"),tw=typeof fA.oninput=="function"}ew=tw}else ew=!1;dA=ew&&(!document.documentMode||9<document.documentMode)}function pA(){um&&(um.detachEvent("onpropertychange",mA),hm=um=null)}function mA(e){if(e.propertyName==="value"&&Fy(hm)){var t=[];if(hA(t,hm,e,Db(e)),e=XB,mu)e(t);else{mu=!0;try{Pb(e,t)}finally{mu=!1,zb()}}}}function JB(e,t,n){e==="focusin"?(pA(),um=t,hm=n,um.attachEvent("onpropertychange",mA)):e==="focusout"&&pA()}function QB(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fy(hm)}function e6(e,t){if(e==="click")return Fy(t)}function t6(e,t){if(e==="input"||e==="change")return Fy(t)}function n6(e,t){return e===t&&(e!==0||1/e==1/t)||e!==e&&t!==t}var cs=typeof Object.is=="function"?Object.is:n6,i6=Object.prototype.hasOwnProperty;function dm(e,t){if(cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!i6.call(t,n[r])||!cs(e[n[r]],t[n[r]]))return!1;return!0}function gA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _A(e,t){var n=gA(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gA(n)}}function yA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?yA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function vA(){for(var e=window,t=Ey();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ey(e.document)}return t}function nw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var r6=Ya&&"documentMode"in document&&11>=document.documentMode,ad=null,iw=null,fm=null,rw=!1;function xA(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rw||ad==null||ad!==Ey(r)||(r=ad,"selectionStart"in r&&nw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fm&&dm(fm,r)||(fm=r,r=By(iw,"onSelect"),0<r.length&&(t=new Yb("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ad)))}$b("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);$b("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);$b(dB,2);for(var bA="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ow=0;ow<bA.length;ow++)Ub.set(bA[ow],0);Kh("onMouseEnter",["mouseout","mouseover"]);Kh("onMouseLeave",["mouseout","mouseover"]);Kh("onPointerEnter",["pointerout","pointerover"]);Kh("onPointerLeave",["pointerout","pointerover"]);du("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));du("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));du("onBeforeInput",["compositionend","keypress","textInput","paste"]);du("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));du("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));du("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wA=new Set("cancel close invalid load scroll toggle".split(" ").concat(pm));function EA(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,aB(r,t,void 0,e),e.currentTarget=null}function SA(e,t){t=(t&4)!=0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var u=void 0;if(t)for(var d=r.length-1;0<=d;d--){var o=r[d],y=o.instance,w=o.currentTarget;if(o=o.listener,y!==u&&s.isPropagationStopped())break e;EA(s,o,w),u=y}else for(d=0;d<r.length;d++){if(o=r[d],y=o.instance,w=o.currentTarget,o=o.listener,y!==u&&s.isPropagationStopped())break e;EA(s,o,w),u=y}}}if(Cy)throw e=Fb,Cy=!1,Fb=null,e}function Ri(e,t){var n=zA(t),r=e+"__bubble";n.has(r)||(kA(t,e,2,!1),n.add(r))}var TA="_reactListening"+Math.random().toString(36).slice(2);function CA(e){e[TA]||(e[TA]=!0,fk.forEach(function(t){wA.has(t)||MA(t,!1,e,null),MA(t,!0,e,null)}))}function MA(e,t,n,r){var s=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,u=n;if(e==="selectionchange"&&n.nodeType!==9&&(u=n.ownerDocument),r!==null&&!t&&wA.has(e)){if(e!=="scroll")return;s|=2,u=r}var d=zA(u),o=e+"__"+(t?"capture":"bubble");d.has(o)||(t&&(s|=4),kA(u,e,s,t),d.add(o))}function kA(e,t,n,r){var s=Ub.get(t);switch(s===void 0?2:s){case 0:s=bB;break;case 1:s=wB;break;default:s=Wb}n=s.bind(null,t,n,e),s=void 0,!Rb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function AA(e,t,n,r,s){var u=r;if((t&1)==0&&(t&2)==0&&r!==null)e:for(;;){if(r===null)return;var d=r.tag;if(d===3||d===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(d===4)for(d=r.return;d!==null;){var y=d.tag;if((y===3||y===4)&&(y=d.stateNode.containerInfo,y===s||y.nodeType===8&&y.parentNode===s))return;d=d.return}for(;o!==null;){if(d=_u(o),d===null)return;if(y=d.tag,y===5||y===6){r=u=d;continue e}o=o.parentNode}}r=r.return}iB(function(){var w=u,M=Db(n),k=[];e:{var O=Jk.get(e);if(O!==void 0){var $=Yb,j=e;switch(e){case"keypress":if(Ly(n)===0)break e;case"keydown":case"keyup":$=FB;break;case"focusin":j="focus",$=Kb;break;case"focusout":j="blur",$=Kb;break;case"beforeblur":case"afterblur":$=Kb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=nA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=TB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=VB;break;case Yk:case Zk:case Xk:$=kB;break;case Kk:$=UB;break;case"scroll":$=EB;break;case"wheel":$=GB;break;case"copy":case"cut":case"paste":$=DB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=rA}var G=(t&4)!=0,B=!G&&e==="scroll",U=G?O!==null?O+"Capture":null:O;G=[];for(var Z=w,re;Z!==null;){re=Z;var ie=re.stateNode;if(re.tag===5&&ie!==null&&(re=ie,U!==null&&(ie=Jp(Z,U),ie!=null&&G.push(mm(Z,ie,re)))),B)break;Z=Z.return}0<G.length&&(O=new $(O,j,null,n,M),k.push({event:O,listeners:G}))}}if((t&7)==0){e:{if(O=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",O&&(t&16)==0&&(j=n.relatedTarget||n.fromElement)&&(_u(j)||j[ud]))break e;if(($||O)&&(O=M.window===M?M:(O=M.ownerDocument)?O.defaultView||O.parentWindow:window,$?(j=n.relatedTarget||n.toElement,$=w,j=j?_u(j):null,j!==null&&(B=gu(j),j!==B||j.tag!==5&&j.tag!==6)&&(j=null)):($=null,j=w),$!==j)){if(G=nA,ie="onMouseLeave",U="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(G=rA,ie="onPointerLeave",U="onPointerEnter",Z="pointer"),B=$==null?O:hd($),re=j==null?O:hd(j),O=new G(ie,Z+"leave",$,n,M),O.target=B,O.relatedTarget=re,ie=null,_u(M)===w&&(G=new G(U,Z+"enter",j,n,M),G.target=re,G.relatedTarget=B,ie=G),B=ie,$&&j)t:{for(G=$,U=j,Z=0,re=G;re;re=ld(re))Z++;for(re=0,ie=U;ie;ie=ld(ie))re++;for(;0<Z-re;)G=ld(G),Z--;for(;0<re-Z;)U=ld(U),re--;for(;Z--;){if(G===U||U!==null&&G===U.alternate)break t;G=ld(G),U=ld(U)}G=null}else G=null;$!==null&&DA(k,O,$,G,!1),j!==null&&B!==null&&DA(k,B,j,G,!0)}}e:{if(O=w?hd(w):window,$=O.nodeName&&O.nodeName.toLowerCase(),$==="select"||$==="input"&&O.type==="file")var de=KB;else if(uA(O))if(dA)de=t6;else{de=QB;var xe=JB}else($=O.nodeName)&&$.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(de=e6);if(de&&(de=de(e,w))){hA(k,de,n,M);break e}xe&&xe(e,O,w),e==="focusout"&&(xe=O._wrapperState)&&xe.controlled&&O.type==="number"&&Eb(O,"number",O.value)}switch(xe=w?hd(w):window,e){case"focusin":(uA(xe)||xe.contentEditable==="true")&&(ad=xe,iw=w,fm=null);break;case"focusout":fm=iw=ad=null;break;case"mousedown":rw=!0;break;case"contextmenu":case"mouseup":case"dragend":rw=!1,xA(k,n,M);break;case"selectionchange":if(r6)break;case"keydown":case"keyup":xA(k,n,M)}var Ce;if(Qb)e:{switch(e){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else sd?lA(e,n)&&(je="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(je="onCompositionStart");je&&(oA&&n.locale!=="ko"&&(sd||je!=="onCompositionStart"?je==="onCompositionEnd"&&sd&&(Ce=eA()):(Kl=M,qb="value"in Kl?Kl.value:Kl.textContent,sd=!0)),xe=By(w,je),0<xe.length&&(je=new iA(je,e,null,n,M),k.push({event:je,listeners:xe}),Ce?je.data=Ce:(Ce=cA(n),Ce!==null&&(je.data=Ce)))),(Ce=HB?qB(e,n):YB(e,n))&&(w=By(w,"onBeforeInput"),0<w.length&&(M=new iA("onBeforeInput","beforeinput",null,n,M),k.push({event:M,listeners:w}),M.data=Ce))}SA(k,t)})}function mm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function By(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,u=s.stateNode;s.tag===5&&u!==null&&(s=u,u=Jp(e,n),u!=null&&r.unshift(mm(e,u,s)),u=Jp(e,t),u!=null&&r.push(mm(e,u,s))),e=e.return}return r}function ld(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function DA(e,t,n,r,s){for(var u=t._reactName,d=[];n!==null&&n!==r;){var o=n,y=o.alternate,w=o.stateNode;if(y!==null&&y===r)break;o.tag===5&&w!==null&&(o=w,s?(y=Jp(n,u),y!=null&&d.unshift(mm(n,y,o))):s||(y=Jp(n,u),y!=null&&d.push(mm(n,y,o)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}function Ny(){}var sw=null,aw=null;function IA(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function lw(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var PA=typeof setTimeout=="function"?setTimeout:void 0,o6=typeof clearTimeout=="function"?clearTimeout:void 0;function cw(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function cd(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function OA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var uw=0;function s6(e){return{$$typeof:gb,toString:e,valueOf:e}}var Vy=Math.random().toString(36).slice(2),Jl="__reactFiber$"+Vy,jy="__reactProps$"+Vy,ud="__reactContainer$"+Vy,LA="__reactEvents$"+Vy;function _u(e){var t=e[Jl];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ud]||n[Jl]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=OA(e);e!==null;){if(n=e[Jl])return n;e=OA(e)}return t}e=n,n=e.parentNode}return null}function gm(e){return e=e[Jl]||e[ud],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function hd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(It(33))}function Uy(e){return e[jy]||null}function zA(e){var t=e[LA];return t===void 0&&(t=e[LA]=new Set),t}var hw=[],dd=-1;function Ql(e){return{current:e}}function Fi(e){0>dd||(e.current=hw[dd],hw[dd]=null,dd--)}function Ki(e,t){dd++,hw[dd]=e.current,e.current=t}var ec={},Xr=Ql(ec),Ao=Ql(!1),yu=ec;function fd(e,t){var n=e.type.contextTypes;if(!n)return ec;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},u;for(u in n)s[u]=t[u];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Do(e){return e=e.childContextTypes,e!=null}function $y(){Fi(Ao),Fi(Xr)}function RA(e,t,n){if(Xr.current!==ec)throw Error(It(168));Ki(Xr,t),Ki(Ao,n)}function FA(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(It(108,Jh(t)||"Unknown",s));return Gi({},n,r)}function Gy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ec,yu=Xr.current,Ki(Xr,e),Ki(Ao,Ao.current),!0}function BA(e,t,n){var r=e.stateNode;if(!r)throw Error(It(169));n?(e=FA(e,t,yu),r.__reactInternalMemoizedMergedChildContext=e,Fi(Ao),Fi(Xr),Ki(Xr,e)):Fi(Ao),Ki(Ao,n)}var dw=null,vu=null,a6=kr.unstable_runWithPriority,fw=kr.unstable_scheduleCallback,pw=kr.unstable_cancelCallback,l6=kr.unstable_shouldYield,NA=kr.unstable_requestPaint,mw=kr.unstable_now,c6=kr.unstable_getCurrentPriorityLevel,Wy=kr.unstable_ImmediatePriority,VA=kr.unstable_UserBlockingPriority,jA=kr.unstable_NormalPriority,UA=kr.unstable_LowPriority,$A=kr.unstable_IdlePriority,gw={},u6=NA!==void 0?NA:function(){},Za=null,Hy=null,_w=!1,GA=mw(),Kr=1e4>GA?mw:function(){return mw()-GA};function pd(){switch(c6()){case Wy:return 99;case VA:return 98;case jA:return 97;case UA:return 96;case $A:return 95;default:throw Error(It(332))}}function WA(e){switch(e){case 99:return Wy;case 98:return VA;case 97:return jA;case 96:return UA;case 95:return $A;default:throw Error(It(332))}}function xu(e,t){return e=WA(e),a6(e,t)}function _m(e,t,n){return e=WA(e),fw(e,t,n)}function ua(){if(Hy!==null){var e=Hy;Hy=null,pw(e)}HA()}function HA(){if(!_w&&Za!==null){_w=!0;var e=0;try{var t=Za;xu(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),Za=null}catch(n){throw Za!==null&&(Za=Za.slice(e+1)),fw(Wy,ua),n}finally{_w=!1}}}var h6=fu.ReactCurrentBatchConfig;function Rs(e,t){if(e&&e.defaultProps){t=Gi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var qy=Ql(null),Yy=null,md=null,Zy=null;function yw(){Zy=md=Yy=null}function vw(e){var t=qy.current;Fi(qy),e.type._context._currentValue=t}function qA(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function gd(e,t){Yy=e,Zy=md=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!=0&&(Fs=!0),e.firstContext=null)}function us(e,t){if(Zy!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Zy=e,t=1073741823),t={context:e,observedBits:t,next:null},md===null){if(Yy===null)throw Error(It(308));md=t,Yy.dependencies={lanes:0,firstContext:t,responders:null}}else md=md.next=t;return e._currentValue}var tc=!1;function xw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function YA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function nc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ic(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ZA(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?s=u=d:u=u.next=d,n=n.next}while(n!==null);u===null?s=u=t:u=u.next=t}else s=u=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:u,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ym(e,t,n,r){var s=e.updateQueue;tc=!1;var u=s.firstBaseUpdate,d=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var y=o,w=y.next;y.next=null,d===null?u=w:d.next=w,d=y;var M=e.alternate;if(M!==null){M=M.updateQueue;var k=M.lastBaseUpdate;k!==d&&(k===null?M.firstBaseUpdate=w:k.next=w,M.lastBaseUpdate=y)}}if(u!==null){k=s.baseState,d=0,M=w=y=null;do{o=u.lane;var O=u.eventTime;if((r&o)===o){M!==null&&(M=M.next={eventTime:O,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var $=e,j=u;switch(o=t,O=n,j.tag){case 1:if($=j.payload,typeof $=="function"){k=$.call(O,k,o);break e}k=$;break e;case 3:$.flags=$.flags&-4097|64;case 0:if($=j.payload,o=typeof $=="function"?$.call(O,k,o):$,o==null)break e;k=Gi({},k,o);break e;case 2:tc=!0}}u.callback!==null&&(e.flags|=32,o=s.effects,o===null?s.effects=[u]:o.push(u))}else O={eventTime:O,lane:o,tag:u.tag,payload:u.payload,callback:u.callback,next:null},M===null?(w=M=O,y=k):M=M.next=O,d|=o;if(u=u.next,u===null){if(o=s.shared.pending,o===null)break;u=o.next,o.next=null,s.lastBaseUpdate=o,s.shared.pending=null}}while(1);M===null&&(y=k),s.baseState=y,s.firstBaseUpdate=w,s.lastBaseUpdate=M,Dm|=d,e.lanes=d,e.memoizedState=k}}function XA(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(It(191,s));s.call(r)}}}var KA=new _y.Component().refs;function Xy(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ky={isMounted:function(e){return(e=e._reactInternals)?gu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qo(),s=sc(e),u=nc(r,s);u.payload=t,n!=null&&(u.callback=n),ic(e,u),ac(e,s,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qo(),s=sc(e),u=nc(r,s);u.tag=1,u.payload=t,n!=null&&(u.callback=n),ic(e,u),ac(e,s,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qo(),r=sc(e),s=nc(n,r);s.tag=2,t!=null&&(s.callback=t),ic(e,s),ac(e,r,n)}};function JA(e,t,n,r,s,u,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,u,d):t.prototype&&t.prototype.isPureReactComponent?!dm(n,r)||!dm(s,u):!0}function QA(e,t,n){var r=!1,s=ec,u=t.contextType;return typeof u=="object"&&u!==null?u=us(u):(s=Do(t)?yu:Xr.current,r=t.contextTypes,u=(r=r!=null)?fd(e,s):ec),t=new t(n,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ky,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=u),t}function eD(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ky.enqueueReplaceState(t,t.state,null)}function bw(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=KA,xw(e);var u=t.contextType;typeof u=="object"&&u!==null?s.context=us(u):(u=Do(t)?yu:Xr.current,s.context=fd(e,u)),ym(e,n,s,r),s.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(Xy(e,t,u,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ky.enqueueReplaceState(s,s.state,null),ym(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4)}var Jy=Array.isArray;function vm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(It(309));var r=n.stateNode}if(!r)throw Error(It(147,e));var s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(u){var d=r.refs;d===KA&&(d=r.refs={}),u===null?delete d[s]:d[s]=u},t._stringRef=s,t)}if(typeof e!="string")throw Error(It(284));if(!n._owner)throw Error(It(290,e))}return e}function Qy(e,t){if(e.type!=="textarea")throw Error(It(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function tD(e){function t(B,U){if(e){var Z=B.lastEffect;Z!==null?(Z.nextEffect=U,B.lastEffect=U):B.firstEffect=B.lastEffect=U,U.nextEffect=null,U.flags=8}}function n(B,U){if(!e)return null;for(;U!==null;)t(B,U),U=U.sibling;return null}function r(B,U){for(B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function s(B,U){return B=uc(B,U),B.index=0,B.sibling=null,B}function u(B,U,Z){return B.index=Z,e?(Z=B.alternate,Z!==null?(Z=Z.index,Z<U?(B.flags=2,U):Z):(B.flags=2,U)):U}function d(B){return e&&B.alternate===null&&(B.flags=2),B}function o(B,U,Z,re){return U===null||U.tag!==6?(U=i2(Z,B.mode,re),U.return=B,U):(U=s(U,Z),U.return=B,U)}function y(B,U,Z,re){return U!==null&&U.elementType===Z.type?(re=s(U,Z.props),re.ref=vm(B,U,Z),re.return=B,re):(re=_0(Z.type,Z.key,Z.props,null,B.mode,re),re.ref=vm(B,U,Z),re.return=B,re)}function w(B,U,Z,re){return U===null||U.tag!==4||U.stateNode.containerInfo!==Z.containerInfo||U.stateNode.implementation!==Z.implementation?(U=r2(Z,B.mode,re),U.return=B,U):(U=s(U,Z.children||[]),U.return=B,U)}function M(B,U,Z,re,ie){return U===null||U.tag!==7?(U=Sd(Z,B.mode,re,ie),U.return=B,U):(U=s(U,Z),U.return=B,U)}function k(B,U,Z){if(typeof U=="string"||typeof U=="number")return U=i2(""+U,B.mode,Z),U.return=B,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case Wp:return Z=_0(U.type,U.key,U.props,null,B.mode,Z),Z.ref=vm(B,null,U),Z.return=B,Z;case pu:return U=r2(U,B.mode,Z),U.return=B,U}if(Jy(U)||Yp(U))return U=Sd(U,B.mode,Z,null),U.return=B,U;Qy(B,U)}return null}function O(B,U,Z,re){var ie=U!==null?U.key:null;if(typeof Z=="string"||typeof Z=="number")return ie!==null?null:o(B,U,""+Z,re);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Wp:return Z.key===ie?Z.type===Wl?M(B,U,Z.props.children,re,ie):y(B,U,Z,re):null;case pu:return Z.key===ie?w(B,U,Z,re):null}if(Jy(Z)||Yp(Z))return ie!==null?null:M(B,U,Z,re,null);Qy(B,Z)}return null}function $(B,U,Z,re,ie){if(typeof re=="string"||typeof re=="number")return B=B.get(Z)||null,o(U,B,""+re,ie);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Wp:return B=B.get(re.key===null?Z:re.key)||null,re.type===Wl?M(U,B,re.props.children,ie,re.key):y(U,B,re,ie);case pu:return B=B.get(re.key===null?Z:re.key)||null,w(U,B,re,ie)}if(Jy(re)||Yp(re))return B=B.get(Z)||null,M(U,B,re,ie,null);Qy(U,re)}return null}function j(B,U,Z,re){for(var ie=null,de=null,xe=U,Ce=U=0,je=null;xe!==null&&Ce<Z.length;Ce++){xe.index>Ce?(je=xe,xe=null):je=xe.sibling;var ze=O(B,xe,Z[Ce],re);if(ze===null){xe===null&&(xe=je);break}e&&xe&&ze.alternate===null&&t(B,xe),U=u(ze,U,Ce),de===null?ie=ze:de.sibling=ze,de=ze,xe=je}if(Ce===Z.length)return n(B,xe),ie;if(xe===null){for(;Ce<Z.length;Ce++)xe=k(B,Z[Ce],re),xe!==null&&(U=u(xe,U,Ce),de===null?ie=xe:de.sibling=xe,de=xe);return ie}for(xe=r(B,xe);Ce<Z.length;Ce++)je=$(xe,B,Ce,Z[Ce],re),je!==null&&(e&&je.alternate!==null&&xe.delete(je.key===null?Ce:je.key),U=u(je,U,Ce),de===null?ie=je:de.sibling=je,de=je);return e&&xe.forEach(function(pt){return t(B,pt)}),ie}function G(B,U,Z,re){var ie=Yp(Z);if(typeof ie!="function")throw Error(It(150));if(Z=ie.call(Z),Z==null)throw Error(It(151));for(var de=ie=null,xe=U,Ce=U=0,je=null,ze=Z.next();xe!==null&&!ze.done;Ce++,ze=Z.next()){xe.index>Ce?(je=xe,xe=null):je=xe.sibling;var pt=O(B,xe,ze.value,re);if(pt===null){xe===null&&(xe=je);break}e&&xe&&pt.alternate===null&&t(B,xe),U=u(pt,U,Ce),de===null?ie=pt:de.sibling=pt,de=pt,xe=je}if(ze.done)return n(B,xe),ie;if(xe===null){for(;!ze.done;Ce++,ze=Z.next())ze=k(B,ze.value,re),ze!==null&&(U=u(ze,U,Ce),de===null?ie=ze:de.sibling=ze,de=ze);return ie}for(xe=r(B,xe);!ze.done;Ce++,ze=Z.next())ze=$(xe,B,Ce,ze.value,re),ze!==null&&(e&&ze.alternate!==null&&xe.delete(ze.key===null?Ce:ze.key),U=u(ze,U,Ce),de===null?ie=ze:de.sibling=ze,de=ze);return e&&xe.forEach(function(mt){return t(B,mt)}),ie}return function(B,U,Z,re){var ie=typeof Z=="object"&&Z!==null&&Z.type===Wl&&Z.key===null;ie&&(Z=Z.props.children);var de=typeof Z=="object"&&Z!==null;if(de)switch(Z.$$typeof){case Wp:e:{for(de=Z.key,ie=U;ie!==null;){if(ie.key===de){switch(ie.tag){case 7:if(Z.type===Wl){n(B,ie.sibling),U=s(ie,Z.props.children),U.return=B,B=U;break e}break;default:if(ie.elementType===Z.type){n(B,ie.sibling),U=s(ie,Z.props),U.ref=vm(B,ie,Z),U.return=B,B=U;break e}}n(B,ie);break}else t(B,ie);ie=ie.sibling}Z.type===Wl?(U=Sd(Z.props.children,B.mode,re,Z.key),U.return=B,B=U):(re=_0(Z.type,Z.key,Z.props,null,B.mode,re),re.ref=vm(B,U,Z),re.return=B,B=re)}return d(B);case pu:e:{for(ie=Z.key;U!==null;){if(U.key===ie)if(U.tag===4&&U.stateNode.containerInfo===Z.containerInfo&&U.stateNode.implementation===Z.implementation){n(B,U.sibling),U=s(U,Z.children||[]),U.return=B,B=U;break e}else{n(B,U);break}else t(B,U);U=U.sibling}U=r2(Z,B.mode,re),U.return=B,B=U}return d(B)}if(typeof Z=="string"||typeof Z=="number")return Z=""+Z,U!==null&&U.tag===6?(n(B,U.sibling),U=s(U,Z),U.return=B,B=U):(n(B,U),U=i2(Z,B.mode,re),U.return=B,B=U),d(B);if(Jy(Z))return j(B,U,Z,re);if(Yp(Z))return G(B,U,Z,re);if(de&&Qy(B,Z),typeof Z=="undefined"&&!ie)switch(B.tag){case 1:case 22:case 0:case 11:case 15:throw Error(It(152,Jh(B.type)||"Component"))}return n(B,U)}}var e0=tD(!0),nD=tD(!1),xm={},ha=Ql(xm),bm=Ql(xm),wm=Ql(xm);function bu(e){if(e===xm)throw Error(It(174));return e}function ww(e,t){switch(Ki(wm,t),Ki(bm,e),Ki(ha,xm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Mb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Mb(t,e)}Fi(ha),Ki(ha,t)}function _d(){Fi(ha),Fi(bm),Fi(wm)}function iD(e){bu(wm.current);var t=bu(ha.current),n=Mb(t,e.type);t!==n&&(Ki(bm,e),Ki(ha,n))}function Ew(e){bm.current===e&&(Fi(ha),Fi(bm))}var Ji=Ql(0);function t0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!=0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xa=null,rc=null,da=!1;function rD(e,t){var n=fs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function oD(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Sw(e){if(da){var t=rc;if(t){var n=t;if(!oD(e,t)){if(t=cd(n.nextSibling),!t||!oD(e,t)){e.flags=e.flags&-1025|2,da=!1,Xa=e;return}rD(Xa,n)}Xa=e,rc=cd(t.firstChild)}else e.flags=e.flags&-1025|2,da=!1,Xa=e}}function sD(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xa=e}function n0(e){if(e!==Xa)return!1;if(!da)return sD(e),da=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!lw(t,e.memoizedProps))for(t=rc;t;)rD(e,t),t=cd(t.nextSibling);if(sD(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(It(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){rc=cd(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}rc=null}}else rc=Xa?cd(e.stateNode.nextSibling):null;return!0}function Tw(){rc=Xa=null,da=!1}var yd=[];function Cw(){for(var e=0;e<yd.length;e++)yd[e]._workInProgressVersionPrimary=null;yd.length=0}var Em=fu.ReactCurrentDispatcher,hs=fu.ReactCurrentBatchConfig,Sm=0,ir=null,Jr=null,Br=null,i0=!1,Tm=!1;function Io(){throw Error(It(321))}function Mw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cs(e[n],t[n]))return!1;return!0}function kw(e,t,n,r,s,u){if(Sm=u,ir=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Em.current=e===null||e.memoizedState===null?f6:p6,e=n(r,s),Tm){u=0;do{if(Tm=!1,!(25>u))throw Error(It(301));u+=1,Br=Jr=null,t.updateQueue=null,Em.current=m6,e=n(r,s)}while(Tm)}if(Em.current=a0,t=Jr!==null&&Jr.next!==null,Sm=0,Br=Jr=ir=null,i0=!1,t)throw Error(It(300));return e}function wu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?ir.memoizedState=Br=e:Br=Br.next=e,Br}function Eu(){if(Jr===null){var e=ir.alternate;e=e!==null?e.memoizedState:null}else e=Jr.next;var t=Br===null?ir.memoizedState:Br.next;if(t!==null)Br=t,Jr=e;else{if(e===null)throw Error(It(310));Jr=e,e={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},Br===null?ir.memoizedState=Br=e:Br=Br.next=e}return Br}function fa(e,t){return typeof t=="function"?t(e):t}function Cm(e){var t=Eu(),n=t.queue;if(n===null)throw Error(It(311));n.lastRenderedReducer=e;var r=Jr,s=r.baseQueue,u=n.pending;if(u!==null){if(s!==null){var d=s.next;s.next=u.next,u.next=d}r.baseQueue=s=u,n.pending=null}if(s!==null){s=s.next,r=r.baseState;var o=d=u=null,y=s;do{var w=y.lane;if((Sm&w)===w)o!==null&&(o=o.next={lane:0,action:y.action,eagerReducer:y.eagerReducer,eagerState:y.eagerState,next:null}),r=y.eagerReducer===e?y.eagerState:e(r,y.action);else{var M={lane:w,action:y.action,eagerReducer:y.eagerReducer,eagerState:y.eagerState,next:null};o===null?(d=o=M,u=r):o=o.next=M,ir.lanes|=w,Dm|=w}y=y.next}while(y!==null&&y!==s);o===null?u=r:o.next=d,cs(r,t.memoizedState)||(Fs=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=o,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Mm(e){var t=Eu(),n=t.queue;if(n===null)throw Error(It(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,u=t.memoizedState;if(s!==null){n.pending=null;var d=s=s.next;do u=e(u,d.action),d=d.next;while(d!==s);cs(u,t.memoizedState)||(Fs=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),n.lastRenderedState=u}return[u,r]}function aD(e,t,n){var r=t._getVersion;r=r(t._source);var s=t._workInProgressVersionPrimary;if(s!==null?e=s===r:(e=e.mutableReadLanes,(e=(Sm&e)===e)&&(t._workInProgressVersionPrimary=r,yd.push(t))),e)return n(t._source);throw yd.push(t),Error(It(350))}function lD(e,t,n,r){var s=_o;if(s===null)throw Error(It(349));var u=t._getVersion,d=u(t._source),o=Em.current,y=o.useState(function(){return aD(s,t,n)}),w=y[1],M=y[0];y=Br;var k=e.memoizedState,O=k.refs,$=O.getSnapshot,j=k.source;k=k.subscribe;var G=ir;return e.memoizedState={refs:O,source:t,subscribe:r},o.useEffect(function(){O.getSnapshot=n,O.setSnapshot=w;var B=u(t._source);if(!cs(d,B)){B=n(t._source),cs(M,B)||(w(B),B=sc(G),s.mutableReadLanes|=B&s.pendingLanes),B=s.mutableReadLanes,s.entangledLanes|=B;for(var U=s.entanglements,Z=B;0<Z;){var re=31-Xl(Z),ie=1<<re;U[re]|=B,Z&=~ie}}},[n,t,r]),o.useEffect(function(){return r(t._source,function(){var B=O.getSnapshot,U=O.setSnapshot;try{U(B(t._source));var Z=sc(G);s.mutableReadLanes|=Z&s.pendingLanes}catch(re){U(function(){throw re})}})},[t,r]),cs($,n)&&cs(j,t)&&cs(k,r)||(e={pending:null,dispatch:null,lastRenderedReducer:fa,lastRenderedState:M},e.dispatch=w=Pw.bind(null,ir,e),y.queue=e,y.baseQueue=null,M=aD(s,t,n),y.memoizedState=y.baseState=M),M}function cD(e,t,n){var r=Eu();return lD(r,e,t,n)}function km(e){var t=wu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},e=e.dispatch=Pw.bind(null,ir,e),[t.memoizedState,e]}function r0(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ir.updateQueue,t===null?(t={lastEffect:null},ir.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function uD(e){var t=wu();return e={current:e},t.memoizedState=e}function o0(){return Eu().memoizedState}function Aw(e,t,n,r){var s=wu();ir.flags|=e,s.memoizedState=r0(1|t,n,void 0,r===void 0?null:r)}function Dw(e,t,n,r){var s=Eu();r=r===void 0?null:r;var u=void 0;if(Jr!==null){var d=Jr.memoizedState;if(u=d.destroy,r!==null&&Mw(r,d.deps)){r0(t,n,u,r);return}}ir.flags|=e,s.memoizedState=r0(1|t,n,u,r)}function hD(e,t){return Aw(516,4,e,t)}function s0(e,t){return Dw(516,4,e,t)}function dD(e,t){return Dw(4,2,e,t)}function fD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pD(e,t,n){return n=n!=null?n.concat([e]):null,Dw(4,2,fD.bind(null,t,e),n)}function Iw(){}function mD(e,t){var n=Eu();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mw(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function gD(e,t){var n=Eu();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Mw(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function d6(e,t){var n=pd();xu(98>n?98:n,function(){e(!0)}),xu(97<n?97:n,function(){var r=hs.transition;hs.transition=1;try{e(!1),t()}finally{hs.transition=r}})}function Pw(e,t,n){var r=qo(),s=sc(e),u={lane:s,action:n,eagerReducer:null,eagerState:null,next:null},d=t.pending;if(d===null?u.next=u:(u.next=d.next,d.next=u),t.pending=u,d=e.alternate,e===ir||d!==null&&d===ir)Tm=i0=!0;else{if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var o=t.lastRenderedState,y=d(o,n);if(u.eagerReducer=d,u.eagerState=y,cs(y,o))return}catch{}finally{}ac(e,s,r)}}var a0={readContext:us,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useLayoutEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useMutableSource:Io,useOpaqueIdentifier:Io,unstable_isNewReconciler:!1},f6={readContext:us,useCallback:function(e,t){return wu().memoizedState=[e,t===void 0?null:t],e},useContext:us,useEffect:hD,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Aw(4,2,fD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Aw(4,2,e,t)},useMemo:function(e,t){var n=wu();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wu();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=Pw.bind(null,ir,e),[r.memoizedState,e]},useRef:uD,useState:km,useDebugValue:Iw,useDeferredValue:function(e){var t=km(e),n=t[0],r=t[1];return hD(function(){var s=hs.transition;hs.transition=1;try{r(e)}finally{hs.transition=s}},[e]),n},useTransition:function(){var e=km(!1),t=e[0];return e=d6.bind(null,e[1]),uD(e),[e,t]},useMutableSource:function(e,t,n){var r=wu();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},lD(r,e,t,n)},useOpaqueIdentifier:function(){if(da){var e=!1,t=s6(function(){throw e||(e=!0,n("r:"+(uw++).toString(36))),Error(It(355))}),n=km(t)[1];return(ir.mode&2)==0&&(ir.flags|=516,r0(5,function(){n("r:"+(uw++).toString(36))},void 0,null)),t}return t="r:"+(uw++).toString(36),km(t),t},unstable_isNewReconciler:!1},p6={readContext:us,useCallback:mD,useContext:us,useEffect:s0,useImperativeHandle:pD,useLayoutEffect:dD,useMemo:gD,useReducer:Cm,useRef:o0,useState:function(){return Cm(fa)},useDebugValue:Iw,useDeferredValue:function(e){var t=Cm(fa),n=t[0],r=t[1];return s0(function(){var s=hs.transition;hs.transition=1;try{r(e)}finally{hs.transition=s}},[e]),n},useTransition:function(){var e=Cm(fa)[0];return[o0().current,e]},useMutableSource:cD,useOpaqueIdentifier:function(){return Cm(fa)[0]},unstable_isNewReconciler:!1},m6={readContext:us,useCallback:mD,useContext:us,useEffect:s0,useImperativeHandle:pD,useLayoutEffect:dD,useMemo:gD,useReducer:Mm,useRef:o0,useState:function(){return Mm(fa)},useDebugValue:Iw,useDeferredValue:function(e){var t=Mm(fa),n=t[0],r=t[1];return s0(function(){var s=hs.transition;hs.transition=1;try{r(e)}finally{hs.transition=s}},[e]),n},useTransition:function(){var e=Mm(fa)[0];return[o0().current,e]},useMutableSource:cD,useOpaqueIdentifier:function(){return Mm(fa)[0]},unstable_isNewReconciler:!1},g6=fu.ReactCurrentOwner,Fs=!1;function Po(e,t,n,r){t.child=e===null?nD(t,null,n,r):e0(t,e.child,n,r)}function _D(e,t,n,r,s){n=n.render;var u=t.ref;return gd(t,s),r=kw(e,t,n,r,u,s),e!==null&&!Fs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~s,Ka(e,t,s)):(t.flags|=1,Po(e,t,r,s),t.child)}function yD(e,t,n,r,s,u){if(e===null){var d=n.type;return typeof d=="function"&&!t2(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,vD(e,t,d,r,s,u)):(e=_0(n.type,null,r,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}return d=e.child,(s&u)==0&&(s=d.memoizedProps,n=n.compare,n=n!==null?n:dm,n(s,r)&&e.ref===t.ref)?Ka(e,t,u):(t.flags|=1,e=uc(d,r),e.ref=t.ref,e.return=t,t.child=e)}function vD(e,t,n,r,s,u){if(e!==null&&dm(e.memoizedProps,r)&&e.ref===t.ref)if(Fs=!1,(u&s)!=0)(e.flags&16384)!=0&&(Fs=!0);else return t.lanes=e.lanes,Ka(e,t,u);return Lw(e,t,n,r,u)}function Ow(e,t,n){var r=t.pendingProps,s=r.children,u=e!==null?e.memoizedState:null;if(r.mode==="hidden"||r.mode==="unstable-defer-without-hiding")if((t.mode&4)==0)t.memoizedState={baseLanes:0},g0(t,n);else if((n&1073741824)!=0)t.memoizedState={baseLanes:0},g0(t,u!==null?u.baseLanes:n);else return e=u!==null?u.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},g0(t,e),null;else u!==null?(r=u.baseLanes|n,t.memoizedState=null):r=n,g0(t,r);return Po(e,t,s,n),t.child}function xD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function Lw(e,t,n,r,s){var u=Do(n)?yu:Xr.current;return u=fd(t,u),gd(t,s),n=kw(e,t,n,r,u,s),e!==null&&!Fs?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~s,Ka(e,t,s)):(t.flags|=1,Po(e,t,n,s),t.child)}function bD(e,t,n,r,s){if(Do(n)){var u=!0;Gy(t)}else u=!1;if(gd(t,s),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),QA(t,n,r),bw(t,n,r,s),r=!0;else if(e===null){var d=t.stateNode,o=t.memoizedProps;d.props=o;var y=d.context,w=n.contextType;typeof w=="object"&&w!==null?w=us(w):(w=Do(n)?yu:Xr.current,w=fd(t,w));var M=n.getDerivedStateFromProps,k=typeof M=="function"||typeof d.getSnapshotBeforeUpdate=="function";k||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(o!==r||y!==w)&&eD(t,d,r,w),tc=!1;var O=t.memoizedState;d.state=O,ym(t,r,d,s),y=t.memoizedState,o!==r||O!==y||Ao.current||tc?(typeof M=="function"&&(Xy(t,n,M,r),y=t.memoizedState),(o=tc||JA(t,n,o,r,O,y,w))?(k||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4)):(typeof d.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=y),d.props=r,d.state=y,d.context=w,r=o):(typeof d.componentDidMount=="function"&&(t.flags|=4),r=!1)}else{d=t.stateNode,YA(e,t),o=t.memoizedProps,w=t.type===t.elementType?o:Rs(t.type,o),d.props=w,k=t.pendingProps,O=d.context,y=n.contextType,typeof y=="object"&&y!==null?y=us(y):(y=Do(n)?yu:Xr.current,y=fd(t,y));var $=n.getDerivedStateFromProps;(M=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(o!==k||O!==y)&&eD(t,d,r,y),tc=!1,O=t.memoizedState,d.state=O,ym(t,r,d,s);var j=t.memoizedState;o!==k||O!==j||Ao.current||tc?(typeof $=="function"&&(Xy(t,n,$,r),j=t.memoizedState),(w=tc||JA(t,n,w,r,O,j,y))?(M||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(r,j,y),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(r,j,y)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof d.componentDidUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=j),d.props=r,d.state=j,d.context=y,r=w):(typeof d.componentDidUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&O===e.memoizedState||(t.flags|=256),r=!1)}return zw(e,t,n,r,u,s)}function zw(e,t,n,r,s,u){xD(e,t);var d=(t.flags&64)!=0;if(!r&&!d)return s&&BA(t,n,!1),Ka(e,t,u);r=t.stateNode,g6.current=t;var o=d&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&d?(t.child=e0(t,e.child,null,u),t.child=e0(t,null,o,u)):Po(e,t,o,u),t.memoizedState=r.state,s&&BA(t,n,!0),t.child}function wD(e){var t=e.stateNode;t.pendingContext?RA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&RA(e,t.context,!1),ww(e,t.containerInfo)}var l0={dehydrated:null,retryLane:0};function ED(e,t,n){var r=t.pendingProps,s=Ji.current,u=!1,d;return(d=(t.flags&64)!=0)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!=0),d?(u=!0,t.flags&=-65):e!==null&&e.memoizedState===null||r.fallback===void 0||r.unstable_avoidThisFallback===!0||(s|=1),Ki(Ji,s&1),e===null?(r.fallback!==void 0&&Sw(t),e=r.children,s=r.fallback,u?(e=SD(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=l0,e):typeof r.unstable_expectedLoadTime=="number"?(e=SD(t,e,s,n),t.child.memoizedState={baseLanes:n},t.memoizedState=l0,t.lanes=33554432,e):(n=n2({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?u?(r=CD(e,t,r.children,r.fallback,n),u=t.child,s=e.child.memoizedState,u.memoizedState=s===null?{baseLanes:n}:{baseLanes:s.baseLanes|n},u.childLanes=e.childLanes&~n,t.memoizedState=l0,r):(n=TD(e,t,r.children,n),t.memoizedState=null,n):u?(r=CD(e,t,r.children,r.fallback,n),u=t.child,s=e.child.memoizedState,u.memoizedState=s===null?{baseLanes:n}:{baseLanes:s.baseLanes|n},u.childLanes=e.childLanes&~n,t.memoizedState=l0,r):(n=TD(e,t,r.children,n),t.memoizedState=null,n)}function SD(e,t,n,r){var s=e.mode,u=e.child;return t={mode:"hidden",children:t},(s&2)==0&&u!==null?(u.childLanes=0,u.pendingProps=t):u=n2(t,s,0,null),n=Sd(n,s,r,null),u.return=e,n.return=e,u.sibling=n,e.child=u,n}function TD(e,t,n,r){var s=e.child;return e=s.sibling,n=uc(s,{mode:"visible",children:n}),(t.mode&2)==0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function CD(e,t,n,r,s){var u=t.mode,d=e.child;e=d.sibling;var o={mode:"hidden",children:n};return(u&2)==0&&t.child!==d?(n=t.child,n.childLanes=0,n.pendingProps=o,d=n.lastEffect,d!==null?(t.firstEffect=n.firstEffect,t.lastEffect=d,d.nextEffect=null):t.firstEffect=t.lastEffect=null):n=uc(d,o),e!==null?r=uc(e,r):(r=Sd(r,u,s,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function MD(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qA(e.return,t)}function Rw(e,t,n,r,s,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,lastEffect:u}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=r,d.tail=n,d.tailMode=s,d.lastEffect=u)}function kD(e,t,n){var r=t.pendingProps,s=r.revealOrder,u=r.tail;if(Po(e,t,r.children,n),r=Ji.current,(r&2)!=0)r=r&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!=0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&MD(e,n);else if(e.tag===19)MD(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ki(Ji,r),(t.mode&2)==0)t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&t0(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Rw(t,!1,s,n,u,t.lastEffect);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&t0(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Rw(t,!0,n,null,u,t.lastEffect);break;case"together":Rw(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ka(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dm|=t.lanes,(n&t.childLanes)!=0){if(e!==null&&t.child!==e.child)throw Error(It(153));if(t.child!==null){for(e=t.child,n=uc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=uc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var AD,Fw,DD,ID;AD=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Fw=function(){};DD=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,bu(ha.current);var u=null;switch(n){case"input":s=bb(e,s),r=bb(e,r),u=[];break;case"option":s=Sb(e,s),r=Sb(e,r),u=[];break;case"select":s=Gi({},s,{value:void 0}),r=Gi({},r,{value:void 0}),u=[];break;case"textarea":s=Tb(e,s),r=Tb(e,r),u=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ny)}kb(n,r);var d;n=null;for(w in s)if(!r.hasOwnProperty(w)&&s.hasOwnProperty(w)&&s[w]!=null)if(w==="style"){var o=s[w];for(d in o)o.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Gp.hasOwnProperty(w)?u||(u=[]):(u=u||[]).push(w,null));for(w in r){var y=r[w];if(o=s!=null?s[w]:void 0,r.hasOwnProperty(w)&&y!==o&&(y!=null||o!=null))if(w==="style")if(o){for(d in o)!o.hasOwnProperty(d)||y&&y.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in y)y.hasOwnProperty(d)&&o[d]!==y[d]&&(n||(n={}),n[d]=y[d])}else n||(u||(u=[]),u.push(w,n)),n=y;else w==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,o=o?o.__html:void 0,y!=null&&o!==y&&(u=u||[]).push(w,y)):w==="children"?typeof y!="string"&&typeof y!="number"||(u=u||[]).push(w,""+y):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Gp.hasOwnProperty(w)?(y!=null&&w==="onScroll"&&Ri("scroll",e),u||o===y||(u=[])):typeof y=="object"&&y!==null&&y.$$typeof===gb?y.toString():(u=u||[]).push(w,y))}n&&(u=u||[]).push("style",n);var w=u;(t.updateQueue=w)&&(t.flags|=4)}};ID=function(e,t,n,r){n!==r&&(t.flags|=4)};function Am(e,t){if(!da)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function _6(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Do(t.type)&&$y(),null;case 3:return _d(),Fi(Ao),Fi(Xr),Cw(),r=t.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(n0(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Fw(t),null;case 5:Ew(t);var s=bu(wm.current);if(n=t.type,e!==null&&t.stateNode!=null)DD(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(t.stateNode===null)throw Error(It(166));return null}if(e=bu(ha.current),n0(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[Jl]=t,r[jy]=u,n){case"dialog":Ri("cancel",r),Ri("close",r);break;case"iframe":case"object":case"embed":Ri("load",r);break;case"video":case"audio":for(e=0;e<pm.length;e++)Ri(pm[e],r);break;case"source":Ri("error",r);break;case"img":case"image":case"link":Ri("error",r),Ri("load",r);break;case"details":Ri("toggle",r);break;case"input":bk(r,u),Ri("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ri("invalid",r);break;case"textarea":Sk(r,u),Ri("invalid",r)}kb(n,u),e=null;for(var d in u)u.hasOwnProperty(d)&&(s=u[d],d==="children"?typeof s=="string"?r.textContent!==s&&(e=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(e=["children",""+s]):Gp.hasOwnProperty(d)&&s!=null&&d==="onScroll"&&Ri("scroll",r));switch(n){case"input":wy(r),Ek(r,u,!0);break;case"textarea":wy(r),Ck(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=Ny)}r=e,t.updateQueue=r,r!==null&&(t.flags|=4)}else{switch(d=s.nodeType===9?s:s.ownerDocument,e===Cb.html&&(e=Mk(n)),e===Cb.html?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=d.createElement(n,{is:r.is}):(e=d.createElement(n),n==="select"&&(d=e,r.multiple?d.multiple=!0:r.size&&(d.size=r.size))):e=d.createElementNS(e,n),e[Jl]=t,e[jy]=r,AD(e,t,!1,!1),t.stateNode=e,d=Ab(n,r),n){case"dialog":Ri("cancel",e),Ri("close",e),s=r;break;case"iframe":case"object":case"embed":Ri("load",e),s=r;break;case"video":case"audio":for(s=0;s<pm.length;s++)Ri(pm[s],e);s=r;break;case"source":Ri("error",e),s=r;break;case"img":case"image":case"link":Ri("error",e),Ri("load",e),s=r;break;case"details":Ri("toggle",e),s=r;break;case"input":bk(e,r),s=bb(e,r),Ri("invalid",e);break;case"option":s=Sb(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Gi({},r,{value:void 0}),Ri("invalid",e);break;case"textarea":Sk(e,r),s=Tb(e,r),Ri("invalid",e);break;default:s=r}kb(n,s);var o=s;for(u in o)if(o.hasOwnProperty(u)){var y=o[u];u==="style"?Dk(e,y):u==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&kk(e,y)):u==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&Xp(e,y):typeof y=="number"&&Xp(e,""+y):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gp.hasOwnProperty(u)?y!=null&&u==="onScroll"&&Ri("scroll",e):y!=null&&ub(e,u,y,d))}switch(n){case"input":wy(e),Ek(e,r,!1);break;case"textarea":wy(e),Ck(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Hl(r.value));break;case"select":e.multiple=!!r.multiple,u=r.value,u!=null?Qh(e,!!r.multiple,u,!1):r.defaultValue!=null&&Qh(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ny)}IA(n,r)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)ID(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(It(166));n=bu(wm.current),bu(ha.current),n0(t)?(r=t.stateNode,n=t.memoizedProps,r[Jl]=t,r.nodeValue!==n&&(t.flags|=4)):(r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jl]=t,t.stateNode=r)}return null;case 13:return Fi(Ji),r=t.memoizedState,(t.flags&64)!=0?(t.lanes=n,t):(r=r!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&n0(t):n=e.memoizedState!==null,r&&!n&&(t.mode&2)!=0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Ji.current&1)!=0?Nr===0&&(Nr=3):((Nr===0||Nr===3)&&(Nr=4),_o===null||(Dm&134217727)==0&&(xd&134217727)==0||wd(_o,Qr))),(r||n)&&(t.flags|=4),null);case 4:return _d(),Fw(t),e===null&&CA(t.stateNode.containerInfo),null;case 10:return vw(t),null;case 17:return Do(t.type)&&$y(),null;case 19:if(Fi(Ji),r=t.memoizedState,r===null)return null;if(u=(t.flags&64)!=0,d=r.rendering,d===null)if(u)Am(r,!1);else{if(Nr!==0||e!==null&&(e.flags&64)!=0)for(e=t.child;e!==null;){if(d=t0(e),d!==null){for(t.flags|=64,Am(r,!1),u=d.updateQueue,u!==null&&(t.updateQueue=u,t.flags|=4),r.lastEffect===null&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;n!==null;)u=n,e=r,u.flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,d=u.alternate,d===null?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=d.childLanes,u.lanes=d.lanes,u.child=d.child,u.memoizedProps=d.memoizedProps,u.memoizedState=d.memoizedState,u.updateQueue=d.updateQueue,u.type=d.type,e=d.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ki(Ji,Ji.current&1|2),t.child}e=e.sibling}r.tail!==null&&Kr()>Yw&&(t.flags|=64,u=!0,Am(r,!1),t.lanes=33554432)}else{if(!u)if(e=t0(d),e!==null){if(t.flags|=64,u=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Am(r,!0),r.tail===null&&r.tailMode==="hidden"&&!d.alternate&&!da)return t=t.lastEffect=r.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Kr()-r.renderingStartTime>Yw&&n!==1073741824&&(t.flags|=64,u=!0,Am(r,!1),t.lanes=33554432);r.isBackwards?(d.sibling=t.child,t.child=d):(n=r.last,n!==null?n.sibling=d:t.child=d,r.last=d)}return r.tail!==null?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Kr(),n.sibling=null,t=Ji.current,Ki(Ji,u?t&1|2:t&1),n):null;case 23:case 24:return e2(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&r.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(It(156,t.tag))}function y6(e){switch(e.tag){case 1:Do(e.type)&&$y();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(_d(),Fi(Ao),Fi(Xr),Cw(),t=e.flags,(t&64)!=0)throw Error(It(285));return e.flags=t&-4097|64,e;case 5:return Ew(e),null;case 13:return Fi(Ji),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Fi(Ji),null;case 4:return _d(),null;case 10:return vw(e),null;case 23:case 24:return e2(),null;default:return null}}function Bw(e,t){try{var n="",r=t;do n+=J4(r),r=r.return;while(r);var s=n}catch(u){s=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:s}}function Nw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var v6=typeof WeakMap=="function"?WeakMap:Map;function PD(e,t,n){n=nc(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){h0||(h0=!0,Zw=r),Nw(e,t)},n}function OD(e,t,n){n=nc(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return Nw(e,t),r(s)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){typeof r!="function"&&(pa===null?pa=new Set([this]):pa.add(this),Nw(e,t));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}var x6=typeof WeakSet=="function"?WeakSet:Set;function LD(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){cc(e,n)}else t.current=null}function b6(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,r=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:Rs(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&cw(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(It(163))}function w6(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)==3){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var s=e;r=s.next,s=s.tag,(s&4)!=0&&(s&1)!=0&&(ZD(n,e),D6(n,e)),e=r}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Rs(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&XA(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}XA(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&IA(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&Hk(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(It(163))}function zD(e,t){for(var n=e;;){if(n.tag===5){var r=n.stateNode;if(t)r=r.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var s=n.memoizedProps.style;s=s!=null&&s.hasOwnProperty("display")?s.display:null,r.style.display=Ak("display",s)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function RD(e,t){if(vu&&typeof vu.onCommitFiberUnmount=="function")try{vu.onCommitFiberUnmount(dw,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var r=n,s=r.destroy;if(r=r.tag,s!==void 0)if((r&4)!=0)ZD(t,n);else{r=t;try{s()}catch(u){cc(r,u)}}n=n.next}while(n!==e)}break;case 1:if(LD(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(u){cc(t,u)}break;case 5:LD(t);break;case 4:VD(e,t)}}function FD(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function BD(e){return e.tag===5||e.tag===3||e.tag===4}function ND(e){e:{for(var t=e.return;t!==null;){if(BD(t))break e;t=t.return}throw Error(It(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:t=t.containerInfo,r=!0;break;case 4:t=t.containerInfo,r=!0;break;default:throw Error(It(161))}n.flags&16&&(Xp(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||BD(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}r?Vw(e,n,t):jw(e,n,t)}function Vw(e,t,n){var r=e.tag,s=r===5||r===6;if(s)e=s?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ny));else if(r!==4&&(e=e.child,e!==null))for(Vw(e,t,n),e=e.sibling;e!==null;)Vw(e,t,n),e=e.sibling}function jw(e,t,n){var r=e.tag,s=r===5||r===6;if(s)e=s?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(jw(e,t,n),e=e.sibling;e!==null;)jw(e,t,n),e=e.sibling}function VD(e,t){for(var n=t,r=!1,s,u;;){if(!r){r=n.return;e:for(;;){if(r===null)throw Error(It(160));switch(s=r.stateNode,r.tag){case 5:u=!1;break e;case 3:s=s.containerInfo,u=!0;break e;case 4:s=s.containerInfo,u=!0;break e}r=r.return}r=!0}if(n.tag===5||n.tag===6){e:for(var d=e,o=n,y=o;;)if(RD(d,y),y.child!==null&&y.tag!==4)y.child.return=y,y=y.child;else{if(y===o)break e;for(;y.sibling===null;){if(y.return===null||y.return===o)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}u?(d=s,o=n.stateNode,d.nodeType===8?d.parentNode.removeChild(o):d.removeChild(o)):s.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,u=!0,n.child.return=n,n=n.child;continue}}else if(RD(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(r=!1)}n.sibling.return=n.return,n=n.sibling}}function Uw(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do(r.tag&3)==3&&(e=r.destroy,r.destroy=void 0,e!==void 0&&e()),r=r.next;while(r!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){r=t.memoizedProps;var s=e!==null?e.memoizedProps:r;e=t.type;var u=t.updateQueue;if(t.updateQueue=null,u!==null){for(n[jy]=r,e==="input"&&r.type==="radio"&&r.name!=null&&wk(n,r),Ab(e,s),t=Ab(e,r),s=0;s<u.length;s+=2){var d=u[s],o=u[s+1];d==="style"?Dk(n,o):d==="dangerouslySetInnerHTML"?kk(n,o):d==="children"?Xp(n,o):ub(n,d,o,t)}switch(e){case"input":wb(n,r);break;case"textarea":Tk(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,u=r.value,u!=null?Qh(n,!!r.multiple,u,!1):e!==!!r.multiple&&(r.defaultValue!=null?Qh(n,!!r.multiple,r.defaultValue,!0):Qh(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(It(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,Hk(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(qw=Kr(),zD(t.child,!0)),jD(t);return;case 19:jD(t);return;case 17:return;case 23:case 24:zD(t,t.memoizedState!==null);return}throw Error(It(163))}function jD(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new x6),t.forEach(function(r){var s=O6.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function E6(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var S6=Math.ceil,c0=fu.ReactCurrentDispatcher,$w=fu.ReactCurrentOwner,vn=0,_o=null,_r=null,Qr=0,Su=0,Gw=Ql(0),Nr=0,u0=null,vd=0,Dm=0,xd=0,Ww=0,Hw=null,qw=0,Yw=1/0;function bd(){Yw=Kr()+500}var Zt=null,h0=!1,Zw=null,pa=null,oc=!1,Im=null,Pm=90,Xw=[],Kw=[],Ja=null,Om=0,Jw=null,d0=-1,Qa=0,f0=0,Lm=null,p0=!1;function qo(){return(vn&48)!=0?Kr():d0!==-1?d0:d0=Kr()}function sc(e){if(e=e.mode,(e&2)==0)return 1;if((e&4)==0)return pd()===99?1:2;if(Qa===0&&(Qa=vd),h6.transition!==0){f0!==0&&(f0=Hw!==null?Hw.pendingLanes:0),e=Qa;var t=4186112&~f0;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=pd(),(vn&4)!=0&&e===98?e=Dy(12,Qa):(e=pB(e),e=Dy(e,Qa)),e}function ac(e,t,n){if(50<Om)throw Om=0,Jw=null,Error(It(185));if(e=m0(e,t),e===null)return null;Iy(e,t,n),e===_o&&(xd|=t,Nr===4&&wd(e,Qr));var r=pd();t===1?(vn&8)!=0&&(vn&48)==0?Qw(e):(ds(e,n),vn===0&&(bd(),ua())):((vn&4)==0||r!==98&&r!==99||(Ja===null?Ja=new Set([e]):Ja.add(e)),ds(e,n)),Hw=e}function m0(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function ds(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var o=31-Xl(d),y=1<<o,w=u[o];if(w===-1){if((y&r)==0||(y&s)!=0){w=t,id(y);var M=Di;u[o]=10<=M?w+250:6<=M?w+5e3:-1}}else w<=t&&(e.expiredLanes|=y);d&=~y}if(r=sm(e,e===_o?Qr:0),t=Di,r===0)n!==null&&(n!==gw&&pw(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==gw&&pw(n)}t===15?(n=Qw.bind(null,e),Za===null?(Za=[n],Hy=fw(Wy,HA)):Za.push(n),n=gw):t===14?n=_m(99,Qw.bind(null,e)):(n=mB(t),n=_m(n,UD.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function UD(e){if(d0=-1,f0=Qa=0,(vn&48)!=0)throw Error(It(327));var t=e.callbackNode;if(lc()&&e.callbackNode!==t)return null;var n=sm(e,e===_o?Qr:0);if(n===0)return null;var r=n,s=vn;vn|=16;var u=HD();(_o!==e||Qr!==r)&&(bd(),Ed(e,r));do try{M6();break}catch(o){WD(e,o)}while(1);if(yw(),c0.current=u,vn=s,_r!==null?r=0:(_o=null,Qr=0,r=Nr),(vd&xd)!=0)Ed(e,0);else if(r!==0){if(r===2&&(vn|=64,e.hydrate&&(e.hydrate=!1,cw(e.containerInfo)),n=Qk(e),n!==0&&(r=zm(e,n))),r===1)throw t=u0,Ed(e,0),wd(e,n),ds(e,Kr()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(It(345));case 2:Tu(e);break;case 3:if(wd(e,n),(n&62914560)===n&&(r=qw+500-Kr(),10<r)){if(sm(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){qo(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=PA(Tu.bind(null,e),r);break}Tu(e);break;case 4:if(wd(e,n),(n&4186112)===n)break;for(r=e.eventTimes,s=-1;0<n;){var d=31-Xl(n);u=1<<d,d=r[d],d>s&&(s=d),n&=~u}if(n=s,n=Kr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*S6(n/1960))-n,10<n){e.timeoutHandle=PA(Tu.bind(null,e),n);break}Tu(e);break;case 5:Tu(e);break;default:throw Error(It(329))}}return ds(e,Kr()),e.callbackNode===t?UD.bind(null,e):null}function wd(e,t){for(t&=~Ww,t&=~xd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xl(t),r=1<<n;e[n]=-1,t&=~r}}function Qw(e){if((vn&48)!=0)throw Error(It(327));if(lc(),e===_o&&(e.expiredLanes&Qr)!=0){var t=Qr,n=zm(e,t);(vd&xd)!=0&&(t=sm(e,t),n=zm(e,t))}else t=sm(e,0),n=zm(e,t);if(e.tag!==0&&n===2&&(vn|=64,e.hydrate&&(e.hydrate=!1,cw(e.containerInfo)),t=Qk(e),t!==0&&(n=zm(e,t))),n===1)throw n=u0,Ed(e,0),wd(e,t),ds(e,Kr()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tu(e),ds(e,Kr()),null}function T6(){if(Ja!==null){var e=Ja;Ja=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,ds(t,Kr())})}ua()}function $D(e,t){var n=vn;vn|=1;try{return e(t)}finally{vn=n,vn===0&&(bd(),ua())}}function GD(e,t){var n=vn;vn&=-2,vn|=8;try{return e(t)}finally{vn=n,vn===0&&(bd(),ua())}}function g0(e,t){Ki(Gw,Su),Su|=t,vd|=t}function e2(){Su=Gw.current,Fi(Gw)}function Ed(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,o6(n)),_r!==null)for(n=_r.return;n!==null;){var r=n;switch(r.tag){case 1:r=r.type.childContextTypes,r!=null&&$y();break;case 3:_d(),Fi(Ao),Fi(Xr),Cw();break;case 5:Ew(r);break;case 4:_d();break;case 13:Fi(Ji);break;case 19:Fi(Ji);break;case 10:vw(r);break;case 23:case 24:e2()}n=n.return}_o=e,_r=uc(e.current,null),Qr=Su=vd=t,Nr=0,u0=null,Ww=xd=Dm=0}function WD(e,t){do{var n=_r;try{if(yw(),Em.current=a0,i0){for(var r=ir.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}i0=!1}if(Sm=0,Br=Jr=ir=null,Tm=!1,$w.current=null,n===null||n.return===null){Nr=1,u0=t,_r=null;break}e:{var u=e,d=n.return,o=n,y=t;if(t=Qr,o.flags|=2048,o.firstEffect=o.lastEffect=null,y!==null&&typeof y=="object"&&typeof y.then=="function"){var w=y;if((o.mode&2)==0){var M=o.alternate;M?(o.updateQueue=M.updateQueue,o.memoizedState=M.memoizedState,o.lanes=M.lanes):(o.updateQueue=null,o.memoizedState=null)}var k=(Ji.current&1)!=0,O=d;do{var $;if($=O.tag===13){var j=O.memoizedState;if(j!==null)$=j.dehydrated!==null;else{var G=O.memoizedProps;$=G.fallback===void 0?!1:G.unstable_avoidThisFallback!==!0?!0:!k}}if($){var B=O.updateQueue;if(B===null){var U=new Set;U.add(w),O.updateQueue=U}else B.add(w);if((O.mode&2)==0){if(O.flags|=64,o.flags|=16384,o.flags&=-2981,o.tag===1)if(o.alternate===null)o.tag=17;else{var Z=nc(-1,1);Z.tag=2,ic(o,Z)}o.lanes|=1;break e}y=void 0,o=t;var re=u.pingCache;if(re===null?(re=u.pingCache=new v6,y=new Set,re.set(w,y)):(y=re.get(w),y===void 0&&(y=new Set,re.set(w,y))),!y.has(o)){y.add(o);var ie=P6.bind(null,u,w,o);w.then(ie,ie)}O.flags|=4096,O.lanes=t;break e}O=O.return}while(O!==null);y=Error((Jh(o.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Nr!==5&&(Nr=2),y=Bw(y,o),O=d;do{switch(O.tag){case 3:u=y,O.flags|=4096,t&=-t,O.lanes|=t;var de=PD(O,u,t);ZA(O,de);break e;case 1:u=y;var xe=O.type,Ce=O.stateNode;if((O.flags&64)==0&&(typeof xe.getDerivedStateFromError=="function"||Ce!==null&&typeof Ce.componentDidCatch=="function"&&(pa===null||!pa.has(Ce)))){O.flags|=4096,t&=-t,O.lanes|=t;var je=OD(O,u,t);ZA(O,je);break e}}O=O.return}while(O!==null)}YD(n)}catch(ze){t=ze,_r===n&&n!==null&&(_r=n=n.return);continue}break}while(1)}function HD(){var e=c0.current;return c0.current=a0,e===null?a0:e}function zm(e,t){var n=vn;vn|=16;var r=HD();_o===e&&Qr===t||Ed(e,t);do try{C6();break}catch(s){WD(e,s)}while(1);if(yw(),vn=n,c0.current=r,_r!==null)throw Error(It(261));return _o=null,Qr=0,Nr}function C6(){for(;_r!==null;)qD(_r)}function M6(){for(;_r!==null&&!l6();)qD(_r)}function qD(e){var t=KD(e.alternate,e,Su);e.memoizedProps=e.pendingProps,t===null?YD(e):_r=t,$w.current=null}function YD(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&2048)==0){if(n=_6(n,t,Su),n!==null){_r=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||(Su&1073741824)!=0||(n.mode&4)==0){for(var r=0,s=n.child;s!==null;)r|=s.lanes|s.childLanes,s=s.sibling;n.childLanes=r}e!==null&&(e.flags&2048)==0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(n=y6(t),n!==null){n.flags&=2047,_r=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){_r=t;return}_r=t=e}while(t!==null);Nr===0&&(Nr=5)}function Tu(e){var t=pd();return xu(99,k6.bind(null,e,t)),null}function k6(e,t){do lc();while(Im!==null);if((vn&48)!=0)throw Error(It(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(It(177));e.callbackNode=null;var r=n.lanes|n.childLanes,s=r,u=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;for(var d=e.eventTimes,o=e.expirationTimes;0<u;){var y=31-Xl(u),w=1<<y;s[y]=0,d[y]=-1,o[y]=-1,u&=~w}if(Ja!==null&&(r&24)==0&&Ja.has(e)&&Ja.delete(e),e===_o&&(_r=_o=null,Qr=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,r!==null){if(s=vn,vn|=32,$w.current=null,sw=Py,d=vA(),nw(d)){if("selectionStart"in d)o={start:d.selectionStart,end:d.selectionEnd};else e:if(o=(o=d.ownerDocument)&&o.defaultView||window,(w=o.getSelection&&o.getSelection())&&w.rangeCount!==0){o=w.anchorNode,u=w.anchorOffset,y=w.focusNode,w=w.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break e}var M=0,k=-1,O=-1,$=0,j=0,G=d,B=null;t:for(;;){for(var U;G!==o||u!==0&&G.nodeType!==3||(k=M+u),G!==y||w!==0&&G.nodeType!==3||(O=M+w),G.nodeType===3&&(M+=G.nodeValue.length),(U=G.firstChild)!==null;)B=G,G=U;for(;;){if(G===d)break t;if(B===o&&++$===u&&(k=M),B===y&&++j===w&&(O=M),(U=G.nextSibling)!==null)break;G=B,B=G.parentNode}G=U}o=k===-1||O===-1?null:{start:k,end:O}}else o=null;o=o||{start:0,end:0}}else o=null;aw={focusedElem:d,selectionRange:o},Py=!1,Lm=null,p0=!1,Zt=r;do try{A6()}catch(ze){if(Zt===null)throw Error(It(330));cc(Zt,ze),Zt=Zt.nextEffect}while(Zt!==null);Lm=null,Zt=r;do try{for(d=e;Zt!==null;){var Z=Zt.flags;if(Z&16&&Xp(Zt.stateNode,""),Z&128){var re=Zt.alternate;if(re!==null){var ie=re.ref;ie!==null&&(typeof ie=="function"?ie(null):ie.current=null)}}switch(Z&1038){case 2:ND(Zt),Zt.flags&=-3;break;case 6:ND(Zt),Zt.flags&=-3,Uw(Zt.alternate,Zt);break;case 1024:Zt.flags&=-1025;break;case 1028:Zt.flags&=-1025,Uw(Zt.alternate,Zt);break;case 4:Uw(Zt.alternate,Zt);break;case 8:o=Zt,VD(d,o);var de=o.alternate;FD(o),de!==null&&FD(de)}Zt=Zt.nextEffect}}catch(ze){if(Zt===null)throw Error(It(330));cc(Zt,ze),Zt=Zt.nextEffect}while(Zt!==null);if(ie=aw,re=vA(),Z=ie.focusedElem,d=ie.selectionRange,re!==Z&&Z&&Z.ownerDocument&&yA(Z.ownerDocument.documentElement,Z)){for(d!==null&&nw(Z)&&(re=d.start,ie=d.end,ie===void 0&&(ie=re),"selectionStart"in Z?(Z.selectionStart=re,Z.selectionEnd=Math.min(ie,Z.value.length)):(ie=(re=Z.ownerDocument||document)&&re.defaultView||window,ie.getSelection&&(ie=ie.getSelection(),o=Z.textContent.length,de=Math.min(d.start,o),d=d.end===void 0?de:Math.min(d.end,o),!ie.extend&&de>d&&(o=d,d=de,de=o),o=_A(Z,de),u=_A(Z,d),o&&u&&(ie.rangeCount!==1||ie.anchorNode!==o.node||ie.anchorOffset!==o.offset||ie.focusNode!==u.node||ie.focusOffset!==u.offset)&&(re=re.createRange(),re.setStart(o.node,o.offset),ie.removeAllRanges(),de>d?(ie.addRange(re),ie.extend(u.node,u.offset)):(re.setEnd(u.node,u.offset),ie.addRange(re)))))),re=[],ie=Z;ie=ie.parentNode;)ie.nodeType===1&&re.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<re.length;Z++)ie=re[Z],ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}Py=!!sw,aw=sw=null,e.current=n,Zt=r;do try{for(Z=e;Zt!==null;){var xe=Zt.flags;if(xe&36&&w6(Z,Zt.alternate,Zt),xe&128){re=void 0;var Ce=Zt.ref;if(Ce!==null){var je=Zt.stateNode;switch(Zt.tag){case 5:re=je;break;default:re=je}typeof Ce=="function"?Ce(re):Ce.current=re}}Zt=Zt.nextEffect}}catch(ze){if(Zt===null)throw Error(It(330));cc(Zt,ze),Zt=Zt.nextEffect}while(Zt!==null);Zt=null,u6(),vn=s}else e.current=n;if(oc)oc=!1,Im=e,Pm=t;else for(Zt=r;Zt!==null;)t=Zt.nextEffect,Zt.nextEffect=null,Zt.flags&8&&(xe=Zt,xe.sibling=null,xe.stateNode=null),Zt=t;if(r=e.pendingLanes,r===0&&(pa=null),r===1?e===Jw?Om++:(Om=0,Jw=e):Om=0,n=n.stateNode,vu&&typeof vu.onCommitFiberRoot=="function")try{vu.onCommitFiberRoot(dw,n,void 0,(n.current.flags&64)==64)}catch{}if(ds(e,Kr()),h0)throw h0=!1,e=Zw,Zw=null,e;return(vn&8)!=0||ua(),null}function A6(){for(;Zt!==null;){var e=Zt.alternate;p0||Lm===null||((Zt.flags&8)!=0?Nk(Zt,Lm)&&(p0=!0):Zt.tag===13&&E6(e,Zt)&&Nk(Zt,Lm)&&(p0=!0));var t=Zt.flags;(t&256)!=0&&b6(e,Zt),(t&512)==0||oc||(oc=!0,_m(97,function(){return lc(),null})),Zt=Zt.nextEffect}}function lc(){if(Pm!==90){var e=97<Pm?97:Pm;return Pm=90,xu(e,I6)}return!1}function D6(e,t){Xw.push(t,e),oc||(oc=!0,_m(97,function(){return lc(),null}))}function ZD(e,t){Kw.push(t,e),oc||(oc=!0,_m(97,function(){return lc(),null}))}function I6(){if(Im===null)return!1;var e=Im;if(Im=null,(vn&48)!=0)throw Error(It(331));var t=vn;vn|=32;var n=Kw;Kw=[];for(var r=0;r<n.length;r+=2){var s=n[r],u=n[r+1],d=s.destroy;if(s.destroy=void 0,typeof d=="function")try{d()}catch(y){if(u===null)throw Error(It(330));cc(u,y)}}for(n=Xw,Xw=[],r=0;r<n.length;r+=2){s=n[r],u=n[r+1];try{var o=s.create;s.destroy=o()}catch(y){if(u===null)throw Error(It(330));cc(u,y)}}for(o=e.current.firstEffect;o!==null;)e=o.nextEffect,o.nextEffect=null,o.flags&8&&(o.sibling=null,o.stateNode=null),o=e;return vn=t,ua(),!0}function XD(e,t,n){t=Bw(n,t),t=PD(e,t,1),ic(e,t),t=qo(),e=m0(e,1),e!==null&&(Iy(e,1,t),ds(e,t))}function cc(e,t){if(e.tag===3)XD(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){XD(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pa===null||!pa.has(r))){e=Bw(t,e);var s=OD(n,e,1);if(ic(n,s),s=qo(),n=m0(n,1),n!==null)Iy(n,1,s),ds(n,s);else if(typeof r.componentDidCatch=="function"&&(pa===null||!pa.has(r)))try{r.componentDidCatch(t,e)}catch{}break}}n=n.return}}function P6(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qo(),e.pingedLanes|=e.suspendedLanes&n,_o===e&&(Qr&n)===n&&(Nr===4||Nr===3&&(Qr&62914560)===Qr&&500>Kr()-qw?Ed(e,0):Ww|=n),ds(e,t)}function O6(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,(t&2)==0?t=1:(t&4)==0?t=pd()===99?1:2:(Qa===0&&(Qa=vd),t=rd(62914560&~Qa),t===0&&(t=4194304))),n=qo(),e=m0(e,t),e!==null&&(Iy(e,t,n),ds(e,n))}var KD;KD=function(e,t,n){var r=t.lanes;if(e!==null)if(e.memoizedProps!==t.pendingProps||Ao.current)Fs=!0;else if((n&r)!=0)Fs=(e.flags&16384)!=0;else{switch(Fs=!1,t.tag){case 3:wD(t),Tw();break;case 5:iD(t);break;case 1:Do(t.type)&&Gy(t);break;case 4:ww(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var s=t.type._context;Ki(qy,s._currentValue),s._currentValue=r;break;case 13:if(t.memoizedState!==null)return(n&t.child.childLanes)!=0?ED(e,t,n):(Ki(Ji,Ji.current&1),t=Ka(e,t,n),t!==null?t.sibling:null);Ki(Ji,Ji.current&1);break;case 19:if(r=(n&t.childLanes)!=0,(e.flags&64)!=0){if(r)return kD(e,t,n);t.flags|=64}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ki(Ji,Ji.current),r)break;return null;case 23:case 24:return t.lanes=0,Ow(e,t,n)}return Ka(e,t,n)}else Fs=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=fd(t,Xr.current),gd(t,n),s=kw(null,t,r,e,s,n),t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Do(r)){var u=!0;Gy(t)}else u=!1;t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xw(t);var d=r.getDerivedStateFromProps;typeof d=="function"&&Xy(t,r,d,e),s.updater=Ky,t.stateNode=s,s._reactInternals=t,bw(t,r,e,n),t=zw(null,t,r,!0,u,n)}else t.tag=0,Po(null,t,s,n),t=t.child;return t;case 16:s=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=z6(s),e=Rs(s,e),u){case 0:t=Lw(null,t,s,e,n);break e;case 1:t=bD(null,t,s,e,n);break e;case 11:t=_D(null,t,s,e,n);break e;case 14:t=yD(null,t,s,Rs(s.type,e),r,n);break e}throw Error(It(306,s,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rs(r,s),Lw(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rs(r,s),bD(e,t,r,s,n);case 3:if(wD(t),r=t.updateQueue,e===null||r===null)throw Error(It(282));if(r=t.pendingProps,s=t.memoizedState,s=s!==null?s.element:null,YA(e,t),ym(t,r,null,n),r=t.memoizedState.element,r===s)Tw(),t=Ka(e,t,n);else{if(s=t.stateNode,(u=s.hydrate)&&(rc=cd(t.stateNode.containerInfo.firstChild),Xa=t,u=da=!0),u){if(e=s.mutableSourceEagerHydrationData,e!=null)for(s=0;s<e.length;s+=2)u=e[s],u._workInProgressVersionPrimary=e[s+1],yd.push(u);for(n=nD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else Po(e,t,r,n),Tw();t=t.child}return t;case 5:return iD(t),e===null&&Sw(t),r=t.type,s=t.pendingProps,u=e!==null?e.memoizedProps:null,d=s.children,lw(r,s)?d=null:u!==null&&lw(r,u)&&(t.flags|=16),xD(e,t),Po(e,t,d,n),t.child;case 6:return e===null&&Sw(t),null;case 13:return ED(e,t,n);case 4:return ww(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=e0(t,null,r,n):Po(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rs(r,s),_D(e,t,r,s,n);case 7:return Po(e,t,t.pendingProps,n),t.child;case 8:return Po(e,t,t.pendingProps.children,n),t.child;case 12:return Po(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,s=t.pendingProps,d=t.memoizedProps,u=s.value;var o=t.type._context;if(Ki(qy,o._currentValue),o._currentValue=u,d!==null)if(o=d.value,u=cs(o,u)?0:(typeof r._calculateChangedBits=="function"?r._calculateChangedBits(o,u):1073741823)|0,u===0){if(d.children===s.children&&!Ao.current){t=Ka(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var y=o.dependencies;if(y!==null){d=o.child;for(var w=y.firstContext;w!==null;){if(w.context===r&&(w.observedBits&u)!=0){o.tag===1&&(w=nc(-1,n&-n),w.tag=2,ic(o,w)),o.lanes|=n,w=o.alternate,w!==null&&(w.lanes|=n),qA(o.return,n),y.lanes|=n;break}w=w.next}}else d=o.tag===10&&o.type===t.type?null:o.child;if(d!==null)d.return=o;else for(d=o;d!==null;){if(d===t){d=null;break}if(o=d.sibling,o!==null){o.return=d.return,d=o;break}d=d.return}o=d}Po(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,u=t.pendingProps,r=u.children,gd(t,n),s=us(s,u.unstable_observedBits),r=r(s),t.flags|=1,Po(e,t,r,n),t.child;case 14:return s=t.type,u=Rs(s,t.pendingProps),u=Rs(s.type,u),yD(e,t,s,u,r,n);case 15:return vD(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Rs(r,s),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Do(r)?(e=!0,Gy(t)):e=!1,gd(t,n),QA(t,r,s),bw(t,r,s,n),zw(null,t,r,!0,e,n);case 19:return kD(e,t,n);case 23:return Ow(e,t,n);case 24:return Ow(e,t,n)}throw Error(It(156,t.tag))};function L6(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(e,t,n,r){return new L6(e,t,n,r)}function t2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function z6(e){if(typeof e=="function")return t2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yy)return 11;if(e===xy)return 14}return 2}function uc(e,t){var n=e.alternate;return n===null?(n=fs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _0(e,t,n,r,s,u){var d=2;if(r=e,typeof e=="function")t2(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Wl:return Sd(n.children,s,u,t);case _k:d=8,s|=16;break;case hb:d=8,s|=1;break;case Hp:return e=fs(12,n,t,s|8),e.elementType=Hp,e.type=Hp,e.lanes=u,e;case qp:return e=fs(13,n,t,s),e.type=qp,e.elementType=qp,e.lanes=u,e;case vy:return e=fs(19,n,t,s),e.elementType=vy,e.lanes=u,e;case _b:return n2(n,s,u,t);case yb:return e=fs(24,n,t,s),e.elementType=yb,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case db:d=10;break e;case fb:d=9;break e;case yy:d=11;break e;case xy:d=14;break e;case pb:d=16,r=null;break e;case mb:d=22;break e}throw Error(It(130,e==null?e:typeof e,""))}return t=fs(d,n,t,s),t.elementType=e,t.type=r,t.lanes=u,t}function Sd(e,t,n,r){return e=fs(7,e,r,t),e.lanes=n,e}function n2(e,t,n,r){return e=fs(23,e,r,t),e.elementType=_b,e.lanes=n,e}function i2(e,t,n){return e=fs(6,e,null,t),e.lanes=n,e}function r2(e,t,n){return t=fs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function R6(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Gb(0),this.expirationTimes=Gb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gb(0),this.mutableSourceEagerHydrationData=null}function F6(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function y0(e,t,n,r){var s=t.current,u=qo(),d=sc(s);e:if(n){n=n._reactInternals;t:{if(gu(n)!==n||n.tag!==1)throw Error(It(170));var o=n;do{switch(o.tag){case 3:o=o.stateNode.context;break t;case 1:if(Do(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break t}}o=o.return}while(o!==null);throw Error(It(171))}if(n.tag===1){var y=n.type;if(Do(y)){n=FA(n,y,o);break e}}n=o}else n=ec;return t.context===null?t.context=n:t.pendingContext=n,t=nc(u,d),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),ic(s,t),ac(s,d,u),d}function o2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function JD(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function s2(e,t){JD(e,t),(e=e.alternate)&&JD(e,t)}function B6(){return null}function a2(e,t,n){var r=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new R6(e,t,n!=null&&n.hydrate===!0),t=fs(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,xw(t),e[ud]=n.current,CA(e.nodeType===8?e.parentNode:e),r)for(e=0;e<r.length;e++){t=r[e];var s=t._getVersion;s=s(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,s]:n.mutableSourceEagerHydrationData.push(t,s)}this._internalRoot=n}a2.prototype.render=function(e){y0(e,this._internalRoot,null,null)};a2.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;y0(null,e,null,function(){t[ud]=null})};function Rm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function N6(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new a2(e,0,t?{hydrate:!0}:void 0)}function v0(e,t,n,r,s){var u=n._reactRootContainer;if(u){var d=u._internalRoot;if(typeof s=="function"){var o=s;s=function(){var w=o2(d);o.call(w)}}y0(t,d,e,s)}else{if(u=n._reactRootContainer=N6(n,r),d=u._internalRoot,typeof s=="function"){var y=s;s=function(){var w=o2(d);y.call(w)}}GD(function(){y0(t,d,e,s)})}return o2(d)}Vk=function(e){if(e.tag===13){var t=qo();ac(e,4,t),s2(e,4)}};Bb=function(e){if(e.tag===13){var t=qo();ac(e,67108864,t),s2(e,67108864)}};jk=function(e){if(e.tag===13){var t=qo(),n=sc(e);ac(e,n,t),s2(e,n)}};Uk=function(e,t){return t()};Ib=function(e,t,n){switch(t){case"input":if(wb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Uy(r);if(!s)throw Error(It(90));xk(r),wb(r,s)}}}break;case"textarea":Tk(e,n);break;case"select":t=n.value,t!=null&&Qh(e,!!n.multiple,t,!1)}};Pb=$D;Lk=function(e,t,n,r,s){var u=vn;vn|=4;try{return xu(98,e.bind(null,t,n,r,s))}finally{vn=u,vn===0&&(bd(),ua())}};Ob=function(){(vn&49)==0&&(T6(),lc())};zk=function(e,t){var n=vn;vn|=2;try{return e(t)}finally{vn=n,vn===0&&(bd(),ua())}};function QD(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rm(t))throw Error(It(200));return F6(e,t,null,n)}var V6={Events:[gm,hd,Uy,Pk,Ok,lc,{current:!1}]},Fm={findFiberByHostInstance:_u,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},j6={bundleType:Fm.bundleType,version:Fm.version,rendererPackageName:Fm.rendererPackageName,rendererConfig:Fm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bk(e),e===null?null:e.stateNode},findFiberByHostInstance:Fm.findFiberByHostInstance||B6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var x0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!x0.isDisabled&&x0.supportsFiber)try{dw=x0.inject(j6),vu=x0}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V6;ls.createPortal=QD;ls.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(It(188)):Error(It(268,Object.keys(e)));return e=Bk(t),e=e===null?null:e.stateNode,e};ls.flushSync=function(e,t){var n=vn;if((n&48)!=0)return e(t);vn|=1;try{if(e)return xu(99,e.bind(null,t))}finally{vn=n,ua()}};ls.hydrate=function(e,t,n){if(!Rm(t))throw Error(It(200));return v0(null,e,t,!0,n)};ls.render=function(e,t,n){if(!Rm(t))throw Error(It(200));return v0(null,e,t,!1,n)};ls.unmountComponentAtNode=function(e){if(!Rm(e))throw Error(It(40));return e._reactRootContainer?(GD(function(){v0(null,null,e,!1,function(){e._reactRootContainer=null,e[ud]=null})}),!0):!1};ls.unstable_batchedUpdates=$D;ls.unstable_createPortal=function(e,t){return QD(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};ls.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Rm(n))throw Error(It(200));if(e==null||e._reactInternals===void 0)throw Error(It(38));return v0(e,t,n,!1,r)};ls.version="17.0.2";function eI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eI)}catch(e){console.error(e)}}eI(),$p.exports=ls;var l2=$p.exports;function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ln.apply(this,arguments)}var Cu,c2=Cu||(Cu={});c2.Pop="POP";c2.Push="PUSH";c2.Replace="REPLACE";var tI=function(e){return e};function nI(e){e.preventDefault(),e.returnValue=""}function iI(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter(function(n){return n!==t})}},call:function(t){e.forEach(function(n){return n&&n(t)})}}}function U6(){return Math.random().toString(36).substr(2,8)}function u2(e){var t=e.pathname;t=t===void 0?"/":t;var n=e.search;return n=n===void 0?"":n,e=e.hash,e=e===void 0?"":e,n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),e&&e!=="#"&&(t+=e.charAt(0)==="#"?e:"#"+e),t}function Mu(e){var t={};if(e){var n=e.indexOf("#");0<=n&&(t.hash=e.substr(n),e=e.substr(0,n)),n=e.indexOf("?"),0<=n&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function $6(e){function t(){var B=y.location,U=w.state||{};return[U.idx,tI({pathname:B.pathname,search:B.search,hash:B.hash,state:U.usr||null,key:U.key||"default"})]}function n(B){return typeof B=="string"?B:u2(B)}function r(B,U){return U===void 0&&(U=null),tI(ln({pathname:$.pathname,hash:"",search:""},typeof B=="string"?Mu(B):B,{state:U,key:U6()}))}function s(B){k=B,B=t(),O=B[0],$=B[1],j.call({action:k,location:$})}function u(B,U){function Z(){u(B,U)}var re=Cu.Push,ie=r(B,U);if(!G.length||(G.call({action:re,location:ie,retry:Z}),!1)){var de=[{usr:ie.state,key:ie.key,idx:O+1},n(ie)];ie=de[0],de=de[1];try{w.pushState(ie,"",de)}catch{y.location.assign(de)}s(re)}}function d(B,U){function Z(){d(B,U)}var re=Cu.Replace,ie=r(B,U);G.length&&(G.call({action:re,location:ie,retry:Z}),1)||(ie=[{usr:ie.state,key:ie.key,idx:O},n(ie)],w.replaceState(ie[0],"",ie[1]),s(re))}function o(B){w.go(B)}e===void 0&&(e={}),e=e.window;var y=e===void 0?document.defaultView:e,w=y.history,M=null;y.addEventListener("popstate",function(){if(M)G.call(M),M=null;else{var B=Cu.Pop,U=t(),Z=U[0];if(U=U[1],G.length){if(Z!=null){var re=O-Z;re&&(M={action:B,location:U,retry:function(){o(-1*re)}},o(re))}}else s(B)}});var k=Cu.Pop;e=t();var O=e[0],$=e[1],j=iI(),G=iI();return O==null&&(O=0,w.replaceState(ln({},w.state,{idx:O}),"")),{get action(){return k},get location(){return $},createHref:n,push:u,replace:d,go:o,back:function(){o(-1)},forward:function(){o(1)},listen:function(B){return j.push(B)},block:function(B){var U=G.push(B);return G.length===1&&y.addEventListener("beforeunload",nI),function(){U(),G.length||y.removeEventListener("beforeunload",nI)}}}}/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bs(e,t){if(!e)throw new Error(t)}const h2=ke.exports.createContext(null),d2=ke.exports.createContext(null),Td=ke.exports.createContext({outlet:null,matches:[]});function NQ(e){let{to:t,replace:n,state:r}=e;Cd()||Bs(!1);let s=rI();return ke.exports.useEffect(()=>{s(t,{replace:n,state:r})}),null}function G6(e){return Z6(e.context)}function W6(e){Bs(!1)}function H6(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Cu.Pop,navigator:u,static:d=!1}=e;Cd()&&Bs(!1);let o=mN(t),y=ke.exports.useMemo(()=>({basename:o,navigator:u,static:d}),[o,u,d]);typeof r=="string"&&(r=Mu(r));let{pathname:w="/",search:M="",hash:k="",state:O=null,key:$="default"}=r,j=ke.exports.useMemo(()=>{let G=lI(w,o);return G==null?null:{pathname:G,search:M,hash:k,state:O,key:$}},[o,w,M,k,O,$]);return j==null?null:ke.exports.createElement(h2.Provider,{value:y},ke.exports.createElement(d2.Provider,{children:n,value:{location:j,navigationType:s}}))}function VQ(e){let{children:t,location:n}=e;return X6(p2(t),n)}function q6(e){Cd()||Bs(!1);let{basename:t,navigator:n}=ke.exports.useContext(h2),{hash:r,pathname:s,search:u}=f2(e),d=s;if(t!=="/"){let o=pN(e),y=o!=null&&o.endsWith("/");d=s==="/"?t+(y?"/":""):hc([t,s])}return n.createHref({pathname:d,search:u,hash:r})}function Cd(){return ke.exports.useContext(d2)!=null}function Bm(){return Cd()||Bs(!1),ke.exports.useContext(d2).location}function rI(){Cd()||Bs(!1);let{basename:e,navigator:t}=ke.exports.useContext(h2),{matches:n}=ke.exports.useContext(Td),{pathname:r}=Bm(),s=JSON.stringify(n.map(o=>o.pathnameBase)),u=ke.exports.useRef(!1);return ke.exports.useEffect(()=>{u.current=!0}),ke.exports.useCallback(function(o,y){if(y===void 0&&(y={}),!u.current)return;if(typeof o=="number"){t.go(o);return}let w=aI(o,JSON.parse(s),r);e!=="/"&&(w.pathname=hc([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state)},[e,t,s,r])}const Y6=ke.exports.createContext(null);function Z6(e){let t=ke.exports.useContext(Td).outlet;return t&&ke.exports.createElement(Y6.Provider,{value:e},t)}function jQ(){let{matches:e}=ke.exports.useContext(Td),t=e[e.length-1];return t?t.params:{}}function f2(e){let{matches:t}=ke.exports.useContext(Td),{pathname:n}=Bm(),r=JSON.stringify(t.map(s=>s.pathnameBase));return ke.exports.useMemo(()=>aI(e,JSON.parse(r),n),[e,r,n])}function X6(e,t){Cd()||Bs(!1);let{matches:n}=ke.exports.useContext(Td),r=n[n.length-1],s=r?r.params:{};r&&r.pathname;let u=r?r.pathnameBase:"/";r&&r.route;let d=Bm(),o;if(t){var y;let O=typeof t=="string"?Mu(t):t;u==="/"||((y=O.pathname)==null?void 0:y.startsWith(u))||Bs(!1),o=O}else o=d;let w=o.pathname||"/",M=u==="/"?w:w.slice(u.length)||"/",k=K6(e,{pathname:M});return lN(k&&k.map(O=>Object.assign({},O,{params:Object.assign({},s,O.params),pathname:hc([u,O.pathname]),pathnameBase:O.pathnameBase==="/"?u:hc([u,O.pathnameBase])})),n)}function p2(e){let t=[];return ke.exports.Children.forEach(e,n=>{if(!ke.exports.isValidElement(n))return;if(n.type===ke.exports.Fragment){t.push.apply(t,p2(n.props.children));return}n.type!==W6&&Bs(!1);let r={caseSensitive:n.props.caseSensitive,element:n.props.element,index:n.props.index,path:n.props.path};n.props.children&&(r.children=p2(n.props.children)),t.push(r)}),t}function K6(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Mu(t):t,s=lI(r.pathname||"/",n);if(s==null)return null;let u=oI(e);J6(u);let d=null;for(let o=0;d==null&&o<u.length;++o)d=aN(u[o],s);return d}function oI(e,t,n,r){return t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r=""),e.forEach((s,u)=>{let d={relativePath:s.path||"",caseSensitive:s.caseSensitive===!0,childrenIndex:u,route:s};d.relativePath.startsWith("/")&&(d.relativePath.startsWith(r)||Bs(!1),d.relativePath=d.relativePath.slice(r.length));let o=hc([r,d.relativePath]),y=n.concat(d);s.children&&s.children.length>0&&(s.index===!0&&Bs(!1),oI(s.children,t,y,o)),!(s.path==null&&!s.index)&&t.push({path:o,score:oN(o,s.index),routesMeta:y})}),t}function J6(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sN(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Q6=/^:\w+$/,eN=3,tN=2,nN=1,iN=10,rN=-2,sI=e=>e==="*";function oN(e,t){let n=e.split("/"),r=n.length;return n.some(sI)&&(r+=rN),t&&(r+=tN),n.filter(s=>!sI(s)).reduce((s,u)=>s+(Q6.test(u)?eN:u===""?nN:iN),r)}function sN(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function aN(e,t){let{routesMeta:n}=e,r={},s="/",u=[];for(let d=0;d<n.length;++d){let o=n[d],y=d===n.length-1,w=s==="/"?t:t.slice(s.length)||"/",M=cN({path:o.relativePath,caseSensitive:o.caseSensitive,end:y},w);if(!M)return null;Object.assign(r,M.params);let k=o.route;u.push({params:r,pathname:hc([s,M.pathname]),pathnameBase:hc([s,M.pathnameBase]),route:k}),M.pathnameBase!=="/"&&(s=hc([s,M.pathnameBase]))}return u}function lN(e,t){return t===void 0&&(t=[]),e==null?null:e.reduceRight((n,r,s)=>ke.exports.createElement(Td.Provider,{children:r.route.element!==void 0?r.route.element:ke.exports.createElement(G6,null),value:{outlet:n,matches:t.concat(e.slice(0,s+1))}}),null)}function cN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=uN(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let u=s[0],d=u.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:r.reduce((w,M,k)=>{if(M==="*"){let O=o[k]||"";d=u.slice(0,u.length-O.length).replace(/(.)\/+$/,"$1")}return w[M]=hN(o[k]||""),w},{}),pathname:u,pathnameBase:d,pattern:e}}function uN(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0);let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(d,o)=>(r.push(o),"([^\\/]+)"));return e.endsWith("*")?(r.push("*"),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s+=n?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(s,t?void 0:"i"),r]}function hN(e,t){try{return decodeURIComponent(e)}catch{return e}}function dN(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?Mu(e):e;return{pathname:n?n.startsWith("/")?n:fN(n,t):t,search:gN(r),hash:_N(s)}}function fN(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function aI(e,t,n){let r=typeof e=="string"?Mu(e):e,s=e===""||r.pathname===""?"/":r.pathname,u;if(s==null)u=n;else{let o=t.length-1;if(s.startsWith("..")){let y=s.split("/");for(;y[0]==="..";)y.shift(),o-=1;r.pathname=y.join("/")}u=o>=0?t[o]:"/"}let d=dN(r,u);return s&&s!=="/"&&s.endsWith("/")&&!d.pathname.endsWith("/")&&(d.pathname+="/"),d}function pN(e){return e===""||e.pathname===""?"/":typeof e=="string"?Mu(e).pathname:e.pathname}function lI(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=e.charAt(t.length);return n&&n!=="/"?null:e.slice(t.length)||"/"}const hc=e=>e.join("/").replace(/\/\/+/g,"/"),mN=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gN=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_N=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function b0(){return b0=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b0.apply(this,arguments)}function cI(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,u;for(u=0;u<r.length;u++)s=r[u],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}const yN=["onClick","reloadDocument","replace","state","target","to"],vN=["aria-current","caseSensitive","className","end","style","to","children"];function UQ(e){let{basename:t,children:n,window:r}=e,s=ke.exports.useRef();s.current==null&&(s.current=$6({window:r}));let u=s.current,[d,o]=ke.exports.useState({action:u.action,location:u.location});return ke.exports.useLayoutEffect(()=>u.listen(o),[u]),ke.exports.createElement(H6,{basename:t,children:n,location:d.location,navigationType:d.action,navigator:u})}function xN(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const bN=ke.exports.forwardRef(function(t,n){let{onClick:r,reloadDocument:s,replace:u=!1,state:d,target:o,to:y}=t,w=cI(t,yN),M=q6(y),k=wN(y,{replace:u,state:d,target:o});function O($){r&&r($),!$.defaultPrevented&&!s&&k($)}return ke.exports.createElement("a",b0({},w,{href:M,onClick:O,ref:n,target:o}))}),$Q=ke.exports.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:u="",end:d=!1,style:o,to:y,children:w}=t,M=cI(t,vN),k=Bm(),O=f2(y),$=k.pathname,j=O.pathname;s||($=$.toLowerCase(),j=j.toLowerCase());let G=$===j||!d&&$.startsWith(j)&&$.charAt(j.length)==="/",B=G?r:void 0,U;typeof u=="function"?U=u({isActive:G}):U=[u,G?"active":null].filter(Boolean).join(" ");let Z=typeof o=="function"?o({isActive:G}):o;return ke.exports.createElement(bN,b0({},M,{"aria-current":B,className:U,ref:n,style:Z,to:y}),typeof w=="function"?w({isActive:G}):w)});function wN(e,t){let{target:n,replace:r,state:s}=t===void 0?{}:t,u=rI(),d=Bm(),o=f2(e);return ke.exports.useCallback(y=>{if(y.button===0&&(!n||n==="_self")&&!xN(y)){y.preventDefault();let w=!!r||u2(d)===u2(o);u(e,{replace:w,state:s})}},[d,u,o,r,s,n,e])}var w0={exports:{}},Nm={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EN=ke.exports,uI=60103;Nm.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var hI=Symbol.for;uI=hI("react.element"),Nm.Fragment=hI("react.fragment")}var SN=EN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TN=Object.prototype.hasOwnProperty,CN={key:!0,ref:!0,__self:!0,__source:!0};function dI(e,t,n){var r,s={},u=null,d=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(d=t.ref);for(r in t)TN.call(t,r)&&!CN.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:uI,type:e,key:u,ref:d,props:s,_owner:SN.current}}Nm.jsx=dI;Nm.jsxs=dI;w0.exports=Nm;const MN=w0.exports.jsx,GQ=w0.exports.jsxs,kN=w0.exports.Fragment;/*!
 * Chart.js v3.7.0
 * https://www.chartjs.org
 * (c) 2021 Chart.js Contributors
 * Released under the MIT License
 */const fI=function(){return typeof window=="undefined"?function(e){return e()}:window.requestAnimationFrame}();function pI(e,t,n){const r=n||(d=>Array.prototype.slice.call(d));let s=!1,u=[];return function(...d){u=r(d),s||(s=!0,fI.call(window,()=>{s=!1,e.apply(t,u)}))}}function AN(e,t){let n;return function(...r){return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}const mI=e=>e==="start"?"left":e==="end"?"right":"center",Yo=(e,t,n)=>e==="start"?t:e==="end"?n:(t+n)/2,DN=(e,t,n,r)=>e===(r?"left":"right")?n:e==="center"?(t+n)/2:t;function el(){}const IN=function(){let e=0;return function(){return e++}}();function fi(e){return e===null||typeof e=="undefined"}function Bi(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return t.substr(0,7)==="[object"&&t.substr(-6)==="Array]"}function Nn(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const rr=e=>(typeof e=="number"||e instanceof Number)&&isFinite(+e);function ps(e,t){return rr(e)?e:t}function Mn(e,t){return typeof e=="undefined"?t:e}const PN=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100:e/t,gI=(e,t)=>typeof e=="string"&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ii(e,t,n){if(e&&typeof e.call=="function")return e.apply(n,t)}function pi(e,t,n,r){let s,u,d;if(Bi(e))if(u=e.length,r)for(s=u-1;s>=0;s--)t.call(n,e[s],s);else for(s=0;s<u;s++)t.call(n,e[s],s);else if(Nn(e))for(d=Object.keys(e),u=d.length,s=0;s<u;s++)t.call(n,e[d[s]],d[s])}function E0(e,t){let n,r,s,u;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(s=e[n],u=t[n],s.datasetIndex!==u.datasetIndex||s.index!==u.index)return!1;return!0}function S0(e){if(Bi(e))return e.map(S0);if(Nn(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let s=0;for(;s<r;++s)t[n[s]]=S0(e[n[s]]);return t}return e}function _I(e){return["__proto__","prototype","constructor"].indexOf(e)===-1}function ON(e,t,n,r){if(!_I(e))return;const s=t[e],u=n[e];Nn(s)&&Nn(u)?Vm(s,u,r):t[e]=S0(u)}function Vm(e,t,n){const r=Bi(t)?t:[t],s=r.length;if(!Nn(e))return e;n=n||{};const u=n.merger||ON;for(let d=0;d<s;++d){if(t=r[d],!Nn(t))continue;const o=Object.keys(t);for(let y=0,w=o.length;y<w;++y)u(o[y],e,t,n)}return e}function jm(e,t){return Vm(e,t,{merger:LN})}function LN(e,t,n){if(!_I(e))return;const r=t[e],s=n[e];Nn(r)&&Nn(s)?jm(r,s):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=S0(s))}const zN="",RN=".";function yI(e,t){const n=e.indexOf(RN,t);return n===-1?e.length:n}function ku(e,t){if(t===zN)return e;let n=0,r=yI(t,n);for(;e&&r>n;)e=e[t.substr(n,r-n)],n=r+1,r=yI(t,n);return e}function m2(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ms=e=>typeof e!="undefined",dc=e=>typeof e=="function",vI=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};function FN(e){return e.type==="mouseup"||e.type==="click"||e.type==="contextmenu"}const Qi=Math.PI,Ti=2*Qi,BN=Ti+Qi,T0=Number.POSITIVE_INFINITY,NN=Qi/180,er=Qi/2,Um=Qi/4,xI=Qi*2/3,gs=Math.log10,ma=Math.sign;function bI(e){const t=Math.round(e);e=Gm(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(gs(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function VN(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r==0&&(t.push(r),t.push(e/r));return n===(n|0)&&t.push(n),t.sort((s,u)=>s-u).pop(),t}function $m(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Gm(e,t,n){return Math.abs(e-t)<n}function jN(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}function wI(e,t,n){let r,s,u;for(r=0,s=e.length;r<s;r++)u=e[r][n],isNaN(u)||(t.min=Math.min(t.min,u),t.max=Math.max(t.max,u))}function Ns(e){return e*(Qi/180)}function g2(e){return e*(180/Qi)}function EI(e){if(!rr(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function SI(e,t){const n=t.x-e.x,r=t.y-e.y,s=Math.sqrt(n*n+r*r);let u=Math.atan2(r,n);return u<-.5*Qi&&(u+=Ti),{angle:u,distance:s}}function _2(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function UN(e,t){return(e-t+BN)%Ti-Qi}function Zo(e){return(e%Ti+Ti)%Ti}function Wm(e,t,n,r){const s=Zo(e),u=Zo(t),d=Zo(n),o=Zo(u-s),y=Zo(d-s),w=Zo(s-u),M=Zo(s-d);return s===u||s===d||r&&u===d||o>y&&w<M}function eo(e,t,n){return Math.max(t,Math.min(n,e))}function $N(e){return eo(e,-32768,32767)}function tl(e,t,n,r=1e-6){return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}const C0=e=>e===0||e===1,TI=(e,t,n)=>-(Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ti/n)),CI=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ti/n)+1,Hm={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>-Math.cos(e*er)+1,easeOutSine:e=>Math.sin(e*er),easeInOutSine:e=>-.5*(Math.cos(Qi*e)-1),easeInExpo:e=>e===0?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>e===1?1:-Math.pow(2,-10*e)+1,easeInOutExpo:e=>C0(e)?e:e<.5?.5*Math.pow(2,10*(e*2-1)):.5*(-Math.pow(2,-10*(e*2-1))+2),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>C0(e)?e:TI(e,.075,.3),easeOutElastic:e=>C0(e)?e:CI(e,.075,.3),easeInOutElastic(e){const t=.1125,n=.45;return C0(e)?e:e<.5?.5*TI(e*2,t,n):.5+.5*CI(e*2-1,t,n)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:e=>1-Hm.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?Hm.easeInBounce(e*2)*.5:Hm.easeOutBounce(e*2-1)*.5+.5};/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */const _s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},y2="0123456789ABCDEF",GN=e=>y2[e&15],WN=e=>y2[(e&240)>>4]+y2[e&15],M0=e=>(e&240)>>4==(e&15);function HN(e){return M0(e.r)&&M0(e.g)&&M0(e.b)&&M0(e.a)}function qN(e){var t=e.length,n;return e[0]==="#"&&(t===4||t===5?n={r:255&_s[e[1]]*17,g:255&_s[e[2]]*17,b:255&_s[e[3]]*17,a:t===5?_s[e[4]]*17:255}:(t===7||t===9)&&(n={r:_s[e[1]]<<4|_s[e[2]],g:_s[e[3]]<<4|_s[e[4]],b:_s[e[5]]<<4|_s[e[6]],a:t===9?_s[e[7]]<<4|_s[e[8]]:255})),n}function YN(e){var t=HN(e)?GN:WN;return e&&"#"+t(e.r)+t(e.g)+t(e.b)+(e.a<255?t(e.a):"")}function qm(e){return e+.5|0}const k0=(e,t,n)=>Math.max(Math.min(e,n),t);function Ym(e){return k0(qm(e*2.55),0,255)}function Zm(e){return k0(qm(e*255),0,255)}function v2(e){return k0(qm(e/2.55)/100,0,1)}function MI(e){return k0(qm(e*100),0,100)}const ZN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function XN(e){const t=ZN.exec(e);let n=255,r,s,u;if(!!t){if(t[7]!==r){const d=+t[7];n=255&(t[8]?Ym(d):d*255)}return r=+t[1],s=+t[3],u=+t[5],r=255&(t[2]?Ym(r):r),s=255&(t[4]?Ym(s):s),u=255&(t[6]?Ym(u):u),{r,g:s,b:u,a:n}}}function KN(e){return e&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${v2(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`)}const JN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function kI(e,t,n){const r=t*Math.min(n,1-n),s=(u,d=(u+e/30)%12)=>n-r*Math.max(Math.min(d-3,9-d,1),-1);return[s(0),s(8),s(4)]}function QN(e,t,n){const r=(s,u=(s+e/60)%6)=>n-n*t*Math.max(Math.min(u,4-u,1),0);return[r(5),r(3),r(1)]}function eV(e,t,n){const r=kI(e,1,.5);let s;for(t+n>1&&(s=1/(t+n),t*=s,n*=s),s=0;s<3;s++)r[s]*=1-t-n,r[s]+=t;return r}function x2(e){const t=255,n=e.r/t,r=e.g/t,s=e.b/t,u=Math.max(n,r,s),d=Math.min(n,r,s),o=(u+d)/2;let y,w,M;return u!==d&&(M=u-d,w=o>.5?M/(2-u-d):M/(u+d),y=u===n?(r-s)/M+(r<s?6:0):u===r?(s-n)/M+2:(n-r)/M+4,y=y*60+.5),[y|0,w||0,o]}function b2(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Zm)}function w2(e,t,n){return b2(kI,e,t,n)}function tV(e,t,n){return b2(eV,e,t,n)}function nV(e,t,n){return b2(QN,e,t,n)}function AI(e){return(e%360+360)%360}function iV(e){const t=JN.exec(e);let n=255,r;if(!t)return;t[5]!==r&&(n=t[6]?Ym(+t[5]):Zm(+t[5]));const s=AI(+t[2]),u=+t[3]/100,d=+t[4]/100;return t[1]==="hwb"?r=tV(s,u,d):t[1]==="hsv"?r=nV(s,u,d):r=w2(s,u,d),{r:r[0],g:r[1],b:r[2],a:n}}function rV(e,t){var n=x2(e);n[0]=AI(n[0]+t),n=w2(n),e.r=n[0],e.g=n[1],e.b=n[2]}function oV(e){if(!e)return;const t=x2(e),n=t[0],r=MI(t[1]),s=MI(t[2]);return e.a<255?`hsla(${n}, ${r}%, ${s}%, ${v2(e.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const DI={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},II={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sV(){const e={},t=Object.keys(II),n=Object.keys(DI);let r,s,u,d,o;for(r=0;r<t.length;r++){for(d=o=t[r],s=0;s<n.length;s++)u=n[s],o=o.replace(u,DI[u]);u=parseInt(II[d],16),e[o]=[u>>16&255,u>>8&255,u&255]}return e}let A0;function aV(e){A0||(A0=sV(),A0.transparent=[0,0,0,0]);const t=A0[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}function D0(e,t,n){if(e){let r=x2(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,t===0?360:1)),r=w2(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function PI(e,t){return e&&Object.assign(t||{},e)}function OI(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Zm(e[3]))):(t=PI(e,{r:0,g:0,b:0,a:1}),t.a=Zm(t.a)),t}function lV(e){return e.charAt(0)==="r"?XN(e):iV(e)}class I0{constructor(t){if(t instanceof I0)return t;const n=typeof t;let r;n==="object"?r=OI(t):n==="string"&&(r=qN(t)||aV(t)||lV(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=PI(this._rgb);return t&&(t.a=v2(t.a)),t}set rgb(t){this._rgb=OI(t)}rgbString(){return this._valid?KN(this._rgb):this._rgb}hexString(){return this._valid?YN(this._rgb):this._rgb}hslString(){return this._valid?oV(this._rgb):this._rgb}mix(t,n){const r=this;if(t){const s=r.rgb,u=t.rgb;let d;const o=n===d?.5:n,y=2*o-1,w=s.a-u.a,M=((y*w==-1?y:(y+w)/(1+y*w))+1)/2;d=1-M,s.r=255&M*s.r+d*u.r+.5,s.g=255&M*s.g+d*u.g+.5,s.b=255&M*s.b+d*u.b+.5,s.a=o*s.a+(1-o)*u.a,r.rgb=s}return r}clone(){return new I0(this.rgb)}alpha(t){return this._rgb.a=Zm(t),this}clearer(t){const n=this._rgb;return n.a*=1-t,this}greyscale(){const t=this._rgb,n=qm(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=n,this}opaquer(t){const n=this._rgb;return n.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return D0(this._rgb,2,t),this}darken(t){return D0(this._rgb,2,-t),this}saturate(t){return D0(this._rgb,1,t),this}desaturate(t){return D0(this._rgb,1,-t),this}rotate(t){return rV(this._rgb,t),this}}function LI(e){return new I0(e)}const zI=e=>e instanceof CanvasGradient||e instanceof CanvasPattern;function RI(e){return zI(e)?e:LI(e)}function E2(e){return zI(e)?e:LI(e).saturate(.5).darken(.1).hexString()}const Au=Object.create(null),S2=Object.create(null);function Xm(e,t){if(!t)return e;const n=t.split(".");for(let r=0,s=n.length;r<s;++r){const u=n[r];e=e[u]||(e[u]=Object.create(null))}return e}function T2(e,t,n){return typeof t=="string"?Vm(Xm(e,t),n):Vm(Xm(e,""),t)}class cV{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>E2(r.backgroundColor),this.hoverBorderColor=(n,r)=>E2(r.borderColor),this.hoverColor=(n,r)=>E2(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t)}set(t,n){return T2(this,t,n)}get(t){return Xm(this,t)}describe(t,n){return T2(S2,t,n)}override(t,n){return T2(Au,t,n)}route(t,n,r,s){const u=Xm(this,t),d=Xm(this,r),o="_"+n;Object.defineProperties(u,{[o]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const y=this[o],w=d[s];return Nn(y)?Object.assign({},w,y):Mn(y,w)},set(y){this[o]=y}}})}}var Vn=new cV({_scriptable:e=>!e.startsWith("on"),_indexable:e=>e!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function uV(e){return!e||fi(e.size)||fi(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}function P0(e,t,n,r,s){let u=t[s];return u||(u=t[s]=e.measureText(s).width,n.push(s)),u>r&&(r=u),r}function hV(e,t,n,r){r=r||{};let s=r.data=r.data||{},u=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(s=r.data={},u=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let d=0;const o=n.length;let y,w,M,k,O;for(y=0;y<o;y++)if(k=n[y],k!=null&&Bi(k)!==!0)d=P0(e,s,u,d,k);else if(Bi(k))for(w=0,M=k.length;w<M;w++)O=k[w],O!=null&&!Bi(O)&&(d=P0(e,s,u,d,O));e.restore();const $=u.length/2;if($>n.length){for(y=0;y<$;y++)delete s[u[y]];u.splice(0,$)}return d}function Du(e,t,n){const r=e.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((t-s)*r)/r+s}function FI(e,t){t=t||e.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function O0(e,t,n,r){let s,u,d,o,y;const w=t.pointStyle,M=t.rotation,k=t.radius;let O=(M||0)*NN;if(w&&typeof w=="object"&&(s=w.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){e.save(),e.translate(n,r),e.rotate(O),e.drawImage(w,-w.width/2,-w.height/2,w.width,w.height),e.restore();return}if(!(isNaN(k)||k<=0)){switch(e.beginPath(),w){default:e.arc(n,r,k,0,Ti),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(O)*k,r-Math.cos(O)*k),O+=xI,e.lineTo(n+Math.sin(O)*k,r-Math.cos(O)*k),O+=xI,e.lineTo(n+Math.sin(O)*k,r-Math.cos(O)*k),e.closePath();break;case"rectRounded":y=k*.516,o=k-y,u=Math.cos(O+Um)*o,d=Math.sin(O+Um)*o,e.arc(n-u,r-d,y,O-Qi,O-er),e.arc(n+d,r-u,y,O-er,O),e.arc(n+u,r+d,y,O,O+er),e.arc(n-d,r+u,y,O+er,O+Qi),e.closePath();break;case"rect":if(!M){o=Math.SQRT1_2*k,e.rect(n-o,r-o,2*o,2*o);break}O+=Um;case"rectRot":u=Math.cos(O)*k,d=Math.sin(O)*k,e.moveTo(n-u,r-d),e.lineTo(n+d,r-u),e.lineTo(n+u,r+d),e.lineTo(n-d,r+u),e.closePath();break;case"crossRot":O+=Um;case"cross":u=Math.cos(O)*k,d=Math.sin(O)*k,e.moveTo(n-u,r-d),e.lineTo(n+u,r+d),e.moveTo(n+d,r-u),e.lineTo(n-d,r+u);break;case"star":u=Math.cos(O)*k,d=Math.sin(O)*k,e.moveTo(n-u,r-d),e.lineTo(n+u,r+d),e.moveTo(n+d,r-u),e.lineTo(n-d,r+u),O+=Um,u=Math.cos(O)*k,d=Math.sin(O)*k,e.moveTo(n-u,r-d),e.lineTo(n+u,r+d),e.moveTo(n+d,r-u),e.lineTo(n-d,r+u);break;case"line":u=Math.cos(O)*k,d=Math.sin(O)*k,e.moveTo(n-u,r-d),e.lineTo(n+u,r+d);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(O)*k,r+Math.sin(O)*k);break}e.fill(),t.borderWidth>0&&e.stroke()}}function Iu(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function L0(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function z0(e){e.restore()}function dV(e,t,n,r,s){if(!t)return e.lineTo(n.x,n.y);if(s==="middle"){const u=(t.x+n.x)/2;e.lineTo(u,t.y),e.lineTo(u,n.y)}else s==="after"!=!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function fV(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Md(e,t,n,r,s,u={}){const d=Bi(t)?t:[t],o=u.strokeWidth>0&&u.strokeColor!=="";let y,w;for(e.save(),e.font=s.string,pV(e,u),y=0;y<d.length;++y)w=d[y],o&&(u.strokeColor&&(e.strokeStyle=u.strokeColor),fi(u.strokeWidth)||(e.lineWidth=u.strokeWidth),e.strokeText(w,n,r,u.maxWidth)),e.fillText(w,n,r,u.maxWidth),mV(e,n,r,w,u),r+=s.lineHeight;e.restore()}function pV(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),fi(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}function mV(e,t,n,r,s){if(s.strikethrough||s.underline){const u=e.measureText(r),d=t-u.actualBoundingBoxLeft,o=t+u.actualBoundingBoxRight,y=n-u.actualBoundingBoxAscent,w=n+u.actualBoundingBoxDescent,M=s.strikethrough?(y+w)/2:w;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=s.decorationWidth||2,e.moveTo(d,M),e.lineTo(o,M),e.stroke()}}function R0(e,t){const{x:n,y:r,w:s,h:u,radius:d}=t;e.arc(n+d.topLeft,r+d.topLeft,d.topLeft,-er,Qi,!0),e.lineTo(n,r+u-d.bottomLeft),e.arc(n+d.bottomLeft,r+u-d.bottomLeft,d.bottomLeft,Qi,er,!0),e.lineTo(n+s-d.bottomRight,r+u),e.arc(n+s-d.bottomRight,r+u-d.bottomRight,d.bottomRight,er,0,!0),e.lineTo(n+s,r+d.topRight),e.arc(n+s-d.topRight,r+d.topRight,d.topRight,0,-er,!0),e.lineTo(n+d.topLeft,r)}const gV=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),_V=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function yV(e,t){const n=(""+e).match(gV);if(!n||n[1]==="normal")return t*1.2;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100;break}return t*e}const vV=e=>+e||0;function C2(e,t){const n={},r=Nn(t),s=r?Object.keys(t):t,u=Nn(e)?r?d=>Mn(e[d],e[t[d]]):d=>e[d]:()=>e;for(const d of s)n[d]=vV(u(d));return n}function BI(e){return C2(e,{top:"y",right:"x",bottom:"y",left:"x"})}function kd(e){return C2(e,["topLeft","topRight","bottomLeft","bottomRight"])}function yo(e){const t=BI(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Vr(e,t){e=e||{},t=t||Vn.font;let n=Mn(e.size,t.size);typeof n=="string"&&(n=parseInt(n,10));let r=Mn(e.style,t.style);r&&!(""+r).match(_V)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const s={family:Mn(e.family,t.family),lineHeight:yV(Mn(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:Mn(e.weight,t.weight),string:""};return s.string=uV(s),s}function F0(e,t,n,r){let s=!0,u,d,o;for(u=0,d=e.length;u<d;++u)if(o=e[u],o!==void 0&&(t!==void 0&&typeof o=="function"&&(o=o(t),s=!1),n!==void 0&&Bi(o)&&(o=o[n%o.length],s=!1),o!==void 0))return r&&!s&&(r.cacheable=!1),o}function xV(e,t,n){const{min:r,max:s}=e,u=gI(t,(s-r)/2),d=(o,y)=>n&&o===0?0:o+y;return{min:d(r,-Math.abs(u)),max:d(s,u)}}function fc(e,t){return Object.assign(Object.create(e),t)}function M2(e,t,n){n=n||(d=>e[d]<t);let r=e.length-1,s=0,u;for(;r-s>1;)u=s+r>>1,n(u)?s=u:r=u;return{lo:s,hi:r}}const Pu=(e,t,n)=>M2(e,n,r=>e[r][t]<n),bV=(e,t,n)=>M2(e,n,r=>e[r][t]>=n);function wV(e,t,n){let r=0,s=e.length;for(;r<s&&e[r]<t;)r++;for(;s>r&&e[s-1]>n;)s--;return r>0||s<e.length?e.slice(r,s):e}const NI=["push","pop","shift","splice","unshift"];function EV(e,t){if(e._chartjs){e._chartjs.listeners.push(t);return}Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),NI.forEach(n=>{const r="_onData"+m2(n),s=e[n];Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value(...u){const d=s.apply(this,u);return e._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...u)}),d}})})}function VI(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(t);s!==-1&&r.splice(s,1),!(r.length>0)&&(NI.forEach(u=>{delete e[u]}),delete e._chartjs)}function jI(e){const t=new Set;let n,r;for(n=0,r=e.length;n<r;++n)t.add(e[n]);return t.size===r?e:Array.from(t)}function k2(e,t=[""],n=e,r,s=()=>e[0]){ms(r)||(r=HI("_fallback",e));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:r,_getTarget:s,override:d=>k2([d,...e],t,n,r)};return new Proxy(u,{deleteProperty(d,o){return delete d[o],delete d._keys,delete e[0][o],!0},get(d,o){return $I(d,o,()=>IV(o,t,e,d))},getOwnPropertyDescriptor(d,o){return Reflect.getOwnPropertyDescriptor(d._scopes[0],o)},getPrototypeOf(){return Reflect.getPrototypeOf(e[0])},has(d,o){return qI(d).includes(o)},ownKeys(d){return qI(d)},set(d,o,y){const w=d._storage||(d._storage=s());return d[o]=w[o]=y,delete d._keys,!0}})}function Ad(e,t,n,r){const s={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:UI(e,r),setContext:u=>Ad(e,u,n,r),override:u=>Ad(e.override(u),t,n,r)};return new Proxy(s,{deleteProperty(u,d){return delete u[d],delete e[d],!0},get(u,d,o){return $I(u,d,()=>TV(u,d,o))},getOwnPropertyDescriptor(u,d){return u._descriptors.allKeys?Reflect.has(e,d)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,d)},getPrototypeOf(){return Reflect.getPrototypeOf(e)},has(u,d){return Reflect.has(e,d)},ownKeys(){return Reflect.ownKeys(e)},set(u,d,o){return e[d]=o,delete u[d],!0}})}function UI(e,t={scriptable:!0,indexable:!0}){const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:s=t.allKeys}=e;return{allKeys:s,scriptable:n,indexable:r,isScriptable:dc(n)?n:()=>n,isIndexable:dc(r)?r:()=>r}}const SV=(e,t)=>e?e+m2(t):t,A2=(e,t)=>Nn(t)&&e!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function $I(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function TV(e,t,n){const{_proxy:r,_context:s,_subProxy:u,_descriptors:d}=e;let o=r[t];return dc(o)&&d.isScriptable(t)&&(o=CV(t,o,e,n)),Bi(o)&&o.length&&(o=MV(t,o,e,d.isIndexable)),A2(t,o)&&(o=Ad(o,s,u&&u[t],d)),o}function CV(e,t,n,r){const{_proxy:s,_context:u,_subProxy:d,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);return o.add(e),t=t(u,d||r),o.delete(e),A2(e,t)&&(t=D2(s._scopes,s,e,t)),t}function MV(e,t,n,r){const{_proxy:s,_context:u,_subProxy:d,_descriptors:o}=n;if(ms(u.index)&&r(e))t=t[u.index%t.length];else if(Nn(t[0])){const y=t,w=s._scopes.filter(M=>M!==y);t=[];for(const M of y){const k=D2(w,s,e,M);t.push(Ad(k,u,d&&d[e],o))}}return t}function GI(e,t,n){return dc(e)?e(t,n):e}const kV=(e,t)=>e===!0?t:typeof e=="string"?ku(t,e):void 0;function AV(e,t,n,r,s){for(const u of t){const d=kV(n,u);if(d){e.add(d);const o=GI(d._fallback,n,s);if(ms(o)&&o!==n&&o!==r)return o}else if(d===!1&&ms(r)&&n!==r)return null}return!1}function D2(e,t,n,r){const s=t._rootScopes,u=GI(t._fallback,n,r),d=[...e,...s],o=new Set;o.add(r);let y=WI(o,d,n,u||n,r);return y===null||ms(u)&&u!==n&&(y=WI(o,d,u,y,r),y===null)?!1:k2(Array.from(o),[""],s,u,()=>DV(t,n,r))}function WI(e,t,n,r,s){for(;n;)n=AV(e,t,n,r,s);return n}function DV(e,t,n){const r=e._getTarget();t in r||(r[t]={});const s=r[t];return Bi(s)&&Nn(n)?n:s}function IV(e,t,n,r){let s;for(const u of t)if(s=HI(SV(u,e),n),ms(s))return A2(e,s)?D2(n,r,e,s):s}function HI(e,t){for(const n of t){if(!n)continue;const r=n[e];if(ms(r))return r}}function qI(e){let t=e._keys;return t||(t=e._keys=PV(e._scopes)),t}function PV(e){const t=new Set;for(const n of e)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))t.add(r);return Array.from(t)}const OV=Number.EPSILON||1e-14,Dd=(e,t)=>t<e.length&&!e[t].skip&&e[t],YI=e=>e==="x"?"y":"x";function LV(e,t,n,r){const s=e.skip?t:e,u=t,d=n.skip?t:n,o=_2(u,s),y=_2(d,u);let w=o/(o+y),M=y/(o+y);w=isNaN(w)?0:w,M=isNaN(M)?0:M;const k=r*w,O=r*M;return{previous:{x:u.x-k*(d.x-s.x),y:u.y-k*(d.y-s.y)},next:{x:u.x+O*(d.x-s.x),y:u.y+O*(d.y-s.y)}}}function zV(e,t,n){const r=e.length;let s,u,d,o,y,w=Dd(e,0);for(let M=0;M<r-1;++M)if(y=w,w=Dd(e,M+1),!(!y||!w)){if(Gm(t[M],0,OV)){n[M]=n[M+1]=0;continue}s=n[M]/t[M],u=n[M+1]/t[M],o=Math.pow(s,2)+Math.pow(u,2),!(o<=9)&&(d=3/Math.sqrt(o),n[M]=s*d*t[M],n[M+1]=u*d*t[M])}}function RV(e,t,n="x"){const r=YI(n),s=e.length;let u,d,o,y=Dd(e,0);for(let w=0;w<s;++w){if(d=o,o=y,y=Dd(e,w+1),!o)continue;const M=o[n],k=o[r];d&&(u=(M-d[n])/3,o[`cp1${n}`]=M-u,o[`cp1${r}`]=k-u*t[w]),y&&(u=(y[n]-M)/3,o[`cp2${n}`]=M+u,o[`cp2${r}`]=k+u*t[w])}}function FV(e,t="x"){const n=YI(t),r=e.length,s=Array(r).fill(0),u=Array(r);let d,o,y,w=Dd(e,0);for(d=0;d<r;++d)if(o=y,y=w,w=Dd(e,d+1),!!y){if(w){const M=w[t]-y[t];s[d]=M!==0?(w[n]-y[n])/M:0}u[d]=o?w?ma(s[d-1])!==ma(s[d])?0:(s[d-1]+s[d])/2:s[d-1]:s[d]}zV(e,s,u),RV(e,u,t)}function B0(e,t,n){return Math.max(Math.min(e,n),t)}function BV(e,t){let n,r,s,u,d,o=Iu(e[0],t);for(n=0,r=e.length;n<r;++n)d=u,u=o,o=n<r-1&&Iu(e[n+1],t),!!u&&(s=e[n],d&&(s.cp1x=B0(s.cp1x,t.left,t.right),s.cp1y=B0(s.cp1y,t.top,t.bottom)),o&&(s.cp2x=B0(s.cp2x,t.left,t.right),s.cp2y=B0(s.cp2y,t.top,t.bottom)))}function NV(e,t,n,r,s){let u,d,o,y;if(t.spanGaps&&(e=e.filter(w=>!w.skip)),t.cubicInterpolationMode==="monotone")FV(e,s);else{let w=r?e[e.length-1]:e[0];for(u=0,d=e.length;u<d;++u)o=e[u],y=LV(w,o,e[Math.min(u+1,d-(r?0:1))%d],t.tension),o.cp1x=y.previous.x,o.cp1y=y.previous.y,o.cp2x=y.next.x,o.cp2y=y.next.y,w=o}t.capBezierPoints&&BV(e,n)}function ZI(){return typeof window!="undefined"&&typeof document!="undefined"}function I2(e){let t=e.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function N0(e,t,n){let r;return typeof e=="string"?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}const V0=e=>window.getComputedStyle(e,null);function VV(e,t){return V0(e).getPropertyValue(t)}const jV=["top","right","bottom","left"];function Ou(e,t,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const u=jV[s];r[u]=parseFloat(e[t+"-"+u+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const UV=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function $V(e,t){const n=e.native||e,r=n.touches,s=r&&r.length?r[0]:n,{offsetX:u,offsetY:d}=s;let o=!1,y,w;if(UV(u,d,n.target))y=u,w=d;else{const M=t.getBoundingClientRect();y=s.clientX-M.left,w=s.clientY-M.top,o=!0}return{x:y,y:w,box:o}}function XI(e,t){const{canvas:n,currentDevicePixelRatio:r}=t,s=V0(n),u=s.boxSizing==="border-box",d=Ou(s,"padding"),o=Ou(s,"border","width"),{x:y,y:w,box:M}=$V(e,n),k=d.left+(M&&o.left),O=d.top+(M&&o.top);let{width:$,height:j}=t;return u&&($-=d.width+o.width,j-=d.height+o.height),{x:Math.round((y-k)/$*n.width/r),y:Math.round((w-O)/j*n.height/r)}}function GV(e,t,n){let r,s;if(t===void 0||n===void 0){const u=I2(e);if(!u)t=e.clientWidth,n=e.clientHeight;else{const d=u.getBoundingClientRect(),o=V0(u),y=Ou(o,"border","width"),w=Ou(o,"padding");t=d.width-w.width-y.width,n=d.height-w.height-y.height,r=N0(o.maxWidth,u,"clientWidth"),s=N0(o.maxHeight,u,"clientHeight")}}return{width:t,height:n,maxWidth:r||T0,maxHeight:s||T0}}const P2=e=>Math.round(e*10)/10;function WV(e,t,n,r){const s=V0(e),u=Ou(s,"margin"),d=N0(s.maxWidth,e,"clientWidth")||T0,o=N0(s.maxHeight,e,"clientHeight")||T0,y=GV(e,t,n);let{width:w,height:M}=y;if(s.boxSizing==="content-box"){const k=Ou(s,"border","width"),O=Ou(s,"padding");w-=O.width+k.width,M-=O.height+k.height}return w=Math.max(0,w-u.width),M=Math.max(0,r?Math.floor(w/r):M-u.height),w=P2(Math.min(w,d,y.maxWidth)),M=P2(Math.min(M,o,y.maxHeight)),w&&!M&&(M=P2(w/2)),{width:w,height:M}}function KI(e,t,n){const r=t||1,s=Math.floor(e.height*r),u=Math.floor(e.width*r);e.height=s/r,e.width=u/r;const d=e.canvas;return d.style&&(n||!d.style.height&&!d.style.width)&&(d.style.height=`${e.height}px`,d.style.width=`${e.width}px`),e.currentDevicePixelRatio!==r||d.height!==s||d.width!==u?(e.currentDevicePixelRatio=r,d.height=s,d.width=u,e.ctx.setTransform(r,0,0,r,0,0),!0):!1}const HV=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}return e}();function JI(e,t){const n=VV(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Lu(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function qV(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:r==="middle"?n<.5?e.y:t.y:r==="after"?n<1?e.y:t.y:n>0?t.y:e.y}}function YV(e,t,n,r){const s={x:e.cp2x,y:e.cp2y},u={x:t.cp1x,y:t.cp1y},d=Lu(e,s,n),o=Lu(s,u,n),y=Lu(u,t,n),w=Lu(d,o,n),M=Lu(o,y,n);return Lu(w,M,n)}const QI=new Map;function ZV(e,t){t=t||{};const n=e+JSON.stringify(t);let r=QI.get(n);return r||(r=new Intl.NumberFormat(e,t),QI.set(n,r)),r}function Km(e,t,n){return ZV(t,n).format(e)}const XV=function(e,t){return{x(n){return e+e+t-n},setWidth(n){t=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},KV=function(){return{x(e){return e},setWidth(e){},textAlign(e){return e},xPlus(e,t){return e+t},leftForLtr(e,t){return e}}};function Id(e,t,n){return e?XV(t,n):KV()}function eP(e,t){let n,r;(t==="ltr"||t==="rtl")&&(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function tP(e,t){t!==void 0&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function nP(e){return e==="angle"?{between:Wm,compare:UN,normalize:Zo}:{between:tl,compare:(t,n)=>t-n,normalize:t=>t}}function iP({start:e,end:t,count:n,loop:r,style:s}){return{start:e%n,end:t%n,loop:r&&(t-e+1)%n==0,style:s}}function JV(e,t,n){const{property:r,start:s,end:u}=n,{between:d,normalize:o}=nP(r),y=t.length;let{start:w,end:M,loop:k}=e,O,$;if(k){for(w+=y,M+=y,O=0,$=y;O<$&&d(o(t[w%y][r]),s,u);++O)w--,M--;w%=y,M%=y}return M<w&&(M+=y),{start:w,end:M,loop:k,style:e.style}}function rP(e,t,n){if(!n)return[e];const{property:r,start:s,end:u}=n,d=t.length,{compare:o,between:y,normalize:w}=nP(r),{start:M,end:k,loop:O,style:$}=JV(e,t,n),j=[];let G=!1,B=null,U,Z,re;const ie=()=>y(s,re,U)&&o(s,re)!==0,de=()=>o(u,U)===0||y(u,re,U),xe=()=>G||ie(),Ce=()=>!G||de();for(let je=M,ze=M;je<=k;++je)Z=t[je%d],!Z.skip&&(U=w(Z[r]),U!==re&&(G=y(U,s,u),B===null&&xe()&&(B=o(U,s)===0?je:ze),B!==null&&Ce()&&(j.push(iP({start:B,end:je,loop:O,count:d,style:$})),B=null),ze=je,re=U));return B!==null&&j.push(iP({start:B,end:k,loop:O,count:d,style:$})),j}function oP(e,t){const n=[],r=e.segments;for(let s=0;s<r.length;s++){const u=rP(r[s],e.points,t);u.length&&n.push(...u)}return n}function QV(e,t,n,r){let s=0,u=t-1;if(n&&!r)for(;s<t&&!e[s].skip;)s++;for(;s<t&&e[s].skip;)s++;for(s%=t,n&&(u+=s);u>s&&e[u%t].skip;)u--;return u%=t,{start:s,end:u}}function ej(e,t,n,r){const s=e.length,u=[];let d=t,o=e[t],y;for(y=t+1;y<=n;++y){const w=e[y%s];w.skip||w.stop?o.skip||(r=!1,u.push({start:t%s,end:(y-1)%s,loop:r}),t=d=w.stop?y:null):(d=y,o.skip&&(t=y)),o=w}return d!==null&&u.push({start:t%s,end:d%s,loop:r}),u}function tj(e,t){const n=e.points,r=e.options.spanGaps,s=n.length;if(!s)return[];const u=!!e._loop,{start:d,end:o}=QV(n,s,u,r);if(r===!0)return sP(e,[{start:d,end:o,loop:u}],n,t);const y=o<d?o+s:o,w=!!e._fullLoop&&d===0&&o===s-1;return sP(e,ej(n,d,y,w),n,t)}function sP(e,t,n,r){return!r||!r.setContext||!n?t:nj(e,t,n,r)}function nj(e,t,n,r){const s=e._chart.getContext(),u=aP(e.options),{_datasetIndex:d,options:{spanGaps:o}}=e,y=n.length,w=[];let M=u,k=t[0].start,O=k;function $(j,G,B,U){const Z=o?-1:1;if(j!==G){for(j+=y;n[j%y].skip;)j-=Z;for(;n[G%y].skip;)G+=Z;j%y!=G%y&&(w.push({start:j%y,end:G%y,loop:B,style:U}),M=U,k=G%y)}}for(const j of t){k=o?k:j.start;let G=n[k%y],B;for(O=k+1;O<=j.end;O++){const U=n[O%y];B=aP(r.setContext(fc(s,{type:"segment",p0:G,p1:U,p0DataIndex:(O-1)%y,p1DataIndex:O%y,datasetIndex:d}))),ij(B,M)&&$(k,O-1,j.loop,M),G=U,M=B}k<O-1&&$(k,O-1,j.loop,M)}return w}function aP(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function ij(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}/*!
 * Chart.js v3.7.0
 * https://www.chartjs.org
 * (c) 2021 Chart.js Contributors
 * Released under the MIT License
 */class rj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,n,r,s){const u=n.listeners[s],d=n.duration;u.forEach(o=>o({chart:t,initial:n.initial,numSteps:d,currentStep:Math.min(r-n.start,d)}))}_refresh(){this._request||(this._running=!0,this._request=fI.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const u=r.items;let d=u.length-1,o=!1,y;for(;d>=0;--d)y=u[d],y._active?(y._total>r.duration&&(r.duration=y._total),y.tick(t),o=!0):(u[d]=u[u.length-1],u.pop());o&&(s.draw(),this._notify(s,r,t,"progress")),u.length||(r.running=!1,this._notify(s,r,t,"complete"),r.initial=!1),n+=u.length}),this._lastDate=t,n===0&&(this._running=!1)}_getAnims(t){const n=this._charts;let r=n.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(t,r)),r}listen(t,n,r){this._getAnims(t).listeners[n].push(r)}add(t,n){!n||!n.length||this._getAnims(t).items.push(...n)}has(t){return this._getAnims(t).items.length>0}start(t){const n=this._charts.get(t);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(t){if(!this._running)return!1;const n=this._charts.get(t);return!(!n||!n.running||!n.items.length)}stop(t){const n=this._charts.get(t);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(t,n,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var nl=new rj;const lP="transparent",oj={boolean(e,t,n){return n>.5?t:e},color(e,t,n){const r=RI(e||lP),s=r.valid&&RI(t||lP);return s&&s.valid?s.mix(r,n).hexString():t},number(e,t,n){return e+(t-e)*n}};class sj{constructor(t,n,r,s){const u=n[r];s=F0([t.to,s,u,t.from]);const d=F0([t.from,u,s]);this._active=!0,this._fn=t.fn||oj[t.type||typeof d],this._easing=Hm[t.easing]||Hm.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=d,this._to=s,this._promises=void 0}active(){return this._active}update(t,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],u=r-this._start,d=this._duration-u;this._start=r,this._duration=Math.floor(Math.max(d,t.duration)),this._total+=u,this._loop=!!t.loop,this._to=F0([t.to,n,s,t.from]),this._from=F0([t.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const n=t-this._start,r=this._duration,s=this._prop,u=this._from,d=this._loop,o=this._to;let y;if(this._active=u!==o&&(d||n<r),!this._active){this._target[s]=o,this._notify(!0);return}if(n<0){this._target[s]=u;return}y=n/r%2,y=d&&y>1?2-y:y,y=this._easing(Math.min(1,Math.max(0,y))),this._target[s]=this._fn(u,o,y)}wait(){const t=this._promises||(this._promises=[]);return new Promise((n,r)=>{t.push({res:n,rej:r})})}_notify(t){const n=t?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}const aj=["x","y","borderWidth","radius","tension"],lj=["color","borderColor","backgroundColor"];Vn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const cj=Object.keys(Vn.animation);Vn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"});Vn.set("animations",{colors:{type:"color",properties:lj},numbers:{type:"number",properties:aj}});Vn.describe("animations",{_fallback:"animation"});Vn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}});class cP{constructor(t,n){this._chart=t,this._properties=new Map,this.configure(n)}configure(t){if(!Nn(t))return;const n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const s=t[r];if(!Nn(s))return;const u={};for(const d of cj)u[d]=s[d];(Bi(s.properties)&&s.properties||[r]).forEach(d=>{(d===r||!n.has(d))&&n.set(d,u)})})}_animateOptions(t,n){const r=n.options,s=hj(t,r);if(!s)return[];const u=this._createAnimations(s,r);return r.$shared&&uj(t.options.$animations,r).then(()=>{t.options=r},()=>{}),u}_createAnimations(t,n){const r=this._properties,s=[],u=t.$animations||(t.$animations={}),d=Object.keys(n),o=Date.now();let y;for(y=d.length-1;y>=0;--y){const w=d[y];if(w.charAt(0)==="$")continue;if(w==="options"){s.push(...this._animateOptions(t,n));continue}const M=n[w];let k=u[w];const O=r.get(w);if(k)if(O&&k.active()){k.update(O,M,o);continue}else k.cancel();if(!O||!O.duration){t[w]=M;continue}u[w]=k=new sj(O,t,w,M),s.push(k)}return s}update(t,n){if(this._properties.size===0){Object.assign(t,n);return}const r=this._createAnimations(t,n);if(r.length)return nl.add(this._chart,r),!0}}function uj(e,t){const n=[],r=Object.keys(t);for(let s=0;s<r.length;s++){const u=e[r[s]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function hj(e,t){if(!t)return;let n=e.options;if(!n){e.options=t;return}return n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function uP(e,t){const n=e&&e.options||{},r=n.reverse,s=n.min===void 0?t:0,u=n.max===void 0?t:0;return{start:r?u:s,end:r?s:u}}function dj(e,t,n){if(n===!1)return!1;const r=uP(e,n),s=uP(t,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function fj(e){let t,n,r,s;return Nn(e)?(t=e.top,n=e.right,r=e.bottom,s=e.left):t=n=r=s=e,{top:t,right:n,bottom:r,left:s,disabled:e===!1}}function hP(e,t){const n=[],r=e._getSortedDatasetMetas(t);let s,u;for(s=0,u=r.length;s<u;++s)n.push(r[s].index);return n}function dP(e,t,n,r={}){const s=e.keys,u=r.mode==="single";let d,o,y,w;if(t!==null){for(d=0,o=s.length;d<o;++d){if(y=+s[d],y===n){if(r.all)continue;break}w=e.values[y],rr(w)&&(u||t===0||ma(t)===ma(w))&&(t+=w)}return t}}function pj(e){const t=Object.keys(e),n=new Array(t.length);let r,s,u;for(r=0,s=t.length;r<s;++r)u=t[r],n[r]={x:u,y:e[u]};return n}function fP(e,t){const n=e&&e.options.stacked;return n||n===void 0&&t.stack!==void 0}function mj(e,t,n){return`${e.id}.${t.id}.${n.stack||n.type}`}function gj(e){const{min:t,max:n,minDefined:r,maxDefined:s}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function _j(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function pP(e,t,n,r){for(const s of t.getMatchingVisibleMetas(r).reverse()){const u=e[s.index];if(n&&u>0||!n&&u<0)return s.index}return null}function mP(e,t){const{chart:n,_cachedMeta:r}=e,s=n._stacks||(n._stacks={}),{iScale:u,vScale:d,index:o}=r,y=u.axis,w=d.axis,M=mj(u,d,r),k=t.length;let O;for(let $=0;$<k;++$){const j=t[$],{[y]:G,[w]:B}=j,U=j._stacks||(j._stacks={});O=U[w]=_j(s,M,G),O[o]=B,O._top=pP(O,d,!0,r.type),O._bottom=pP(O,d,!1,r.type)}}function O2(e,t){const n=e.scales;return Object.keys(n).filter(r=>n[r].axis===t).shift()}function yj(e,t){return fc(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function vj(e,t,n){return fc(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}function Jm(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(!!r){t=t||e._parsed;for(const s of t){const u=s._stacks;if(!u||u[r]===void 0||u[r][n]===void 0)return;delete u[r][n]}}}const L2=e=>e==="reset"||e==="none",gP=(e,t)=>t?e:Object.assign({},e),xj=(e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:hP(n,!0),values:null};class ga{constructor(t,n){this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=fP(t.vScale,t),this.addElements()}updateIndex(t){this.index!==t&&Jm(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(k,O,$,j)=>k==="x"?O:k==="r"?j:$,u=n.xAxisID=Mn(r.xAxisID,O2(t,"x")),d=n.yAxisID=Mn(r.yAxisID,O2(t,"y")),o=n.rAxisID=Mn(r.rAxisID,O2(t,"r")),y=n.indexAxis,w=n.iAxisID=s(y,u,d,o),M=n.vAxisID=s(y,d,u,o);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(d),n.rScale=this.getScaleForId(o),n.iScale=this.getScaleForId(w),n.vScale=this.getScaleForId(M)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const n=this._cachedMeta;return t===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&VI(this._data,this),t._stacked&&Jm(t)}_dataCheck(){const t=this.getDataset(),n=t.data||(t.data=[]),r=this._data;if(Nn(n))this._data=pj(n);else if(r!==n){if(r){VI(r,this);const s=this._cachedMeta;Jm(s),s._parsed=[]}n&&Object.isExtensible(n)&&EV(n,this),this._syncList=[],this._data=n}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const u=n._stacked;n._stacked=fP(n.vScale,n),n.stack!==r.stack&&(s=!0,Jm(n),n.stack=r.stack),this._resyncElements(t),(s||u!==n._stacked)&&mP(this,n._parsed)}configure(){const t=this.chart.config,n=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),n,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,n){const{_cachedMeta:r,_data:s}=this,{iScale:u,_stacked:d}=r,o=u.axis;let y=t===0&&n===s.length?!0:r._sorted,w=t>0&&r._parsed[t-1],M,k,O;if(this._parsing===!1)r._parsed=s,r._sorted=!0,O=s;else{Bi(s[t])?O=this.parseArrayData(r,s,t,n):Nn(s[t])?O=this.parseObjectData(r,s,t,n):O=this.parsePrimitiveData(r,s,t,n);const $=()=>k[o]===null||w&&k[o]<w[o];for(M=0;M<n;++M)r._parsed[M+t]=k=O[M],y&&($()&&(y=!1),w=k);r._sorted=y}d&&mP(this,O)}parsePrimitiveData(t,n,r,s){const{iScale:u,vScale:d}=t,o=u.axis,y=d.axis,w=u.getLabels(),M=u===d,k=new Array(s);let O,$,j;for(O=0,$=s;O<$;++O)j=O+r,k[O]={[o]:M||u.parse(w[j],j),[y]:d.parse(n[j],j)};return k}parseArrayData(t,n,r,s){const{xScale:u,yScale:d}=t,o=new Array(s);let y,w,M,k;for(y=0,w=s;y<w;++y)M=y+r,k=n[M],o[y]={x:u.parse(k[0],M),y:d.parse(k[1],M)};return o}parseObjectData(t,n,r,s){const{xScale:u,yScale:d}=t,{xAxisKey:o="x",yAxisKey:y="y"}=this._parsing,w=new Array(s);let M,k,O,$;for(M=0,k=s;M<k;++M)O=M+r,$=n[O],w[M]={x:u.parse(ku($,o),O),y:d.parse(ku($,y),O)};return w}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,n,r){const s=this.chart,u=this._cachedMeta,d=n[t.axis],o={keys:hP(s,!0),values:n._stacks[t.axis]};return dP(o,d,u.index,{mode:r})}updateRangeFromParsed(t,n,r,s){const u=r[n.axis];let d=u===null?NaN:u;const o=s&&r._stacks[n.axis];s&&o&&(s.values=o,d=dP(s,u,this._cachedMeta.index)),t.min=Math.min(t.min,d),t.max=Math.max(t.max,d)}getMinMax(t,n){const r=this._cachedMeta,s=r._parsed,u=r._sorted&&t===r.iScale,d=s.length,o=this._getOtherScale(t),y=xj(n,r,this.chart),w={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:M,max:k}=gj(o);let O,$;function j(){$=s[O];const G=$[o.axis];return!rr($[t.axis])||M>G||k<G}for(O=0;O<d&&!(!j()&&(this.updateRangeFromParsed(w,t,$,y),u));++O);if(u){for(O=d-1;O>=0;--O)if(!j()){this.updateRangeFromParsed(w,t,$,y);break}}return w}getAllParsedValues(t){const n=this._cachedMeta._parsed,r=[];let s,u,d;for(s=0,u=n.length;s<u;++s)d=n[s][t.axis],rr(d)&&r.push(d);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const n=this._cachedMeta,r=n.iScale,s=n.vScale,u=this.getParsed(t);return{label:r?""+r.getLabelForValue(u[r.axis]):"",value:s?""+s.getLabelForValue(u[s.axis]):""}}_update(t){const n=this._cachedMeta;this.update(t||"default"),n._clip=fj(Mn(this.options.clip,dj(n.xScale,n.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],u=n.chartArea,d=[],o=this._drawStart||0,y=this._drawCount||s.length-o,w=this.options.drawActiveElementsOnTop;let M;for(r.dataset&&r.dataset.draw(t,u,o,y),M=o;M<o+y;++M){const k=s[M];k.hidden||(k.active&&w?d.push(k):k.draw(t,u))}for(M=0;M<d.length;++M)d[M].draw(t,u)}getStyle(t,n){const r=n?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,n,r){const s=this.getDataset();let u;if(t>=0&&t<this._cachedMeta.data.length){const d=this._cachedMeta.data[t];u=d.$context||(d.$context=vj(this.getContext(),t,d)),u.parsed=this.getParsed(t),u.raw=s.data[t],u.index=u.dataIndex=t}else u=this.$context||(this.$context=yj(this.chart.getContext(),this.index)),u.dataset=s,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=r,u}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,n){return this._resolveElementOptions(this.dataElementType.id,n,t)}_resolveElementOptions(t,n="default",r){const s=n==="active",u=this._cachedDataOpts,d=t+"-"+n,o=u[d],y=this.enableOptionSharing&&ms(r);if(o)return gP(o,y);const w=this.chart.config,M=w.datasetElementScopeKeys(this._type,t),k=s?[`${t}Hover`,"hover",t,""]:[t,""],O=w.getOptionScopes(this.getDataset(),M),$=Object.keys(Vn.elements[t]),j=()=>this.getContext(r,s),G=w.resolveNamedOptions(O,$,j,k);return G.$shared&&(G.$shared=y,u[d]=Object.freeze(gP(G,y))),G}_resolveAnimations(t,n,r){const s=this.chart,u=this._cachedDataOpts,d=`animation-${n}`,o=u[d];if(o)return o;let y;if(s.options.animation!==!1){const M=this.chart.config,k=M.datasetAnimationScopeKeys(this._type,n),O=M.getOptionScopes(this.getDataset(),k);y=M.createResolver(O,this.getContext(t,r,n))}const w=new cP(s,y&&y.animations);return y&&y._cacheable&&(u[d]=Object.freeze(w)),w}getSharedOptions(t){if(!!t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,n){return!n||L2(t)||this.chart._animationsDisabled}updateElement(t,n,r,s){L2(s)?Object.assign(t,r):this._resolveAnimations(n,s).update(t,r)}updateSharedOptions(t,n,r){t&&!L2(n)&&this._resolveAnimations(void 0,n).update(t,r)}_setStyle(t,n,r,s){t.active=s;const u=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(t,{options:!s&&this.getSharedOptions(u)||u})}removeHoverStyle(t,n,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,n,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const n=this._data,r=this._cachedMeta.data;for(const[o,y,w]of this._syncList)this[o](y,w);this._syncList=[];const s=r.length,u=n.length,d=Math.min(u,s);d&&this.parse(0,d),u>s?this._insertElements(s,u-s,t):u<s&&this._removeElements(u,s-u)}_insertElements(t,n,r=!0){const s=this._cachedMeta,u=s.data,d=t+n;let o;const y=w=>{for(w.length+=n,o=w.length-1;o>=d;o--)w[o]=w[o-n]};for(y(u),o=t;o<d;++o)u[o]=new this.dataElementType;this._parsing&&y(s._parsed),this.parse(t,n),r&&this.updateElements(u,t,n,"reset")}updateElements(t,n,r,s){}_removeElements(t,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(t,n);r._stacked&&Jm(r,s)}r.data.splice(t,n)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[n,r,s]=t;this[n](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,n){n&&this._sync(["_removeElements",t,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ga.defaults={};ga.prototype.datasetElementType=null;ga.prototype.dataElementType=null;function bj(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let s=0,u=n.length;s<u;s++)r=r.concat(n[s].controller.getAllParsedValues(e));e._cache.$bar=jI(r.sort((s,u)=>s-u))}return e._cache.$bar}function wj(e){const t=e.iScale,n=bj(t,e.type);let r=t._length,s,u,d,o;const y=()=>{d===32767||d===-32768||(ms(o)&&(r=Math.min(r,Math.abs(d-o)||r)),o=d)};for(s=0,u=n.length;s<u;++s)d=t.getPixelForValue(n[s]),y();for(o=void 0,s=0,u=t.ticks.length;s<u;++s)d=t.getPixelForTick(s),y();return r}function Ej(e,t,n,r){const s=n.barThickness;let u,d;return fi(s)?(u=t.min*n.categoryPercentage,d=n.barPercentage):(u=s*r,d=1),{chunk:u/r,ratio:d,start:t.pixels[e]-u/2}}function Sj(e,t,n,r){const s=t.pixels,u=s[e];let d=e>0?s[e-1]:null,o=e<s.length-1?s[e+1]:null;const y=n.categoryPercentage;d===null&&(d=u-(o===null?t.end-t.start:o-u)),o===null&&(o=u+u-d);const w=u-(u-Math.min(d,o))/2*y;return{chunk:Math.abs(o-d)/2*y/r,ratio:n.barPercentage,start:w}}function Tj(e,t,n,r){const s=n.parse(e[0],r),u=n.parse(e[1],r),d=Math.min(s,u),o=Math.max(s,u);let y=d,w=o;Math.abs(d)>Math.abs(o)&&(y=o,w=d),t[n.axis]=w,t._custom={barStart:y,barEnd:w,start:s,end:u,min:d,max:o}}function _P(e,t,n,r){return Bi(e)?Tj(e,t,n,r):t[n.axis]=n.parse(e,r),t}function yP(e,t,n,r){const s=e.iScale,u=e.vScale,d=s.getLabels(),o=s===u,y=[];let w,M,k,O;for(w=n,M=n+r;w<M;++w)O=t[w],k={},k[s.axis]=o||s.parse(d[w],w),y.push(_P(O,k,u,w));return y}function z2(e){return e&&e.barStart!==void 0&&e.barEnd!==void 0}function Cj(e,t,n){return e!==0?ma(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}function Mj(e){let t,n,r,s,u;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(s="end",u="start"):(s="start",u="end"),{start:n,end:r,reverse:t,top:s,bottom:u}}function kj(e,t,n,r){let s=t.borderSkipped;const u={};if(!s){e.borderSkipped=u;return}const{start:d,end:o,reverse:y,top:w,bottom:M}=Mj(e);s==="middle"&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?s=w:(n._bottom||0)===r?s=M:(u[vP(M,d,o,y)]=!0,s=w)),u[vP(s,d,o,y)]=!0,e.borderSkipped=u}function vP(e,t,n,r){return r?(e=Aj(e,t,n),e=xP(e,n,t)):e=xP(e,t,n),e}function Aj(e,t,n){return e===t?n:e===n?t:e}function xP(e,t,n){return e==="start"?t:e==="end"?n:e}function Dj(e,{inflateAmount:t},n){e.inflateAmount=t==="auto"?n===1?.33:0:t}class R2 extends ga{parsePrimitiveData(t,n,r,s){return yP(t,n,r,s)}parseArrayData(t,n,r,s){return yP(t,n,r,s)}parseObjectData(t,n,r,s){const{iScale:u,vScale:d}=t,{xAxisKey:o="x",yAxisKey:y="y"}=this._parsing,w=u.axis==="x"?o:y,M=d.axis==="x"?o:y,k=[];let O,$,j,G;for(O=r,$=r+s;O<$;++O)G=n[O],j={},j[u.axis]=u.parse(ku(G,w),O),k.push(_P(ku(G,M),j,d,O));return k}updateRangeFromParsed(t,n,r,s){super.updateRangeFromParsed(t,n,r,s);const u=r._custom;u&&n===this._cachedMeta.vScale&&(t.min=Math.min(t.min,u.min),t.max=Math.max(t.max,u.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const n=this._cachedMeta,{iScale:r,vScale:s}=n,u=this.getParsed(t),d=u._custom,o=z2(d)?"["+d.start+", "+d.end+"]":""+s.getLabelForValue(u[s.axis]);return{label:""+r.getLabelForValue(u[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,t)}updateElements(t,n,r,s){const u=s==="reset",{index:d,_cachedMeta:{vScale:o}}=this,y=o.getBasePixel(),w=o.isHorizontal(),M=this._getRuler(),k=this.resolveDataElementOptions(n,s),O=this.getSharedOptions(k),$=this.includeOptions(s,O);this.updateSharedOptions(O,s,k);for(let j=n;j<n+r;j++){const G=this.getParsed(j),B=u||fi(G[o.axis])?{base:y,head:y}:this._calculateBarValuePixels(j),U=this._calculateBarIndexPixels(j,M),Z=(G._stacks||{})[o.axis],re={horizontal:w,base:B.base,enableBorderRadius:!Z||z2(G._custom)||d===Z._top||d===Z._bottom,x:w?B.head:U.center,y:w?U.center:B.head,height:w?U.size:Math.abs(B.size),width:w?Math.abs(B.size):U.size};$&&(re.options=O||this.resolveDataElementOptions(j,t[j].active?"active":s));const ie=re.options||t[j].options;kj(re,ie,Z,d),Dj(re,ie,M.ratio),this.updateElement(t[j],j,re,s)}}_getStacks(t,n){const s=this._cachedMeta.iScale,u=s.getMatchingVisibleMetas(this._type),d=s.options.stacked,o=u.length,y=[];let w,M;for(w=0;w<o;++w)if(M=u[w],!!M.controller.options.grouped){if(typeof n!="undefined"){const k=M.controller.getParsed(n)[M.controller._cachedMeta.vScale.axis];if(fi(k)||isNaN(k))continue}if((d===!1||y.indexOf(M.stack)===-1||d===void 0&&M.stack===void 0)&&y.push(M.stack),M.index===t)break}return y.length||y.push(void 0),y}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,n,r){const s=this._getStacks(t,r),u=n!==void 0?s.indexOf(n):-1;return u===-1?s.length-1:u}_getRuler(){const t=this.options,n=this._cachedMeta,r=n.iScale,s=[];let u,d;for(u=0,d=n.data.length;u<d;++u)s.push(r.getPixelForValue(this.getParsed(u)[r.axis],u));const o=t.barThickness;return{min:o||wj(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:n,_stacked:r},options:{base:s,minBarLength:u}}=this,d=s||0,o=this.getParsed(t),y=o._custom,w=z2(y);let M=o[n.axis],k=0,O=r?this.applyStack(n,o,r):M,$,j;O!==M&&(k=O-M,O=M),w&&(M=y.barStart,O=y.barEnd-y.barStart,M!==0&&ma(M)!==ma(y.barEnd)&&(k=0),k+=M);const G=!fi(s)&&!w?s:k;let B=n.getPixelForValue(G);if(this.chart.getDataVisibility(t)?$=n.getPixelForValue(k+O):$=B,j=$-B,Math.abs(j)<u&&(j=Cj(j,n,d)*u,M===d&&(B-=j/2),$=B+j),B===n.getPixelForValue(d)){const U=ma(j)*n.getLineWidthForValue(d)/2;B+=U,j-=U}return{size:j,base:B,head:$,center:$+j/2}}_calculateBarIndexPixels(t,n){const r=n.scale,s=this.options,u=s.skipNull,d=Mn(s.maxBarThickness,1/0);let o,y;if(n.grouped){const w=u?this._getStackCount(t):n.stackCount,M=s.barThickness==="flex"?Sj(t,n,s,w):Ej(t,n,s,w),k=this._getStackIndex(this.index,this._cachedMeta.stack,u?t:void 0);o=M.start+M.chunk*k+M.chunk/2,y=Math.min(d,M.chunk*M.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),y=Math.min(d,n.min*n.ratio);return{base:o-y/2,head:o+y/2,center:o,size:y}}draw(){const t=this._cachedMeta,n=t.vScale,r=t.data,s=r.length;let u=0;for(;u<s;++u)this.getParsed(u)[n.axis]!==null&&r[u].draw(this._ctx)}}R2.id="bar";R2.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};R2.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class F2 extends ga{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,n,r,s){const u=super.parsePrimitiveData(t,n,r,s);for(let d=0;d<u.length;d++)u[d]._custom=this.resolveDataElementOptions(d+r).radius;return u}parseArrayData(t,n,r,s){const u=super.parseArrayData(t,n,r,s);for(let d=0;d<u.length;d++){const o=n[r+d];u[d]._custom=Mn(o[2],this.resolveDataElementOptions(d+r).radius)}return u}parseObjectData(t,n,r,s){const u=super.parseObjectData(t,n,r,s);for(let d=0;d<u.length;d++){const o=n[r+d];u[d]._custom=Mn(o&&o.r&&+o.r,this.resolveDataElementOptions(d+r).radius)}return u}getMaxOverflow(){const t=this._cachedMeta.data;let n=0;for(let r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(t){const n=this._cachedMeta,{xScale:r,yScale:s}=n,u=this.getParsed(t),d=r.getLabelForValue(u.x),o=s.getLabelForValue(u.y),y=u._custom;return{label:n.label,value:"("+d+", "+o+(y?", "+y:"")+")"}}update(t){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,t)}updateElements(t,n,r,s){const u=s==="reset",{iScale:d,vScale:o}=this._cachedMeta,y=this.resolveDataElementOptions(n,s),w=this.getSharedOptions(y),M=this.includeOptions(s,w),k=d.axis,O=o.axis;for(let $=n;$<n+r;$++){const j=t[$],G=!u&&this.getParsed($),B={},U=B[k]=u?d.getPixelForDecimal(.5):d.getPixelForValue(G[k]),Z=B[O]=u?o.getBasePixel():o.getPixelForValue(G[O]);B.skip=isNaN(U)||isNaN(Z),M&&(B.options=this.resolveDataElementOptions($,j.active?"active":s),u&&(B.options.radius=0)),this.updateElement(j,$,B,s)}this.updateSharedOptions(w,s,y)}resolveDataElementOptions(t,n){const r=this.getParsed(t);let s=super.resolveDataElementOptions(t,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const u=s.radius;return n!=="active"&&(s.radius=0),s.radius+=Mn(r&&r._custom,u),s}}F2.id="bubble";F2.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};F2.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function Ij(e,t,n){let r=1,s=1,u=0,d=0;if(t<Ti){const o=e,y=o+t,w=Math.cos(o),M=Math.sin(o),k=Math.cos(y),O=Math.sin(y),$=(re,ie,de)=>Wm(re,o,y,!0)?1:Math.max(ie,ie*n,de,de*n),j=(re,ie,de)=>Wm(re,o,y,!0)?-1:Math.min(ie,ie*n,de,de*n),G=$(0,w,k),B=$(er,M,O),U=j(Qi,w,k),Z=j(Qi+er,M,O);r=(G-U)/2,s=(B-Z)/2,u=-(G+U)/2,d=-(B+Z)/2}return{ratioX:r,ratioY:s,offsetX:u,offsetY:d}}class Qm extends ga{constructor(t,n){super(t,n);this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let u=y=>+r[y];if(Nn(r[t])){const{key:y="value"}=this._parsing;u=w=>+ku(r[w],y)}let d,o;for(d=t,o=t+n;d<o;++d)s._parsed[d]=u(d)}}_getRotation(){return Ns(this.options.rotation-90)}_getCircumference(){return Ns(this.options.circumference)}_getRotationExtents(){let t=Ti,n=-Ti;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,u=s._getRotation(),d=s._getCircumference();t=Math.min(t,u),n=Math.max(n,u+d)}return{rotation:t,circumference:n-t}}update(t){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,u=s.data,d=this.getMaxBorderWidth()+this.getMaxOffset(u)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-d)/2,0),y=Math.min(PN(this.options.cutout,o),1),w=this._getRingWeight(this.index),{circumference:M,rotation:k}=this._getRotationExtents(),{ratioX:O,ratioY:$,offsetX:j,offsetY:G}=Ij(k,M,y),B=(r.width-d)/O,U=(r.height-d)/$,Z=Math.max(Math.min(B,U)/2,0),re=gI(this.options.radius,Z),ie=Math.max(re*y,0),de=(re-ie)/this._getVisibleDatasetWeightTotal();this.offsetX=j*re,this.offsetY=G*re,s.total=this.calculateTotal(),this.outerRadius=re-de*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-de*w,0),this.updateElements(u,0,u.length,t)}_circumference(t,n){const r=this.options,s=this._cachedMeta,u=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*u/Ti)}updateElements(t,n,r,s){const u=s==="reset",d=this.chart,o=d.chartArea,w=d.options.animation,M=(o.left+o.right)/2,k=(o.top+o.bottom)/2,O=u&&w.animateScale,$=O?0:this.innerRadius,j=O?0:this.outerRadius,G=this.resolveDataElementOptions(n,s),B=this.getSharedOptions(G),U=this.includeOptions(s,B);let Z=this._getRotation(),re;for(re=0;re<n;++re)Z+=this._circumference(re,u);for(re=n;re<n+r;++re){const ie=this._circumference(re,u),de=t[re],xe={x:M+this.offsetX,y:k+this.offsetY,startAngle:Z,endAngle:Z+ie,circumference:ie,outerRadius:j,innerRadius:$};U&&(xe.options=B||this.resolveDataElementOptions(re,de.active?"active":s)),Z+=ie,this.updateElement(de,re,xe,s)}this.updateSharedOptions(B,s,G)}calculateTotal(){const t=this._cachedMeta,n=t.data;let r=0,s;for(s=0;s<n.length;s++){const u=t._parsed[s];u!==null&&!isNaN(u)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(u))}return r}calculateCircumference(t){const n=this._cachedMeta.total;return n>0&&!isNaN(t)?Ti*(Math.abs(t)/n):0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],u=Km(n._parsed[t],r.options.locale);return{label:s[t]||"",value:u}}getMaxBorderWidth(t){let n=0;const r=this.chart;let s,u,d,o,y;if(!t){for(s=0,u=r.data.datasets.length;s<u;++s)if(r.isDatasetVisible(s)){d=r.getDatasetMeta(s),t=d.data,o=d.controller;break}}if(!t)return 0;for(s=0,u=t.length;s<u;++s)y=o.resolveDataElementOptions(s),y.borderAlign!=="inner"&&(n=Math.max(n,y.borderWidth||0,y.hoverBorderWidth||0));return n}getMaxOffset(t){let n=0;for(let r=0,s=t.length;r<s;++r){const u=this.resolveDataElementOptions(r);n=Math.max(n,u.offset||0,u.hoverOffset||0)}return n}_getRingWeightOffset(t){let n=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(t){return Math.max(Mn(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Qm.id="doughnut";Qm.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};Qm.descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"};Qm.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((r,s)=>{const d=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,lineWidth:d.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){let t=e.label;const n=": "+e.formattedValue;return Bi(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class j0 extends ga{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:u}=n,d=this.chart._animationsDisabled;let{start:o,count:y}=Pj(n,s,d);this._drawStart=o,this._drawCount=y,Oj(n)&&(o=0,y=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!u._decimated,r.points=s;const w=this.resolveDatasetElementOptions(t);this.options.showLine||(w.borderWidth=0),w.segment=this.options.segment,this.updateElement(r,void 0,{animated:!d,options:w},t),this.updateElements(s,o,y,t)}updateElements(t,n,r,s){const u=s==="reset",{iScale:d,vScale:o,_stacked:y,_dataset:w}=this._cachedMeta,M=this.resolveDataElementOptions(n,s),k=this.getSharedOptions(M),O=this.includeOptions(s,k),$=d.axis,j=o.axis,{spanGaps:G,segment:B}=this.options,U=$m(G)?G:Number.POSITIVE_INFINITY,Z=this.chart._animationsDisabled||u||s==="none";let re=n>0&&this.getParsed(n-1);for(let ie=n;ie<n+r;++ie){const de=t[ie],xe=this.getParsed(ie),Ce=Z?de:{},je=fi(xe[j]),ze=Ce[$]=d.getPixelForValue(xe[$],ie),pt=Ce[j]=u||je?o.getBasePixel():o.getPixelForValue(y?this.applyStack(o,xe,y):xe[j],ie);Ce.skip=isNaN(ze)||isNaN(pt)||je,Ce.stop=ie>0&&xe[$]-re[$]>U,B&&(Ce.parsed=xe,Ce.raw=w.data[ie]),O&&(Ce.options=k||this.resolveDataElementOptions(ie,de.active?"active":s)),Z||this.updateElement(de,ie,Ce,s),re=xe}this.updateSharedOptions(k,s,M)}getMaxOverflow(){const t=this._cachedMeta,n=t.dataset,r=n.options&&n.options.borderWidth||0,s=t.data||[];if(!s.length)return r;const u=s[0].size(this.resolveDataElementOptions(0)),d=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,u,d)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}j0.id="line";j0.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};j0.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function Pj(e,t,n){const r=t.length;let s=0,u=r;if(e._sorted){const{iScale:d,_parsed:o}=e,y=d.axis,{min:w,max:M,minDefined:k,maxDefined:O}=d.getUserBounds();k&&(s=eo(Math.min(Pu(o,d.axis,w).lo,n?r:Pu(t,y,d.getPixelForValue(w)).lo),0,r-1)),O?u=eo(Math.max(Pu(o,d.axis,M).hi+1,n?0:Pu(t,y,d.getPixelForValue(M)).hi+1),s,r)-s:u=r-s}return{start:s,count:u}}function Oj(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,s={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=s,!0;const u=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),u}class B2 extends ga{constructor(t,n){super(t,n);this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],u=Km(n._parsed[t].r,r.options.locale);return{label:s[t]||"",value:u}}update(t){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,t)}_updateRadius(){const t=this.chart,n=t.chartArea,r=t.options,s=Math.min(n.right-n.left,n.bottom-n.top),u=Math.max(s/2,0),d=Math.max(r.cutoutPercentage?u/100*r.cutoutPercentage:1,0),o=(u-d)/t.getVisibleDatasetCount();this.outerRadius=u-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,n,r,s){const u=s==="reset",d=this.chart,o=this.getDataset(),w=d.options.animation,M=this._cachedMeta.rScale,k=M.xCenter,O=M.yCenter,$=M.getIndexAngle(0)-.5*Qi;let j=$,G;const B=360/this.countVisibleElements();for(G=0;G<n;++G)j+=this._computeAngle(G,s,B);for(G=n;G<n+r;G++){const U=t[G];let Z=j,re=j+this._computeAngle(G,s,B),ie=d.getDataVisibility(G)?M.getDistanceFromCenterForValue(o.data[G]):0;j=re,u&&(w.animateScale&&(ie=0),w.animateRotate&&(Z=re=$));const de={x:k,y:O,innerRadius:0,outerRadius:ie,startAngle:Z,endAngle:re,options:this.resolveDataElementOptions(G,U.active?"active":s)};this.updateElement(U,G,de,s)}}countVisibleElements(){const t=this.getDataset(),n=this._cachedMeta;let r=0;return n.data.forEach((s,u)=>{!isNaN(t.data[u])&&this.chart.getDataVisibility(u)&&r++}),r}_computeAngle(t,n,r){return this.chart.getDataVisibility(t)?Ns(this.resolveDataElementOptions(t,n).angle||r):0}}B2.id="polarArea";B2.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};B2.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((r,s)=>{const d=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:d.backgroundColor,strokeStyle:d.borderColor,lineWidth:d.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title(){return""},label(e){return e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class bP extends Qm{}bP.id="pie";bP.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class N2 extends ga{getLabelAndValue(t){const n=this._cachedMeta.vScale,r=this.getParsed(t);return{label:n.getLabels()[t],value:""+n.getLabelForValue(r[n.axis])}}update(t){const n=this._cachedMeta,r=n.dataset,s=n.data||[],u=n.iScale.getLabels();if(r.points=s,t!=="resize"){const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0);const o={_loop:!0,_fullLoop:u.length===s.length,options:d};this.updateElement(r,void 0,o,t)}this.updateElements(s,0,s.length,t)}updateElements(t,n,r,s){const u=this.getDataset(),d=this._cachedMeta.rScale,o=s==="reset";for(let y=n;y<n+r;y++){const w=t[y],M=this.resolveDataElementOptions(y,w.active?"active":s),k=d.getPointPositionForValue(y,u.data[y]),O=o?d.xCenter:k.x,$=o?d.yCenter:k.y,j={x:O,y:$,angle:k.angle,skip:isNaN(O)||isNaN($),options:M};this.updateElement(w,y,j,s)}}}N2.id="radar";N2.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};N2.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class V2 extends j0{}V2.id="scatter";V2.defaults={showLine:!1,fill:!1};V2.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(e){return"("+e.label+", "+e.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function zu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class j2{constructor(t){this.options=t||{}}formats(){return zu()}parse(t,n){return zu()}format(t,n){return zu()}add(t,n,r){return zu()}diff(t,n,r){return zu()}startOf(t,n,r){return zu()}endOf(t,n){return zu()}}j2.override=function(e){Object.assign(j2.prototype,e)};var wP={_date:j2};function eg(e,t){return"native"in e?{x:e.x,y:e.y}:XI(e,t)}function Lj(e,t){const n=e.getSortedVisibleDatasetMetas();let r,s,u;for(let d=0,o=n.length;d<o;++d){({index:r,data:s}=n[d]);for(let y=0,w=s.length;y<w;++y)u=s[y],u.skip||t(u,r,y)}}function zj(e,t,n,r){const{controller:s,data:u,_sorted:d}=e,o=s._cachedMeta.iScale;if(o&&t===o.axis&&t!=="r"&&d&&u.length){const y=o._reversePixels?bV:Pu;if(r){if(s._sharedOptions){const w=u[0],M=typeof w.getRange=="function"&&w.getRange(t);if(M){const k=y(u,t,n-M),O=y(u,t,n+M);return{lo:k.lo,hi:O.hi}}}}else return y(u,t,n)}return{lo:0,hi:u.length-1}}function U2(e,t,n,r,s){const u=e.getSortedVisibleDatasetMetas(),d=n[t];for(let o=0,y=u.length;o<y;++o){const{index:w,data:M}=u[o],{lo:k,hi:O}=zj(u[o],t,d,s);for(let $=k;$<=O;++$){const j=M[$];j.skip||r(j,w,$)}}}function Rj(e){const t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(r,s){const u=t?Math.abs(r.x-s.x):0,d=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(d,2))}}function $2(e,t,n,r){const s=[];return Iu(t,e.chartArea,e._minPadding)&&U2(e,n,t,function(d,o,y){d.inRange(t.x,t.y,r)&&s.push({element:d,datasetIndex:o,index:y})},!0),s}function Fj(e,t,n,r){let s=[];function u(d,o,y){const{startAngle:w,endAngle:M}=d.getProps(["startAngle","endAngle"],r),{angle:k}=SI(d,{x:t.x,y:t.y});Wm(k,w,M)&&s.push({element:d,datasetIndex:o,index:y})}return U2(e,n,t,u),s}function Bj(e,t,n,r,s){let u=[];const d=Rj(n);let o=Number.POSITIVE_INFINITY;function y(w,M,k){const O=w.inRange(t.x,t.y,s);if(r&&!O)return;const $=w.getCenterPoint(s);if(!Iu($,e.chartArea,e._minPadding)&&!O)return;const G=d(t,$);G<o?(u=[{element:w,datasetIndex:M,index:k}],o=G):G===o&&u.push({element:w,datasetIndex:M,index:k})}return U2(e,n,t,y),u}function G2(e,t,n,r,s){return Iu(t,e.chartArea,e._minPadding)?n==="r"&&!r?Fj(e,t,n,s):Bj(e,t,n,r,s):[]}function EP(e,t,n,r){const s=eg(t,e),u=[],d=n.axis,o=d==="x"?"inXRange":"inYRange";let y=!1;return Lj(e,(w,M,k)=>{w[o](s[d],r)&&u.push({element:w,datasetIndex:M,index:k}),w.inRange(s.x,s.y,r)&&(y=!0)}),n.intersect&&!y?[]:u}var Nj={modes:{index(e,t,n,r){const s=eg(t,e),u=n.axis||"x",d=n.intersect?$2(e,s,u,r):G2(e,s,u,!1,r),o=[];return d.length?(e.getSortedVisibleDatasetMetas().forEach(y=>{const w=d[0].index,M=y.data[w];M&&!M.skip&&o.push({element:M,datasetIndex:y.index,index:w})}),o):[]},dataset(e,t,n,r){const s=eg(t,e),u=n.axis||"xy";let d=n.intersect?$2(e,s,u,r):G2(e,s,u,!1,r);if(d.length>0){const o=d[0].datasetIndex,y=e.getDatasetMeta(o).data;d=[];for(let w=0;w<y.length;++w)d.push({element:y[w],datasetIndex:o,index:w})}return d},point(e,t,n,r){const s=eg(t,e),u=n.axis||"xy";return $2(e,s,u,r)},nearest(e,t,n,r){const s=eg(t,e),u=n.axis||"xy";return G2(e,s,u,n.intersect,r)},x(e,t,n,r){return EP(e,t,{axis:"x",intersect:n.intersect},r)},y(e,t,n,r){return EP(e,t,{axis:"y",intersect:n.intersect},r)}}};const SP=["left","top","right","bottom"];function tg(e,t){return e.filter(n=>n.pos===t)}function TP(e,t){return e.filter(n=>SP.indexOf(n.pos)===-1&&n.box.axis===t)}function ng(e,t){return e.sort((n,r)=>{const s=t?r:n,u=t?n:r;return s.weight===u.weight?s.index-u.index:s.weight-u.weight})}function Vj(e){const t=[];let n,r,s,u,d,o;for(n=0,r=(e||[]).length;n<r;++n)s=e[n],{position:u,options:{stack:d,stackWeight:o=1}}=s,t.push({index:n,box:s,pos:u,horizontal:s.isHorizontal(),weight:s.weight,stack:d&&u+d,stackWeight:o});return t}function jj(e){const t={};for(const n of e){const{stack:r,pos:s,stackWeight:u}=n;if(!r||!SP.includes(s))continue;const d=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});d.count++,d.weight+=u}return t}function Uj(e,t){const n=jj(e),{vBoxMaxWidth:r,hBoxMaxHeight:s}=t;let u,d,o;for(u=0,d=e.length;u<d;++u){o=e[u];const{fullSize:y}=o.box,w=n[o.stack],M=w&&o.stackWeight/w.weight;o.horizontal?(o.width=M?M*r:y&&t.availableWidth,o.height=s):(o.width=r,o.height=M?M*s:y&&t.availableHeight)}return n}function $j(e){const t=Vj(e),n=ng(t.filter(w=>w.box.fullSize),!0),r=ng(tg(t,"left"),!0),s=ng(tg(t,"right")),u=ng(tg(t,"top"),!0),d=ng(tg(t,"bottom")),o=TP(t,"x"),y=TP(t,"y");return{fullSize:n,leftAndTop:r.concat(u),rightAndBottom:s.concat(y).concat(d).concat(o),chartArea:tg(t,"chartArea"),vertical:r.concat(s).concat(y),horizontal:u.concat(d).concat(o)}}function CP(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function MP(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Gj(e,t,n,r){const{pos:s,box:u}=n,d=e.maxPadding;if(!Nn(s)){n.size&&(e[s]-=n.size);const k=r[n.stack]||{size:0,count:1};k.size=Math.max(k.size,n.horizontal?u.height:u.width),n.size=k.size/k.count,e[s]+=n.size}u.getPadding&&MP(d,u.getPadding());const o=Math.max(0,t.outerWidth-CP(d,e,"left","right")),y=Math.max(0,t.outerHeight-CP(d,e,"top","bottom")),w=o!==e.w,M=y!==e.h;return e.w=o,e.h=y,n.horizontal?{same:w,other:M}:{same:M,other:w}}function Wj(e){const t=e.maxPadding;function n(r){const s=Math.max(t[r]-e[r],0);return e[r]+=s,s}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}function Hj(e,t){const n=t.maxPadding;function r(s){const u={left:0,top:0,right:0,bottom:0};return s.forEach(d=>{u[d]=Math.max(t[d],n[d])}),u}return r(e?["left","right"]:["top","bottom"])}function ig(e,t,n,r){const s=[];let u,d,o,y,w,M;for(u=0,d=e.length,w=0;u<d;++u){o=e[u],y=o.box,y.update(o.width||t.w,o.height||t.h,Hj(o.horizontal,t));const{same:k,other:O}=Gj(t,n,o,r);w|=k&&s.length,M=M||O,y.fullSize||s.push(o)}return w&&ig(s,t,n,r)||M}function U0(e,t,n,r,s){e.top=n,e.left=t,e.right=t+r,e.bottom=n+s,e.width=r,e.height=s}function kP(e,t,n,r){const s=n.padding;let{x:u,y:d}=t;for(const o of e){const y=o.box,w=r[o.stack]||{count:1,placed:0,weight:1},M=o.stackWeight/w.weight||1;if(o.horizontal){const k=t.w*M,O=w.size||y.height;ms(w.start)&&(d=w.start),y.fullSize?U0(y,s.left,d,n.outerWidth-s.right-s.left,O):U0(y,t.left+w.placed,d,k,O),w.start=d,w.placed+=k,d=y.bottom}else{const k=t.h*M,O=w.size||y.width;ms(w.start)&&(u=w.start),y.fullSize?U0(y,u,s.top,O,n.outerHeight-s.bottom-s.top):U0(y,u,t.top+w.placed,O,k),w.start=u,w.placed+=k,u=y.right}}t.x=u,t.y=d}Vn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var pc={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(n){t.draw(n)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const s=yo(e.options.layout.padding),u=Math.max(t-s.width,0),d=Math.max(n-s.height,0),o=$j(e.boxes),y=o.vertical,w=o.horizontal;pi(e.boxes,G=>{typeof G.beforeLayout=="function"&&G.beforeLayout()});const M=y.reduce((G,B)=>B.box.options&&B.box.options.display===!1?G:G+1,0)||1,k=Object.freeze({outerWidth:t,outerHeight:n,padding:s,availableWidth:u,availableHeight:d,vBoxMaxWidth:u/2/M,hBoxMaxHeight:d/2}),O=Object.assign({},s);MP(O,yo(r));const $=Object.assign({maxPadding:O,w:u,h:d,x:s.left,y:s.top},s),j=Uj(y.concat(w),k);ig(o.fullSize,$,k,j),ig(y,$,k,j),ig(w,$,k,j)&&ig(y,$,k,j),Wj($),kP(o.leftAndTop,$,k,j),$.x+=$.w,$.y+=$.h,kP(o.rightAndBottom,$,k,j),e.chartArea={left:$.left,top:$.top,right:$.left+$.w,bottom:$.top+$.h,height:$.h,width:$.w},pi(o.chartArea,G=>{const B=G.box;Object.assign(B,e.chartArea),B.update($.w,$.h,{left:0,top:0,right:0,bottom:0})})}};class AP{acquireContext(t,n){}releaseContext(t){return!1}addEventListener(t,n,r){}removeEventListener(t,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,n,r,s){return n=Math.max(0,n||t.width),r=r||t.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(t){return!0}updateConfig(t){}}class qj extends AP{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const $0="$chartjs",Yj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},DP=e=>e===null||e==="";function Zj(e,t){const n=e.style,r=e.getAttribute("height"),s=e.getAttribute("width");if(e[$0]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",DP(s)){const u=JI(e,"width");u!==void 0&&(e.width=u)}if(DP(r))if(e.style.height==="")e.height=e.width/(t||2);else{const u=JI(e,"height");u!==void 0&&(e.height=u)}return e}const IP=HV?{passive:!0}:!1;function Xj(e,t,n){e.addEventListener(t,n,IP)}function Kj(e,t,n){e.canvas.removeEventListener(t,n,IP)}function Jj(e,t){const n=Yj[e.type]||e.type,{x:r,y:s}=XI(e,t);return{type:n,chart:t,native:e,x:r!==void 0?r:null,y:s!==void 0?s:null}}function G0(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function Qj(e,t,n){const r=e.canvas,s=new MutationObserver(u=>{let d=!1;for(const o of u)d=d||G0(o.addedNodes,r),d=d&&!G0(o.removedNodes,r);d&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function eU(e,t,n){const r=e.canvas,s=new MutationObserver(u=>{let d=!1;for(const o of u)d=d||G0(o.removedNodes,r),d=d&&!G0(o.addedNodes,r);d&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const rg=new Map;let PP=0;function OP(){const e=window.devicePixelRatio;e!==PP&&(PP=e,rg.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function tU(e,t){rg.size||window.addEventListener("resize",OP),rg.set(e,t)}function nU(e){rg.delete(e),rg.size||window.removeEventListener("resize",OP)}function iU(e,t,n){const r=e.canvas,s=r&&I2(r);if(!s)return;const u=pI((o,y)=>{const w=s.clientWidth;n(o,y),w<s.clientWidth&&n()},window),d=new ResizeObserver(o=>{const y=o[0],w=y.contentRect.width,M=y.contentRect.height;w===0&&M===0||u(w,M)});return d.observe(s),tU(e,u),d}function W2(e,t,n){n&&n.disconnect(),t==="resize"&&nU(e)}function rU(e,t,n){const r=e.canvas,s=pI(u=>{e.ctx!==null&&n(Jj(u,e))},e,u=>{const d=u[0];return[d,d.offsetX,d.offsetY]});return Xj(r,t,s),s}class oU extends AP{acquireContext(t,n){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(Zj(t,n),r):null}releaseContext(t){const n=t.canvas;if(!n[$0])return!1;const r=n[$0].initial;["height","width"].forEach(u=>{const d=r[u];fi(d)?n.removeAttribute(u):n.setAttribute(u,d)});const s=r.style||{};return Object.keys(s).forEach(u=>{n.style[u]=s[u]}),n.width=n.width,delete n[$0],!0}addEventListener(t,n,r){this.removeEventListener(t,n);const s=t.$proxies||(t.$proxies={}),d={attach:Qj,detach:eU,resize:iU}[n]||rU;s[n]=d(t,n,r)}removeEventListener(t,n){const r=t.$proxies||(t.$proxies={}),s=r[n];if(!s)return;({attach:W2,detach:W2,resize:W2}[n]||Kj)(t,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,n,r,s){return WV(t,n,r,s)}isAttached(t){const n=I2(t);return!!(n&&n.isConnected)}}function sU(e){return!ZI()||typeof OffscreenCanvas!="undefined"&&e instanceof OffscreenCanvas?qj:oU}class _a{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}hasValue(){return $m(this.x)&&$m(this.y)}getProps(t,n){const r=this.$animations;if(!n||!r)return this;const s={};return t.forEach(u=>{s[u]=r[u]&&r[u].active()?r[u]._to:this[u]}),s}}_a.defaults={};_a.defaultRoutes=void 0;const LP={values(e){return Bi(e)?e:""+e},numeric(e,t,n){if(e===0)return"0";const r=this.chart.options.locale;let s,u=e;if(n.length>1){const w=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(w<1e-4||w>1e15)&&(s="scientific"),u=aU(e,n)}const d=gs(Math.abs(u)),o=Math.max(Math.min(-1*Math.floor(d),20),0),y={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(y,this.options.ticks.format),Km(e,r,y)},logarithmic(e,t,n){if(e===0)return"0";const r=e/Math.pow(10,Math.floor(gs(e)));return r===1||r===2||r===5?LP.numeric.call(this,e,t,n):""}};function aU(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e)),n}var W0={formatters:LP};Vn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:W0.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});Vn.route("scale.ticks","color","","color");Vn.route("scale.grid","color","","borderColor");Vn.route("scale.grid","borderColor","","borderColor");Vn.route("scale.title","color","","color");Vn.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"});Vn.describe("scales",{_fallback:"scale"});Vn.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"});function lU(e,t){const n=e.options.ticks,r=n.maxTicksLimit||cU(e),s=n.major.enabled?hU(t):[],u=s.length,d=s[0],o=s[u-1],y=[];if(u>r)return dU(t,y,s,u/r),y;const w=uU(s,t,r);if(u>0){let M,k;const O=u>1?Math.round((o-d)/(u-1)):null;for(H0(t,y,w,fi(O)?0:d-O,d),M=0,k=u-1;M<k;M++)H0(t,y,w,s[M],s[M+1]);return H0(t,y,w,o,fi(O)?t.length:o+O),y}return H0(t,y,w),y}function cU(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),s=e._maxLength/n;return Math.floor(Math.min(r,s))}function uU(e,t,n){const r=fU(e),s=t.length/n;if(!r)return Math.max(s,1);const u=VN(r);for(let d=0,o=u.length-1;d<o;d++){const y=u[d];if(y>s)return y}return Math.max(s,1)}function hU(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}function dU(e,t,n,r){let s=0,u=n[0],d;for(r=Math.ceil(r),d=0;d<e.length;d++)d===u&&(t.push(e[d]),s++,u=n[s*r])}function H0(e,t,n,r,s){const u=Mn(r,0),d=Math.min(Mn(s,e.length),e.length);let o=0,y,w,M;for(n=Math.ceil(n),s&&(y=s-r,n=y/Math.floor(y/n)),M=u;M<0;)o++,M=Math.round(u+o*n);for(w=Math.max(u,0);w<d;w++)w===M&&(t.push(e[w]),o++,M=Math.round(u+o*n))}function fU(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}const pU=e=>e==="left"?"right":e==="right"?"left":e,zP=(e,t,n)=>t==="top"||t==="left"?e[t]+n:e[t]-n;function RP(e,t){const n=[],r=e.length/t,s=e.length;let u=0;for(;u<s;u+=r)n.push(e[Math.floor(u)]);return n}function mU(e,t,n){const r=e.ticks.length,s=Math.min(t,r-1),u=e._startPixel,d=e._endPixel,o=1e-6;let y=e.getPixelForTick(s),w;if(!(n&&(r===1?w=Math.max(y-u,d-y):t===0?w=(e.getPixelForTick(1)-y)/2:w=(y-e.getPixelForTick(s-1))/2,y+=s<t?w:-w,y<u-o||y>d+o)))return y}function gU(e,t){pi(e,n=>{const r=n.gc,s=r.length/2;let u;if(s>t){for(u=0;u<s;++u)delete n.data[r[u]];r.splice(0,s)}})}function og(e){return e.drawTicks?e.tickLength:0}function FP(e,t){if(!e.display)return 0;const n=Vr(e.font,t),r=yo(e.padding);return(Bi(e.text)?e.text.length:1)*n.lineHeight+r.height}function _U(e,t){return fc(e,{scale:t,type:"scale"})}function yU(e,t,n){return fc(e,{tick:n,index:t,type:"tick"})}function vU(e,t,n){let r=mI(e);return(n&&t!=="right"||!n&&t==="right")&&(r=pU(r)),r}function xU(e,t,n,r){const{top:s,left:u,bottom:d,right:o,chart:y}=e,{chartArea:w,scales:M}=y;let k=0,O,$,j;const G=d-s,B=o-u;if(e.isHorizontal()){if($=Yo(r,u,o),Nn(n)){const U=Object.keys(n)[0],Z=n[U];j=M[U].getPixelForValue(Z)+G-t}else n==="center"?j=(w.bottom+w.top)/2+G-t:j=zP(e,n,t);O=o-u}else{if(Nn(n)){const U=Object.keys(n)[0],Z=n[U];$=M[U].getPixelForValue(Z)-B+t}else n==="center"?$=(w.left+w.right)/2-B+t:$=zP(e,n,t);j=Yo(r,d,s),k=n==="left"?-er:er}return{titleX:$,titleY:j,maxWidth:O,rotation:k}}class Ru extends _a{constructor(t){super();this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,n){return t}getUserBounds(){let{_userMin:t,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return t=ps(t,Number.POSITIVE_INFINITY),n=ps(n,Number.NEGATIVE_INFINITY),r=ps(r,Number.POSITIVE_INFINITY),s=ps(s,Number.NEGATIVE_INFINITY),{min:ps(t,r),max:ps(n,s),minDefined:rr(t),maxDefined:rr(n)}}getMinMax(t){let{min:n,max:r,minDefined:s,maxDefined:u}=this.getUserBounds(),d;if(s&&u)return{min:n,max:r};const o=this.getMatchingVisibleMetas();for(let y=0,w=o.length;y<w;++y)d=o[y].controller.getMinMax(this,t),s||(n=Math.min(n,d.min)),u||(r=Math.max(r,d.max));return n=u&&n>r?r:n,r=s&&n>r?n:r,{min:ps(n,ps(r,n)),max:ps(r,ps(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ii(this.options.beforeUpdate,[this])}update(t,n,r){const{beginAtZero:s,grace:u,ticks:d}=this.options,o=d.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=xV(this,u,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const y=o<this.ticks.length;this._convertTicksToLabels(y?RP(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),d.display&&(d.autoSkip||d.source==="auto")&&(this.ticks=lU(this,this.ticks),this._labelSizes=null),y&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,t=!t),this._startPixel=n,this._endPixel=r,this._reversePixels=t,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ii(this.options.afterUpdate,[this])}beforeSetDimensions(){Ii(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ii(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ii(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ii(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const n=this.options.ticks;let r,s,u;for(r=0,s=t.length;r<s;r++)u=t[r],u.label=Ii(n.callback,[u.value,r,t],this)}afterTickToLabelConversion(){Ii(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ii(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,n=t.ticks,r=this.ticks.length,s=n.minRotation||0,u=n.maxRotation;let d=s,o,y,w;if(!this._isVisible()||!n.display||s>=u||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const M=this._getLabelSizes(),k=M.widest.width,O=M.highest.height,$=eo(this.chart.width-k,0,this.maxWidth);o=t.offset?this.maxWidth/r:$/(r-1),k+6>o&&(o=$/(r-(t.offset?.5:1)),y=this.maxHeight-og(t.grid)-n.padding-FP(t.title,this.chart.options.font),w=Math.sqrt(k*k+O*O),d=g2(Math.min(Math.asin(eo((M.highest.height+6)/o,-1,1)),Math.asin(eo(y/w,-1,1))-Math.asin(eo(O/w,-1,1)))),d=Math.max(s,Math.min(u,d))),this.labelRotation=d}afterCalculateLabelRotation(){Ii(this.options.afterCalculateLabelRotation,[this])}beforeFit(){Ii(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:u}}=this,d=this._isVisible(),o=this.isHorizontal();if(d){const y=FP(s,n.options.font);if(o?(t.width=this.maxWidth,t.height=og(u)+y):(t.height=this.maxHeight,t.width=og(u)+y),r.display&&this.ticks.length){const{first:w,last:M,widest:k,highest:O}=this._getLabelSizes(),$=r.padding*2,j=Ns(this.labelRotation),G=Math.cos(j),B=Math.sin(j);if(o){const U=r.mirror?0:B*k.width+G*O.height;t.height=Math.min(this.maxHeight,t.height+U+$)}else{const U=r.mirror?0:G*k.width+B*O.height;t.width=Math.min(this.maxWidth,t.width+U+$)}this._calculatePadding(w,M,B,G)}}this._handleMargins(),o?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,n,r,s){const{ticks:{align:u,padding:d},position:o}=this.options,y=this.labelRotation!==0,w=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const M=this.getPixelForTick(0)-this.left,k=this.right-this.getPixelForTick(this.ticks.length-1);let O=0,$=0;y?w?(O=s*t.width,$=r*n.height):(O=r*t.height,$=s*n.width):u==="start"?$=n.width:u==="end"?O=t.width:(O=t.width/2,$=n.width/2),this.paddingLeft=Math.max((O-M+d)*this.width/(this.width-M),0),this.paddingRight=Math.max(($-k+d)*this.width/(this.width-k),0)}else{let M=n.height/2,k=t.height/2;u==="start"?(M=0,k=t.height):u==="end"&&(M=n.height,k=0),this.paddingTop=M+d,this.paddingBottom=k+d}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ii(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:n}=this.options;return n==="top"||n==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let n,r;for(n=0,r=t.length;n<r;n++)fi(t[n].label)&&(t.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=RP(r,n)),this._labelSizes=t=this._computeLabelSizes(r,r.length)}return t}_computeLabelSizes(t,n){const{ctx:r,_longestTextCache:s}=this,u=[],d=[];let o=0,y=0,w,M,k,O,$,j,G,B,U,Z,re;for(w=0;w<n;++w){if(O=t[w].label,$=this._resolveTickFontOptions(w),r.font=j=$.string,G=s[j]=s[j]||{data:{},gc:[]},B=$.lineHeight,U=Z=0,!fi(O)&&!Bi(O))U=P0(r,G.data,G.gc,U,O),Z=B;else if(Bi(O))for(M=0,k=O.length;M<k;++M)re=O[M],!fi(re)&&!Bi(re)&&(U=P0(r,G.data,G.gc,U,re),Z+=B);u.push(U),d.push(Z),o=Math.max(U,o),y=Math.max(Z,y)}gU(s,n);const ie=u.indexOf(o),de=d.indexOf(y),xe=Ce=>({width:u[Ce]||0,height:d[Ce]||0});return{first:xe(0),last:xe(n-1),widest:xe(ie),highest:xe(de),widths:u,heights:d}}getLabelForValue(t){return t}getPixelForValue(t,n){return NaN}getValueForPixel(t){}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const n=this._startPixel+t*this._length;return $N(this._alignToPixels?Du(this.chart,n,0):n)}getDecimalForPixel(t){const n=(t-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:n}=this;return t<0&&n<0?n:t>0&&n>0?t:0}getContext(t){const n=this.ticks||[];if(t>=0&&t<n.length){const r=n[t];return r.$context||(r.$context=yU(this.getContext(),t,r))}return this.$context||(this.$context=_U(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,n=Ns(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),u=this._getLabelSizes(),d=t.autoSkipPadding||0,o=u?u.widest.width+d:0,y=u?u.highest.height+d:0;return this.isHorizontal()?y*r>o*s?o/r:y/s:y*s<o*r?y/r:o/s}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const n=this.axis,r=this.chart,s=this.options,{grid:u,position:d}=s,o=u.offset,y=this.isHorizontal(),M=this.ticks.length+(o?1:0),k=og(u),O=[],$=u.setContext(this.getContext()),j=$.drawBorder?$.borderWidth:0,G=j/2,B=function(Ve){return Du(r,Ve,j)};let U,Z,re,ie,de,xe,Ce,je,ze,pt,mt,ot;if(d==="top")U=B(this.bottom),xe=this.bottom-k,je=U-G,pt=B(t.top)+G,ot=t.bottom;else if(d==="bottom")U=B(this.top),pt=t.top,ot=B(t.bottom)-G,xe=U+G,je=this.top+k;else if(d==="left")U=B(this.right),de=this.right-k,Ce=U-G,ze=B(t.left)+G,mt=t.right;else if(d==="right")U=B(this.left),ze=t.left,mt=B(t.right)-G,de=U+G,Ce=this.left+k;else if(n==="x"){if(d==="center")U=B((t.top+t.bottom)/2+.5);else if(Nn(d)){const Ve=Object.keys(d)[0],tt=d[Ve];U=B(this.chart.scales[Ve].getPixelForValue(tt))}pt=t.top,ot=t.bottom,xe=U+G,je=xe+k}else if(n==="y"){if(d==="center")U=B((t.left+t.right)/2);else if(Nn(d)){const Ve=Object.keys(d)[0],tt=d[Ve];U=B(this.chart.scales[Ve].getPixelForValue(tt))}de=U-G,Ce=de-k,ze=t.left,mt=t.right}const kt=Mn(s.ticks.maxTicksLimit,M),Ne=Math.max(1,Math.ceil(M/kt));for(Z=0;Z<M;Z+=Ne){const Ve=u.setContext(this.getContext(Z)),tt=Ve.lineWidth,ct=Ve.color,Ot=u.borderDash||[],Ut=Ve.borderDashOffset,un=Ve.tickWidth,st=Ve.tickColor,at=Ve.tickBorderDash||[],xt=Ve.tickBorderDashOffset;re=mU(this,Z,o),re!==void 0&&(ie=Du(r,re,tt),y?de=Ce=ze=mt=ie:xe=je=pt=ot=ie,O.push({tx1:de,ty1:xe,tx2:Ce,ty2:je,x1:ze,y1:pt,x2:mt,y2:ot,width:tt,color:ct,borderDash:Ot,borderDashOffset:Ut,tickWidth:un,tickColor:st,tickBorderDash:at,tickBorderDashOffset:xt}))}return this._ticksLength=M,this._borderValue=U,O}_computeLabelItems(t){const n=this.axis,r=this.options,{position:s,ticks:u}=r,d=this.isHorizontal(),o=this.ticks,{align:y,crossAlign:w,padding:M,mirror:k}=u,O=og(r.grid),$=O+M,j=k?-M:$,G=-Ns(this.labelRotation),B=[];let U,Z,re,ie,de,xe,Ce,je,ze,pt,mt,ot,kt="middle";if(s==="top")xe=this.bottom-j,Ce=this._getXAxisLabelAlignment();else if(s==="bottom")xe=this.top+j,Ce=this._getXAxisLabelAlignment();else if(s==="left"){const Ve=this._getYAxisLabelAlignment(O);Ce=Ve.textAlign,de=Ve.x}else if(s==="right"){const Ve=this._getYAxisLabelAlignment(O);Ce=Ve.textAlign,de=Ve.x}else if(n==="x"){if(s==="center")xe=(t.top+t.bottom)/2+$;else if(Nn(s)){const Ve=Object.keys(s)[0],tt=s[Ve];xe=this.chart.scales[Ve].getPixelForValue(tt)+$}Ce=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")de=(t.left+t.right)/2-$;else if(Nn(s)){const Ve=Object.keys(s)[0],tt=s[Ve];de=this.chart.scales[Ve].getPixelForValue(tt)}Ce=this._getYAxisLabelAlignment(O).textAlign}n==="y"&&(y==="start"?kt="top":y==="end"&&(kt="bottom"));const Ne=this._getLabelSizes();for(U=0,Z=o.length;U<Z;++U){re=o[U],ie=re.label;const Ve=u.setContext(this.getContext(U));je=this.getPixelForTick(U)+u.labelOffset,ze=this._resolveTickFontOptions(U),pt=ze.lineHeight,mt=Bi(ie)?ie.length:1;const tt=mt/2,ct=Ve.color,Ot=Ve.textStrokeColor,Ut=Ve.textStrokeWidth;d?(de=je,s==="top"?w==="near"||G!==0?ot=-mt*pt+pt/2:w==="center"?ot=-Ne.highest.height/2-tt*pt+pt:ot=-Ne.highest.height+pt/2:w==="near"||G!==0?ot=pt/2:w==="center"?ot=Ne.highest.height/2-tt*pt:ot=Ne.highest.height-mt*pt,k&&(ot*=-1)):(xe=je,ot=(1-mt)*pt/2);let un;if(Ve.showLabelBackdrop){const st=yo(Ve.backdropPadding),at=Ne.heights[U],xt=Ne.widths[U];let Vt=xe+ot-st.top,Gt=de-st.left;switch(kt){case"middle":Vt-=at/2;break;case"bottom":Vt-=at;break}switch(Ce){case"center":Gt-=xt/2;break;case"right":Gt-=xt;break}un={left:Gt,top:Vt,width:xt+st.width,height:at+st.height,color:Ve.backdropColor}}B.push({rotation:G,label:ie,font:ze,color:ct,strokeColor:Ot,strokeWidth:Ut,textOffset:ot,textAlign:Ce,textBaseline:kt,translation:[de,xe],backdrop:un})}return B}_getXAxisLabelAlignment(){const{position:t,ticks:n}=this.options;if(-Ns(this.labelRotation))return t==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"&&(s="right"),s}_getYAxisLabelAlignment(t){const{position:n,ticks:{crossAlign:r,mirror:s,padding:u}}=this.options,d=this._getLabelSizes(),o=t+u,y=d.widest.width;let w,M;return n==="left"?s?(M=this.right+u,r==="near"?w="left":r==="center"?(w="center",M+=y/2):(w="right",M+=y)):(M=this.right-o,r==="near"?w="right":r==="center"?(w="center",M-=y/2):(w="left",M=this.left)):n==="right"?s?(M=this.left+u,r==="near"?w="right":r==="center"?(w="center",M-=y/2):(w="left",M-=y)):(M=this.left+o,r==="near"?w="left":r==="center"?(w="center",M+=y/2):(w="right",M=this.right)):w="right",{textAlign:w,x:M}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:n},left:r,top:s,width:u,height:d}=this;n&&(t.save(),t.fillStyle=n,t.fillRect(r,s,u,d),t.restore())}getLineWidthForValue(t){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(u=>u.value===t);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(t){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let u,d;const o=(y,w,M)=>{!M.width||!M.color||(r.save(),r.lineWidth=M.width,r.strokeStyle=M.color,r.setLineDash(M.borderDash||[]),r.lineDashOffset=M.borderDashOffset,r.beginPath(),r.moveTo(y.x,y.y),r.lineTo(w.x,w.y),r.stroke(),r.restore())};if(n.display)for(u=0,d=s.length;u<d;++u){const y=s[u];n.drawOnChartArea&&o({x:y.x1,y:y.y1},{x:y.x2,y:y.y2},y),n.drawTicks&&o({x:y.tx1,y:y.ty1},{x:y.tx2,y:y.ty2},{color:y.tickColor,width:y.tickWidth,borderDash:y.tickBorderDash,borderDashOffset:y.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:n,options:{grid:r}}=this,s=r.setContext(this.getContext()),u=r.drawBorder?s.borderWidth:0;if(!u)return;const d=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let y,w,M,k;this.isHorizontal()?(y=Du(t,this.left,u)-u/2,w=Du(t,this.right,d)+d/2,M=k=o):(M=Du(t,this.top,u)-u/2,k=Du(t,this.bottom,d)+d/2,y=w=o),n.save(),n.lineWidth=s.borderWidth,n.strokeStyle=s.borderColor,n.beginPath(),n.moveTo(y,M),n.lineTo(w,k),n.stroke(),n.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&L0(r,s);const u=this._labelItems||(this._labelItems=this._computeLabelItems(t));let d,o;for(d=0,o=u.length;d<o;++d){const y=u[d],w=y.font,M=y.label;y.backdrop&&(r.fillStyle=y.backdrop.color,r.fillRect(y.backdrop.left,y.backdrop.top,y.backdrop.width,y.backdrop.height));let k=y.textOffset;Md(r,M,0,k,w,y)}s&&z0(r)}drawTitle(){const{ctx:t,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const u=Vr(r.font),d=yo(r.padding),o=r.align;let y=u.lineHeight/2;n==="bottom"||n==="center"||Nn(n)?(y+=d.bottom,Bi(r.text)&&(y+=u.lineHeight*(r.text.length-1))):y+=d.top;const{titleX:w,titleY:M,maxWidth:k,rotation:O}=xU(this,y,n,o);Md(t,r.text,0,0,u,{color:r.color,maxWidth:k,rotation:O,textAlign:vU(o,n,s),textBaseline:"middle",translation:[w,M]})}draw(t){!this._isVisible()||(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,n=t.ticks&&t.ticks.z||0,r=Mn(t.grid&&t.grid.z,-1);return!this._isVisible()||this.draw!==Ru.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r+1,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let u,d;for(u=0,d=n.length;u<d;++u){const o=n[u];o[r]===this.id&&(!t||o.type===t)&&s.push(o)}return s}_resolveTickFontOptions(t){const n=this.options.ticks.setContext(this.getContext(t));return Vr(n.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class q0{constructor(t,n,r){this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const n=Object.getPrototypeOf(t);let r;EU(n)&&(r=this.register(n));const s=this.items,u=t.id,d=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+t);return u in s||(s[u]=t,bU(t,d,r),this.override&&Vn.override(t.id,t.overrides)),d}get(t){return this.items[t]}unregister(t){const n=this.items,r=t.id,s=this.scope;r in n&&delete n[r],s&&r in Vn[s]&&(delete Vn[s][r],this.override&&delete Au[r])}}function bU(e,t,n){const r=Vm(Object.create(null),[n?Vn.get(n):{},Vn.get(t),e.defaults]);Vn.set(t,r),e.defaultRoutes&&wU(t,e.defaultRoutes),e.descriptors&&Vn.describe(t,e.descriptors)}function wU(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),s=r.pop(),u=[e].concat(r).join("."),d=t[n].split("."),o=d.pop(),y=d.join(".");Vn.route(u,s,y,o)})}function EU(e){return"id"in e&&"defaults"in e}class SU{constructor(){this.controllers=new q0(ga,"datasets",!0),this.elements=new q0(_a,"elements"),this.plugins=new q0(Object,"plugins"),this.scales=new q0(Ru,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,n,r){[...n].forEach(s=>{const u=r||this._getRegistryForType(s);r||u.isForType(s)||u===this.plugins&&s.id?this._exec(t,u,s):pi(s,d=>{const o=r||this._getRegistryForType(d);this._exec(t,o,d)})})}_exec(t,n,r){const s=m2(t);Ii(r["before"+s],[],r),n[t](r),Ii(r["after"+s],[],r)}_getRegistryForType(t){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(t))return r}return this.plugins}_get(t,n,r){const s=n.get(t);if(s===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return s}}var il=new SU;class TU{constructor(){this._init=[]}notify(t,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const u=s?this._descriptors(t).filter(s):this._descriptors(t),d=this._notify(u,t,n,r);return n==="afterDestroy"&&(this._notify(u,t,"stop"),this._notify(this._init,t,"uninstall")),d}_notify(t,n,r,s){s=s||{};for(const u of t){const d=u.plugin,o=d[r],y=[n,s,u.options];if(Ii(o,y,d)===!1&&s.cancelable)return!1}return!0}invalidate(){fi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),n}_createDescriptors(t,n){const r=t&&t.config,s=Mn(r.options&&r.options.plugins,{}),u=CU(r);return s===!1&&!n?[]:kU(t,u,s,n)}_notifyStateChanges(t){const n=this._oldCache||[],r=this._cache,s=(u,d)=>u.filter(o=>!d.some(y=>o.plugin.id===y.plugin.id));this._notify(s(n,r),t,"stop"),this._notify(s(r,n),t,"start")}}function CU(e){const t=[],n=Object.keys(il.plugins.items);for(let s=0;s<n.length;s++)t.push(il.getPlugin(n[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const u=r[s];t.indexOf(u)===-1&&t.push(u)}return t}function MU(e,t){return!t&&e===!1?null:e===!0?{}:e}function kU(e,t,n,r){const s=[],u=e.getContext();for(let d=0;d<t.length;d++){const o=t[d],y=o.id,w=MU(n[y],r);w!==null&&s.push({plugin:o,options:AU(e.config,o,w,u)})}return s}function AU(e,t,n,r){const s=e.pluginScopeKeys(t),u=e.getOptionScopes(n,s);return e.createResolver(u,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function H2(e,t){const n=Vn.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function DU(e,t){let n=e;return e==="_index_"?n=t:e==="_value_"&&(n=t==="x"?"y":"x"),n}function IU(e,t){return e===t?"_index_":"_value_"}function PU(e){if(e==="top"||e==="bottom")return"x";if(e==="left"||e==="right")return"y"}function q2(e,t){return e==="x"||e==="y"?e:t.axis||PU(t.position)||e.charAt(0).toLowerCase()}function OU(e,t){const n=Au[e.type]||{scales:{}},r=t.scales||{},s=H2(e.type,t),u=Object.create(null),d=Object.create(null);return Object.keys(r).forEach(o=>{const y=r[o];if(!Nn(y))return console.error(`Invalid scale configuration for scale: ${o}`);if(y._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const w=q2(o,y),M=IU(w,s),k=n.scales||{};u[w]=u[w]||o,d[o]=jm(Object.create(null),[{axis:w},y,k[w],k[M]])}),e.data.datasets.forEach(o=>{const y=o.type||e.type,w=o.indexAxis||H2(y,t),k=(Au[y]||{}).scales||{};Object.keys(k).forEach(O=>{const $=DU(O,w),j=o[$+"AxisID"]||u[$]||$;d[j]=d[j]||Object.create(null),jm(d[j],[{axis:$},r[j],k[O]])})}),Object.keys(d).forEach(o=>{const y=d[o];jm(y,[Vn.scales[y.type],Vn.scale])}),d}function BP(e){const t=e.options||(e.options={});t.plugins=Mn(t.plugins,{}),t.scales=OU(e,t)}function NP(e){return e=e||{},e.datasets=e.datasets||[],e.labels=e.labels||[],e}function LU(e){return e=e||{},e.data=NP(e.data),BP(e),e}const VP=new Map,jP=new Set;function Y0(e,t){let n=VP.get(e);return n||(n=t(),VP.set(e,n),jP.add(n)),n}const sg=(e,t,n)=>{const r=ku(t,n);r!==void 0&&e.add(r)};class zU{constructor(t){this._config=LU(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=NP(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),BP(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Y0(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,n){return Y0(`${t}.transition.${n}`,()=>[[`datasets.${t}.transitions.${n}`,`transitions.${n}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,n){return Y0(`${t}-${n}`,()=>[[`datasets.${t}.elements.${n}`,`datasets.${t}`,`elements.${n}`,""]])}pluginScopeKeys(t){const n=t.id,r=this.type;return Y0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,n){const r=this._scopeCache;let s=r.get(t);return(!s||n)&&(s=new Map,r.set(t,s)),s}getOptionScopes(t,n,r){const{options:s,type:u}=this,d=this._cachedScopes(t,r),o=d.get(n);if(o)return o;const y=new Set;n.forEach(M=>{t&&(y.add(t),M.forEach(k=>sg(y,t,k))),M.forEach(k=>sg(y,s,k)),M.forEach(k=>sg(y,Au[u]||{},k)),M.forEach(k=>sg(y,Vn,k)),M.forEach(k=>sg(y,S2,k))});const w=Array.from(y);return w.length===0&&w.push(Object.create(null)),jP.has(n)&&d.set(n,w),w}chartOptionScopes(){const{options:t,type:n}=this;return[t,Au[n]||{},Vn.datasets[n]||{},{type:n},Vn,S2]}resolveNamedOptions(t,n,r,s=[""]){const u={$shared:!0},{resolver:d,subPrefixes:o}=UP(this._resolverCache,t,s);let y=d;if(FU(d,n)){u.$shared=!1,r=dc(r)?r():r;const w=this.createResolver(t,r,o);y=Ad(d,r,w)}for(const w of n)u[w]=y[w];return u}createResolver(t,n,r=[""],s){const{resolver:u}=UP(this._resolverCache,t,r);return Nn(n)?Ad(u,n,void 0,s):u}}function UP(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const s=n.join();let u=r.get(s);return u||(u={resolver:k2(t,n),subPrefixes:n.filter(o=>!o.toLowerCase().includes("hover"))},r.set(s,u)),u}const RU=e=>Nn(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||dc(e[n]),!1);function FU(e,t){const{isScriptable:n,isIndexable:r}=UI(e);for(const s of t){const u=n(s),d=r(s),o=(d||u)&&e[s];if(u&&(dc(o)||RU(o))||d&&Bi(o))return!0}return!1}var BU="3.7.0";const NU=["top","bottom","left","right","chartArea"];function $P(e,t){return e==="top"||e==="bottom"||NU.indexOf(e)===-1&&t==="x"}function GP(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function WP(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ii(n&&n.onComplete,[e],t)}function VU(e){const t=e.chart,n=t.options.animation;Ii(n&&n.onProgress,[e],t)}function HP(e){return ZI()&&typeof e=="string"?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const Z0={},qP=e=>{const t=HP(e);return Object.values(Z0).filter(n=>n.canvas===t).pop()};function jU(e,t,n){const r=Object.keys(e);for(const s of r){const u=+s;if(u>=t){const d=e[s];delete e[s],(n>0||u>t)&&(e[u+n]=d)}}}function UU(e,t,n,r){return!n||e.type==="mouseout"?null:r?t:e}class YP{constructor(t,n){const r=this.config=new zU(n),s=HP(t),u=qP(s);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas can be reused.");const d=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||sU(s)),this.platform.updateConfig(r);const o=this.platform.acquireContext(s,d.aspectRatio),y=o&&o.canvas,w=y&&y.height,M=y&&y.width;if(this.id=IN(),this.ctx=o,this.canvas=y,this.width=M,this.height=w,this._options=d,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new TU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=AN(k=>this.update(k),d.resizeDelay||0),this._dataChanges=[],Z0[this.id]=this,!o||!y){console.error("Failed to create chart: can't acquire context from the given item");return}nl.listen(this,"complete",WP),nl.listen(this,"progress",VU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:n},width:r,height:s,_aspectRatio:u}=this;return fi(t)?n&&u?u:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():KI(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return FI(this.canvas,this.ctx),this}stop(){return nl.stop(this),this}resize(t,n){nl.running(this)?this._resizeBeforeDraw={width:t,height:n}:this._resize(t,n)}_resize(t,n){const r=this.options,s=this.canvas,u=r.maintainAspectRatio&&this.aspectRatio,d=this.platform.getMaximumSize(s,t,n,u),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),y=this.width?"resize":"attach";this.width=d.width,this.height=d.height,this._aspectRatio=this.aspectRatio,!!KI(this,o,!0)&&(this.notifyPlugins("resize",{size:d}),Ii(r.onResize,[this,d],this),this.attached&&this._doResize(y)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pi(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const t=this.options,n=t.scales,r=this.scales,s=Object.keys(r).reduce((d,o)=>(d[o]=!1,d),{});let u=[];n&&(u=u.concat(Object.keys(n).map(d=>{const o=n[d],y=q2(d,o),w=y==="r",M=y==="x";return{options:o,dposition:w?"chartArea":M?"bottom":"left",dtype:w?"radialLinear":M?"category":"linear"}}))),pi(u,d=>{const o=d.options,y=o.id,w=q2(y,o),M=Mn(o.type,d.dtype);(o.position===void 0||$P(o.position,w)!==$P(d.dposition))&&(o.position=d.dposition),s[y]=!0;let k=null;if(y in r&&r[y].type===M)k=r[y];else{const O=il.getScale(M);k=new O({id:y,type:M,ctx:this.ctx,chart:this}),r[k.id]=k}k.init(o,t)}),pi(s,(d,o)=>{d||delete r[o]}),pi(r,d=>{pc.configure(this,d,d.options),pc.addBox(this,d)})}_updateMetasets(){const t=this._metasets,n=this.data.datasets.length,r=t.length;if(t.sort((s,u)=>s.index-u.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);t.splice(n,r-n)}this._sortedMetasets=t.slice(0).sort(GP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:n}}=this;t.length>n.length&&delete this._stacks,t.forEach((r,s)=>{n.filter(u=>u===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const t=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const u=n[r];let d=this.getDatasetMeta(r);const o=u.type||this.config.type;if(d.type&&d.type!==o&&(this._destroyDatasetMeta(r),d=this.getDatasetMeta(r)),d.type=o,d.indexAxis=u.indexAxis||H2(o,this.options),d.order=u.order||0,d.index=r,d.label=""+u.label,d.visible=this.isDatasetVisible(r),d.controller)d.controller.updateIndex(r),d.controller.linkScales();else{const y=il.getController(o),{datasetElementType:w,dataElementType:M}=Vn.datasets[o];Object.assign(y.prototype,{dataElementType:il.getElement(M),datasetElementType:w&&il.getElement(w)}),d.controller=new y(this,r),t.push(d.controller)}}return this._updateMetasets(),t}_resetElements(){pi(this.data.datasets,(t,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let d=0;for(let w=0,M=this.data.datasets.length;w<M;w++){const{controller:k}=this.getDatasetMeta(w),O=!s&&u.indexOf(k)===-1;k.buildOrUpdateElements(O),d=Math.max(+k.getMaxOverflow(),d)}d=this._minPadding=r.layout.autoPadding?d:0,this._updateLayout(d),s||pi(u,w=>{w.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(GP("z","_idx"));const{_active:o,_lastEvent:y}=this;y?this._eventHandler(y,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){pi(this.scales,t=>{pc.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!vI(n,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:u}of n){const d=r==="_removeElements"?-u:u;jU(t,s,d)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=u=>new Set(t.filter(d=>d[0]===u).map((d,o)=>o+","+d.splice(1).join(","))),s=r(0);for(let u=1;u<n;u++)if(!vI(s,r(u)))return;return Array.from(s).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pc.update(this,this.width,this.height,t);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],pi(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,u)=>{s._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,dc(t)?t({datasetIndex:n}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,n){const r=this.getDatasetMeta(t),s={meta:r,index:t,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(nl.has(this)?this.attached&&!nl.running(this)&&nl.start(this):(this.draw(),WP({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(t=0;t<n.length&&n[t].z<=0;++t)n[t].draw(this.chartArea);for(this._drawDatasets();t<n.length;++t)n[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const n=this._sortedMetasets,r=[];let s,u;for(s=0,u=n.length;s<u;++s){const d=n[s];(!t||d.visible)&&r.push(d)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let n=t.length-1;n>=0;--n)this._drawDataset(t[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const n=this.ctx,r=t._clip,s=!r.disabled,u=this.chartArea,d={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",d)!==!1&&(s&&L0(n,{left:r.left===!1?0:u.left-r.left,right:r.right===!1?this.width:u.right+r.right,top:r.top===!1?0:u.top-r.top,bottom:r.bottom===!1?this.height:u.bottom+r.bottom}),t.controller.draw(),s&&z0(n),d.cancelable=!1,this.notifyPlugins("afterDatasetDraw",d))}getElementsAtEventForMode(t,n,r,s){const u=Nj.modes[n];return typeof u=="function"?u(this,t,r,s):[]}getDatasetMeta(t){const n=this.data.datasets[t],r=this._metasets;let s=r.filter(u=>u&&u._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:t,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=fc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const n=this.data.datasets[t];if(!n)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(t,n){const r=this.getDatasetMeta(t);r.hidden=!n}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,n,r){const s=r?"show":"hide",u=this.getDatasetMeta(t),d=u.controller._resolveAnimations(void 0,s);ms(n)?(u.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),d.update(u,{visible:r}),this.update(o=>o.datasetIndex===t?s:void 0))}hide(t,n){this._updateVisibility(t,n,!1)}show(t,n){this._updateVisibility(t,n,!0)}_destroyDatasetMeta(t){const n=this._metasets[t];n&&n.controller&&n.controller._destroy(),delete this._metasets[t]}_stop(){let t,n;for(this.stop(),nl.remove(this),t=0,n=this.data.datasets.length;t<n;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:n}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),FI(t,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete Z0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,n=this.platform,r=(u,d)=>{n.addEventListener(this,u,d),t[u]=d},s=(u,d,o)=>{u.offsetX=d,u.offsetY=o,this._eventHandler(u)};pi(this.options.events,u=>r(u,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,n=this.platform,r=(y,w)=>{n.addEventListener(this,y,w),t[y]=w},s=(y,w)=>{t[y]&&(n.removeEventListener(this,y,w),delete t[y])},u=(y,w)=>{this.canvas&&this.resize(y,w)};let d;const o=()=>{s("attach",o),this.attached=!0,this.resize(),r("resize",u),r("detach",d)};d=()=>{this.attached=!1,s("resize",u),this._stop(),this._resize(0,0),r("attach",o)},n.isAttached(this.canvas)?o():d()}unbindEvents(){pi(this._listeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._listeners={},pi(this._responsiveListeners,(t,n)=>{this.platform.removeEventListener(this,n,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,n,r){const s=r?"set":"remove";let u,d,o,y;for(n==="dataset"&&(u=this.getDatasetMeta(t[0].datasetIndex),u.controller["_"+s+"DatasetHoverStyle"]()),o=0,y=t.length;o<y;++o){d=t[o];const w=d&&this.getDatasetMeta(d.datasetIndex).controller;w&&w[s+"HoverStyle"](d.element,d.datasetIndex,d.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const n=this._active||[],r=t.map(({datasetIndex:u,index:d})=>{const o=this.getDatasetMeta(u);if(!o)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:o.data[d],index:d}});!E0(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(t,n,r){return this._plugins.notify(this,t,n,r)}_updateHoverStyles(t,n,r){const s=this.options.hover,u=(y,w)=>y.filter(M=>!w.some(k=>M.datasetIndex===k.datasetIndex&&M.index===k.index)),d=u(n,t),o=r?t:u(t,n);d.length&&this.updateHoverStyle(d,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(t,n){const r={event:t,replay:n,cancelable:!0,inChartArea:Iu(t,this.chartArea,this._minPadding)},s=d=>(d.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const u=this._handleEvent(t,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(u||r.changed)&&this.render(),this}_handleEvent(t,n,r){const{_active:s=[],options:u}=this,d=n,o=this._getActiveElements(t,s,r,d),y=FN(t),w=UU(t,this._lastEvent,r,y);r&&(this._lastEvent=null,Ii(u.onHover,[t,o,this],this),y&&Ii(u.onClick,[t,o,this],this));const M=!E0(o,s);return(M||n)&&(this._active=o,this._updateHoverStyles(o,s,n)),this._lastEvent=w,M}_getActiveElements(t,n,r,s){if(t.type==="mouseout")return[];if(!r)return n;const u=this.options.hover;return this.getElementsAtEventForMode(t,u.mode,u,s)}}const ZP=()=>pi(YP.instances,e=>e._plugins.invalidate()),mc=!0;Object.defineProperties(YP,{defaults:{enumerable:mc,value:Vn},instances:{enumerable:mc,value:Z0},overrides:{enumerable:mc,value:Au},registry:{enumerable:mc,value:il},version:{enumerable:mc,value:BU},getChart:{enumerable:mc,value:qP},register:{enumerable:mc,value:(...e)=>{il.add(...e),ZP()}},unregister:{enumerable:mc,value:(...e)=>{il.remove(...e),ZP()}}});function XP(e,t,n){const{startAngle:r,pixelMargin:s,x:u,y:d,outerRadius:o,innerRadius:y}=t;let w=s/o;e.beginPath(),e.arc(u,d,o,r-w,n+w),y>s?(w=s/y,e.arc(u,d,y,n+w,r-w,!0)):e.arc(u,d,s,n+er,r-er),e.closePath(),e.clip()}function $U(e){return C2(e,["outerStart","outerEnd","innerStart","innerEnd"])}function GU(e,t,n,r){const s=$U(e.options.borderRadius),u=(n-t)/2,d=Math.min(u,r*t/2),o=y=>{const w=(n-Math.min(u,y))*r/2;return eo(y,0,Math.min(u,w))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:eo(s.innerStart,0,d),innerEnd:eo(s.innerEnd,0,d)}}function Pd(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function Y2(e,t,n,r,s){const{x:u,y:d,startAngle:o,pixelMargin:y,innerRadius:w}=t,M=Math.max(t.outerRadius+r+n-y,0),k=w>0?w+r+n+y:0;let O=0;const $=s-o;if(r){const tt=w>0?w-r:0,ct=M>0?M-r:0,Ot=(tt+ct)/2,Ut=Ot!==0?$*Ot/(Ot+r):$;O=($-Ut)/2}const j=Math.max(.001,$*M-n/Qi)/M,G=($-j)/2,B=o+G+O,U=s-G-O,{outerStart:Z,outerEnd:re,innerStart:ie,innerEnd:de}=GU(t,k,M,U-B),xe=M-Z,Ce=M-re,je=B+Z/xe,ze=U-re/Ce,pt=k+ie,mt=k+de,ot=B+ie/pt,kt=U-de/mt;if(e.beginPath(),e.arc(u,d,M,je,ze),re>0){const tt=Pd(Ce,ze,u,d);e.arc(tt.x,tt.y,re,ze,U+er)}const Ne=Pd(mt,U,u,d);if(e.lineTo(Ne.x,Ne.y),de>0){const tt=Pd(mt,kt,u,d);e.arc(tt.x,tt.y,de,U+er,kt+Math.PI)}if(e.arc(u,d,k,U-de/k,B+ie/k,!0),ie>0){const tt=Pd(pt,ot,u,d);e.arc(tt.x,tt.y,ie,ot+Math.PI,B-er)}const Ve=Pd(xe,B,u,d);if(e.lineTo(Ve.x,Ve.y),Z>0){const tt=Pd(xe,je,u,d);e.arc(tt.x,tt.y,Z,B-er,je)}e.closePath()}function WU(e,t,n,r){const{fullCircles:s,startAngle:u,circumference:d}=t;let o=t.endAngle;if(s){Y2(e,t,n,r,u+Ti);for(let y=0;y<s;++y)e.fill();isNaN(d)||(o=u+d%Ti,d%Ti==0&&(o+=Ti))}return Y2(e,t,n,r,o),e.fill(),o}function HU(e,t,n){const{x:r,y:s,startAngle:u,pixelMargin:d,fullCircles:o}=t,y=Math.max(t.outerRadius-d,0),w=t.innerRadius+d;let M;for(n&&XP(e,t,u+Ti),e.beginPath(),e.arc(r,s,w,u+Ti,u,!0),M=0;M<o;++M)e.stroke();for(e.beginPath(),e.arc(r,s,y,u,u+Ti),M=0;M<o;++M)e.stroke()}function qU(e,t,n,r,s){const{options:u}=t,{borderWidth:d,borderJoinStyle:o}=u,y=u.borderAlign==="inner";!d||(y?(e.lineWidth=d*2,e.lineJoin=o||"round"):(e.lineWidth=d,e.lineJoin=o||"bevel"),t.fullCircles&&HU(e,t,y),y&&XP(e,t,s),Y2(e,t,n,r,s),e.stroke())}class Z2 extends _a{constructor(t){super();this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.getProps(["x","y"],r),{angle:u,distance:d}=SI(s,{x:t,y:n}),{startAngle:o,endAngle:y,innerRadius:w,outerRadius:M,circumference:k}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),O=this.options.spacing/2,j=Mn(k,y-o)>=Ti||Wm(u,o,y),G=tl(d,w+O,M+O);return j&&G}getCenterPoint(t){const{x:n,y:r,startAngle:s,endAngle:u,innerRadius:d,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:y,spacing:w}=this.options,M=(s+u)/2,k=(d+o+w+y)/2;return{x:n+Math.cos(M)*k,y:r+Math.sin(M)*k}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:r}=this,s=(n.offset||0)/2,u=(n.spacing||0)/2;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=r>Ti?Math.floor(r/Ti):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let d=0;if(s){d=s/2;const y=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(y)*d,Math.sin(y)*d),this.circumference>=Qi&&(d=s)}t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor;const o=WU(t,this,d,u);qU(t,this,d,u,o),t.restore()}}Z2.id="arc";Z2.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};Z2.defaultRoutes={backgroundColor:"backgroundColor"};function KP(e,t,n=t){e.lineCap=Mn(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Mn(n.borderDash,t.borderDash)),e.lineDashOffset=Mn(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Mn(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Mn(n.borderWidth,t.borderWidth),e.strokeStyle=Mn(n.borderColor,t.borderColor)}function YU(e,t,n){e.lineTo(n.x,n.y)}function ZU(e){return e.stepped?dV:e.tension||e.cubicInterpolationMode==="monotone"?fV:YU}function JP(e,t,n={}){const r=e.length,{start:s=0,end:u=r-1}=n,{start:d,end:o}=t,y=Math.max(s,d),w=Math.min(u,o),M=s<d&&u<d||s>o&&u>o;return{count:r,start:y,loop:t.loop,ilen:w<y&&!M?r+w-y:w-y}}function XU(e,t,n,r){const{points:s,options:u}=t,{count:d,start:o,loop:y,ilen:w}=JP(s,n,r),M=ZU(u);let{move:k=!0,reverse:O}=r||{},$,j,G;for($=0;$<=w;++$)j=s[(o+(O?w-$:$))%d],!j.skip&&(k?(e.moveTo(j.x,j.y),k=!1):M(e,G,j,O,u.stepped),G=j);return y&&(j=s[(o+(O?w:0))%d],M(e,G,j,O,u.stepped)),!!y}function KU(e,t,n,r){const s=t.points,{count:u,start:d,ilen:o}=JP(s,n,r),{move:y=!0,reverse:w}=r||{};let M=0,k=0,O,$,j,G,B,U;const Z=ie=>(d+(w?o-ie:ie))%u,re=()=>{G!==B&&(e.lineTo(M,B),e.lineTo(M,G),e.lineTo(M,U))};for(y&&($=s[Z(0)],e.moveTo($.x,$.y)),O=0;O<=o;++O){if($=s[Z(O)],$.skip)continue;const ie=$.x,de=$.y,xe=ie|0;xe===j?(de<G?G=de:de>B&&(B=de),M=(k*M+ie)/++k):(re(),e.lineTo(ie,de),j=xe,k=0,G=B=de),U=de}re()}function X2(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!n?KU:XU}function JU(e){return e.stepped?qV:e.tension||e.cubicInterpolationMode==="monotone"?YV:Lu}function QU(e,t,n,r){let s=t._path;s||(s=t._path=new Path2D,t.path(s,n,r)&&s.closePath()),KP(e,t.options),e.stroke(s)}function e8(e,t,n,r){const{segments:s,options:u}=t,d=X2(t);for(const o of s)KP(e,u,o.style),e.beginPath(),d(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}const t8=typeof Path2D=="function";function n8(e,t,n,r){t8&&!t.options.segment?QU(e,t,n,r):e8(e,t,n,r)}class Fu extends _a{constructor(t){super();this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;NV(this._points,r,t,s,n),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tj(this,this.options.segment))}first(){const t=this.segments,n=this.points;return t.length&&n[t[0].start]}last(){const t=this.segments,n=this.points,r=t.length;return r&&n[t[r-1].end]}interpolate(t,n){const r=this.options,s=t[n],u=this.points,d=oP(this,{property:n,start:s,end:s});if(!d.length)return;const o=[],y=JU(r);let w,M;for(w=0,M=d.length;w<M;++w){const{start:k,end:O}=d[w],$=u[k],j=u[O];if($===j){o.push($);continue}const G=Math.abs((s-$[n])/(j[n]-$[n])),B=y($,j,G,r.stepped);B[n]=t[n],o.push(B)}return o.length===1?o[0]:o}pathSegment(t,n,r){return X2(this)(t,this,n,r)}path(t,n,r){const s=this.segments,u=X2(this);let d=this._loop;n=n||0,r=r||this.points.length-n;for(const o of s)d&=u(t,this,o,{start:n,end:n+r-1});return!!d}draw(t,n,r,s){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(t.save(),n8(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Fu.id="line";Fu.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};Fu.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};Fu.descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};function QP(e,t,n,r){const s=e.options,{[n]:u}=e.getProps([n],r);return Math.abs(t-u)<s.radius+s.hitRadius}class K2 extends _a{constructor(t){super();this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,r){const s=this.options,{x:u,y:d}=this.getProps(["x","y"],r);return Math.pow(t-u,2)+Math.pow(n-d,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,n){return QP(this,t,"x",n)}inYRange(t,n){return QP(this,t,"y",n)}getCenterPoint(t){const{x:n,y:r}=this.getProps(["x","y"],t);return{x:n,y:r}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const r=n&&t.borderWidth||0;return(n+r)*2}draw(t,n){const r=this.options;this.skip||r.radius<.1||!Iu(this,n,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,O0(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}K2.id="point";K2.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};K2.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function eO(e,t){const{x:n,y:r,base:s,width:u,height:d}=e.getProps(["x","y","base","width","height"],t);let o,y,w,M,k;return e.horizontal?(k=d/2,o=Math.min(n,s),y=Math.max(n,s),w=r-k,M=r+k):(k=u/2,o=n-k,y=n+k,w=Math.min(r,s),M=Math.max(r,s)),{left:o,top:w,right:y,bottom:M}}function gc(e,t,n,r){return e?0:eo(t,n,r)}function i8(e,t,n){const r=e.options.borderWidth,s=e.borderSkipped,u=BI(r);return{t:gc(s.top,u.top,0,n),r:gc(s.right,u.right,0,t),b:gc(s.bottom,u.bottom,0,n),l:gc(s.left,u.left,0,t)}}function r8(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),s=e.options.borderRadius,u=kd(s),d=Math.min(t,n),o=e.borderSkipped,y=r||Nn(s);return{topLeft:gc(!y||o.top||o.left,u.topLeft,0,d),topRight:gc(!y||o.top||o.right,u.topRight,0,d),bottomLeft:gc(!y||o.bottom||o.left,u.bottomLeft,0,d),bottomRight:gc(!y||o.bottom||o.right,u.bottomRight,0,d)}}function o8(e){const t=eO(e),n=t.right-t.left,r=t.bottom-t.top,s=i8(e,n/2,r/2),u=r8(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:u},inner:{x:t.left+s.l,y:t.top+s.t,w:n-s.l-s.r,h:r-s.t-s.b,radius:{topLeft:Math.max(0,u.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,u.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,u.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,u.bottomRight-Math.max(s.b,s.r))}}}}function J2(e,t,n,r){const s=t===null,u=n===null,o=e&&!(s&&u)&&eO(e,r);return o&&(s||tl(t,o.left,o.right))&&(u||tl(n,o.top,o.bottom))}function s8(e){return e.topLeft||e.topRight||e.bottomLeft||e.bottomRight}function a8(e,t){e.rect(t.x,t.y,t.w,t.h)}function Q2(e,t,n={}){const r=e.x!==n.x?-t:0,s=e.y!==n.y?-t:0,u=(e.x+e.w!==n.x+n.w?t:0)-r,d=(e.y+e.h!==n.y+n.h?t:0)-s;return{x:e.x+r,y:e.y+s,w:e.w+u,h:e.h+d,radius:e.radius}}class eE extends _a{constructor(t){super();this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:n,options:{borderColor:r,backgroundColor:s}}=this,{inner:u,outer:d}=o8(this),o=s8(d.radius)?R0:a8;t.save(),(d.w!==u.w||d.h!==u.h)&&(t.beginPath(),o(t,Q2(d,n,u)),t.clip(),o(t,Q2(u,-n,d)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,Q2(u,n)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,n,r){return J2(this,t,n,r)}inXRange(t,n){return J2(this,t,null,n)}inYRange(t,n){return J2(this,null,t,n)}getCenterPoint(t){const{x:n,y:r,base:s,horizontal:u}=this.getProps(["x","y","base","horizontal"],t);return{x:u?(n+s)/2:n,y:u?r:(r+s)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}eE.id="bar";eE.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};eE.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function l8(e,t){const n=e.getDatasetMeta(t);return n&&e.isDatasetVisible(t)?n.dataset:null}function c8(e){const t=e.options,n=t.fill;let r=Mn(n&&n.target,n);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function u8(e,t,n){const r=c8(e);if(Nn(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return rr(s)&&Math.floor(s)===s?((r[0]==="-"||r[0]==="+")&&(s=t+s),s===t||s<0||s>=n?!1:s):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function h8(e){const{scale:t={},fill:n}=e;let r=null,s;return n==="start"?r=t.bottom:n==="end"?r=t.top:Nn(n)?r=t.getPixelForValue(n.value):t.getBasePixel&&(r=t.getBasePixel()),rr(r)?(s=t.isHorizontal(),{x:s?r:null,y:s?null:r}):null}class tO{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,n,r){const{x:s,y:u,radius:d}=this;return n=n||{start:0,end:Ti},t.arc(s,u,d,n.end,n.start,!0),!r.bounds}interpolate(t){const{x:n,y:r,radius:s}=this,u=t.angle;return{x:n+Math.cos(u)*s,y:r+Math.sin(u)*s,angle:u}}}function d8(e){const{scale:t,fill:n}=e,r=t.options,s=t.getLabels().length,u=[],d=r.reverse?t.max:t.min,o=r.reverse?t.min:t.max;let y,w,M;if(n==="start"?M=d:n==="end"?M=o:Nn(n)?M=n.value:M=t.getBaseValue(),r.grid.circular)return w=t.getPointPositionForValue(0,d),new tO({x:w.x,y:w.y,radius:t.getDistanceFromCenterForValue(M)});for(y=0;y<s;++y)u.push(t.getPointPositionForValue(y,M));return u}function f8(e){return(e.scale||{}).getPointPositionForValue?d8(e):h8(e)}function nO(e,t,n){for(;t>e;t--){const r=n[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function p8(e,t){const{x:n=null,y:r=null}=e||{},s=t.points,u=[];return t.segments.forEach(({start:d,end:o})=>{o=nO(d,o,s);const y=s[d],w=s[o];r!==null?(u.push({x:y.x,y:r}),u.push({x:w.x,y:r})):n!==null&&(u.push({x:n,y:y.y}),u.push({x:n,y:w.y}))}),u}function m8(e){const{scale:t,index:n,line:r}=e,s=[],u=r.segments,d=r.points,o=g8(t,n);o.push(iO({x:null,y:t.bottom},r));for(let y=0;y<u.length;y++){const w=u[y];for(let M=w.start;M<=w.end;M++)_8(s,d[M],o)}return new Fu({points:s,options:{}})}function g8(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const u=r[s];if(u.index===t)break;u.hidden||n.unshift(u.dataset)}return n}function _8(e,t,n){const r=[];for(let s=0;s<n.length;s++){const u=n[s],{first:d,last:o,point:y}=y8(u,t,"x");if(!(!y||d&&o)){if(d)r.unshift(y);else if(e.push(y),!o)break}}e.push(...r)}function y8(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const s=r[n],u=e.segments,d=e.points;let o=!1,y=!1;for(let w=0;w<u.length;w++){const M=u[w],k=d[M.start][n],O=d[M.end][n];if(tl(s,k,O)){o=s===k,y=s===O;break}}return{first:o,last:y,point:r}}function v8(e){const{chart:t,fill:n,line:r}=e;if(rr(n))return l8(t,n);if(n==="stack")return m8(e);if(n==="shape")return!0;const s=f8(e);return s instanceof tO?s:iO(s,r)}function iO(e,t){let n=[],r=!1;return Bi(e)?(r=!0,n=e):n=p8(e,t),n.length?new Fu({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function x8(e,t,n){let s=e[t].fill;const u=[t];let d;if(!n)return s;for(;s!==!1&&u.indexOf(s)===-1;){if(!rr(s))return s;if(d=e[s],!d)return!1;if(d.visible)return s;u.push(s),s=d.fill}return!1}function rO(e,t,n){e.beginPath(),t.path(e),e.lineTo(t.last().x,n),e.lineTo(t.first().x,n),e.closePath(),e.clip()}function tE(e,t,n,r){if(r)return;let s=t[e],u=n[e];return e==="angle"&&(s=Zo(s),u=Zo(u)),{property:e,start:s,end:u}}function oO(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function b8(e,t,n){const r=e.segments,s=e.points,u=t.points,d=[];for(const o of r){let{start:y,end:w}=o;w=nO(y,w,s);const M=tE(n,s[y],s[w],o.loop);if(!t.segments){d.push({source:o,target:M,start:s[y],end:s[w]});continue}const k=oP(t,M);for(const O of k){const $=tE(n,u[O.start],u[O.end],O.loop),j=rP(o,s,$);for(const G of j)d.push({source:G,target:O,start:{[n]:oO(M,$,"start",Math.max)},end:{[n]:oO(M,$,"end",Math.min)}})}}return d}function w8(e,t,n){const{top:r,bottom:s}=t.chart.chartArea,{property:u,start:d,end:o}=n||{};u==="x"&&(e.beginPath(),e.rect(d,r,o-d,s-r),e.clip())}function sO(e,t,n,r){const s=t.interpolate(n,r);s&&e.lineTo(s.x,s.y)}function aO(e,t){const{line:n,target:r,property:s,color:u,scale:d}=t,o=b8(n,r,s);for(const{source:y,target:w,start:M,end:k}of o){const{style:{backgroundColor:O=u}={}}=y,$=r!==!0;e.save(),e.fillStyle=O,w8(e,d,$&&tE(s,M,k)),e.beginPath();const j=!!n.pathSegment(e,y);let G;if($){j?e.closePath():sO(e,r,k,s);const B=!!r.pathSegment(e,w,{move:j,reverse:!0});G=j&&B,G||sO(e,r,M,s)}e.closePath(),e.fill(G?"evenodd":"nonzero"),e.restore()}}function E8(e,t){const{line:n,target:r,above:s,below:u,area:d,scale:o}=t,y=n._loop?"angle":t.axis;e.save(),y==="x"&&u!==s&&(rO(e,r,d.top),aO(e,{line:n,target:r,color:s,scale:o,property:y}),e.restore(),e.save(),rO(e,r,d.bottom)),aO(e,{line:n,target:r,color:u,scale:o,property:y}),e.restore()}function nE(e,t,n){const r=v8(t),{line:s,scale:u,axis:d}=t,o=s.options,y=o.fill,w=o.backgroundColor,{above:M=w,below:k=w}=y||{};r&&s.points.length&&(L0(e,n),E8(e,{line:s,target:r,above:M,below:k,area:n,scale:u,axis:d}),z0(e))}var WQ={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,s=[];let u,d,o,y;for(d=0;d<r;++d)u=e.getDatasetMeta(d),o=u.dataset,y=null,o&&o.options&&o instanceof Fu&&(y={visible:e.isDatasetVisible(d),index:d,fill:u8(o,d,r),chart:e,axis:u.controller.options.indexAxis,scale:u.vScale,line:o}),u.$filler=y,s.push(y);for(d=0;d<r;++d)y=s[d],!(!y||y.fill===!1)&&(y.fill=x8(s,d,n.propagate))},beforeDraw(e,t,n){const r=n.drawTime==="beforeDraw",s=e.getSortedVisibleDatasetMetas(),u=e.chartArea;for(let d=s.length-1;d>=0;--d){const o=s[d].$filler;!o||(o.line.updateControlPoints(u,o.axis),r&&nE(e.ctx,o,u))}},beforeDatasetsDraw(e,t,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=e.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const u=r[s].$filler;u&&nE(e.ctx,u,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;!r||r.fill===!1||n.drawTime!=="beforeDatasetDraw"||nE(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lO=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}},S8=(e,t)=>e!==null&&t!==null&&e.datasetIndex===t.datasetIndex&&e.index===t.index;class cO extends _a{constructor(t){super();this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,n,r){this.maxWidth=t,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let n=Ii(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter(r=>t.filter(r,this.chart.data))),t.sort&&(n=n.sort((r,s)=>t.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:t,ctx:n}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,s=Vr(r.font),u=s.size,d=this._computeTitleHeight(),{boxWidth:o,itemHeight:y}=lO(r,u);let w,M;n.font=s.string,this.isHorizontal()?(w=this.maxWidth,M=this._fitRows(d,u,o,y)+10):(M=this.maxHeight,w=this._fitCols(d,u,o,y)+10),this.width=Math.min(w,t.maxWidth||this.maxWidth),this.height=Math.min(M,t.maxHeight||this.maxHeight)}_fitRows(t,n,r,s){const{ctx:u,maxWidth:d,options:{labels:{padding:o}}}=this,y=this.legendHitBoxes=[],w=this.lineWidths=[0],M=s+o;let k=t;u.textAlign="left",u.textBaseline="middle";let O=-1,$=-M;return this.legendItems.forEach((j,G)=>{const B=r+n/2+u.measureText(j.text).width;(G===0||w[w.length-1]+B+2*o>d)&&(k+=M,w[w.length-(G>0?0:1)]=0,$+=M,O++),y[G]={left:0,top:$,row:O,width:B,height:s},w[w.length-1]+=B+o}),k}_fitCols(t,n,r,s){const{ctx:u,maxHeight:d,options:{labels:{padding:o}}}=this,y=this.legendHitBoxes=[],w=this.columnSizes=[],M=d-t;let k=o,O=0,$=0,j=0,G=0;return this.legendItems.forEach((B,U)=>{const Z=r+n/2+u.measureText(B.text).width;U>0&&$+s+2*o>M&&(k+=O+o,w.push({width:O,height:$}),j+=O+o,G++,O=$=0),y[U]={left:j,top:$,col:G,width:Z,height:s},O=Math.max(O,Z),$+=s+o}),k+=O,w.push({width:O,height:$}),k}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:u}}=this,d=Id(u,this.left,this.width);if(this.isHorizontal()){let o=0,y=Yo(r,this.left+s,this.right-this.lineWidths[o]);for(const w of n)o!==w.row&&(o=w.row,y=Yo(r,this.left+s,this.right-this.lineWidths[o])),w.top+=this.top+t+s,w.left=d.leftForLtr(d.x(y),w.width),y+=w.width+s}else{let o=0,y=Yo(r,this.top+t+s,this.bottom-this.columnSizes[o].height);for(const w of n)w.col!==o&&(o=w.col,y=Yo(r,this.top+t+s,this.bottom-this.columnSizes[o].height)),w.top=y,w.left+=this.left+s,w.left=d.leftForLtr(d.x(w.left),w.width),y+=w.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;L0(t,this),this._draw(),z0(t)}}_draw(){const{options:t,columnSizes:n,lineWidths:r,ctx:s}=this,{align:u,labels:d}=t,o=Vn.color,y=Id(t.rtl,this.left,this.width),w=Vr(d.font),{color:M,padding:k}=d,O=w.size,$=O/2;let j;this.drawTitle(),s.textAlign=y.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=w.string;const{boxWidth:G,boxHeight:B,itemHeight:U}=lO(d,O),Z=function(Ce,je,ze){if(isNaN(G)||G<=0||isNaN(B)||B<0)return;s.save();const pt=Mn(ze.lineWidth,1);if(s.fillStyle=Mn(ze.fillStyle,o),s.lineCap=Mn(ze.lineCap,"butt"),s.lineDashOffset=Mn(ze.lineDashOffset,0),s.lineJoin=Mn(ze.lineJoin,"miter"),s.lineWidth=pt,s.strokeStyle=Mn(ze.strokeStyle,o),s.setLineDash(Mn(ze.lineDash,[])),d.usePointStyle){const mt={radius:G*Math.SQRT2/2,pointStyle:ze.pointStyle,rotation:ze.rotation,borderWidth:pt},ot=y.xPlus(Ce,G/2),kt=je+$;O0(s,mt,ot,kt)}else{const mt=je+Math.max((O-B)/2,0),ot=y.leftForLtr(Ce,G),kt=kd(ze.borderRadius);s.beginPath(),Object.values(kt).some(Ne=>Ne!==0)?R0(s,{x:ot,y:mt,w:G,h:B,radius:kt}):s.rect(ot,mt,G,B),s.fill(),pt!==0&&s.stroke()}s.restore()},re=function(Ce,je,ze){Md(s,ze.text,Ce,je+U/2,w,{strikethrough:ze.hidden,textAlign:y.textAlign(ze.textAlign)})},ie=this.isHorizontal(),de=this._computeTitleHeight();ie?j={x:Yo(u,this.left+k,this.right-r[0]),y:this.top+k+de,line:0}:j={x:this.left+k,y:Yo(u,this.top+de+k,this.bottom-n[0].height),line:0},eP(this.ctx,t.textDirection);const xe=U+k;this.legendItems.forEach((Ce,je)=>{s.strokeStyle=Ce.fontColor||M,s.fillStyle=Ce.fontColor||M;const ze=s.measureText(Ce.text).width,pt=y.textAlign(Ce.textAlign||(Ce.textAlign=d.textAlign)),mt=G+$+ze;let ot=j.x,kt=j.y;y.setWidth(this.width),ie?je>0&&ot+mt+k>this.right&&(kt=j.y+=xe,j.line++,ot=j.x=Yo(u,this.left+k,this.right-r[j.line])):je>0&&kt+xe>this.bottom&&(ot=j.x=ot+n[j.line].width+k,j.line++,kt=j.y=Yo(u,this.top+de+k,this.bottom-n[j.line].height));const Ne=y.x(ot);Z(Ne,kt,Ce),ot=DN(pt,ot+G+$,ie?ot+mt:this.right,t.rtl),re(y.x(ot),kt,Ce),ie?j.x+=mt+k:j.y+=xe}),tP(this.ctx,t.textDirection)}drawTitle(){const t=this.options,n=t.title,r=Vr(n.font),s=yo(n.padding);if(!n.display)return;const u=Id(t.rtl,this.left,this.width),d=this.ctx,o=n.position,y=r.size/2,w=s.top+y;let M,k=this.left,O=this.width;if(this.isHorizontal())O=Math.max(...this.lineWidths),M=this.top+w,k=Yo(t.align,k,this.right-O);else{const j=this.columnSizes.reduce((G,B)=>Math.max(G,B.height),0);M=w+Yo(t.align,this.top,this.bottom-j-t.labels.padding-this._computeTitleHeight())}const $=Yo(o,k,k+O);d.textAlign=u.textAlign(mI(o)),d.textBaseline="middle",d.strokeStyle=n.color,d.fillStyle=n.color,d.font=r.string,Md(d,n.text,$,M,r)}_computeTitleHeight(){const t=this.options.title,n=Vr(t.font),r=yo(t.padding);return t.display?n.lineHeight+r.height:0}_getLegendItemAt(t,n){let r,s,u;if(tl(t,this.left,this.right)&&tl(n,this.top,this.bottom)){for(u=this.legendHitBoxes,r=0;r<u.length;++r)if(s=u[r],tl(t,s.left,s.left+s.width)&&tl(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(t){const n=this.options;if(!T8(t.type,n))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"){const s=this._hoveredItem,u=S8(s,r);s&&!u&&Ii(n.onLeave,[t,s,this],this),this._hoveredItem=r,r&&!u&&Ii(n.onHover,[t,r,this],this)}else r&&Ii(n.onClick,[t,r,this],this)}}function T8(e,t){return!!(e==="mousemove"&&(t.onHover||t.onLeave)||t.onClick&&(e==="click"||e==="mouseup"))}var HQ={id:"legend",_element:cO,start(e,t,n){const r=e.legend=new cO({ctx:e.ctx,options:n,chart:e});pc.configure(e,r,n),pc.addBox(e,r)},stop(e){pc.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;pc.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),t.hidden=!0):(s.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:u}}=e.legend.options;return e._getSortedDatasetMetas().map(d=>{const o=d.controller.getStyle(n?0:void 0),y=yo(o.borderWidth);return{text:t[d.index].label,fillStyle:o.backgroundColor,fontColor:u,hidden:!d.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:o.borderColor,pointStyle:r||o.pointStyle,rotation:o.rotation,textAlign:s||o.textAlign,borderRadius:0,datasetIndex:d.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};const ag={average(e){if(!e.length)return!1;let t,n,r=0,s=0,u=0;for(t=0,n=e.length;t<n;++t){const d=e[t].element;if(d&&d.hasValue()){const o=d.tooltipPosition();r+=o.x,s+=o.y,++u}}return{x:r/u,y:s/u}},nearest(e,t){if(!e.length)return!1;let n=t.x,r=t.y,s=Number.POSITIVE_INFINITY,u,d,o;for(u=0,d=e.length;u<d;++u){const y=e[u].element;if(y&&y.hasValue()){const w=y.getCenterPoint(),M=_2(t,w);M<s&&(s=M,o=y)}}if(o){const y=o.tooltipPosition();n=y.x,r=y.y}return{x:n,y:r}}};function ya(e,t){return t&&(Bi(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function rl(e){return(typeof e=="string"||e instanceof String)&&e.indexOf(`
`)>-1?e.split(`
`):e}function C8(e,t){const{element:n,datasetIndex:r,index:s}=t,u=e.getDatasetMeta(r).controller,{label:d,value:o}=u.getLabelAndValue(s);return{chart:e,label:d,parsed:u.getParsed(s),raw:e.data.datasets[r].data[s],formattedValue:o,dataset:u.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function uO(e,t){const n=e.chart.ctx,{body:r,footer:s,title:u}=e,{boxWidth:d,boxHeight:o}=t,y=Vr(t.bodyFont),w=Vr(t.titleFont),M=Vr(t.footerFont),k=u.length,O=s.length,$=r.length,j=yo(t.padding);let G=j.height,B=0,U=r.reduce((ie,de)=>ie+de.before.length+de.lines.length+de.after.length,0);if(U+=e.beforeBody.length+e.afterBody.length,k&&(G+=k*w.lineHeight+(k-1)*t.titleSpacing+t.titleMarginBottom),U){const ie=t.displayColors?Math.max(o,y.lineHeight):y.lineHeight;G+=$*ie+(U-$)*y.lineHeight+(U-1)*t.bodySpacing}O&&(G+=t.footerMarginTop+O*M.lineHeight+(O-1)*t.footerSpacing);let Z=0;const re=function(ie){B=Math.max(B,n.measureText(ie).width+Z)};return n.save(),n.font=w.string,pi(e.title,re),n.font=y.string,pi(e.beforeBody.concat(e.afterBody),re),Z=t.displayColors?d+2+t.boxPadding:0,pi(r,ie=>{pi(ie.before,re),pi(ie.lines,re),pi(ie.after,re)}),Z=0,n.font=M.string,pi(e.footer,re),n.restore(),B+=j.width,{width:B,height:G}}function M8(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}function k8(e,t,n,r){const{x:s,width:u}=r,d=n.caretSize+n.caretPadding;if(e==="left"&&s+u+d>t.width||e==="right"&&s-u-d<0)return!0}function A8(e,t,n,r){const{x:s,width:u}=n,{width:d,chartArea:{left:o,right:y}}=e;let w="center";return r==="center"?w=s<=(o+y)/2?"left":"right":s<=u/2?w="left":s>=d-u/2&&(w="right"),k8(w,e,t,n)&&(w="center"),w}function hO(e,t,n){const r=n.yAlign||t.yAlign||M8(e,n);return{xAlign:n.xAlign||t.xAlign||A8(e,t,n,r),yAlign:r}}function D8(e,t){let{x:n,width:r}=e;return t==="right"?n-=r:t==="center"&&(n-=r/2),n}function I8(e,t,n){let{y:r,height:s}=e;return t==="top"?r+=n:t==="bottom"?r-=s+n:r-=s/2,r}function dO(e,t,n,r){const{caretSize:s,caretPadding:u,cornerRadius:d}=e,{xAlign:o,yAlign:y}=n,w=s+u,{topLeft:M,topRight:k,bottomLeft:O,bottomRight:$}=kd(d);let j=D8(t,o);const G=I8(t,y,w);return y==="center"?o==="left"?j+=w:o==="right"&&(j-=w):o==="left"?j-=Math.max(M,O)+s:o==="right"&&(j+=Math.max(k,$)+s),{x:eo(j,0,r.width-t.width),y:eo(G,0,r.height-t.height)}}function X0(e,t,n){const r=yo(n.padding);return t==="center"?e.x+e.width/2:t==="right"?e.x+e.width-r.right:e.x+r.left}function fO(e){return ya([],rl(e))}function P8(e,t,n){return fc(e,{tooltip:t,tooltipItems:n,type:"tooltip"})}function pO(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class iE extends _a{constructor(t){super();this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart||t._chart,this._chart=this.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,u=new cP(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=P8(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,n){const{callbacks:r}=n,s=r.beforeTitle.apply(this,[t]),u=r.title.apply(this,[t]),d=r.afterTitle.apply(this,[t]);let o=[];return o=ya(o,rl(s)),o=ya(o,rl(u)),o=ya(o,rl(d)),o}getBeforeBody(t,n){return fO(n.callbacks.beforeBody.apply(this,[t]))}getBody(t,n){const{callbacks:r}=n,s=[];return pi(t,u=>{const d={before:[],lines:[],after:[]},o=pO(r,u);ya(d.before,rl(o.beforeLabel.call(this,u))),ya(d.lines,o.label.call(this,u)),ya(d.after,rl(o.afterLabel.call(this,u))),s.push(d)}),s}getAfterBody(t,n){return fO(n.callbacks.afterBody.apply(this,[t]))}getFooter(t,n){const{callbacks:r}=n,s=r.beforeFooter.apply(this,[t]),u=r.footer.apply(this,[t]),d=r.afterFooter.apply(this,[t]);let o=[];return o=ya(o,rl(s)),o=ya(o,rl(u)),o=ya(o,rl(d)),o}_createItems(t){const n=this._active,r=this.chart.data,s=[],u=[],d=[];let o=[],y,w;for(y=0,w=n.length;y<w;++y)o.push(C8(this.chart,n[y]));return t.filter&&(o=o.filter((M,k,O)=>t.filter(M,k,O,r))),t.itemSort&&(o=o.sort((M,k)=>t.itemSort(M,k,r))),pi(o,M=>{const k=pO(t.callbacks,M);s.push(k.labelColor.call(this,M)),u.push(k.labelPointStyle.call(this,M)),d.push(k.labelTextColor.call(this,M))}),this.labelColors=s,this.labelPointStyles=u,this.labelTextColors=d,this.dataPoints=o,o}update(t,n){const r=this.options.setContext(this.getContext()),s=this._active;let u,d=[];if(!s.length)this.opacity!==0&&(u={opacity:0});else{const o=ag[r.position].call(this,s,this._eventPosition);d=this._createItems(r),this.title=this.getTitle(d,r),this.beforeBody=this.getBeforeBody(d,r),this.body=this.getBody(d,r),this.afterBody=this.getAfterBody(d,r),this.footer=this.getFooter(d,r);const y=this._size=uO(this,r),w=Object.assign({},o,y),M=hO(this.chart,r,w),k=dO(r,w,M,this.chart);this.xAlign=M.xAlign,this.yAlign=M.yAlign,u={opacity:1,x:k.x,y:k.y,width:y.width,height:y.height,caretX:o.x,caretY:o.y}}this._tooltipItems=d,this.$context=void 0,u&&this._resolveAnimations().update(this,u),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(t,n,r,s){const u=this.getCaretPosition(t,r,s);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(t,n,r){const{xAlign:s,yAlign:u}=this,{caretSize:d,cornerRadius:o}=r,{topLeft:y,topRight:w,bottomLeft:M,bottomRight:k}=kd(o),{x:O,y:$}=t,{width:j,height:G}=n;let B,U,Z,re,ie,de;return u==="center"?(ie=$+G/2,s==="left"?(B=O,U=B-d,re=ie+d,de=ie-d):(B=O+j,U=B+d,re=ie-d,de=ie+d),Z=B):(s==="left"?U=O+Math.max(y,M)+d:s==="right"?U=O+j-Math.max(w,k)-d:U=this.caretX,u==="top"?(re=$,ie=re-d,B=U-d,Z=U+d):(re=$+G,ie=re+d,B=U+d,Z=U-d),de=re),{x1:B,x2:U,x3:Z,y1:re,y2:ie,y3:de}}drawTitle(t,n,r){const s=this.title,u=s.length;let d,o,y;if(u){const w=Id(r.rtl,this.x,this.width);for(t.x=X0(this,r.titleAlign,r),n.textAlign=w.textAlign(r.titleAlign),n.textBaseline="middle",d=Vr(r.titleFont),o=r.titleSpacing,n.fillStyle=r.titleColor,n.font=d.string,y=0;y<u;++y)n.fillText(s[y],w.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+o,y+1===u&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,n,r,s,u){const d=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:y,boxWidth:w,boxPadding:M}=u,k=Vr(u.bodyFont),O=X0(this,"left",u),$=s.x(O),j=y<k.lineHeight?(k.lineHeight-y)/2:0,G=n.y+j;if(u.usePointStyle){const B={radius:Math.min(w,y)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},U=s.leftForLtr($,w)+w/2,Z=G+y/2;t.strokeStyle=u.multiKeyBackground,t.fillStyle=u.multiKeyBackground,O0(t,B,U,Z),t.strokeStyle=d.borderColor,t.fillStyle=d.backgroundColor,O0(t,B,U,Z)}else{t.lineWidth=d.borderWidth||1,t.strokeStyle=d.borderColor,t.setLineDash(d.borderDash||[]),t.lineDashOffset=d.borderDashOffset||0;const B=s.leftForLtr($,w-M),U=s.leftForLtr(s.xPlus($,1),w-M-2),Z=kd(d.borderRadius);Object.values(Z).some(re=>re!==0)?(t.beginPath(),t.fillStyle=u.multiKeyBackground,R0(t,{x:B,y:G,w,h:y,radius:Z}),t.fill(),t.stroke(),t.fillStyle=d.backgroundColor,t.beginPath(),R0(t,{x:U,y:G+1,w:w-2,h:y-2,radius:Z}),t.fill()):(t.fillStyle=u.multiKeyBackground,t.fillRect(B,G,w,y),t.strokeRect(B,G,w,y),t.fillStyle=d.backgroundColor,t.fillRect(U,G+1,w-2,y-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,n,r){const{body:s}=this,{bodySpacing:u,bodyAlign:d,displayColors:o,boxHeight:y,boxWidth:w,boxPadding:M}=r,k=Vr(r.bodyFont);let O=k.lineHeight,$=0;const j=Id(r.rtl,this.x,this.width),G=function(je){n.fillText(je,j.x(t.x+$),t.y+O/2),t.y+=O+u},B=j.textAlign(d);let U,Z,re,ie,de,xe,Ce;for(n.textAlign=d,n.textBaseline="middle",n.font=k.string,t.x=X0(this,B,r),n.fillStyle=r.bodyColor,pi(this.beforeBody,G),$=o&&B!=="right"?d==="center"?w/2+M:w+2+M:0,ie=0,xe=s.length;ie<xe;++ie){for(U=s[ie],Z=this.labelTextColors[ie],n.fillStyle=Z,pi(U.before,G),re=U.lines,o&&re.length&&(this._drawColorBox(n,t,ie,j,r),O=Math.max(k.lineHeight,y)),de=0,Ce=re.length;de<Ce;++de)G(re[de]),O=k.lineHeight;pi(U.after,G)}$=0,O=k.lineHeight,pi(this.afterBody,G),t.y-=u}drawFooter(t,n,r){const s=this.footer,u=s.length;let d,o;if(u){const y=Id(r.rtl,this.x,this.width);for(t.x=X0(this,r.footerAlign,r),t.y+=r.footerMarginTop,n.textAlign=y.textAlign(r.footerAlign),n.textBaseline="middle",d=Vr(r.footerFont),n.fillStyle=r.footerColor,n.font=d.string,o=0;o<u;++o)n.fillText(s[o],y.x(t.x),t.y+d.lineHeight/2),t.y+=d.lineHeight+r.footerSpacing}}drawBackground(t,n,r,s){const{xAlign:u,yAlign:d}=this,{x:o,y}=t,{width:w,height:M}=r,{topLeft:k,topRight:O,bottomLeft:$,bottomRight:j}=kd(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(o+k,y),d==="top"&&this.drawCaret(t,n,r,s),n.lineTo(o+w-O,y),n.quadraticCurveTo(o+w,y,o+w,y+O),d==="center"&&u==="right"&&this.drawCaret(t,n,r,s),n.lineTo(o+w,y+M-j),n.quadraticCurveTo(o+w,y+M,o+w-j,y+M),d==="bottom"&&this.drawCaret(t,n,r,s),n.lineTo(o+$,y+M),n.quadraticCurveTo(o,y+M,o,y+M-$),d==="center"&&u==="left"&&this.drawCaret(t,n,r,s),n.lineTo(o,y+k),n.quadraticCurveTo(o,y,o+k,y),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(t){const n=this.chart,r=this.$animations,s=r&&r.x,u=r&&r.y;if(s||u){const d=ag[t.position].call(this,this._active,this._eventPosition);if(!d)return;const o=this._size=uO(this,t),y=Object.assign({},d,this._size),w=hO(n,t,y),M=dO(t,y,w,n);(s._to!==M.x||u._to!==M.y)&&(this.xAlign=w.xAlign,this.yAlign=w.yAlign,this.width=o.width,this.height=o.height,this.caretX=d.x,this.caretY=d.y,this._resolveAnimations().update(this,M))}}draw(t){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},u={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const d=yo(n.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(u,t,s,n),eP(t,n.textDirection),u.y+=d.top,this.drawTitle(u,t,n),this.drawBody(u,t,n),this.drawFooter(u,t,n),tP(t,n.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,n){const r=this._active,s=t.map(({datasetIndex:o,index:y})=>{const w=this.chart.getDatasetMeta(o);if(!w)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:w.data[y],index:y}}),u=!E0(r,s),d=this._positionChanged(s,n);(u||d)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,u=this._active||[],d=this._getActiveElements(t,u,n,r),o=this._positionChanged(d,t),y=n||!E0(d,u)||o;return y&&(this._active=d,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,n))),y}_getActiveElements(t,n,r,s){const u=this.options;if(t.type==="mouseout")return[];if(!s)return n;const d=this.chart.getElementsAtEventForMode(t,u.mode,u,r);return u.reverse&&d.reverse(),d}_positionChanged(t,n){const{caretX:r,caretY:s,options:u}=this,d=ag[u.position].call(this,t,n);return d!==!1&&(r!==d.x||s!==d.y)}}iE.positioners=ag;var qQ={id:"tooltip",_element:iE,positioners:ag,afterInit(e,t,n){n&&(e.tooltip=new iE({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip,n={tooltip:t};e.notifyPlugins("beforeTooltipDraw",n)!==!1&&(t&&t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n))},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:el,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:el,beforeBody:el,beforeLabel:el,label(e){if(this&&this.options&&this.options.mode==="dataset")return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return fi(n)||(t+=n),t},labelColor(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const n=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:el,afterBody:el,beforeFooter:el,footer:el,afterFooter:el}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>e!=="filter"&&e!=="itemSort"&&e!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const O8=(e,t,n,r)=>(typeof t=="string"?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n);function L8(e,t,n,r){const s=e.indexOf(t);if(s===-1)return O8(e,t,n,r);const u=e.lastIndexOf(t);return s!==u?n:s}const z8=(e,t)=>e===null?null:eo(Math.round(e),0,t);class rE extends Ru{constructor(t){super(t);this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:u}of n)r[s]===u&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,n){if(fi(t))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===t?n:L8(r,t,Mn(n,t),this._addedLabels),z8(n,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const t=this.min,n=this.max,r=this.options.offset,s=[];let u=this.getLabels();u=t===0&&n===u.length-1?u:u.slice(t,n+1),this._valueRange=Math.max(u.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let d=t;d<=n;d++)s.push({value:d});return s}getLabelForValue(t){const n=this.getLabels();return t>=0&&t<n.length?n[t]:t}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const n=this.ticks;return t<0||t>n.length-1?null:this.getPixelForValue(n[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}rE.id="category";rE.defaults={ticks:{callback:rE.prototype.getLabelForValue}};function R8(e,t){const n=[],r=1e-14,{bounds:s,step:u,min:d,max:o,precision:y,count:w,maxTicks:M,maxDigits:k,includeBounds:O}=e,$=u||1,j=M-1,{min:G,max:B}=t,U=!fi(d),Z=!fi(o),re=!fi(w),ie=(B-G)/(k+1);let de=bI((B-G)/j/$)*$,xe,Ce,je,ze;if(de<r&&!U&&!Z)return[{value:G},{value:B}];ze=Math.ceil(B/de)-Math.floor(G/de),ze>j&&(de=bI(ze*de/j/$)*$),fi(y)||(xe=Math.pow(10,y),de=Math.ceil(de*xe)/xe),s==="ticks"?(Ce=Math.floor(G/de)*de,je=Math.ceil(B/de)*de):(Ce=G,je=B),U&&Z&&u&&jN((o-d)/u,de/1e3)?(ze=Math.round(Math.min((o-d)/de,M)),de=(o-d)/ze,Ce=d,je=o):re?(Ce=U?d:Ce,je=Z?o:je,ze=w-1,de=(je-Ce)/ze):(ze=(je-Ce)/de,Gm(ze,Math.round(ze),de/1e3)?ze=Math.round(ze):ze=Math.ceil(ze));const pt=Math.max(EI(de),EI(Ce));xe=Math.pow(10,fi(y)?pt:y),Ce=Math.round(Ce*xe)/xe,je=Math.round(je*xe)/xe;let mt=0;for(U&&(O&&Ce!==d?(n.push({value:d}),Ce<d&&mt++,Gm(Math.round((Ce+mt*de)*xe)/xe,d,mO(d,ie,e))&&mt++):Ce<d&&mt++);mt<ze;++mt)n.push({value:Math.round((Ce+mt*de)*xe)/xe});return Z&&O&&je!==o?n.length&&Gm(n[n.length-1].value,o,mO(o,ie,e))?n[n.length-1].value=o:n.push({value:o}):(!Z||je===o)&&n.push({value:je}),n}function mO(e,t,{horizontal:n,minRotation:r}){const s=Ns(r),u=(n?Math.sin(s):Math.cos(s))||.001,d=.75*t*(""+e).length;return Math.min(t/u,d)}class K0 extends Ru{constructor(t){super(t);this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,n){return fi(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:u}=this;const d=y=>s=n?s:y,o=y=>u=r?u:y;if(t){const y=ma(s),w=ma(u);y<0&&w<0?o(0):y>0&&w>0&&d(0)}if(s===u){let y=1;(u>=Number.MAX_SAFE_INTEGER||s<=Number.MIN_SAFE_INTEGER)&&(y=Math.abs(u*.05)),o(u+y),t||d(s-y)}this.min=s,this.max=u}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=t,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,n=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,d=R8(s,u);return t.bounds==="ticks"&&wI(d,this,"value"),t.reverse?(d.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),d}configure(){const t=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const s=(r-n)/Math.max(t.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(t){return Km(t,this.chart.options.locale,this.options.ticks.format)}}class gO extends K0{determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=rr(t)?t:0,this.max=rr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),n=t?this.width:this.height,r=Ns(this.options.ticks.minRotation),s=(t?Math.sin(r):Math.cos(r))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/s))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}gO.id="linear";gO.defaults={ticks:{callback:W0.formatters.numeric}};function _O(e){return e/Math.pow(10,Math.floor(gs(e)))===1}function F8(e,t){const n=Math.floor(gs(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),s=[];let u=ps(e.min,Math.pow(10,Math.floor(gs(t.min)))),d=Math.floor(gs(u)),o=Math.floor(u/Math.pow(10,d)),y=d<0?Math.pow(10,Math.abs(d)):1;do s.push({value:u,major:_O(u)}),++o,o===10&&(o=1,++d,y=d>=0?1:y),u=Math.round(o*Math.pow(10,d)*y)/y;while(d<n||d===n&&o<r);const w=ps(e.max,u);return s.push({value:w,major:_O(u)}),s}class yO extends Ru{constructor(t){super(t);this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,n){const r=K0.prototype.parse.apply(this,[t,n]);if(r===0){this._zero=!0;return}return rr(r)&&r>0?r:null}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!0);this.min=rr(t)?Math.max(0,t):null,this.max=rr(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:n}=this.getUserBounds();let r=this.min,s=this.max;const u=y=>r=t?r:y,d=y=>s=n?s:y,o=(y,w)=>Math.pow(10,Math.floor(gs(y))+w);r===s&&(r<=0?(u(1),d(10)):(u(o(r,-1)),d(o(s,1)))),r<=0&&u(o(s,-1)),s<=0&&d(o(r,1)),this._zero&&this.min!==this._suggestedMin&&r===o(this.min,0)&&u(o(r,-1)),this.min=r,this.max=s}buildTicks(){const t=this.options,n={min:this._userMin,max:this._userMax},r=F8(n,this);return t.bounds==="ticks"&&wI(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":Km(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=gs(t),this._valueRange=gs(this.max)-gs(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(gs(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const n=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+n*this._valueRange)}}yO.id="logarithmic";yO.defaults={ticks:{callback:W0.formatters.logarithmic,major:{enabled:!0}}};function oE(e){const t=e.ticks;if(t.display&&e.display){const n=yo(t.backdropPadding);return Mn(t.font&&t.font.size,Vn.font.size)+n.height}return 0}function B8(e,t,n){return n=Bi(n)?n:[n],{w:hV(e,t.string,n),h:n.length*t.lineHeight}}function vO(e,t,n,r,s){return e===r||e===s?{start:t-n/2,end:t+n/2}:e<r||e>s?{start:t-n,end:t}:{start:t,end:t+n}}function N8(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],s=[],u=e._pointLabels.length,d=e.options.pointLabels,o=d.centerPointLabels?Qi/u:0;for(let y=0;y<u;y++){const w=d.setContext(e.getPointLabelContext(y));s[y]=w.padding;const M=e.getPointPosition(y,e.drawingArea+s[y],o),k=Vr(w.font),O=B8(e.ctx,k,e._pointLabels[y]);r[y]=O;const $=Zo(e.getIndexAngle(y)+o),j=Math.round(g2($)),G=vO(j,M.x,O.w,0,180),B=vO(j,M.y,O.h,90,270);V8(n,t,$,G,B)}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=j8(e,r,s)}function V8(e,t,n,r,s){const u=Math.abs(Math.sin(n)),d=Math.abs(Math.cos(n));let o=0,y=0;r.start<t.l?(o=(t.l-r.start)/u,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/u,e.r=Math.max(e.r,t.r+o)),s.start<t.t?(y=(t.t-s.start)/d,e.t=Math.min(e.t,t.t-y)):s.end>t.b&&(y=(s.end-t.b)/d,e.b=Math.max(e.b,t.b+y))}function j8(e,t,n){const r=[],s=e._pointLabels.length,u=e.options,d=oE(u)/2,o=e.drawingArea,y=u.pointLabels.centerPointLabels?Qi/s:0;for(let w=0;w<s;w++){const M=e.getPointPosition(w,o+d+n[w],y),k=Math.round(g2(Zo(M.angle+er))),O=t[w],$=G8(M.y,O.h,k),j=U8(k),G=$8(M.x,O.w,j);r.push({x:M.x,y:$,textAlign:j,left:G,top:$,right:G+O.w,bottom:$+O.h})}return r}function U8(e){return e===0||e===180?"center":e<180?"left":"right"}function $8(e,t,n){return n==="right"?e-=t:n==="center"&&(e-=t/2),e}function G8(e,t,n){return n===90||n===270?e-=t/2:(n>270||n<90)&&(e-=t),e}function W8(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let s=t-1;s>=0;s--){const u=r.setContext(e.getPointLabelContext(s)),d=Vr(u.font),{x:o,y,textAlign:w,left:M,top:k,right:O,bottom:$}=e._pointLabelItems[s],{backdropColor:j}=u;if(!fi(j)){const G=yo(u.backdropPadding);n.fillStyle=j,n.fillRect(M-G.left,k-G.top,O-M+G.width,$-k+G.height)}Md(n,e._pointLabels[s],o,y+d.lineHeight/2,d,{color:u.color,textAlign:w,textBaseline:"middle"})}}function xO(e,t,n,r){const{ctx:s}=e;if(n)s.arc(e.xCenter,e.yCenter,t,0,Ti);else{let u=e.getPointPosition(0,t);s.moveTo(u.x,u.y);for(let d=1;d<r;d++)u=e.getPointPosition(d,t),s.lineTo(u.x,u.y)}}function H8(e,t,n,r){const s=e.ctx,u=t.circular,{color:d,lineWidth:o}=t;!u&&!r||!d||!o||n<0||(s.save(),s.strokeStyle=d,s.lineWidth=o,s.setLineDash(t.borderDash),s.lineDashOffset=t.borderDashOffset,s.beginPath(),xO(e,n,u,r),s.closePath(),s.stroke(),s.restore())}function q8(e,t,n){return fc(e,{label:n,index:t,type:"pointLabel"})}class J0 extends K0{constructor(t){super(t);this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=yo(oE(this.options)/2),n=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+n/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:t,max:n}=this.getMinMax(!1);this.min=rr(t)&&!isNaN(t)?t:0,this.max=rr(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/oE(this.options))}generateTickLabels(t){K0.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((n,r)=>{const s=Ii(this.options.pointLabels.callback,[n,r],this);return s||s===0?s:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const t=this.options;t.display&&t.pointLabels.display?N8(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,n,r,s){this.xCenter+=Math.floor((t-n)/2),this.yCenter+=Math.floor((r-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,n,r,s))}getIndexAngle(t){const n=Ti/(this._pointLabels.length||1),r=this.options.startAngle||0;return Zo(t*n+Ns(r))}getDistanceFromCenterForValue(t){if(fi(t))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*n:(t-this.min)*n}getValueForDistanceFromCenter(t){if(fi(t))return NaN;const n=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(t){const n=this._pointLabels||[];if(t>=0&&t<n.length){const r=n[t];return q8(this.getContext(),t,r)}}getPointPosition(t,n,r=0){const s=this.getIndexAngle(t)-er+r;return{x:Math.cos(s)*n+this.xCenter,y:Math.sin(s)*n+this.yCenter,angle:s}}getPointPositionForValue(t,n){return this.getPointPosition(t,this.getDistanceFromCenterForValue(n))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:n,top:r,right:s,bottom:u}=this._pointLabelItems[t];return{left:n,top:r,right:s,bottom:u}}drawBackground(){const{backgroundColor:t,grid:{circular:n}}=this.options;if(t){const r=this.ctx;r.save(),r.beginPath(),xO(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){const t=this.ctx,n=this.options,{angleLines:r,grid:s}=n,u=this._pointLabels.length;let d,o,y;if(n.pointLabels.display&&W8(this,u),s.display&&this.ticks.forEach((w,M)=>{if(M!==0){o=this.getDistanceFromCenterForValue(w.value);const k=s.setContext(this.getContext(M-1));H8(this,k,o,u)}}),r.display){for(t.save(),d=u-1;d>=0;d--){const w=r.setContext(this.getPointLabelContext(d)),{color:M,lineWidth:k}=w;!k||!M||(t.lineWidth=k,t.strokeStyle=M,t.setLineDash(w.borderDash),t.lineDashOffset=w.borderDashOffset,o=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),y=this.getPointPosition(d,o),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(y.x,y.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const s=this.getIndexAngle(0);let u,d;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((o,y)=>{if(y===0&&!n.reverse)return;const w=r.setContext(this.getContext(y)),M=Vr(w.font);if(u=this.getDistanceFromCenterForValue(this.ticks[y].value),w.showLabelBackdrop){t.font=M.string,d=t.measureText(o.label).width,t.fillStyle=w.backdropColor;const k=yo(w.backdropPadding);t.fillRect(-d/2-k.left,-u-M.size/2-k.top,d+k.width,M.size+k.height)}Md(t,o.label,0,-u,M,{color:w.color})}),t.restore()}drawTitle(){}}J0.id="radialLinear";J0.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:W0.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};J0.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};J0.descriptors={angleLines:{_fallback:"grid"}};const Q0={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Oo=Object.keys(Q0);function Y8(e,t){return e-t}function bO(e,t){if(fi(t))return null;const n=e._adapter,{parser:r,round:s,isoWeekday:u}=e._parseOpts;let d=t;return typeof r=="function"&&(d=r(d)),rr(d)||(d=typeof r=="string"?n.parse(d,r):n.parse(d)),d===null?null:(s&&(d=s==="week"&&($m(u)||u===!0)?n.startOf(d,"isoWeek",u):n.startOf(d,s)),+d)}function wO(e,t,n,r){const s=Oo.length;for(let u=Oo.indexOf(e);u<s-1;++u){const d=Q0[Oo[u]],o=d.steps?d.steps:Number.MAX_SAFE_INTEGER;if(d.common&&Math.ceil((n-t)/(o*d.size))<=r)return Oo[u]}return Oo[s-1]}function Z8(e,t,n,r,s){for(let u=Oo.length-1;u>=Oo.indexOf(n);u--){const d=Oo[u];if(Q0[d].common&&e._adapter.diff(s,r,d)>=t-1)return d}return Oo[n?Oo.indexOf(n):0]}function X8(e){for(let t=Oo.indexOf(e)+1,n=Oo.length;t<n;++t)if(Q0[Oo[t]].common)return Oo[t]}function EO(e,t,n){if(!n)e[t]=!0;else if(n.length){const{lo:r,hi:s}=M2(n,t),u=n[r]>=t?n[r]:n[s];e[u]=!0}}function K8(e,t,n,r){const s=e._adapter,u=+s.startOf(t[0].value,r),d=t[t.length-1].value;let o,y;for(o=u;o<=d;o=+s.add(o,1,r))y=n[o],y>=0&&(t[y].major=!0);return t}function SO(e,t,n){const r=[],s={},u=t.length;let d,o;for(d=0;d<u;++d)o=t[d],s[o]=d,r.push({value:o,major:!1});return u===0||!n?r:K8(e,r,s,n)}class ev extends Ru{constructor(t){super(t);this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,n){const r=t.time||(t.time={}),s=this._adapter=new wP._date(t.adapters.date);jm(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=n.normalized}parse(t,n){return t===void 0?null:bO(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,n=this._adapter,r=t.time.unit||"day";let{min:s,max:u,minDefined:d,maxDefined:o}=this.getUserBounds();function y(w){!d&&!isNaN(w.min)&&(s=Math.min(s,w.min)),!o&&!isNaN(w.max)&&(u=Math.max(u,w.max))}(!d||!o)&&(y(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&y(this.getMinMax(!1))),s=rr(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),u=rr(u)&&!isNaN(u)?u:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,u-1),this.max=Math.max(s+1,u)}_getLabelBounds(){const t=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(n=t[0],r=t[t.length-1]),{min:n,max:r}}buildTicks(){const t=this.options,n=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const u=this.min,d=this.max,o=wV(s,u,d);return this._unit=n.unit||(r.autoSkip?wO(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):Z8(this,o.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:X8(this._unit),this.initOffsets(s),t.reverse&&o.reverse(),SO(this,o,this._majorUnit)}initOffsets(t){let n=0,r=0,s,u;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?n=1-s:n=(this.getDecimalForValue(t[1])-s)/2,u=this.getDecimalForValue(t[t.length-1]),t.length===1?r=u:r=(u-this.getDecimalForValue(t[t.length-2]))/2);const d=t.length<3?.5:.25;n=eo(n,0,d),r=eo(r,0,d),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const t=this._adapter,n=this.min,r=this.max,s=this.options,u=s.time,d=u.unit||wO(u.minUnit,n,r,this._getLabelCapacity(n)),o=Mn(u.stepSize,1),y=d==="week"?u.isoWeekday:!1,w=$m(y)||y===!0,M={};let k=n,O,$;if(w&&(k=+t.startOf(k,"isoWeek",y)),k=+t.startOf(k,w?"day":d),t.diff(r,n,d)>1e5*o)throw new Error(n+" and "+r+" are too far apart with stepSize of "+o+" "+d);const j=s.ticks.source==="data"&&this.getDataTimestamps();for(O=k,$=0;O<r;O=+t.add(O,o,d),$++)EO(M,O,j);return(O===r||s.bounds==="ticks"||$===1)&&EO(M,O,j),Object.keys(M).sort((G,B)=>G-B).map(G=>+G)}getLabelForValue(t){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(t,r.tooltipFormat):n.format(t,r.displayFormats.datetime)}_tickFormatFunction(t,n,r,s){const u=this.options,d=u.time.displayFormats,o=this._unit,y=this._majorUnit,w=o&&d[o],M=y&&d[y],k=r[n],O=y&&M&&k&&k.major,$=this._adapter.format(t,s||(O?M:w)),j=u.ticks.callback;return j?Ii(j,[$,n,r],this):$}generateTickLabels(t){let n,r,s;for(n=0,r=t.length;n<r;++n)s=t[n],s.label=this._tickFormatFunction(s.value,n,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const n=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const n=this.options.ticks,r=this.ctx.measureText(t).width,s=Ns(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(s),d=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:r*u+o*d,h:r*d+o*u}}_getLabelCapacity(t){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,u=this._tickFormatFunction(t,0,SO(this,[t],this._majorUnit),s),d=this._getLabelSize(u),o=Math.floor(this.isHorizontal()?this.width/d.w:this.height/d.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],n,r;if(t.length)return t;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)t=t.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let n,r;if(t.length)return t;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)t.push(bO(this,s[n]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return jI(t.sort(Y8))}}ev.id="time";ev.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function tv(e,t,n){let r=0,s=e.length-1,u,d,o,y;n?(t>=e[r].pos&&t<=e[s].pos&&({lo:r,hi:s}=Pu(e,"pos",t)),{pos:u,time:o}=e[r],{pos:d,time:y}=e[s]):(t>=e[r].time&&t<=e[s].time&&({lo:r,hi:s}=Pu(e,"time",t)),{time:u,pos:o}=e[r],{time:d,pos:y}=e[s]);const w=d-u;return w?o+(y-o)*(t-u)/w:o}class TO extends ev{constructor(t){super(t);this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(t);this._minPos=tv(n,this.min),this._tableRange=tv(n,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:n,max:r}=this,s=[],u=[];let d,o,y,w,M;for(d=0,o=t.length;d<o;++d)w=t[d],w>=n&&w<=r&&s.push(w);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(d=0,o=s.length;d<o;++d)M=s[d+1],y=s[d-1],w=s[d],Math.round((M+y)/2)!==w&&u.push({time:w,pos:d/(o-1)});return u}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?t=this.normalize(n.concat(r)):t=n.length?n:r,t=this._cache.all=t,t}getDecimalForValue(t){return(tv(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const n=this._offsets,r=this.getDecimalForPixel(t)/n.factor-n.end;return tv(this._table,r*this._tableRange+this._minPos,!0)}}TO.id="timeseries";TO.defaults=ev.defaults;var sE={},aE={},lE={};Object.defineProperty(lE,"__esModule",{value:!0});lE.default=J8;function J8(e){if(e=`${e}`,e==="0")return"0";if(/^[+-]?(\d+|\d*\.\d+)(e[+-]?\d+)?(%|\w+)?$/.test(e))return e.replace(/^[+-]?/,t=>t==="-"?"":"-");if(e.includes("var(")||e.includes("calc("))return`calc(${e} * -1)`}var nv={};Object.defineProperty(nv,"__esModule",{value:!0});nv.default=void 0;var Q8=["preflight","container","accessibility","pointerEvents","visibility","position","inset","isolation","zIndex","order","gridColumn","gridColumnStart","gridColumnEnd","gridRow","gridRowStart","gridRowEnd","float","clear","margin","boxSizing","display","aspectRatio","height","maxHeight","minHeight","width","minWidth","maxWidth","flex","flexShrink","flexGrow","flexBasis","tableLayout","borderCollapse","transformOrigin","translate","rotate","skew","scale","transform","animation","cursor","touchAction","userSelect","resize","scrollSnapType","scrollSnapAlign","scrollSnapStop","scrollMargin","scrollPadding","listStylePosition","listStyleType","appearance","columns","breakBefore","breakInside","breakAfter","gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateColumns","gridTemplateRows","flexDirection","flexWrap","placeContent","placeItems","alignContent","alignItems","justifyContent","justifyItems","gap","space","divideWidth","divideStyle","divideColor","divideOpacity","placeSelf","alignSelf","justifySelf","overflow","overscrollBehavior","scrollBehavior","textOverflow","whitespace","wordBreak","borderRadius","borderWidth","borderStyle","borderColor","borderOpacity","backgroundColor","backgroundOpacity","backgroundImage","gradientColorStops","boxDecorationBreak","backgroundSize","backgroundAttachment","backgroundClip","backgroundPosition","backgroundRepeat","backgroundOrigin","fill","stroke","strokeWidth","objectFit","objectPosition","padding","textAlign","textIndent","verticalAlign","fontFamily","fontSize","fontWeight","textTransform","fontStyle","fontVariantNumeric","lineHeight","letterSpacing","textColor","textOpacity","textDecoration","textDecorationColor","textDecorationStyle","textDecorationThickness","textUnderlineOffset","fontSmoothing","placeholderColor","placeholderOpacity","caretColor","accentColor","opacity","backgroundBlendMode","mixBlendMode","boxShadow","boxShadowColor","outlineStyle","outlineWidth","outlineOffset","outlineColor","ringWidth","ringColor","ringOpacity","ringOffsetWidth","ringOffsetColor","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","saturate","sepia","filter","backdropBlur","backdropBrightness","backdropContrast","backdropGrayscale","backdropHueRotate","backdropInvert","backdropOpacity","backdropSaturate","backdropSepia","backdropFilter","transitionProperty","transitionDelay","transitionDuration","transitionTimingFunction","willChange","content"];nv.default=Q8;var cE={};Object.defineProperty(cE,"__esModule",{value:!0});cE.default=e9;function e9(e,t){return e===void 0?t:Array.isArray(e)?e:[...new Set(t.filter(r=>e!==!1&&e[r]!==!1).concat(Object.keys(e).filter(r=>e[r]!==!1)))]}var CO={content:[],presets:[],darkMode:"media",theme:{screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},colors:({colors:e})=>({inherit:e.inherit,current:e.current,transparent:e.transparent,black:e.black,white:e.white,slate:e.slate,gray:e.gray,zinc:e.zinc,neutral:e.neutral,stone:e.stone,red:e.red,orange:e.orange,amber:e.amber,yellow:e.yellow,lime:e.lime,green:e.green,emerald:e.emerald,teal:e.teal,cyan:e.cyan,sky:e.sky,blue:e.blue,indigo:e.indigo,violet:e.violet,purple:e.purple,fuchsia:e.fuchsia,pink:e.pink,rose:e.rose}),columns:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},spacing:{px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",pulse:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",bounce:"bounce 1s infinite"},aspectRatio:{auto:"auto",square:"1 / 1",video:"16 / 9"},backdropBlur:({theme:e})=>e("blur"),backdropBrightness:({theme:e})=>e("brightness"),backdropContrast:({theme:e})=>e("contrast"),backdropGrayscale:({theme:e})=>e("grayscale"),backdropHueRotate:({theme:e})=>e("hueRotate"),backdropInvert:({theme:e})=>e("invert"),backdropOpacity:({theme:e})=>e("opacity"),backdropSaturate:({theme:e})=>e("saturate"),backdropSepia:({theme:e})=>e("sepia"),backgroundColor:({theme:e})=>e("colors"),backgroundImage:{none:"none","gradient-to-t":"linear-gradient(to top, var(--tw-gradient-stops))","gradient-to-tr":"linear-gradient(to top right, var(--tw-gradient-stops))","gradient-to-r":"linear-gradient(to right, var(--tw-gradient-stops))","gradient-to-br":"linear-gradient(to bottom right, var(--tw-gradient-stops))","gradient-to-b":"linear-gradient(to bottom, var(--tw-gradient-stops))","gradient-to-bl":"linear-gradient(to bottom left, var(--tw-gradient-stops))","gradient-to-l":"linear-gradient(to left, var(--tw-gradient-stops))","gradient-to-tl":"linear-gradient(to top left, var(--tw-gradient-stops))"},backgroundOpacity:({theme:e})=>e("opacity"),backgroundPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{0:"0",none:"0",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},brightness:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5",200:"2"},borderColor:({theme:e})=>Ai(jt({},e("colors")),{DEFAULT:e("colors.gray.200","currentColor")}),borderOpacity:({theme:e})=>e("opacity"),borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},borderWidth:{DEFAULT:"1px",0:"0px",2:"2px",4:"4px",8:"8px"},boxShadow:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"none"},boxShadowColor:({theme:e})=>e("colors"),caretColor:({theme:e})=>e("colors"),accentColor:({theme:e})=>Ai(jt({},e("colors")),{auto:"auto"}),contrast:{0:"0",50:".5",75:".75",100:"1",125:"1.25",150:"1.5",200:"2"},container:{},content:{none:"none"},cursor:{auto:"auto",default:"default",pointer:"pointer",wait:"wait",text:"text",move:"move",help:"help","not-allowed":"not-allowed",none:"none","context-menu":"context-menu",progress:"progress",cell:"cell",crosshair:"crosshair","vertical-text":"vertical-text",alias:"alias",copy:"copy","no-drop":"no-drop",grab:"grab",grabbing:"grabbing","all-scroll":"all-scroll","col-resize":"col-resize","row-resize":"row-resize","n-resize":"n-resize","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","ne-resize":"ne-resize","nw-resize":"nw-resize","se-resize":"se-resize","sw-resize":"sw-resize","ew-resize":"ew-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize","nwse-resize":"nwse-resize","zoom-in":"zoom-in","zoom-out":"zoom-out"},divideColor:({theme:e})=>e("borderColor"),divideOpacity:({theme:e})=>e("borderOpacity"),divideWidth:({theme:e})=>e("borderWidth"),dropShadow:{sm:"0 1px 1px rgb(0 0 0 / 0.05)",DEFAULT:["0 1px 2px rgb(0 0 0 / 0.1)","0 1px 1px rgb(0 0 0 / 0.06)"],md:["0 4px 3px rgb(0 0 0 / 0.07)","0 2px 2px rgb(0 0 0 / 0.06)"],lg:["0 10px 8px rgb(0 0 0 / 0.04)","0 4px 3px rgb(0 0 0 / 0.1)"],xl:["0 20px 13px rgb(0 0 0 / 0.03)","0 8px 5px rgb(0 0 0 / 0.08)"],"2xl":"0 25px 25px rgb(0 0 0 / 0.15)",none:"0 0 #0000"},fill:({theme:e})=>e("colors"),grayscale:{0:"0",DEFAULT:"100%"},hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},invert:{0:"0",DEFAULT:"100%"},flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:({theme:e})=>Ai(jt({auto:"auto"},e("spacing")),{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%"}),flexGrow:{0:"0",DEFAULT:"1"},flexShrink:{0:"0",DEFAULT:"1"},fontFamily:{sans:["ui-sans-serif","system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"',"sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"]},fontSize:{xs:["0.75rem",{lineHeight:"1rem"}],sm:["0.875rem",{lineHeight:"1.25rem"}],base:["1rem",{lineHeight:"1.5rem"}],lg:["1.125rem",{lineHeight:"1.75rem"}],xl:["1.25rem",{lineHeight:"1.75rem"}],"2xl":["1.5rem",{lineHeight:"2rem"}],"3xl":["1.875rem",{lineHeight:"2.25rem"}],"4xl":["2.25rem",{lineHeight:"2.5rem"}],"5xl":["3rem",{lineHeight:"1"}],"6xl":["3.75rem",{lineHeight:"1"}],"7xl":["4.5rem",{lineHeight:"1"}],"8xl":["6rem",{lineHeight:"1"}],"9xl":["8rem",{lineHeight:"1"}]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:({theme:e})=>e("spacing"),gradientColorStops:({theme:e})=>e("colors"),gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridColumn:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridColumnEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridColumnStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRow:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-full":"1 / -1"},gridRowStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7"},gridRowEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7"},gridTemplateColumns:{none:"none",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},gridTemplateRows:{none:"none",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))"},height:({theme:e})=>Ai(jt({auto:"auto"},e("spacing")),{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%",full:"100%",screen:"100vh",min:"min-content",max:"max-content",fit:"fit-content"}),inset:({theme:e})=>Ai(jt({auto:"auto"},e("spacing")),{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),keyframes:{spin:{to:{transform:"rotate(360deg)"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},pulse:{"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},listStyleType:{none:"none",disc:"disc",decimal:"decimal"},margin:({theme:e})=>jt({auto:"auto"},e("spacing")),maxHeight:({theme:e})=>Ai(jt({},e("spacing")),{full:"100%",screen:"100vh",min:"min-content",max:"max-content",fit:"fit-content"}),maxWidth:({theme:e,breakpoints:t})=>jt({none:"none",0:"0rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch"},t(e("screens"))),minHeight:{0:"0px",full:"100%",screen:"100vh",min:"min-content",max:"max-content",fit:"fit-content"},minWidth:{0:"0px",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"},objectPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},opacity:{0:"0",5:"0.05",10:"0.1",20:"0.2",25:"0.25",30:"0.3",40:"0.4",50:"0.5",60:"0.6",70:"0.7",75:"0.75",80:"0.8",90:"0.9",95:"0.95",100:"1"},order:{first:"-9999",last:"9999",none:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},padding:({theme:e})=>e("spacing"),placeholderColor:({theme:e})=>e("colors"),placeholderOpacity:({theme:e})=>e("opacity"),outlineColor:({theme:e})=>e("colors"),outlineOffset:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},outlineWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringColor:({theme:e})=>jt({DEFAULT:e("colors.blue.500","#3b82f6")},e("colors")),ringOffsetColor:({theme:e})=>e("colors"),ringOffsetWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringOpacity:({theme:e})=>jt({DEFAULT:"0.5"},e("opacity")),ringWidth:{DEFAULT:"3px",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},rotate:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg",45:"45deg",90:"90deg",180:"180deg"},saturate:{0:"0",50:".5",100:"1",150:"1.5",200:"2"},scale:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5"},scrollMargin:({theme:e})=>jt({},e("spacing")),scrollPadding:({theme:e})=>e("spacing"),sepia:{0:"0",DEFAULT:"100%"},skew:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg"},space:({theme:e})=>jt({},e("spacing")),stroke:({theme:e})=>e("colors"),strokeWidth:{0:"0",1:"1",2:"2"},textColor:({theme:e})=>e("colors"),textDecorationColor:({theme:e})=>e("colors"),textDecorationThickness:{auto:"auto","from-font":"from-font",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textUnderlineOffset:{auto:"auto",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textIndent:({theme:e})=>jt({},e("spacing")),textOpacity:({theme:e})=>e("opacity"),transformOrigin:{center:"center",top:"top","top-right":"top right",right:"right","bottom-right":"bottom right",bottom:"bottom","bottom-left":"bottom left",left:"left","top-left":"top left"},transitionDelay:{75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionDuration:{DEFAULT:"150ms",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionProperty:{none:"none",all:"all",DEFAULT:"color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",colors:"color, background-color, border-color, text-decoration-color, fill, stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},translate:({theme:e})=>Ai(jt({},e("spacing")),{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),width:({theme:e})=>Ai(jt({auto:"auto"},e("spacing")),{"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screen:"100vw",min:"min-content",max:"max-content",fit:"fit-content"}),willChange:{auto:"auto",scroll:"scroll-position",contents:"contents",transform:"transform"},zIndex:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"}},variantOrder:["first","last","odd","even","visited","checked","empty","read-only","group-hover","group-focus","focus-within","hover","focus","focus-visible","active","disabled"],plugins:[]},iv={},Bu={},MO={exports:{}},t9={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const lg=t9,kO={};for(const e of Object.keys(lg))kO[lg[e]]=e;const Qt={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var AO=Qt;for(const e of Object.keys(Qt)){if(!("channels"in Qt[e]))throw new Error("missing channels property: "+e);if(!("labels"in Qt[e]))throw new Error("missing channel labels property: "+e);if(Qt[e].labels.length!==Qt[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=Qt[e];delete Qt[e].channels,delete Qt[e].labels,Object.defineProperty(Qt[e],"channels",{value:t}),Object.defineProperty(Qt[e],"labels",{value:n})}Qt.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(t,n,r),u=Math.max(t,n,r),d=u-s;let o,y;u===s?o=0:t===u?o=(n-r)/d:n===u?o=2+(r-t)/d:r===u&&(o=4+(t-n)/d),o=Math.min(o*60,360),o<0&&(o+=360);const w=(s+u)/2;return u===s?y=0:w<=.5?y=d/(u+s):y=d/(2-u-s),[o,y*100,w*100]};Qt.rgb.hsv=function(e){let t,n,r,s,u;const d=e[0]/255,o=e[1]/255,y=e[2]/255,w=Math.max(d,o,y),M=w-Math.min(d,o,y),k=function(O){return(w-O)/6/M+1/2};return M===0?(s=0,u=0):(u=M/w,t=k(d),n=k(o),r=k(y),d===w?s=r-n:o===w?s=1/3+t-r:y===w&&(s=2/3+n-t),s<0?s+=1:s>1&&(s-=1)),[s*360,u*100,w*100]};Qt.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const s=Qt.rgb.hsl(e)[0],u=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[s,u*100,r*100]};Qt.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(1-t,1-n,1-r),u=(1-t-s)/(1-s)||0,d=(1-n-s)/(1-s)||0,o=(1-r-s)/(1-s)||0;return[u*100,d*100,o*100,s*100]};function n9(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}Qt.rgb.keyword=function(e){const t=kO[e];if(t)return t;let n=1/0,r;for(const s of Object.keys(lg)){const u=lg[s],d=n9(e,u);d<n&&(n=d,r=s)}return r};Qt.keyword.rgb=function(e){return lg[e]};Qt.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const s=t*.4124+n*.3576+r*.1805,u=t*.2126+n*.7152+r*.0722,d=t*.0193+n*.1192+r*.9505;return[s*100,u*100,d*100]};Qt.rgb.lab=function(e){const t=Qt.rgb.xyz(e);let n=t[0],r=t[1],s=t[2];n/=95.047,r/=100,s/=108.883,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const u=116*r-16,d=500*(n-r),o=200*(r-s);return[u,d,o]};Qt.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let s,u,d;if(n===0)return d=r*255,[d,d,d];r<.5?s=r*(1+n):s=r+n-r*n;const o=2*r-s,y=[0,0,0];for(let w=0;w<3;w++)u=t+1/3*-(w-1),u<0&&u++,u>1&&u--,6*u<1?d=o+(s-o)*6*u:2*u<1?d=s:3*u<2?d=o+(s-o)*(2/3-u)*6:d=o,y[w]=d*255;return y};Qt.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,s=n;const u=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=u<=1?u:2-u;const d=(r+n)/2,o=r===0?2*s/(u+s):2*n/(r+n);return[t,o*100,d*100]};Qt.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const s=Math.floor(t)%6,u=t-Math.floor(t),d=255*r*(1-n),o=255*r*(1-n*u),y=255*r*(1-n*(1-u));switch(r*=255,s){case 0:return[r,y,d];case 1:return[o,r,d];case 2:return[d,r,y];case 3:return[d,o,r];case 4:return[y,d,r];case 5:return[r,d,o]}};Qt.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,s=Math.max(r,.01);let u,d;d=(2-n)*r;const o=(2-n)*s;return u=n*s,u/=o<=1?o:2-o,u=u||0,d/=2,[t,u*100,d*100]};Qt.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const s=n+r;let u;s>1&&(n/=s,r/=s);const d=Math.floor(6*t),o=1-r;u=6*t-d,(d&1)!=0&&(u=1-u);const y=n+u*(o-n);let w,M,k;switch(d){default:case 6:case 0:w=o,M=y,k=n;break;case 1:w=y,M=o,k=n;break;case 2:w=n,M=o,k=y;break;case 3:w=n,M=y,k=o;break;case 4:w=y,M=n,k=o;break;case 5:w=o,M=n,k=y;break}return[w*255,M*255,k*255]};Qt.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100,u=1-Math.min(1,t*(1-s)+s),d=1-Math.min(1,n*(1-s)+s),o=1-Math.min(1,r*(1-s)+s);return[u*255,d*255,o*255]};Qt.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let s,u,d;return s=t*3.2406+n*-1.5372+r*-.4986,u=t*-.9689+n*1.8758+r*.0415,d=t*.0557+n*-.204+r*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,u=u>.0031308?1.055*u**(1/2.4)-.055:u*12.92,d=d>.0031308?1.055*d**(1/2.4)-.055:d*12.92,s=Math.min(Math.max(0,s),1),u=Math.min(Math.max(0,u),1),d=Math.min(Math.max(0,d),1),[s*255,u*255,d*255]};Qt.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const s=116*n-16,u=500*(t-n),d=200*(n-r);return[s,u,d]};Qt.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let s,u,d;u=(t+16)/116,s=n/500+u,d=u-r/200;const o=u**3,y=s**3,w=d**3;return u=o>.008856?o:(u-16/116)/7.787,s=y>.008856?y:(s-16/116)/7.787,d=w>.008856?w:(d-16/116)/7.787,s*=95.047,u*=100,d*=108.883,[s,u,d]};Qt.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const d=Math.sqrt(n*n+r*r);return[t,d,s]};Qt.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI,u=n*Math.cos(s),d=n*Math.sin(s);return[t,u,d]};Qt.rgb.ansi16=function(e,t=null){const[n,r,s]=e;let u=t===null?Qt.rgb.hsv(e)[2]:t;if(u=Math.round(u/50),u===0)return 30;let d=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return u===2&&(d+=60),d};Qt.hsv.ansi16=function(e){return Qt.rgb.ansi16(Qt.hsv.rgb(e),e[2])};Qt.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};Qt.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(~~(e>50)+1)*.5,r=(t&1)*n*255,s=(t>>1&1)*n*255,u=(t>>2&1)*n*255;return[r,s,u]};Qt.ansi256.rgb=function(e){if(e>=232){const u=(e-232)*10+8;return[u,u,u]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,s=t%6/5*255;return[n,r,s]};Qt.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(n.length)+n};Qt.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=n.split("").map(o=>o+o).join(""));const r=parseInt(n,16),s=r>>16&255,u=r>>8&255,d=r&255;return[s,u,d]};Qt.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(t,n),r),u=Math.min(Math.min(t,n),r),d=s-u;let o,y;return d<1?o=u/(1-d):o=0,d<=0?y=0:s===t?y=(n-r)/d%6:s===n?y=2+(r-t)/d:y=4+(t-n)/d,y/=6,y%=1,[y*360,d*100,o*100]};Qt.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[e[0],r*100,s*100]};Qt.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],r*100,s*100]};Qt.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],u=t%1*6,d=u%1,o=1-d;let y=0;switch(Math.floor(u)){case 0:s[0]=1,s[1]=d,s[2]=0;break;case 1:s[0]=o,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=d;break;case 3:s[0]=0,s[1]=o,s[2]=1;break;case 4:s[0]=d,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=o}return y=(1-n)*r,[(n*s[0]+y)*255,(n*s[1]+y)*255,(n*s[2]+y)*255]};Qt.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let s=0;return r>0&&(s=t/r),[e[0],s*100,r*100]};Qt.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};Qt.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};Qt.hwb.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=1-n,s=r-t;let u=0;return s<1&&(u=(r-s)/(1-s)),[e[0],s*100,u*100]};Qt.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};Qt.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};Qt.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};Qt.gray.hsl=function(e){return[0,0,e[0]]};Qt.gray.hsv=Qt.gray.hsl;Qt.gray.hwb=function(e){return[0,100,e[0]]};Qt.gray.cmyk=function(e){return[0,0,0,e[0]]};Qt.gray.lab=function(e){return[e[0],0,0]};Qt.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r};Qt.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const rv=AO;function i9(){const e={},t=Object.keys(rv);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function r9(e){const t=i9(),n=[e];for(t[e].distance=0;n.length;){const r=n.pop(),s=Object.keys(rv[r]);for(let u=s.length,d=0;d<u;d++){const o=s[d],y=t[o];y.distance===-1&&(y.distance=t[r].distance+1,y.parent=r,n.unshift(o))}}return t}function o9(e,t){return function(n){return t(e(n))}}function s9(e,t){const n=[t[e].parent,e];let r=rv[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),r=o9(rv[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}var a9=function(e){const t=r9(e),n={},r=Object.keys(t);for(let s=r.length,u=0;u<s;u++){const d=r[u];t[d].parent!==null&&(n[d]=s9(d,t))}return n};const uE=AO,l9=a9,Od={},c9=Object.keys(uE);function u9(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function h9(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=e(n);if(typeof s=="object")for(let u=s.length,d=0;d<u;d++)s[d]=Math.round(s[d]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}c9.forEach(e=>{Od[e]={},Object.defineProperty(Od[e],"channels",{value:uE[e].channels}),Object.defineProperty(Od[e],"labels",{value:uE[e].labels});const t=l9(e);Object.keys(t).forEach(r=>{const s=t[r];Od[e][r]=h9(s),Od[e][r].raw=u9(s)})});var d9=Od;(function(e){const t=(M,k)=>(...O)=>`[${M(...O)+k}m`,n=(M,k)=>(...O)=>{const $=M(...O);return`[${38+k};5;${$}m`},r=(M,k)=>(...O)=>{const $=M(...O);return`[${38+k};2;${$[0]};${$[1]};${$[2]}m`},s=M=>M,u=(M,k,O)=>[M,k,O],d=(M,k,O)=>{Object.defineProperty(M,k,{get:()=>{const $=O();return Object.defineProperty(M,k,{value:$,enumerable:!0,configurable:!0}),$},enumerable:!0,configurable:!0})};let o;const y=(M,k,O,$)=>{o===void 0&&(o=d9);const j=$?10:0,G={};for(const[B,U]of Object.entries(o)){const Z=B==="ansi16"?"ansi":B;B===k?G[Z]=M(O,j):typeof U=="object"&&(G[Z]=M(U[k],j))}return G};function w(){const M=new Map,k={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};k.color.gray=k.color.blackBright,k.bgColor.bgGray=k.bgColor.bgBlackBright,k.color.grey=k.color.blackBright,k.bgColor.bgGrey=k.bgColor.bgBlackBright;for(const[O,$]of Object.entries(k)){for(const[j,G]of Object.entries($))k[j]={open:`[${G[0]}m`,close:`[${G[1]}m`},$[j]=k[j],M.set(G[0],G[1]);Object.defineProperty(k,O,{value:$,enumerable:!1})}return Object.defineProperty(k,"codes",{value:M,enumerable:!1}),k.color.close="[39m",k.bgColor.close="[49m",d(k.color,"ansi",()=>y(t,"ansi16",s,!1)),d(k.color,"ansi256",()=>y(n,"ansi256",s,!1)),d(k.color,"ansi16m",()=>y(r,"rgb",u,!1)),d(k.bgColor,"ansi",()=>y(t,"ansi16",s,!0)),d(k.bgColor,"ansi256",()=>y(n,"ansi256",s,!0)),d(k.bgColor,"ansi16m",()=>y(r,"rgb",u,!0)),k}Object.defineProperty(e,"exports",{enumerable:!0,get:w})})(MO);var f9={stdout:!1,stderr:!1};const p9=(e,t,n)=>{let r=e.indexOf(t);if(r===-1)return e;const s=t.length;let u=0,d="";do d+=e.substr(u,r-u)+t+n,u=r+s,r=e.indexOf(t,u);while(r!==-1);return d+=e.substr(u),d},m9=(e,t,n,r)=>{let s=0,u="";do{const d=e[r-1]==="\r";u+=e.substr(s,(d?r-1:r)-s)+t+(d?`\r
`:`
`)+n,s=r+1,r=e.indexOf(`
`,s)}while(r!==-1);return u+=e.substr(s),u};var g9={stringReplaceAll:p9,stringEncaseCRLFWithFirstIndex:m9};const _9=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,DO=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,y9=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,v9=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,x9=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a","\x07"]]);function IO(e){const t=e[0]==="u",n=e[1]==="{";return t&&!n&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):t&&n?String.fromCodePoint(parseInt(e.slice(2,-1),16)):x9.get(e)||e}function b9(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let s;for(const u of r){const d=Number(u);if(!Number.isNaN(d))n.push(d);else if(s=u.match(y9))n.push(s[2].replace(v9,(o,y,w)=>y?IO(y):w));else throw new Error(`Invalid Chalk template style argument: ${u} (in style '${e}')`)}return n}function w9(e){DO.lastIndex=0;const t=[];let n;for(;(n=DO.exec(e))!==null;){const r=n[1];if(n[2]){const s=b9(r,n[2]);t.push([r].concat(s))}else t.push([r])}return t}function PO(e,t){const n={};for(const s of t)for(const u of s.styles)n[u[0]]=s.inverse?null:u.slice(1);let r=e;for(const[s,u]of Object.entries(n))if(!!Array.isArray(u)){if(!(s in r))throw new Error(`Unknown Chalk style: ${s}`);r=u.length>0?r[s](...u):r[s]}return r}var E9=(e,t)=>{const n=[],r=[];let s=[];if(t.replace(_9,(u,d,o,y,w,M)=>{if(d)s.push(IO(d));else if(y){const k=s.join("");s=[],r.push(n.length===0?k:PO(e,n)(k)),n.push({inverse:o,styles:w9(y)})}else if(w){if(n.length===0)throw new Error("Found extraneous } in Chalk template literal");r.push(PO(e,n)(s.join(""))),s=[],n.pop()}else s.push(M)}),r.push(s.join("")),n.length>0){const u=`Chalk template literal is missing ${n.length} closing bracket${n.length===1?"":"s"} (\`}\`)`;throw new Error(u)}return r.join("")};const cg=MO.exports,{stdout:hE,stderr:dE}=f9,{stringReplaceAll:S9,stringEncaseCRLFWithFirstIndex:T9}=g9,{isArray:ov}=Array,OO=["ansi","ansi","ansi256","ansi16m"],Ld=Object.create(null),C9=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const n=hE?hE.level:0;e.level=t.level===void 0?n:t.level};class M9{constructor(t){return LO(t)}}const LO=e=>{const t={};return C9(t,e),t.template=(...n)=>FO(t.template,...n),Object.setPrototypeOf(t,sv.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=M9,t.template};function sv(e){return LO(e)}for(const[e,t]of Object.entries(cg))Ld[e]={get(){const n=av(this,fE(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:n}),n}};Ld.visible={get(){const e=av(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};const zO=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of zO)Ld[e]={get(){const{level:t}=this;return function(...n){const r=fE(cg.color[OO[t]][e](...n),cg.color.close,this._styler);return av(this,r,this._isEmpty)}}};for(const e of zO){const t="bg"+e[0].toUpperCase()+e.slice(1);Ld[t]={get(){const{level:n}=this;return function(...r){const s=fE(cg.bgColor[OO[n]][e](...r),cg.bgColor.close,this._styler);return av(this,s,this._isEmpty)}}}}const k9=Object.defineProperties(()=>{},Ai(jt({},Ld),{level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}})),fE=(e,t,n)=>{let r,s;return n===void 0?(r=e,s=t):(r=n.openAll+e,s=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:s,parent:n}},av=(e,t,n)=>{const r=(...s)=>ov(s[0])&&ov(s[0].raw)?RO(r,FO(r,...s)):RO(r,s.length===1?""+s[0]:s.join(" "));return Object.setPrototypeOf(r,k9),r._generator=e,r._styler=t,r._isEmpty=n,r},RO=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let n=e._styler;if(n===void 0)return t;const{openAll:r,closeAll:s}=n;if(t.indexOf("")!==-1)for(;n!==void 0;)t=S9(t,n.close,n.open),n=n.parent;const u=t.indexOf(`
`);return u!==-1&&(t=T9(t,s,r,u)),r+t+s};let pE;const FO=(e,...t)=>{const[n]=t;if(!ov(n)||!ov(n.raw))return t.join(" ");const r=t.slice(1),s=[n.raw[0]];for(let u=1;u<n.length;u++)s.push(String(r[u-1]).replace(/[{}\\]/g,"\\$&"),String(n.raw[u]));return pE===void 0&&(pE=E9),pE(e,s.join(""))};Object.defineProperties(sv.prototype,Ld);const lv=sv();lv.supportsColor=hE;lv.stderr=sv({level:dE?dE.level:0});lv.stderr.supportsColor=dE;var BO=lv;Object.defineProperty(Bu,"__esModule",{value:!0});Bu.dim=D9;Bu.default=void 0;var cv=A9(BO);function A9(e){return e&&e.__esModule?e:{default:e}}let NO=new Set;function mE(e,t,n){n&&NO.has(n)||(n&&NO.add(n),console.warn(""),t.forEach(r=>console.warn(e,"-",r)))}function D9(e){return cv.default.dim(e)}var I9={info(e,t){mE(cv.default.bold.cyan("info"),...Array.isArray(e)?[e]:[t,e])},warn(e,t){mE(cv.default.bold.yellow("warn"),...Array.isArray(e)?[e]:[t,e])},risk(e,t){mE(cv.default.bold.magenta("risk"),...Array.isArray(e)?[e]:[t,e])}};Bu.default=I9;Object.defineProperty(iv,"__esModule",{value:!0});iv.default=void 0;var P9=O9(Bu);function O9(e){return e&&e.__esModule?e:{default:e}}function ug({version:e,from:t,to:n}){P9.default.warn(`${t}-color-renamed`,[`As of Tailwind CSS ${e}, \`${t}\` has been renamed to \`${n}\`.`,"Update your configuration file to silence this warning."])}var L9={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337"},get lightBlue(){return ug({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return ug({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return ug({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return ug({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return ug({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}};iv.default=L9;var gE={};Object.defineProperty(gE,"__esModule",{value:!0});gE.defaults=z9;function z9(e,...t){for(let s of t){for(let u in s){var n;(e==null||(n=e.hasOwnProperty)===null||n===void 0?void 0:n.call(e,u))||(e[u]=s[u])}for(let u of Object.getOwnPropertySymbols(s)){var r;(e==null||(r=e.hasOwnProperty)===null||r===void 0?void 0:r.call(e,u))||(e[u]=s[u])}}return e}var _E={};Object.defineProperty(_E,"__esModule",{value:!0});_E.toPath=R9;function R9(e){if(Array.isArray(e))return e;let t=e.split("[").length-1,n=e.split("]").length-1;if(t!==n)throw new Error(`Path is invalid. Has unbalanced brackets: ${e}`);return e.split(/\.(?![^\[]*\])|[\[\]]/g).filter(Boolean)}var yE={};Object.defineProperty(yE,"__esModule",{value:!0});yE.normalizeConfig=B9;var zd=F9(Bu);function F9(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}}return t.default=e,t}function B9(e){if((()=>{if(e.purge||!e.content||!Array.isArray(e.content)&&!(typeof e.content=="object"&&e.content!==null))return!1;if(Array.isArray(e.content))return e.content.every(r=>typeof r=="string"?!0:!(typeof(r==null?void 0:r.raw)!="string"||(r==null?void 0:r.extension)&&typeof(r==null?void 0:r.extension)!="string"));if(typeof e.content=="object"&&e.content!==null){if(Object.keys(e.content).some(r=>!["files","extract","transform"].includes(r)))return!1;if(Array.isArray(e.content.files)){if(!e.content.files.every(r=>typeof r=="string"?!0:!(typeof(r==null?void 0:r.raw)!="string"||(r==null?void 0:r.extension)&&typeof(r==null?void 0:r.extension)!="string")))return!1;if(typeof e.content.extract=="object"){for(let r of Object.values(e.content.extract))if(typeof r!="function")return!1}else if(!(e.content.extract===void 0||typeof e.content.extract=="function"))return!1;if(typeof e.content.transform=="object"){for(let r of Object.values(e.content.transform))if(typeof r!="function")return!1}else if(!(e.content.transform===void 0||typeof e.content.transform=="function"))return!1}return!0}return!1})()||zd.default.warn("purge-deprecation",["The `purge`/`content` options have changed in Tailwind CSS v3.0.","Update your configuration file to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#configure-content-sources"]),e.safelist=(()=>{var r;let{content:s,purge:u,safelist:d}=e;return Array.isArray(d)?d:Array.isArray(s==null?void 0:s.safelist)?s.safelist:Array.isArray(u==null?void 0:u.safelist)?u.safelist:Array.isArray(u==null||(r=u.options)===null||r===void 0?void 0:r.safelist)?u.options.safelist:[]})(),typeof e.prefix=="function")zd.default.warn("prefix-function",["As of Tailwind CSS v3.0, `prefix` cannot be a function.","Update `prefix` in your configuration to be a string to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#prefix-cannot-be-a-function"]),e.prefix="";else{var n;e.prefix=(n=e.prefix)!==null&&n!==void 0?n:""}e.content={files:(()=>{let{content:r,purge:s}=e;return Array.isArray(s)?s:Array.isArray(s==null?void 0:s.content)?s.content:Array.isArray(r)?r:Array.isArray(r==null?void 0:r.content)?r.content:Array.isArray(r==null?void 0:r.files)?r.files:[]})(),extract:(()=>{let r=(()=>{var d,o,y,w,M,k,O,$,j,G;return((d=e.purge)===null||d===void 0?void 0:d.extract)?e.purge.extract:((o=e.content)===null||o===void 0?void 0:o.extract)?e.content.extract:((y=e.purge)===null||y===void 0||(w=y.extract)===null||w===void 0?void 0:w.DEFAULT)?e.purge.extract.DEFAULT:((M=e.content)===null||M===void 0||(k=M.extract)===null||k===void 0?void 0:k.DEFAULT)?e.content.extract.DEFAULT:((O=e.purge)===null||O===void 0||($=O.options)===null||$===void 0?void 0:$.extractors)?e.purge.options.extractors:((j=e.content)===null||j===void 0||(G=j.options)===null||G===void 0?void 0:G.extractors)?e.content.options.extractors:{}})(),s={},u=(()=>{var d,o,y,w;if((d=e.purge)===null||d===void 0||(o=d.options)===null||o===void 0?void 0:o.defaultExtractor)return e.purge.options.defaultExtractor;if((y=e.content)===null||y===void 0||(w=y.options)===null||w===void 0?void 0:w.defaultExtractor)return e.content.options.defaultExtractor})();if(u!==void 0&&(s.DEFAULT=u),typeof r=="function")s.DEFAULT=r;else if(Array.isArray(r))for(let{extensions:d,extractor:o}of r!=null?r:[])for(let y of d)s[y]=o;else typeof r=="object"&&r!==null&&Object.assign(s,r);return s})(),transform:(()=>{let r=(()=>{var u,d,o,y,w,M;return((u=e.purge)===null||u===void 0?void 0:u.transform)?e.purge.transform:((d=e.content)===null||d===void 0?void 0:d.transform)?e.content.transform:((o=e.purge)===null||o===void 0||(y=o.transform)===null||y===void 0?void 0:y.DEFAULT)?e.purge.transform.DEFAULT:((w=e.content)===null||w===void 0||(M=w.transform)===null||M===void 0?void 0:M.DEFAULT)?e.content.transform.DEFAULT:{}})(),s={};return typeof r=="function"&&(s.DEFAULT=r),typeof r=="object"&&r!==null&&Object.assign(s,r),s})()};for(let r of e.content.files)if(typeof r=="string"&&/{([^,]*?)}/g.test(r)){zd.default.warn("invalid-glob-braces",[`The glob pattern ${zd.dim(r)} in your Tailwind CSS configuration is invalid.`,`Update it to ${zd.dim(r.replace(/{([^,]*?)}/g,"$1"))} to silence this warning.`]);break}return e.content.files.length===0&&zd.default.warn("content-problems",["The `content` option in your Tailwind CSS configuration is missing or empty.","Configure your content sources or your generated CSS will be missing styles.","https://tailwindcss.com/docs/content-configuration"]),e}var vE={};Object.defineProperty(vE,"__esModule",{value:!0});vE.default=N9;function N9(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var xE={};Object.defineProperty(xE,"__esModule",{value:!0});xE.cloneDeep=bE;function bE(e){return Array.isArray(e)?e.map(t=>bE(t)):typeof e=="object"&&e!==null?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,bE(n)])):e}Object.defineProperty(aE,"__esModule",{value:!0});aE.default=n7;var V9=Rd(lE),j9=Rd(nv),U9=Rd(cE),$9=Rd(CO),G9=Rd(iv),VO=gE,W9=_E,H9=yE,q9=Rd(vE),Y9=xE;function Rd(e){return e&&e.__esModule?e:{default:e}}function Fd(e){return typeof e=="function"}function hg(e){return typeof e=="object"&&e!==null}function dg(e,...t){let n=t.pop();for(let r of t)for(let s in r){let u=n(e[s],r[s]);u===void 0?hg(e[s])&&hg(r[s])?e[s]=dg(e[s],r[s],n):e[s]=r[s]:e[s]=u}return e}const uv={colors:G9.default,negative(e){return Object.keys(e).filter(t=>e[t]!=="0").reduce((t,n)=>{let r=V9.default(e[n]);return r!==void 0&&(t[`-${n}`]=r),t},{})},breakpoints(e){return Object.keys(e).filter(t=>typeof e[t]=="string").reduce((t,n)=>Ai(jt({},t),{[`screen-${n}`]:e[n]}),{})}};function Z9(e,...t){return Fd(e)?e(...t):e}function X9(e){return e.reduce((t,{extend:n})=>dg(t,n,(r,s)=>r===void 0?[s]:Array.isArray(r)?[s,...r]:[s,r]),{})}function K9(e){return Ai(jt({},e.reduce((t,n)=>VO.defaults(t,n),{})),{extend:X9(e)})}function jO(e,t){if(Array.isArray(e)&&hg(e[0]))return e.concat(t);if(Array.isArray(t)&&hg(t[0])&&hg(e))return[e,...t];if(Array.isArray(t))return t}function J9(n){var r=n,{extend:e}=r,t=jp(r,["extend"]);return dg(t,e,(s,u)=>!Fd(s)&&!u.some(Fd)?dg({},s,...u,jO):(d,o)=>dg({},...[s,...u].map(y=>Z9(y,d,o)),jO))}function Q9(e){const t=(n,r)=>{const s=W9.toPath(n);let u=0,d=e;for(;d!=null&&u<s.length;)d=d[s[u++]],d=Fd(d)?d(t,uv):d;return d===void 0?r:q9.default(d)?Y9.cloneDeep(d):d};t.theme=t;for(let n in uv)t[n]=uv[n];return Object.keys(e).reduce((n,r)=>Ai(jt({},n),{[r]:Fd(e[r])?e[r](t,uv):e[r]}),{})}function UO(e){let t=[];return e.forEach(n=>{t=[...t,n];var r;const s=(r=n==null?void 0:n.plugins)!==null&&r!==void 0?r:[];s.length!==0&&s.forEach(u=>{u.__isOptionsFunction&&(u=u());var d;t=[...t,...UO([(d=u==null?void 0:u.config)!==null&&d!==void 0?d:{}])]})}),t}function e7(e){return[...e].reduceRight((n,r)=>Fd(r)?r({corePlugins:n}):U9.default(r,n),j9.default)}function t7(e){return[...e].reduceRight((n,r)=>[...n,...r],[])}function n7(e){let t=[...UO(e),{prefix:"",important:!1,separator:":",variantOrder:$9.default.variantOrder}];var n,r;return H9.normalizeConfig(VO.defaults({theme:Q9(J9(K9(t.map(s=>(n=s==null?void 0:s.theme)!==null&&n!==void 0?n:{})))),corePlugins:e7(t.map(s=>s.corePlugins)),plugins:t7(e.map(s=>(r=s==null?void 0:s.plugins)!==null&&r!==void 0?r:[]))},...t))}var wE={},Bd={};Object.defineProperty(Bd,"__esModule",{value:!0});Bd.flagEnabled=o7;Bd.issueFlagNotices=s7;Bd.default=void 0;var i7=$O(BO),r7=$O(Bu);function $O(e){return e&&e.__esModule?e:{default:e}}let GO={optimizeUniversalDefaults:!1},fg={future:[],experimental:["optimizeUniversalDefaults"]};function o7(e,t){if(fg.future.includes(t)){var n,r,s;return e.future==="all"||((s=(r=e==null||(n=e.future)===null||n===void 0?void 0:n[t])!==null&&r!==void 0?r:GO[t])!==null&&s!==void 0?s:!1)}if(fg.experimental.includes(t)){var u,d,o;return e.experimental==="all"||((o=(d=e==null||(u=e.experimental)===null||u===void 0?void 0:u[t])!==null&&d!==void 0?d:GO[t])!==null&&o!==void 0?o:!1)}return!1}function WO(e){if(e.experimental==="all")return fg.experimental;var t;return Object.keys((t=e==null?void 0:e.experimental)!==null&&t!==void 0?t:{}).filter(n=>fg.experimental.includes(n)&&e.experimental[n])}function s7(e){if(WO(e).length>0){let t=WO(e).map(n=>i7.default.yellow(n)).join(", ");r7.default.warn("experimental-flags-enabled",[`You have enabled experimental features: ${t}`,"Experimental features in Tailwind CSS are not covered by semver, may introduce breaking changes, and can change at any time."])}}var a7=fg;Bd.default=a7;Object.defineProperty(wE,"__esModule",{value:!0});wE.default=HO;var l7=u7(CO),c7=Bd;function u7(e){return e&&e.__esModule?e:{default:e}}function HO(e){var t;const n=((t=e==null?void 0:e.presets)!==null&&t!==void 0?t:[l7.default]).slice().reverse().flatMap(u=>HO(u instanceof Function?u():u)),r={},s=Object.keys(r).filter(u=>c7.flagEnabled(e,u)).map(u=>r[u]);return[e,...s,...n]}Object.defineProperty(sE,"__esModule",{value:!0});sE.default=f7;var h7=qO(aE),d7=qO(wE);function qO(e){return e&&e.__esModule?e:{default:e}}function f7(...e){let[,...t]=d7.default(e[0]);return h7.default([...e,...t])}let EE=sE;var YQ=(EE.__esModule?EE:{default:EE}).default;function SE(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,u;for(u=0;u<r.length;u++)s=r[u],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function hv(e,t){return hv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},hv(e,t)}function YO(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,hv(e,t)}var TE={exports:{}},p7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",m7=p7,g7=m7;function ZO(){}function XO(){}XO.resetWarningCache=ZO;var _7=function(){function e(r,s,u,d,o,y){if(y!==g7){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:XO,resetWarningCache:ZO};return n.PropTypes=n,n};TE.exports=_7();var Ci=TE.exports;function y7(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function v7(e,t){e.classList?e.classList.add(t):y7(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function KO(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function x7(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=KO(e.className,t):e.setAttribute("class",KO(e.className&&e.className.baseVal||"",t))}var JO={disabled:!1},QO=Zr.createContext(null),pg="unmounted",Nu="exited",Vu="entering",Nd="entered",CE="exiting",ol=function(e){YO(t,e);function t(r,s){var u;u=e.call(this,r,s)||this;var d=s,o=d&&!d.isMounting?r.enter:r.appear,y;return u.appearStatus=null,r.in?o?(y=Nu,u.appearStatus=Vu):y=Nd:r.unmountOnExit||r.mountOnEnter?y=pg:y=Nu,u.state={status:y},u.nextCallback=null,u}t.getDerivedStateFromProps=function(s,u){var d=s.in;return d&&u.status===pg?{status:Nu}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var u=null;if(s!==this.props){var d=this.state.status;this.props.in?d!==Vu&&d!==Nd&&(u=Vu):(d===Vu||d===Nd)&&(u=CE)}this.updateStatus(!1,u)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,u,d,o;return u=d=o=s,s!=null&&typeof s!="number"&&(u=s.exit,d=s.enter,o=s.appear!==void 0?s.appear:d),{exit:u,enter:d,appear:o}},n.updateStatus=function(s,u){s===void 0&&(s=!1),u!==null?(this.cancelNextCallback(),u===Vu?this.performEnter(s):this.performExit()):this.props.unmountOnExit&&this.state.status===Nu&&this.setState({status:pg})},n.performEnter=function(s){var u=this,d=this.props.enter,o=this.context?this.context.isMounting:s,y=this.props.nodeRef?[o]:[l2.findDOMNode(this),o],w=y[0],M=y[1],k=this.getTimeouts(),O=o?k.appear:k.enter;if(!s&&!d||JO.disabled){this.safeSetState({status:Nd},function(){u.props.onEntered(w)});return}this.props.onEnter(w,M),this.safeSetState({status:Vu},function(){u.props.onEntering(w,M),u.onTransitionEnd(O,function(){u.safeSetState({status:Nd},function(){u.props.onEntered(w,M)})})})},n.performExit=function(){var s=this,u=this.props.exit,d=this.getTimeouts(),o=this.props.nodeRef?void 0:l2.findDOMNode(this);if(!u||JO.disabled){this.safeSetState({status:Nu},function(){s.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:CE},function(){s.props.onExiting(o),s.onTransitionEnd(d.exit,function(){s.safeSetState({status:Nu},function(){s.props.onExited(o)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,u){u=this.setNextCallback(u),this.setState(s,u)},n.setNextCallback=function(s){var u=this,d=!0;return this.nextCallback=function(o){d&&(d=!1,u.nextCallback=null,s(o))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(s,u){this.setNextCallback(u);var d=this.props.nodeRef?this.props.nodeRef.current:l2.findDOMNode(this),o=s==null&&!this.props.addEndListener;if(!d||o){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var y=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],w=y[0],M=y[1];this.props.addEndListener(w,M)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===pg)return null;var u=this.props,d=u.children;u.in,u.mountOnEnter,u.unmountOnExit,u.appear,u.enter,u.exit,u.timeout,u.addEndListener,u.onEnter,u.onEntering,u.onEntered,u.onExit,u.onExiting,u.onExited,u.nodeRef;var o=SE(u,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Zr.createElement(QO.Provider,{value:null},typeof d=="function"?d(s,o):Zr.cloneElement(Zr.Children.only(d),o))},t}(Zr.Component);ol.contextType=QO;ol.propTypes={};function Vd(){}ol.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vd,onEntering:Vd,onEntered:Vd,onExit:Vd,onExiting:Vd,onExited:Vd};ol.UNMOUNTED=pg;ol.EXITED=Nu;ol.ENTERING=Vu;ol.ENTERED=Nd;ol.EXITING=CE;var b7=ol,w7=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return v7(t,r)})},ME=function(t,n){return t&&n&&n.split(" ").forEach(function(r){return x7(t,r)})},kE=function(e){YO(t,e);function t(){for(var r,s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];return r=e.call.apply(e,[this].concat(u))||this,r.appliedClasses={appear:{},enter:{},exit:{}},r.onEnter=function(o,y){var w=r.resolveArguments(o,y),M=w[0],k=w[1];r.removeClasses(M,"exit"),r.addClass(M,k?"appear":"enter","base"),r.props.onEnter&&r.props.onEnter(o,y)},r.onEntering=function(o,y){var w=r.resolveArguments(o,y),M=w[0],k=w[1],O=k?"appear":"enter";r.addClass(M,O,"active"),r.props.onEntering&&r.props.onEntering(o,y)},r.onEntered=function(o,y){var w=r.resolveArguments(o,y),M=w[0],k=w[1],O=k?"appear":"enter";r.removeClasses(M,O),r.addClass(M,O,"done"),r.props.onEntered&&r.props.onEntered(o,y)},r.onExit=function(o){var y=r.resolveArguments(o),w=y[0];r.removeClasses(w,"appear"),r.removeClasses(w,"enter"),r.addClass(w,"exit","base"),r.props.onExit&&r.props.onExit(o)},r.onExiting=function(o){var y=r.resolveArguments(o),w=y[0];r.addClass(w,"exit","active"),r.props.onExiting&&r.props.onExiting(o)},r.onExited=function(o){var y=r.resolveArguments(o),w=y[0];r.removeClasses(w,"exit"),r.addClass(w,"exit","done"),r.props.onExited&&r.props.onExited(o)},r.resolveArguments=function(o,y){return r.props.nodeRef?[r.props.nodeRef.current,o]:[o,y]},r.getClassNames=function(o){var y=r.props.classNames,w=typeof y=="string",M=w&&y?y+"-":"",k=w?""+M+o:y[o],O=w?k+"-active":y[o+"Active"],$=w?k+"-done":y[o+"Done"];return{baseClassName:k,activeClassName:O,doneClassName:$}},r}var n=t.prototype;return n.addClass=function(s,u,d){var o=this.getClassNames(u)[d+"ClassName"],y=this.getClassNames("enter"),w=y.doneClassName;u==="appear"&&d==="done"&&w&&(o+=" "+w),d==="active"&&s&&s.scrollTop,o&&(this.appliedClasses[u][d]=o,w7(s,o))},n.removeClasses=function(s,u){var d=this.appliedClasses[u],o=d.base,y=d.active,w=d.done;this.appliedClasses[u]={},o&&ME(s,o),y&&ME(s,y),w&&ME(s,w)},n.render=function(){var s=this.props;s.classNames;var u=SE(s,["classNames"]);return Zr.createElement(b7,ln({},u,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(Zr.Component);kE.defaultProps={classNames:""};kE.propTypes={};var ZQ=kE;function E7(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}//! moment.js
//! version : 2.29.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var eL;function Rt(){return eL.apply(null,arguments)}function S7(e){eL=e}function Vs(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ju(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function AE(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Qn(e,t))return!1;return!0}function Lo(e){return e===void 0}function sl(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function mg(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function tL(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function _c(e,t){for(var n in t)Qn(t,n)&&(e[n]=t[n]);return Qn(t,"toString")&&(e.toString=t.toString),Qn(t,"valueOf")&&(e.valueOf=t.valueOf),e}function va(e,t,n,r){return ML(e,t,n,r,!0).utc()}function T7(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function kn(e){return e._pf==null&&(e._pf=T7()),e._pf}var DE;Array.prototype.some?DE=Array.prototype.some:DE=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function IE(e){if(e._isValid==null){var t=kn(e),n=DE.call(t.parsedDateParts,function(s){return s!=null}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r}return e._isValid}function dv(e){var t=va(NaN);return e!=null?_c(kn(t),e):kn(t).userInvalidated=!0,t}var PE=Rt.momentProperties=[],OE=!1;function LE(e,t){var n,r,s;if(Lo(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),Lo(t._i)||(e._i=t._i),Lo(t._f)||(e._f=t._f),Lo(t._l)||(e._l=t._l),Lo(t._strict)||(e._strict=t._strict),Lo(t._tzm)||(e._tzm=t._tzm),Lo(t._isUTC)||(e._isUTC=t._isUTC),Lo(t._offset)||(e._offset=t._offset),Lo(t._pf)||(e._pf=kn(t)),Lo(t._locale)||(e._locale=t._locale),PE.length>0)for(n=0;n<PE.length;n++)r=PE[n],s=t[r],Lo(s)||(e[r]=s);return e}function gg(e){LE(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),OE===!1&&(OE=!0,Rt.updateOffset(this),OE=!1)}function js(e){return e instanceof gg||e!=null&&e._isAMomentObject!=null}function nL(e){Rt.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function ys(e,t){var n=!0;return _c(function(){if(Rt.deprecationHandler!=null&&Rt.deprecationHandler(null,e),n){var r=[],s,u,d;for(u=0;u<arguments.length;u++){if(s="",typeof arguments[u]=="object"){s+=`
[`+u+"] ";for(d in arguments[0])Qn(arguments[0],d)&&(s+=d+": "+arguments[0][d]+", ");s=s.slice(0,-2)}else s=arguments[u];r.push(s)}nL(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var iL={};function rL(e,t){Rt.deprecationHandler!=null&&Rt.deprecationHandler(e,t),iL[e]||(nL(t),iL[e]=!0)}Rt.suppressDeprecationWarnings=!1;Rt.deprecationHandler=null;function xa(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function C7(e){var t,n;for(n in e)Qn(e,n)&&(t=e[n],xa(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function zE(e,t){var n=_c({},e),r;for(r in t)Qn(t,r)&&(ju(e[r])&&ju(t[r])?(n[r]={},_c(n[r],e[r]),_c(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)Qn(e,r)&&!Qn(t,r)&&ju(e[r])&&(n[r]=_c({},n[r]));return n}function RE(e){e!=null&&this.set(e)}var FE;Object.keys?FE=Object.keys:FE=function(e){var t,n=[];for(t in e)Qn(e,t)&&n.push(t);return n};var M7={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function k7(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return xa(r)?r.call(t,n):r}function ba(e,t,n){var r=""+Math.abs(e),s=t-r.length,u=e>=0;return(u?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+r}var BE=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,fv=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,NE={},jd={};function on(e,t,n,r){var s=r;typeof r=="string"&&(s=function(){return this[r]()}),e&&(jd[e]=s),t&&(jd[t[0]]=function(){return ba(s.apply(this,arguments),t[1],t[2])}),n&&(jd[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function A7(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function D7(e){var t=e.match(BE),n,r;for(n=0,r=t.length;n<r;n++)jd[t[n]]?t[n]=jd[t[n]]:t[n]=A7(t[n]);return function(s){var u="",d;for(d=0;d<r;d++)u+=xa(t[d])?t[d].call(s,e):t[d];return u}}function pv(e,t){return e.isValid()?(t=oL(t,e.localeData()),NE[t]=NE[t]||D7(t),NE[t](e)):e.localeData().invalidDate()}function oL(e,t){var n=5;function r(s){return t.longDateFormat(s)||s}for(fv.lastIndex=0;n>=0&&fv.test(e);)e=e.replace(fv,r),fv.lastIndex=0,n-=1;return e}var I7={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function P7(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(BE).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var O7="Invalid date";function L7(){return this._invalidDate}var z7="%d",R7=/\d{1,2}/;function F7(e){return this._ordinal.replace("%d",e)}var B7={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function N7(e,t,n,r){var s=this._relativeTime[n];return xa(s)?s(e,t,n,r):s.replace(/%d/i,e)}function V7(e,t){var n=this._relativeTime[e>0?"future":"past"];return xa(n)?n(t):n.replace(/%s/i,t)}var _g={};function to(e,t){var n=e.toLowerCase();_g[n]=_g[n+"s"]=_g[t]=e}function vs(e){return typeof e=="string"?_g[e]||_g[e.toLowerCase()]:void 0}function VE(e){var t={},n,r;for(r in e)Qn(e,r)&&(n=vs(r),n&&(t[n]=e[r]));return t}var sL={};function no(e,t){sL[e]=t}function j7(e){var t=[],n;for(n in e)Qn(e,n)&&t.push({unit:n,priority:sL[n]});return t.sort(function(r,s){return r.priority-s.priority}),t}function mv(e){return e%4==0&&e%100!=0||e%400==0}function xs(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function On(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=xs(t)),n}function Ud(e,t){return function(n){return n!=null?(aL(this,e,n),Rt.updateOffset(this,t),this):gv(this,e)}}function gv(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function aL(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&mv(e.year())&&e.month()===1&&e.date()===29?(n=On(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ev(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function U7(e){return e=vs(e),xa(this[e])?this[e]():this}function $7(e,t){if(typeof e=="object"){e=VE(e);var n=j7(e),r;for(r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=vs(e),xa(this[e]))return this[e](t);return this}var lL=/\d/,Xo=/\d\d/,cL=/\d{3}/,jE=/\d{4}/,_v=/[+-]?\d{6}/,Ni=/\d\d?/,uL=/\d\d\d\d?/,hL=/\d\d\d\d\d\d?/,yv=/\d{1,3}/,UE=/\d{1,4}/,vv=/[+-]?\d{1,6}/,$d=/\d+/,xv=/[+-]?\d+/,G7=/Z|[+-]\d\d:?\d\d/gi,bv=/Z|[+-]\d\d(?::?\d\d)?/gi,W7=/[+-]?\d+(\.\d{1,3})?/,yg=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,wv;wv={};function Ht(e,t,n){wv[e]=xa(t)?t:function(r,s){return r&&n?n:t}}function H7(e,t){return Qn(wv,e)?wv[e](t._strict,t._locale):new RegExp(q7(e))}function q7(e){return Ko(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,s,u){return n||r||s||u}))}function Ko(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var $E={};function vi(e,t){var n,r=t;for(typeof e=="string"&&(e=[e]),sl(t)&&(r=function(s,u){u[t]=On(s)}),n=0;n<e.length;n++)$E[e[n]]=r}function vg(e,t){vi(e,function(n,r,s,u){s._w=s._w||{},t(n,s._w,s,u)})}function Y7(e,t,n){t!=null&&Qn($E,e)&&$E[e](t,n._a,n,e)}var io=0,al=1,wa=2,yr=3,Us=4,ll=5,Uu=6,Z7=7,X7=8;function K7(e,t){return(e%t+t)%t}var or;Array.prototype.indexOf?or=Array.prototype.indexOf:or=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Ev(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=K7(t,12);return e+=(t-n)/12,n===1?mv(e)?29:28:31-n%7%2}on("M",["MM",2],"Mo",function(){return this.month()+1});on("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});on("MMMM",0,0,function(e){return this.localeData().months(this,e)});to("month","M");no("month",8);Ht("M",Ni);Ht("MM",Ni,Xo);Ht("MMM",function(e,t){return t.monthsShortRegex(e)});Ht("MMMM",function(e,t){return t.monthsRegex(e)});vi(["M","MM"],function(e,t){t[al]=On(e)-1});vi(["MMM","MMMM"],function(e,t,n,r){var s=n._locale.monthsParse(e,r,n._strict);s!=null?t[al]=s:kn(n).invalidMonth=e});var J7="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),dL="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),fL=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Q7=yg,e$=yg;function t$(e,t){return e?Vs(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||fL).test(t)?"format":"standalone"][e.month()]:Vs(this._months)?this._months:this._months.standalone}function n$(e,t){return e?Vs(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[fL.test(t)?"format":"standalone"][e.month()]:Vs(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function i$(e,t,n){var r,s,u,d=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)u=va([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(u,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(u,"").toLocaleLowerCase();return n?t==="MMM"?(s=or.call(this._shortMonthsParse,d),s!==-1?s:null):(s=or.call(this._longMonthsParse,d),s!==-1?s:null):t==="MMM"?(s=or.call(this._shortMonthsParse,d),s!==-1?s:(s=or.call(this._longMonthsParse,d),s!==-1?s:null)):(s=or.call(this._longMonthsParse,d),s!==-1?s:(s=or.call(this._shortMonthsParse,d),s!==-1?s:null))}function r$(e,t,n){var r,s,u;if(this._monthsParseExact)return i$.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(s=va([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(u="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[r]=new RegExp(u.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function pL(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=On(t);else if(t=e.localeData().monthsParse(t),!sl(t))return e}return n=Math.min(e.date(),Ev(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function mL(e){return e!=null?(pL(this,e),Rt.updateOffset(this,!0),this):gv(this,"Month")}function o$(){return Ev(this.year(),this.month())}function s$(e){return this._monthsParseExact?(Qn(this,"_monthsRegex")||gL.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Qn(this,"_monthsShortRegex")||(this._monthsShortRegex=Q7),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function a$(e){return this._monthsParseExact?(Qn(this,"_monthsRegex")||gL.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Qn(this,"_monthsRegex")||(this._monthsRegex=e$),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function gL(){function e(d,o){return o.length-d.length}var t=[],n=[],r=[],s,u;for(s=0;s<12;s++)u=va([2e3,s]),t.push(this.monthsShort(u,"")),n.push(this.months(u,"")),r.push(this.months(u,"")),r.push(this.monthsShort(u,""));for(t.sort(e),n.sort(e),r.sort(e),s=0;s<12;s++)t[s]=Ko(t[s]),n[s]=Ko(n[s]);for(s=0;s<24;s++)r[s]=Ko(r[s]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}on("Y",0,0,function(){var e=this.year();return e<=9999?ba(e,4):"+"+e});on(0,["YY",2],0,function(){return this.year()%100});on(0,["YYYY",4],0,"year");on(0,["YYYYY",5],0,"year");on(0,["YYYYYY",6,!0],0,"year");to("year","y");no("year",1);Ht("Y",xv);Ht("YY",Ni,Xo);Ht("YYYY",UE,jE);Ht("YYYYY",vv,_v);Ht("YYYYYY",vv,_v);vi(["YYYYY","YYYYYY"],io);vi("YYYY",function(e,t){t[io]=e.length===2?Rt.parseTwoDigitYear(e):On(e)});vi("YY",function(e,t){t[io]=Rt.parseTwoDigitYear(e)});vi("Y",function(e,t){t[io]=parseInt(e,10)});function xg(e){return mv(e)?366:365}Rt.parseTwoDigitYear=function(e){return On(e)+(On(e)>68?1900:2e3)};var _L=Ud("FullYear",!0);function l$(){return mv(this.year())}function c$(e,t,n,r,s,u,d){var o;return e<100&&e>=0?(o=new Date(e+400,t,n,r,s,u,d),isFinite(o.getFullYear())&&o.setFullYear(e)):o=new Date(e,t,n,r,s,u,d),o}function bg(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Sv(e,t,n){var r=7+t-n,s=(7+bg(e,0,r).getUTCDay()-t)%7;return-s+r-1}function yL(e,t,n,r,s){var u=(7+n-r)%7,d=Sv(e,r,s),o=1+7*(t-1)+u+d,y,w;return o<=0?(y=e-1,w=xg(y)+o):o>xg(e)?(y=e+1,w=o-xg(e)):(y=e,w=o),{year:y,dayOfYear:w}}function wg(e,t,n){var r=Sv(e.year(),t,n),s=Math.floor((e.dayOfYear()-r-1)/7)+1,u,d;return s<1?(d=e.year()-1,u=s+cl(d,t,n)):s>cl(e.year(),t,n)?(u=s-cl(e.year(),t,n),d=e.year()+1):(d=e.year(),u=s),{week:u,year:d}}function cl(e,t,n){var r=Sv(e,t,n),s=Sv(e+1,t,n);return(xg(e)-r+s)/7}on("w",["ww",2],"wo","week");on("W",["WW",2],"Wo","isoWeek");to("week","w");to("isoWeek","W");no("week",5);no("isoWeek",5);Ht("w",Ni);Ht("ww",Ni,Xo);Ht("W",Ni);Ht("WW",Ni,Xo);vg(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=On(e)});function u$(e){return wg(e,this._week.dow,this._week.doy).week}var h$={dow:0,doy:6};function d$(){return this._week.dow}function f$(){return this._week.doy}function p$(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function m$(e){var t=wg(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}on("d",0,"do","day");on("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});on("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});on("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});on("e",0,0,"weekday");on("E",0,0,"isoWeekday");to("day","d");to("weekday","e");to("isoWeekday","E");no("day",11);no("weekday",11);no("isoWeekday",11);Ht("d",Ni);Ht("e",Ni);Ht("E",Ni);Ht("dd",function(e,t){return t.weekdaysMinRegex(e)});Ht("ddd",function(e,t){return t.weekdaysShortRegex(e)});Ht("dddd",function(e,t){return t.weekdaysRegex(e)});vg(["dd","ddd","dddd"],function(e,t,n,r){var s=n._locale.weekdaysParse(e,r,n._strict);s!=null?t.d=s:kn(n).invalidWeekday=e});vg(["d","e","E"],function(e,t,n,r){t[r]=On(e)});function g$(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function _$(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function GE(e,t){return e.slice(t,7).concat(e.slice(0,t))}var y$="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),vL="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),v$="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),x$=yg,b$=yg,w$=yg;function E$(e,t){var n=Vs(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?GE(n,this._week.dow):e?n[e.day()]:n}function S$(e){return e===!0?GE(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function T$(e){return e===!0?GE(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function C$(e,t,n){var r,s,u,d=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)u=va([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(u,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(u,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(u,"").toLocaleLowerCase();return n?t==="dddd"?(s=or.call(this._weekdaysParse,d),s!==-1?s:null):t==="ddd"?(s=or.call(this._shortWeekdaysParse,d),s!==-1?s:null):(s=or.call(this._minWeekdaysParse,d),s!==-1?s:null):t==="dddd"?(s=or.call(this._weekdaysParse,d),s!==-1||(s=or.call(this._shortWeekdaysParse,d),s!==-1)?s:(s=or.call(this._minWeekdaysParse,d),s!==-1?s:null)):t==="ddd"?(s=or.call(this._shortWeekdaysParse,d),s!==-1||(s=or.call(this._weekdaysParse,d),s!==-1)?s:(s=or.call(this._minWeekdaysParse,d),s!==-1?s:null)):(s=or.call(this._minWeekdaysParse,d),s!==-1||(s=or.call(this._weekdaysParse,d),s!==-1)?s:(s=or.call(this._shortWeekdaysParse,d),s!==-1?s:null))}function M$(e,t,n){var r,s,u;if(this._weekdaysParseExact)return C$.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(s=va([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(u="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[r]=new RegExp(u.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function k$(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=g$(e,this.localeData()),this.add(e-t,"d")):t}function A$(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function D$(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=_$(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function I$(e){return this._weekdaysParseExact?(Qn(this,"_weekdaysRegex")||WE.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Qn(this,"_weekdaysRegex")||(this._weekdaysRegex=x$),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function P$(e){return this._weekdaysParseExact?(Qn(this,"_weekdaysRegex")||WE.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Qn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=b$),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function O$(e){return this._weekdaysParseExact?(Qn(this,"_weekdaysRegex")||WE.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Qn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=w$),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function WE(){function e(M,k){return k.length-M.length}var t=[],n=[],r=[],s=[],u,d,o,y,w;for(u=0;u<7;u++)d=va([2e3,1]).day(u),o=Ko(this.weekdaysMin(d,"")),y=Ko(this.weekdaysShort(d,"")),w=Ko(this.weekdays(d,"")),t.push(o),n.push(y),r.push(w),s.push(o),s.push(y),s.push(w);t.sort(e),n.sort(e),r.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function HE(){return this.hours()%12||12}function L$(){return this.hours()||24}on("H",["HH",2],0,"hour");on("h",["hh",2],0,HE);on("k",["kk",2],0,L$);on("hmm",0,0,function(){return""+HE.apply(this)+ba(this.minutes(),2)});on("hmmss",0,0,function(){return""+HE.apply(this)+ba(this.minutes(),2)+ba(this.seconds(),2)});on("Hmm",0,0,function(){return""+this.hours()+ba(this.minutes(),2)});on("Hmmss",0,0,function(){return""+this.hours()+ba(this.minutes(),2)+ba(this.seconds(),2)});function xL(e,t){on(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}xL("a",!0);xL("A",!1);to("hour","h");no("hour",13);function bL(e,t){return t._meridiemParse}Ht("a",bL);Ht("A",bL);Ht("H",Ni);Ht("h",Ni);Ht("k",Ni);Ht("HH",Ni,Xo);Ht("hh",Ni,Xo);Ht("kk",Ni,Xo);Ht("hmm",uL);Ht("hmmss",hL);Ht("Hmm",uL);Ht("Hmmss",hL);vi(["H","HH"],yr);vi(["k","kk"],function(e,t,n){var r=On(e);t[yr]=r===24?0:r});vi(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});vi(["h","hh"],function(e,t,n){t[yr]=On(e),kn(n).bigHour=!0});vi("hmm",function(e,t,n){var r=e.length-2;t[yr]=On(e.substr(0,r)),t[Us]=On(e.substr(r)),kn(n).bigHour=!0});vi("hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[yr]=On(e.substr(0,r)),t[Us]=On(e.substr(r,2)),t[ll]=On(e.substr(s)),kn(n).bigHour=!0});vi("Hmm",function(e,t,n){var r=e.length-2;t[yr]=On(e.substr(0,r)),t[Us]=On(e.substr(r))});vi("Hmmss",function(e,t,n){var r=e.length-4,s=e.length-2;t[yr]=On(e.substr(0,r)),t[Us]=On(e.substr(r,2)),t[ll]=On(e.substr(s))});function z$(e){return(e+"").toLowerCase().charAt(0)==="p"}var R$=/[ap]\.?m?\.?/i,F$=Ud("Hours",!0);function B$(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var wL={calendar:M7,longDateFormat:I7,invalidDate:O7,ordinal:z7,dayOfMonthOrdinalParse:R7,relativeTime:B7,months:J7,monthsShort:dL,week:h$,weekdays:y$,weekdaysMin:v$,weekdaysShort:vL,meridiemParse:R$},Wi={},Eg={},Sg;function N$(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function EL(e){return e&&e.toLowerCase().replace("_","-")}function V$(e){for(var t=0,n,r,s,u;t<e.length;){for(u=EL(e[t]).split("-"),n=u.length,r=EL(e[t+1]),r=r?r.split("-"):null;n>0;){if(s=Tv(u.slice(0,n).join("-")),s)return s;if(r&&r.length>=n&&N$(u,r)>=n-1)break;n--}t++}return Sg}function Tv(e){var t=null,n;if(Wi[e]===void 0&&typeof module!="undefined"&&module&&module.exports)try{t=Sg._abbr,n=require,n("./locale/"+e),yc(t)}catch{Wi[e]=null}return Wi[e]}function yc(e,t){var n;return e&&(Lo(t)?n=ul(e):n=qE(e,t),n?Sg=n:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Sg._abbr}function qE(e,t){if(t!==null){var n,r=wL;if(t.abbr=e,Wi[e]!=null)rL("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Wi[e]._config;else if(t.parentLocale!=null)if(Wi[t.parentLocale]!=null)r=Wi[t.parentLocale]._config;else if(n=Tv(t.parentLocale),n!=null)r=n._config;else return Eg[t.parentLocale]||(Eg[t.parentLocale]=[]),Eg[t.parentLocale].push({name:e,config:t}),null;return Wi[e]=new RE(zE(r,t)),Eg[e]&&Eg[e].forEach(function(s){qE(s.name,s.config)}),yc(e),Wi[e]}else return delete Wi[e],null}function j$(e,t){if(t!=null){var n,r,s=wL;Wi[e]!=null&&Wi[e].parentLocale!=null?Wi[e].set(zE(Wi[e]._config,t)):(r=Tv(e),r!=null&&(s=r._config),t=zE(s,t),r==null&&(t.abbr=e),n=new RE(t),n.parentLocale=Wi[e],Wi[e]=n),yc(e)}else Wi[e]!=null&&(Wi[e].parentLocale!=null?(Wi[e]=Wi[e].parentLocale,e===yc()&&yc(e)):Wi[e]!=null&&delete Wi[e]);return Wi[e]}function ul(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Sg;if(!Vs(e)){if(t=Tv(e),t)return t;e=[e]}return V$(e)}function U$(){return FE(Wi)}function YE(e){var t,n=e._a;return n&&kn(e).overflow===-2&&(t=n[al]<0||n[al]>11?al:n[wa]<1||n[wa]>Ev(n[io],n[al])?wa:n[yr]<0||n[yr]>24||n[yr]===24&&(n[Us]!==0||n[ll]!==0||n[Uu]!==0)?yr:n[Us]<0||n[Us]>59?Us:n[ll]<0||n[ll]>59?ll:n[Uu]<0||n[Uu]>999?Uu:-1,kn(e)._overflowDayOfYear&&(t<io||t>wa)&&(t=wa),kn(e)._overflowWeeks&&t===-1&&(t=Z7),kn(e)._overflowWeekday&&t===-1&&(t=X7),kn(e).overflow=t),e}var $$=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,G$=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,W$=/Z|[+-]\d\d(?::?\d\d)?/,Cv=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ZE=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],H$=/^\/?Date\((-?\d+)/i,q$=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Y$={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function SL(e){var t,n,r=e._i,s=$$.exec(r)||G$.exec(r),u,d,o,y;if(s){for(kn(e).iso=!0,t=0,n=Cv.length;t<n;t++)if(Cv[t][1].exec(s[1])){d=Cv[t][0],u=Cv[t][2]!==!1;break}if(d==null){e._isValid=!1;return}if(s[3]){for(t=0,n=ZE.length;t<n;t++)if(ZE[t][1].exec(s[3])){o=(s[2]||" ")+ZE[t][0];break}if(o==null){e._isValid=!1;return}}if(!u&&o!=null){e._isValid=!1;return}if(s[4])if(W$.exec(s[4]))y="Z";else{e._isValid=!1;return}e._f=d+(o||"")+(y||""),KE(e)}else e._isValid=!1}function Z$(e,t,n,r,s,u){var d=[X$(e),dL.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(s,10)];return u&&d.push(parseInt(u,10)),d}function X$(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function K$(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function J$(e,t,n){if(e){var r=vL.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(r!==s)return kn(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function Q$(e,t,n){if(e)return Y$[e];if(t)return 0;var r=parseInt(n,10),s=r%100,u=(r-s)/100;return u*60+s}function TL(e){var t=q$.exec(K$(e._i)),n;if(t){if(n=Z$(t[4],t[3],t[2],t[5],t[6],t[7]),!J$(t[1],n,e))return;e._a=n,e._tzm=Q$(t[8],t[9],t[10]),e._d=bg.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),kn(e).rfc2822=!0}else e._isValid=!1}function eG(e){var t=H$.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(SL(e),e._isValid===!1)delete e._isValid;else return;if(TL(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Rt.createFromInputFallback(e)}Rt.createFromInputFallback=ys("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Gd(e,t,n){return e!=null?e:t!=null?t:n}function tG(e){var t=new Date(Rt.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function XE(e){var t,n,r=[],s,u,d;if(!e._d){for(s=tG(e),e._w&&e._a[wa]==null&&e._a[al]==null&&nG(e),e._dayOfYear!=null&&(d=Gd(e._a[io],s[io]),(e._dayOfYear>xg(d)||e._dayOfYear===0)&&(kn(e)._overflowDayOfYear=!0),n=bg(d,0,e._dayOfYear),e._a[al]=n.getUTCMonth(),e._a[wa]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=s[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[yr]===24&&e._a[Us]===0&&e._a[ll]===0&&e._a[Uu]===0&&(e._nextDay=!0,e._a[yr]=0),e._d=(e._useUTC?bg:c$).apply(null,r),u=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[yr]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==u&&(kn(e).weekdayMismatch=!0)}}function nG(e){var t,n,r,s,u,d,o,y,w;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(u=1,d=4,n=Gd(t.GG,e._a[io],wg(Vi(),1,4).year),r=Gd(t.W,1),s=Gd(t.E,1),(s<1||s>7)&&(y=!0)):(u=e._locale._week.dow,d=e._locale._week.doy,w=wg(Vi(),u,d),n=Gd(t.gg,e._a[io],w.year),r=Gd(t.w,w.week),t.d!=null?(s=t.d,(s<0||s>6)&&(y=!0)):t.e!=null?(s=t.e+u,(t.e<0||t.e>6)&&(y=!0)):s=u),r<1||r>cl(n,u,d)?kn(e)._overflowWeeks=!0:y!=null?kn(e)._overflowWeekday=!0:(o=yL(n,r,s,u,d),e._a[io]=o.year,e._dayOfYear=o.dayOfYear)}Rt.ISO_8601=function(){};Rt.RFC_2822=function(){};function KE(e){if(e._f===Rt.ISO_8601){SL(e);return}if(e._f===Rt.RFC_2822){TL(e);return}e._a=[],kn(e).empty=!0;var t=""+e._i,n,r,s,u,d,o=t.length,y=0,w;for(s=oL(e._f,e._locale).match(BE)||[],n=0;n<s.length;n++)u=s[n],r=(t.match(H7(u,e))||[])[0],r&&(d=t.substr(0,t.indexOf(r)),d.length>0&&kn(e).unusedInput.push(d),t=t.slice(t.indexOf(r)+r.length),y+=r.length),jd[u]?(r?kn(e).empty=!1:kn(e).unusedTokens.push(u),Y7(u,r,e)):e._strict&&!r&&kn(e).unusedTokens.push(u);kn(e).charsLeftOver=o-y,t.length>0&&kn(e).unusedInput.push(t),e._a[yr]<=12&&kn(e).bigHour===!0&&e._a[yr]>0&&(kn(e).bigHour=void 0),kn(e).parsedDateParts=e._a.slice(0),kn(e).meridiem=e._meridiem,e._a[yr]=iG(e._locale,e._a[yr],e._meridiem),w=kn(e).era,w!==null&&(e._a[io]=e._locale.erasConvertYear(w,e._a[io])),XE(e),YE(e)}function iG(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function rG(e){var t,n,r,s,u,d,o=!1;if(e._f.length===0){kn(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<e._f.length;s++)u=0,d=!1,t=LE({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],KE(t),IE(t)&&(d=!0),u+=kn(t).charsLeftOver,u+=kn(t).unusedTokens.length*10,kn(t).score=u,o?u<r&&(r=u,n=t):(r==null||u<r||d)&&(r=u,n=t,d&&(o=!0));_c(e,n||t)}function oG(e){if(!e._d){var t=VE(e._i),n=t.day===void 0?t.date:t.day;e._a=tL([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),XE(e)}}function sG(e){var t=new gg(YE(CL(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function CL(e){var t=e._i,n=e._f;return e._locale=e._locale||ul(e._l),t===null||n===void 0&&t===""?dv({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),js(t)?new gg(YE(t)):(mg(t)?e._d=t:Vs(n)?rG(e):n?KE(e):aG(e),IE(e)||(e._d=null),e))}function aG(e){var t=e._i;Lo(t)?e._d=new Date(Rt.now()):mg(t)?e._d=new Date(t.valueOf()):typeof t=="string"?eG(e):Vs(t)?(e._a=tL(t.slice(0),function(n){return parseInt(n,10)}),XE(e)):ju(t)?oG(e):sl(t)?e._d=new Date(t):Rt.createFromInputFallback(e)}function ML(e,t,n,r,s){var u={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(ju(e)&&AE(e)||Vs(e)&&e.length===0)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=e,u._f=t,u._strict=r,sG(u)}function Vi(e,t,n,r){return ML(e,t,n,r,!1)}var lG=ys("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Vi.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:dv()}),cG=ys("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Vi.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:dv()});function kL(e,t){var n,r;if(t.length===1&&Vs(t[0])&&(t=t[0]),!t.length)return Vi();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function uG(){var e=[].slice.call(arguments,0);return kL("isBefore",e)}function hG(){var e=[].slice.call(arguments,0);return kL("isAfter",e)}var dG=function(){return Date.now?Date.now():+new Date},Tg=["year","quarter","month","week","day","hour","minute","second","millisecond"];function fG(e){var t,n=!1,r;for(t in e)if(Qn(e,t)&&!(or.call(Tg,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<Tg.length;++r)if(e[Tg[r]]){if(n)return!1;parseFloat(e[Tg[r]])!==On(e[Tg[r]])&&(n=!0)}return!0}function pG(){return this._isValid}function mG(){return $s(NaN)}function Mv(e){var t=VE(e),n=t.year||0,r=t.quarter||0,s=t.month||0,u=t.week||t.isoWeek||0,d=t.day||0,o=t.hour||0,y=t.minute||0,w=t.second||0,M=t.millisecond||0;this._isValid=fG(t),this._milliseconds=+M+w*1e3+y*6e4+o*1e3*60*60,this._days=+d+u*7,this._months=+s+r*3+n*12,this._data={},this._locale=ul(),this._bubble()}function kv(e){return e instanceof Mv}function JE(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function gG(e,t,n){var r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),u=0,d;for(d=0;d<r;d++)(n&&e[d]!==t[d]||!n&&On(e[d])!==On(t[d]))&&u++;return u+s}function AL(e,t){on(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+ba(~~(n/60),2)+t+ba(~~n%60,2)})}AL("Z",":");AL("ZZ","");Ht("Z",bv);Ht("ZZ",bv);vi(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=QE(bv,e)});var _G=/([\+\-]|\d\d)/gi;function QE(e,t){var n=(t||"").match(e),r,s,u;return n===null?null:(r=n[n.length-1]||[],s=(r+"").match(_G)||["-",0,0],u=+(s[1]*60)+On(s[2]),u===0?0:s[0]==="+"?u:-u)}function eS(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(js(e)||mg(e)?e.valueOf():Vi(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Rt.updateOffset(n,!1),n):Vi(e).local()}function tS(e){return-Math.round(e._d.getTimezoneOffset())}Rt.updateOffset=function(){};function yG(e,t,n){var r=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=QE(bv,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(s=tS(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),r!==e&&(!t||this._changeInProgress?OL(this,$s(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Rt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:tS(this)}function vG(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function xG(e){return this.utcOffset(0,e)}function bG(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(tS(this),"m")),this}function wG(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=QE(G7,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function EG(e){return this.isValid()?(e=e?Vi(e).utcOffset():0,(this.utcOffset()-e)%60==0):!1}function SG(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function TG(){if(!Lo(this._isDSTShifted))return this._isDSTShifted;var e={},t;return LE(e,this),e=CL(e),e._a?(t=e._isUTC?va(e._a):Vi(e._a),this._isDSTShifted=this.isValid()&&gG(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function CG(){return this.isValid()?!this._isUTC:!1}function MG(){return this.isValid()?this._isUTC:!1}function DL(){return this.isValid()?this._isUTC&&this._offset===0:!1}var kG=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,AG=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function $s(e,t){var n=e,r=null,s,u,d;return kv(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:sl(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=kG.exec(e))?(s=r[1]==="-"?-1:1,n={y:0,d:On(r[wa])*s,h:On(r[yr])*s,m:On(r[Us])*s,s:On(r[ll])*s,ms:On(JE(r[Uu]*1e3))*s}):(r=AG.exec(e))?(s=r[1]==="-"?-1:1,n={y:$u(r[2],s),M:$u(r[3],s),w:$u(r[4],s),d:$u(r[5],s),h:$u(r[6],s),m:$u(r[7],s),s:$u(r[8],s)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(d=DG(Vi(n.from),Vi(n.to)),n={},n.ms=d.milliseconds,n.M=d.months),u=new Mv(n),kv(e)&&Qn(e,"_locale")&&(u._locale=e._locale),kv(e)&&Qn(e,"_isValid")&&(u._isValid=e._isValid),u}$s.fn=Mv.prototype;$s.invalid=mG;function $u(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function IL(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function DG(e,t){var n;return e.isValid()&&t.isValid()?(t=eS(t,e),e.isBefore(t)?n=IL(e,t):(n=IL(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function PL(e,t){return function(n,r){var s,u;return r!==null&&!isNaN(+r)&&(rL(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),u=n,n=r,r=u),s=$s(n,r),OL(this,s,e),this}}function OL(e,t,n,r){var s=t._milliseconds,u=JE(t._days),d=JE(t._months);!e.isValid()||(r=r==null?!0:r,d&&pL(e,gv(e,"Month")+d*n),u&&aL(e,"Date",gv(e,"Date")+u*n),s&&e._d.setTime(e._d.valueOf()+s*n),r&&Rt.updateOffset(e,u||d))}var IG=PL(1,"add"),PG=PL(-1,"subtract");function LL(e){return typeof e=="string"||e instanceof String}function OG(e){return js(e)||mg(e)||LL(e)||sl(e)||zG(e)||LG(e)||e===null||e===void 0}function LG(e){var t=ju(e)&&!AE(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,u;for(s=0;s<r.length;s+=1)u=r[s],n=n||Qn(e,u);return t&&n}function zG(e){var t=Vs(e),n=!1;return t&&(n=e.filter(function(r){return!sl(r)&&LL(e)}).length===0),t&&n}function RG(e){var t=ju(e)&&!AE(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,u;for(s=0;s<r.length;s+=1)u=r[s],n=n||Qn(e,u);return t&&n}function FG(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function BG(e,t){arguments.length===1&&(arguments[0]?OG(arguments[0])?(e=arguments[0],t=void 0):RG(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Vi(),r=eS(n,this).startOf("day"),s=Rt.calendarFormat(this,r)||"sameElse",u=t&&(xa(t[s])?t[s].call(this,n):t[s]);return this.format(u||this.localeData().calendar(s,this,Vi(n)))}function NG(){return new gg(this)}function VG(e,t){var n=js(e)?e:Vi(e);return this.isValid()&&n.isValid()?(t=vs(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function jG(e,t){var n=js(e)?e:Vi(e);return this.isValid()&&n.isValid()?(t=vs(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function UG(e,t,n,r){var s=js(e)?e:Vi(e),u=js(t)?t:Vi(t);return this.isValid()&&s.isValid()&&u.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(s,n):!this.isBefore(s,n))&&(r[1]===")"?this.isBefore(u,n):!this.isAfter(u,n))):!1}function $G(e,t){var n=js(e)?e:Vi(e),r;return this.isValid()&&n.isValid()?(t=vs(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function GG(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function WG(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function HG(e,t,n){var r,s,u;if(!this.isValid())return NaN;if(r=eS(e,this),!r.isValid())return NaN;switch(s=(r.utcOffset()-this.utcOffset())*6e4,t=vs(t),t){case"year":u=Av(this,r)/12;break;case"month":u=Av(this,r);break;case"quarter":u=Av(this,r)/3;break;case"second":u=(this-r)/1e3;break;case"minute":u=(this-r)/6e4;break;case"hour":u=(this-r)/36e5;break;case"day":u=(this-r-s)/864e5;break;case"week":u=(this-r-s)/6048e5;break;default:u=this-r}return n?u:xs(u)}function Av(e,t){if(e.date()<t.date())return-Av(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),s,u;return t-r<0?(s=e.clone().add(n-1,"months"),u=(t-r)/(r-s)):(s=e.clone().add(n+1,"months"),u=(t-r)/(s-r)),-(n+u)||0}Rt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Rt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function qG(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function YG(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?pv(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):xa(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",pv(n,"Z")):pv(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ZG(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,s,u;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",u=t+'[")]',this.format(n+r+s+u)}function XG(e){e||(e=this.isUtc()?Rt.defaultFormatUtc:Rt.defaultFormat);var t=pv(this,e);return this.localeData().postformat(t)}function KG(e,t){return this.isValid()&&(js(e)&&e.isValid()||Vi(e).isValid())?$s({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function JG(e){return this.from(Vi(),e)}function QG(e,t){return this.isValid()&&(js(e)&&e.isValid()||Vi(e).isValid())?$s({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function eW(e){return this.to(Vi(),e)}function zL(e){var t;return e===void 0?this._locale._abbr:(t=ul(e),t!=null&&(this._locale=t),this)}var RL=ys("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function FL(){return this._locale}var Dv=1e3,Wd=60*Dv,Iv=60*Wd,BL=(365*400+97)*24*Iv;function Hd(e,t){return(e%t+t)%t}function NL(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-BL:new Date(e,t,n).valueOf()}function VL(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-BL:Date.UTC(e,t,n)}function tW(e){var t,n;if(e=vs(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?VL:NL,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Hd(t+(this._isUTC?0:this.utcOffset()*Wd),Iv);break;case"minute":t=this._d.valueOf(),t-=Hd(t,Wd);break;case"second":t=this._d.valueOf(),t-=Hd(t,Dv);break}return this._d.setTime(t),Rt.updateOffset(this,!0),this}function nW(e){var t,n;if(e=vs(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?VL:NL,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Iv-Hd(t+(this._isUTC?0:this.utcOffset()*Wd),Iv)-1;break;case"minute":t=this._d.valueOf(),t+=Wd-Hd(t,Wd)-1;break;case"second":t=this._d.valueOf(),t+=Dv-Hd(t,Dv)-1;break}return this._d.setTime(t),Rt.updateOffset(this,!0),this}function iW(){return this._d.valueOf()-(this._offset||0)*6e4}function rW(){return Math.floor(this.valueOf()/1e3)}function oW(){return new Date(this.valueOf())}function sW(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function aW(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function lW(){return this.isValid()?this.toISOString():null}function cW(){return IE(this)}function uW(){return _c({},kn(this))}function hW(){return kn(this).overflow}function dW(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}on("N",0,0,"eraAbbr");on("NN",0,0,"eraAbbr");on("NNN",0,0,"eraAbbr");on("NNNN",0,0,"eraName");on("NNNNN",0,0,"eraNarrow");on("y",["y",1],"yo","eraYear");on("y",["yy",2],0,"eraYear");on("y",["yyy",3],0,"eraYear");on("y",["yyyy",4],0,"eraYear");Ht("N",nS);Ht("NN",nS);Ht("NNN",nS);Ht("NNNN",EW);Ht("NNNNN",SW);vi(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var s=n._locale.erasParse(e,r,n._strict);s?kn(n).era=s:kn(n).invalidEra=e});Ht("y",$d);Ht("yy",$d);Ht("yyy",$d);Ht("yyyy",$d);Ht("yo",TW);vi(["y","yy","yyy","yyyy"],io);vi(["yo"],function(e,t,n,r){var s;n._locale._eraYearOrdinalRegex&&(s=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[io]=n._locale.eraYearOrdinalParse(e,s):t[io]=parseInt(e,10)});function fW(e,t){var n,r,s,u=this._eras||ul("en")._eras;for(n=0,r=u.length;n<r;++n){switch(typeof u[n].since){case"string":s=Rt(u[n].since).startOf("day"),u[n].since=s.valueOf();break}switch(typeof u[n].until){case"undefined":u[n].until=1/0;break;case"string":s=Rt(u[n].until).startOf("day").valueOf(),u[n].until=s.valueOf();break}}return u}function pW(e,t,n){var r,s,u=this.eras(),d,o,y;for(e=e.toUpperCase(),r=0,s=u.length;r<s;++r)if(d=u[r].name.toUpperCase(),o=u[r].abbr.toUpperCase(),y=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(o===e)return u[r];break;case"NNNN":if(d===e)return u[r];break;case"NNNNN":if(y===e)return u[r];break}else if([d,o,y].indexOf(e)>=0)return u[r]}function mW(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Rt(e.since).year():Rt(e.since).year()+(t-e.offset)*n}function gW(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function _W(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function yW(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function vW(){var e,t,n,r,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(n=s[e].since<=s[e].until?1:-1,r=this.clone().startOf("day").valueOf(),s[e].since<=r&&r<=s[e].until||s[e].until<=r&&r<=s[e].since)return(this.year()-Rt(s[e].since).year())*n+s[e].offset;return this.year()}function xW(e){return Qn(this,"_erasNameRegex")||iS.call(this),e?this._erasNameRegex:this._erasRegex}function bW(e){return Qn(this,"_erasAbbrRegex")||iS.call(this),e?this._erasAbbrRegex:this._erasRegex}function wW(e){return Qn(this,"_erasNarrowRegex")||iS.call(this),e?this._erasNarrowRegex:this._erasRegex}function nS(e,t){return t.erasAbbrRegex(e)}function EW(e,t){return t.erasNameRegex(e)}function SW(e,t){return t.erasNarrowRegex(e)}function TW(e,t){return t._eraYearOrdinalRegex||$d}function iS(){var e=[],t=[],n=[],r=[],s,u,d=this.eras();for(s=0,u=d.length;s<u;++s)t.push(Ko(d[s].name)),e.push(Ko(d[s].abbr)),n.push(Ko(d[s].narrow)),r.push(Ko(d[s].name)),r.push(Ko(d[s].abbr)),r.push(Ko(d[s].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}on(0,["gg",2],0,function(){return this.weekYear()%100});on(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Pv(e,t){on(0,[e,e.length],0,t)}Pv("gggg","weekYear");Pv("ggggg","weekYear");Pv("GGGG","isoWeekYear");Pv("GGGGG","isoWeekYear");to("weekYear","gg");to("isoWeekYear","GG");no("weekYear",1);no("isoWeekYear",1);Ht("G",xv);Ht("g",xv);Ht("GG",Ni,Xo);Ht("gg",Ni,Xo);Ht("GGGG",UE,jE);Ht("gggg",UE,jE);Ht("GGGGG",vv,_v);Ht("ggggg",vv,_v);vg(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=On(e)});vg(["gg","GG"],function(e,t,n,r){t[r]=Rt.parseTwoDigitYear(e)});function CW(e){return jL.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function MW(e){return jL.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function kW(){return cl(this.year(),1,4)}function AW(){return cl(this.isoWeekYear(),1,4)}function DW(){var e=this.localeData()._week;return cl(this.year(),e.dow,e.doy)}function IW(){var e=this.localeData()._week;return cl(this.weekYear(),e.dow,e.doy)}function jL(e,t,n,r,s){var u;return e==null?wg(this,r,s).year:(u=cl(e,r,s),t>u&&(t=u),PW.call(this,e,t,n,r,s))}function PW(e,t,n,r,s){var u=yL(e,t,n,r,s),d=bg(u.year,0,u.dayOfYear);return this.year(d.getUTCFullYear()),this.month(d.getUTCMonth()),this.date(d.getUTCDate()),this}on("Q",0,"Qo","quarter");to("quarter","Q");no("quarter",7);Ht("Q",lL);vi("Q",function(e,t){t[al]=(On(e)-1)*3});function OW(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}on("D",["DD",2],"Do","date");to("date","D");no("date",9);Ht("D",Ni);Ht("DD",Ni,Xo);Ht("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});vi(["D","DD"],wa);vi("Do",function(e,t){t[wa]=On(e.match(Ni)[0])});var UL=Ud("Date",!0);on("DDD",["DDDD",3],"DDDo","dayOfYear");to("dayOfYear","DDD");no("dayOfYear",4);Ht("DDD",yv);Ht("DDDD",cL);vi(["DDD","DDDD"],function(e,t,n){n._dayOfYear=On(e)});function LW(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}on("m",["mm",2],0,"minute");to("minute","m");no("minute",14);Ht("m",Ni);Ht("mm",Ni,Xo);vi(["m","mm"],Us);var zW=Ud("Minutes",!1);on("s",["ss",2],0,"second");to("second","s");no("second",15);Ht("s",Ni);Ht("ss",Ni,Xo);vi(["s","ss"],ll);var RW=Ud("Seconds",!1);on("S",0,0,function(){return~~(this.millisecond()/100)});on(0,["SS",2],0,function(){return~~(this.millisecond()/10)});on(0,["SSS",3],0,"millisecond");on(0,["SSSS",4],0,function(){return this.millisecond()*10});on(0,["SSSSS",5],0,function(){return this.millisecond()*100});on(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});on(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});on(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});on(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});to("millisecond","ms");no("millisecond",16);Ht("S",yv,lL);Ht("SS",yv,Xo);Ht("SSS",yv,cL);var vc,$L;for(vc="SSSS";vc.length<=9;vc+="S")Ht(vc,$d);function FW(e,t){t[Uu]=On(("0."+e)*1e3)}for(vc="S";vc.length<=9;vc+="S")vi(vc,FW);$L=Ud("Milliseconds",!1);on("z",0,0,"zoneAbbr");on("zz",0,0,"zoneName");function BW(){return this._isUTC?"UTC":""}function NW(){return this._isUTC?"Coordinated Universal Time":""}var St=gg.prototype;St.add=IG;St.calendar=BG;St.clone=NG;St.diff=HG;St.endOf=nW;St.format=XG;St.from=KG;St.fromNow=JG;St.to=QG;St.toNow=eW;St.get=U7;St.invalidAt=hW;St.isAfter=VG;St.isBefore=jG;St.isBetween=UG;St.isSame=$G;St.isSameOrAfter=GG;St.isSameOrBefore=WG;St.isValid=cW;St.lang=RL;St.locale=zL;St.localeData=FL;St.max=cG;St.min=lG;St.parsingFlags=uW;St.set=$7;St.startOf=tW;St.subtract=PG;St.toArray=sW;St.toObject=aW;St.toDate=oW;St.toISOString=YG;St.inspect=ZG;typeof Symbol!="undefined"&&Symbol.for!=null&&(St[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});St.toJSON=lW;St.toString=qG;St.unix=rW;St.valueOf=iW;St.creationData=dW;St.eraName=gW;St.eraNarrow=_W;St.eraAbbr=yW;St.eraYear=vW;St.year=_L;St.isLeapYear=l$;St.weekYear=CW;St.isoWeekYear=MW;St.quarter=St.quarters=OW;St.month=mL;St.daysInMonth=o$;St.week=St.weeks=p$;St.isoWeek=St.isoWeeks=m$;St.weeksInYear=DW;St.weeksInWeekYear=IW;St.isoWeeksInYear=kW;St.isoWeeksInISOWeekYear=AW;St.date=UL;St.day=St.days=k$;St.weekday=A$;St.isoWeekday=D$;St.dayOfYear=LW;St.hour=St.hours=F$;St.minute=St.minutes=zW;St.second=St.seconds=RW;St.millisecond=St.milliseconds=$L;St.utcOffset=yG;St.utc=xG;St.local=bG;St.parseZone=wG;St.hasAlignedHourOffset=EG;St.isDST=SG;St.isLocal=CG;St.isUtcOffset=MG;St.isUtc=DL;St.isUTC=DL;St.zoneAbbr=BW;St.zoneName=NW;St.dates=ys("dates accessor is deprecated. Use date instead.",UL);St.months=ys("months accessor is deprecated. Use month instead",mL);St.years=ys("years accessor is deprecated. Use year instead",_L);St.zone=ys("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vG);St.isDSTShifted=ys("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",TG);function VW(e){return Vi(e*1e3)}function jW(){return Vi.apply(null,arguments).parseZone()}function GL(e){return e}var ei=RE.prototype;ei.calendar=k7;ei.longDateFormat=P7;ei.invalidDate=L7;ei.ordinal=F7;ei.preparse=GL;ei.postformat=GL;ei.relativeTime=N7;ei.pastFuture=V7;ei.set=C7;ei.eras=fW;ei.erasParse=pW;ei.erasConvertYear=mW;ei.erasAbbrRegex=bW;ei.erasNameRegex=xW;ei.erasNarrowRegex=wW;ei.months=t$;ei.monthsShort=n$;ei.monthsParse=r$;ei.monthsRegex=a$;ei.monthsShortRegex=s$;ei.week=u$;ei.firstDayOfYear=f$;ei.firstDayOfWeek=d$;ei.weekdays=E$;ei.weekdaysMin=T$;ei.weekdaysShort=S$;ei.weekdaysParse=M$;ei.weekdaysRegex=I$;ei.weekdaysShortRegex=P$;ei.weekdaysMinRegex=O$;ei.isPM=z$;ei.meridiem=B$;function Ov(e,t,n,r){var s=ul(),u=va().set(r,t);return s[n](u,e)}function WL(e,t,n){if(sl(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ov(e,t,n,"month");var r,s=[];for(r=0;r<12;r++)s[r]=Ov(e,r,n,"month");return s}function rS(e,t,n,r){typeof e=="boolean"?(sl(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,sl(t)&&(n=t,t=void 0),t=t||"");var s=ul(),u=e?s._week.dow:0,d,o=[];if(n!=null)return Ov(t,(n+u)%7,r,"day");for(d=0;d<7;d++)o[d]=Ov(t,(d+u)%7,r,"day");return o}function UW(e,t){return WL(e,t,"months")}function $W(e,t){return WL(e,t,"monthsShort")}function GW(e,t,n){return rS(e,t,n,"weekdays")}function WW(e,t,n){return rS(e,t,n,"weekdaysShort")}function HW(e,t,n){return rS(e,t,n,"weekdaysMin")}yc("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=On(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Rt.lang=ys("moment.lang is deprecated. Use moment.locale instead.",yc);Rt.langData=ys("moment.langData is deprecated. Use moment.localeData instead.",ul);var hl=Math.abs;function qW(){var e=this._data;return this._milliseconds=hl(this._milliseconds),this._days=hl(this._days),this._months=hl(this._months),e.milliseconds=hl(e.milliseconds),e.seconds=hl(e.seconds),e.minutes=hl(e.minutes),e.hours=hl(e.hours),e.months=hl(e.months),e.years=hl(e.years),this}function HL(e,t,n,r){var s=$s(t,n);return e._milliseconds+=r*s._milliseconds,e._days+=r*s._days,e._months+=r*s._months,e._bubble()}function YW(e,t){return HL(this,e,t,1)}function ZW(e,t){return HL(this,e,t,-1)}function qL(e){return e<0?Math.floor(e):Math.ceil(e)}function XW(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,s,u,d,o,y;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=qL(oS(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,s=xs(e/1e3),r.seconds=s%60,u=xs(s/60),r.minutes=u%60,d=xs(u/60),r.hours=d%24,t+=xs(d/24),y=xs(YL(t)),n+=y,t-=qL(oS(y)),o=xs(n/12),n%=12,r.days=t,r.months=n,r.years=o,this}function YL(e){return e*4800/146097}function oS(e){return e*146097/4800}function KW(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=vs(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+YL(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(oS(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function JW(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+On(this._months/12)*31536e6:NaN}function dl(e){return function(){return this.as(e)}}var QW=dl("ms"),eH=dl("s"),tH=dl("m"),nH=dl("h"),iH=dl("d"),rH=dl("w"),oH=dl("M"),sH=dl("Q"),aH=dl("y");function lH(){return $s(this)}function cH(e){return e=vs(e),this.isValid()?this[e+"s"]():NaN}function Gu(e){return function(){return this.isValid()?this._data[e]:NaN}}var uH=Gu("milliseconds"),hH=Gu("seconds"),dH=Gu("minutes"),fH=Gu("hours"),pH=Gu("days"),mH=Gu("months"),gH=Gu("years");function _H(){return xs(this.days()/7)}var fl=Math.round,qd={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function yH(e,t,n,r,s){return s.relativeTime(t||1,!!n,e,r)}function vH(e,t,n,r){var s=$s(e).abs(),u=fl(s.as("s")),d=fl(s.as("m")),o=fl(s.as("h")),y=fl(s.as("d")),w=fl(s.as("M")),M=fl(s.as("w")),k=fl(s.as("y")),O=u<=n.ss&&["s",u]||u<n.s&&["ss",u]||d<=1&&["m"]||d<n.m&&["mm",d]||o<=1&&["h"]||o<n.h&&["hh",o]||y<=1&&["d"]||y<n.d&&["dd",y];return n.w!=null&&(O=O||M<=1&&["w"]||M<n.w&&["ww",M]),O=O||w<=1&&["M"]||w<n.M&&["MM",w]||k<=1&&["y"]||["yy",k],O[2]=t,O[3]=+e>0,O[4]=r,yH.apply(null,O)}function xH(e){return e===void 0?fl:typeof e=="function"?(fl=e,!0):!1}function bH(e,t){return qd[e]===void 0?!1:t===void 0?qd[e]:(qd[e]=t,e==="s"&&(qd.ss=t-1),!0)}function wH(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=qd,s,u;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},qd,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),s=this.localeData(),u=vH(this,!n,r,s),n&&(u=s.pastFuture(+this,u)),s.postformat(u)}var sS=Math.abs;function Yd(e){return(e>0)-(e<0)||+e}function Lv(){if(!this.isValid())return this.localeData().invalidDate();var e=sS(this._milliseconds)/1e3,t=sS(this._days),n=sS(this._months),r,s,u,d,o=this.asSeconds(),y,w,M,k;return o?(r=xs(e/60),s=xs(r/60),e%=60,r%=60,u=xs(n/12),n%=12,d=e?e.toFixed(3).replace(/\.?0+$/,""):"",y=o<0?"-":"",w=Yd(this._months)!==Yd(o)?"-":"",M=Yd(this._days)!==Yd(o)?"-":"",k=Yd(this._milliseconds)!==Yd(o)?"-":"",y+"P"+(u?w+u+"Y":"")+(n?w+n+"M":"")+(t?M+t+"D":"")+(s||r||e?"T":"")+(s?k+s+"H":"")+(r?k+r+"M":"")+(e?k+d+"S":"")):"P0D"}var Gn=Mv.prototype;Gn.isValid=pG;Gn.abs=qW;Gn.add=YW;Gn.subtract=ZW;Gn.as=KW;Gn.asMilliseconds=QW;Gn.asSeconds=eH;Gn.asMinutes=tH;Gn.asHours=nH;Gn.asDays=iH;Gn.asWeeks=rH;Gn.asMonths=oH;Gn.asQuarters=sH;Gn.asYears=aH;Gn.valueOf=JW;Gn._bubble=XW;Gn.clone=lH;Gn.get=cH;Gn.milliseconds=uH;Gn.seconds=hH;Gn.minutes=dH;Gn.hours=fH;Gn.days=pH;Gn.weeks=_H;Gn.months=mH;Gn.years=gH;Gn.humanize=wH;Gn.toISOString=Lv;Gn.toString=Lv;Gn.toJSON=Lv;Gn.locale=zL;Gn.localeData=FL;Gn.toIsoString=ys("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Lv);Gn.lang=RL;on("X",0,0,"unix");on("x",0,0,"valueOf");Ht("x",xv);Ht("X",W7);vi("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});vi("x",function(e,t,n){n._d=new Date(On(e))});//! moment.js
Rt.version="2.29.1";S7(Vi);Rt.fn=St;Rt.min=uG;Rt.max=hG;Rt.now=dG;Rt.utc=va;Rt.unix=VW;Rt.months=UW;Rt.isDate=mg;Rt.locale=yc;Rt.invalid=dv;Rt.duration=$s;Rt.isMoment=js;Rt.weekdays=GW;Rt.parseZone=jW;Rt.localeData=ul;Rt.isDuration=kv;Rt.monthsShort=$W;Rt.weekdaysMin=HW;Rt.defineLocale=qE;Rt.updateLocale=j$;Rt.locales=U$;Rt.weekdaysShort=WW;Rt.normalizeUnits=vs;Rt.relativeTimeRounding=xH;Rt.relativeTimeThreshold=bH;Rt.calendarFormat=FG;Rt.prototype=St;Rt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};/*!
  * chartjs-adapter-moment v1.0.0
  * https://www.chartjs.org
  * (c) 2021 chartjs-adapter-moment Contributors
  * Released under the MIT license
  */const EH={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};wP._date.override(typeof Rt=="function"?{_id:"moment",formats:function(){return EH},parse:function(e,t){return typeof e=="string"&&typeof t=="string"?e=Rt(e,t):e instanceof Rt||(e=Rt(e)),e.isValid()?e.valueOf():null},format:function(e,t){return Rt(e).format(t)},add:function(e,t,n){return Rt(e).add(t,n).valueOf()},diff:function(e,t,n){return Rt(e).diff(Rt(t),n)},startOf:function(e,t,n){return e=Rt(e),t==="isoWeek"?(n=Math.trunc(Math.min(Math.max(0,n),6)),e.isoWeekday(n).startOf("day").valueOf()):e.startOf(t).valueOf()},endOf:function(e,t){return Rt(e).endOf(t).valueOf()}}:{});var Cg=e=>e.type==="checkbox",Zd=e=>e instanceof Date,ro=e=>e==null;const ZL=e=>typeof e=="object";var oo=e=>!ro(e)&&!Array.isArray(e)&&ZL(e)&&!Zd(e),SH=e=>oo(e)&&e.target?Cg(e.target)?e.target.checked:e.target.value:e,TH=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,CH=(e,t)=>e.has(TH(t)),Mg=e=>Array.isArray(e)?e.filter(Boolean):[],vr=e=>e===void 0,en=(e,t,n)=>{if(!t||!oo(e))return n;const r=Mg(t.split(/[,[\].]+?/)).reduce((s,u)=>ro(s)?s:s[u],e);return vr(r)||r===e?vr(e[t])?n:e[t]:r};const XL={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Gs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Zr.createContext(null);var MH=(e,t,n,r=!0)=>{const s={};for(const u in e)Object.defineProperty(s,u,{get:()=>{const d=u;return t[d]!==Gs.all&&(t[d]=!r||Gs.all),n&&(n[d]=!0),e[d]}});return s},bs=e=>oo(e)&&!Object.keys(e).length,kH=(e,t,n)=>{const u=e,{name:r}=u,s=jp(u,["name"]);return bs(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(d=>t[d]===(!n||Gs.all))},aS=e=>Array.isArray(e)?e:[e];function AH(e){const t=Zr.useRef(e);t.current=e,Zr.useEffect(()=>{const n=s=>{s&&s.unsubscribe()},r=!e.disabled&&t.current.subject.subscribe({next:t.current.callback});return()=>n(r)},[e.disabled])}var Ea=e=>typeof e=="string",DH=(e,t,n,r)=>{const s=Array.isArray(e);return Ea(e)?(r&&t.watch.add(e),en(n,e)):s?e.map(u=>(r&&t.watch.add(u),en(n,u))):(r&&(t.watchAll=!0),n)},zv=e=>typeof e=="function",KL=e=>{for(const t in e)if(zv(e[t]))return!0;return!1},IH=(e,t,n,r,s)=>t?Ai(jt({},n[e]),{types:Ai(jt({},n[e]&&n[e].types?n[e].types:{}),{[r]:s||!0})}):{},lS=e=>/^\w*$/.test(e),JL=e=>Mg(e.replace(/["|']|\]/g,"").split(/\.|\[/));function Hi(e,t,n){let r=-1;const s=lS(t)?[t]:JL(t),u=s.length,d=u-1;for(;++r<u;){const o=s[r];let y=n;if(r!==d){const w=e[o];y=oo(w)||Array.isArray(w)?w:isNaN(+s[r+1])?{}:[]}e[o]=y,e=e[o]}return e}const cS=(e,t,n)=>{for(const s of n||Object.keys(e)){const u=en(e,s);if(u){const r=u,{_f:d}=r,o=jp(r,["_f"]);if(d&&t(d.name)){if(d.ref.focus&&vr(d.ref.focus()))break;if(d.refs){d.refs[0].focus();break}}else oo(o)&&cS(o,t)}}};var QL=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length)))),PH=(e,t,n)=>{const r=Mg(en(e,n));return Hi(r,"root",t[n]),Hi(e,n,r),e},Rv=e=>typeof e=="boolean",uS=e=>e.type==="file",Fv=e=>Ea(e)||Zr.isValidElement(e),hS=e=>e.type==="radio",Bv=e=>e instanceof RegExp;const e3={value:!1,isValid:!1},t3={value:!0,isValid:!0};var n3=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!vr(e[0].attributes.value)?vr(e[0].value)||e[0].value===""?t3:{value:e[0].value,isValid:!0}:t3:e3}return e3};const i3={isValid:!1,value:null};var r3=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,i3):i3;function o3(e,t,n="validate"){if(Fv(e)||Array.isArray(e)&&e.every(Fv)||Rv(e)&&!e)return{type:n,message:Fv(e)?e:"",ref:t}}var Xd=e=>oo(e)&&!Bv(e)?e:{value:e,message:""},s3=async(e,t,n,r,s)=>{const{ref:u,refs:d,required:o,maxLength:y,minLength:w,min:M,max:k,pattern:O,validate:$,name:j,valueAsNumber:G,mount:B,disabled:U}=e._f;if(!B||U)return{};const Z=d?d[0]:u,re=mt=>{r&&Z.reportValidity&&(Z.setCustomValidity(Rv(mt)?"":mt||" "),Z.reportValidity())},ie={},de=hS(u),xe=Cg(u),Ce=de||xe,je=(G||uS(u))&&!u.value||t===""||Array.isArray(t)&&!t.length,ze=IH.bind(null,j,n,ie),pt=(mt,ot,kt,Ne=pl.maxLength,Ve=pl.minLength)=>{const tt=mt?ot:kt;ie[j]=jt({type:mt?Ne:Ve,message:tt,ref:u},ze(mt?Ne:Ve,tt))};if(s?!Array.isArray(t)||!t.length:o&&(!Ce&&(je||ro(t))||Rv(t)&&!t||xe&&!n3(d).isValid||de&&!r3(d).isValid)){const{value:mt,message:ot}=Fv(o)?{value:!!o,message:o}:Xd(o);if(mt&&(ie[j]=jt({type:pl.required,message:ot,ref:Z},ze(pl.required,ot)),!n))return re(ot),ie}if(!je&&(!ro(M)||!ro(k))){let mt,ot;const kt=Xd(k),Ne=Xd(M);if(!ro(t)&&!isNaN(t)){const Ve=u.valueAsNumber||+t;ro(kt.value)||(mt=Ve>kt.value),ro(Ne.value)||(ot=Ve<Ne.value)}else{const Ve=u.valueAsDate||new Date(t);Ea(kt.value)&&(mt=Ve>new Date(kt.value)),Ea(Ne.value)&&(ot=Ve<new Date(Ne.value))}if((mt||ot)&&(pt(!!mt,kt.message,Ne.message,pl.max,pl.min),!n))return re(ie[j].message),ie}if((y||w)&&!je&&(Ea(t)||s&&Array.isArray(t))){const mt=Xd(y),ot=Xd(w),kt=!ro(mt.value)&&t.length>mt.value,Ne=!ro(ot.value)&&t.length<ot.value;if((kt||Ne)&&(pt(kt,mt.message,ot.message),!n))return re(ie[j].message),ie}if(O&&!je&&Ea(t)){const{value:mt,message:ot}=Xd(O);if(Bv(mt)&&!t.match(mt)&&(ie[j]=jt({type:pl.pattern,message:ot,ref:u},ze(pl.pattern,ot)),!n))return re(ot),ie}if($){if(zv($)){const mt=await $(t),ot=o3(mt,Z);if(ot&&(ie[j]=jt(jt({},ot),ze(pl.validate,ot.message)),!n))return re(ot.message),ie}else if(oo($)){let mt={};for(const ot in $){if(!bs(mt)&&!n)break;const kt=o3(await $[ot](t),Z,ot);kt&&(mt=jt(jt({},kt),ze(ot,kt.message)),re(kt.message),n&&(ie[j]=mt))}if(!bs(mt)&&(ie[j]=jt({ref:Z},mt),!n))return ie}}return re(!0),ie},dS=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Wu(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(dS&&(e instanceof Blob||e instanceof FileList))&&(n||oo(e))){t=n?[]:{};for(const r in e){if(zv(e[r])){t=e;break}t[r]=Wu(e[r])}}else return e;return t}var a3=e=>({isOnSubmit:!e||e===Gs.onSubmit,isOnBlur:e===Gs.onBlur,isOnChange:e===Gs.onChange,isOnAll:e===Gs.all,isOnTouch:e===Gs.onTouched});function OH(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=vr(e)?r++:e[t[r++]];return e}function LH(e){for(const t in e)if(!vr(e[t]))return!1;return!0}function vo(e,t){const n=lS(t)?[t]:JL(t),r=n.length==1?e:OH(e,n),s=n[n.length-1];let u;r&&delete r[s];for(let d=0;d<n.slice(0,-1).length;d++){let o=-1,y;const w=n.slice(0,-(d+1)),M=w.length-1;for(d>0&&(u=e);++o<w.length;){const k=w[o];y=y?y[k]:e[k],M===o&&(oo(y)&&bs(y)||Array.isArray(y)&&LH(y))&&(u?delete u[k]:delete e[k]),u=y}}return e}function fS(){let e=[];return{get observers(){return e},next:s=>{for(const u of e)u.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(u=>u!==s)}}),unsubscribe:()=>{e=[]}}}var Nv=e=>ro(e)||!ZL(e);function Kd(e,t){if(Nv(e)||Nv(t))return e===t;if(Zd(e)&&Zd(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n){const u=e[s];if(!r.includes(s))return!1;if(s!=="ref"){const d=t[s];if(Zd(u)&&Zd(d)||oo(u)&&oo(d)||Array.isArray(u)&&Array.isArray(d)?!Kd(u,d):u!==d)return!1}}return!0}var pS=e=>{const t=e?e.ownerDocument:0,n=t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement;return e instanceof n},l3=e=>e.type==="select-multiple",zH=e=>hS(e)||Cg(e),mS=e=>pS(e)&&e.isConnected;function Vv(e,t={}){const n=Array.isArray(e);if(oo(e)||n)for(const r in e)Array.isArray(e[r])||oo(e[r])&&!KL(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Vv(e[r],t[r])):ro(e[r])||(t[r]=!0);return t}function c3(e,t,n){const r=Array.isArray(e);if(oo(e)||r)for(const s in e)Array.isArray(e[s])||oo(e[s])&&!KL(e[s])?vr(t)||Nv(n[s])?n[s]=Array.isArray(e[s])?Vv(e[s],[]):jt({},Vv(e[s])):c3(e[s],ro(t)?{}:t[s],n[s]):n[s]=!Kd(e[s],t[s]);return n}var gS=(e,t)=>c3(e,t,Vv(t)),u3=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>vr(e)?e:t?e===""||ro(e)?NaN:+e:n&&Ea(e)?new Date(e):r?r(e):e;function _S(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return uS(t)?t.files:hS(t)?r3(e.refs).value:l3(t)?[...t.selectedOptions].map(({value:n})=>n):Cg(t)?n3(e.refs).value:u3(vr(t.value)?e.ref.value:t.value,e)}var RH=(e,t,n,r)=>{const s={};for(const u of e){const d=en(t,u);d&&Hi(s,u,d._f)}return{criteriaMode:n,names:[...e],fields:s,shouldUseNativeValidation:r}},kg=e=>vr(e)?void 0:Bv(e)?e.source:oo(e)?Bv(e.value)?e.value.source:e.value:e,FH=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function h3(e,t,n){const r=en(e,n);if(r||lS(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const u=s.join("."),d=en(t,u),o=en(e,u);if(d&&!Array.isArray(d)&&n!==u)return{name:n};if(o&&o.type)return{name:u,error:o};s.pop()}return{name:n}}var BH=(e,t,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(t||e):(n?r.isOnBlur:s.isOnBlur)?!e:(n?r.isOnChange:s.isOnChange)?e:!0,NH=(e,t)=>!Mg(en(e,t)).length&&vo(e,t);const VH={mode:Gs.onSubmit,reValidateMode:Gs.onChange,shouldFocusError:!0};function jH(e={}){let t=jt(jt({},VH),e),n={isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}},r={},s=Wu(t.defaultValues)||{},u=t.shouldUnregister?{}:Wu(s),d={action:!1,mount:!1,watch:!1},o={mount:new Set,unMount:new Set,array:new Set,watch:new Set},y,w=0,M={};const k={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},O={watch:fS(),array:fS(),state:fS()},$=a3(t.mode),j=a3(t.reValidateMode),G=t.criteriaMode===Gs.all,B=Ie=>We=>{clearTimeout(w),w=window.setTimeout(Ie,We)},U=async Ie=>{let We=!1;return k.isValid&&(We=t.resolver?bs((await Ce()).errors):await ze(r,!0),!Ie&&We!==n.isValid&&(n.isValid=We,O.state.next({isValid:We}))),We},Z=(Ie,We=[],qe,Lt,gt=!0,_t=!0)=>{if(Lt&&qe){if(d.action=!0,_t&&Array.isArray(en(r,Ie))){const Ft=qe(en(r,Ie),Lt.argA,Lt.argB);gt&&Hi(r,Ie,Ft)}if(k.errors&&_t&&Array.isArray(en(n.errors,Ie))){const Ft=qe(en(n.errors,Ie),Lt.argA,Lt.argB);gt&&Hi(n.errors,Ie,Ft),NH(n.errors,Ie)}if(k.touchedFields&&_t&&Array.isArray(en(n.touchedFields,Ie))){const Ft=qe(en(n.touchedFields,Ie),Lt.argA,Lt.argB);gt&&Hi(n.touchedFields,Ie,Ft)}k.dirtyFields&&(n.dirtyFields=gS(s,u)),O.state.next({isDirty:mt(Ie,We),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Hi(u,Ie,We)},re=(Ie,We)=>{Hi(n.errors,Ie,We),O.state.next({errors:n.errors})},ie=(Ie,We,qe,Lt)=>{const gt=en(r,Ie);if(gt){const _t=en(u,Ie,vr(qe)?en(s,Ie):qe);vr(_t)||Lt&&Lt.defaultChecked||We?Hi(u,Ie,We?_t:_S(gt._f)):Ne(Ie,_t),d.mount&&U()}},de=(Ie,We,qe,Lt,gt)=>{let _t=!1;const Ft={name:Ie},Sn=en(n.touchedFields,Ie);if(k.isDirty){const Fn=n.isDirty;n.isDirty=Ft.isDirty=mt(),_t=Fn!==Ft.isDirty}if(k.dirtyFields&&(!qe||Lt)){const Fn=en(n.dirtyFields,Ie);Kd(en(s,Ie),We)?vo(n.dirtyFields,Ie):Hi(n.dirtyFields,Ie,!0),Ft.dirtyFields=n.dirtyFields,_t=_t||Fn!==en(n.dirtyFields,Ie)}return qe&&!Sn&&(Hi(n.touchedFields,Ie,qe),Ft.touchedFields=n.touchedFields,_t=_t||k.touchedFields&&Sn!==qe),_t&&gt&&O.state.next(Ft),_t?Ft:{}},xe=async(Ie,We,qe,Lt)=>{const gt=en(n.errors,Ie),_t=k.isValid&&n.isValid!==We;if(e.delayError&&qe?(y=B(()=>re(Ie,qe)),y(e.delayError)):(clearTimeout(w),y=null,qe?Hi(n.errors,Ie,qe):vo(n.errors,Ie)),(qe?!Kd(gt,qe):gt)||!bs(Lt)||_t){const Ft=Ai(jt(jt({},Lt),_t?{isValid:We}:{}),{errors:n.errors,name:Ie});n=jt(jt({},n),Ft),O.state.next(Ft)}M[Ie]--,k.isValidating&&!Object.values(M).some(Ft=>Ft)&&(O.state.next({isValidating:!1}),M={})},Ce=async Ie=>t.resolver?await t.resolver(jt({},u),t.context,RH(Ie||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation)):{},je=async Ie=>{const{errors:We}=await Ce();if(Ie)for(const qe of Ie){const Lt=en(We,qe);Lt?Hi(n.errors,qe,Lt):vo(n.errors,qe)}else n.errors=We;return We},ze=async(Ie,We,qe={valid:!0})=>{for(const gt in Ie){const _t=Ie[gt];if(_t){const Lt=_t,{_f:Ft}=Lt,Sn=jp(Lt,["_f"]);if(Ft){const Fn=o.array.has(Ft.name),Li=await s3(_t,en(u,Ft.name),G,t.shouldUseNativeValidation,Fn);if(Li[Ft.name]&&(qe.valid=!1,We))break;!We&&(en(Li,Ft.name)?Fn?PH(n.errors,Li,Ft.name):Hi(n.errors,Ft.name,Li[Ft.name]):vo(n.errors,Ft.name))}Sn&&await ze(Sn,We,qe)}}return qe.valid},pt=()=>{for(const Ie of o.unMount){const We=en(r,Ie);We&&(We._f.refs?We._f.refs.every(qe=>!mS(qe)):!mS(We._f.ref))&&Vt(Ie)}o.unMount=new Set},mt=(Ie,We)=>(Ie&&We&&Hi(u,Ie,We),!Kd(Ut(),s)),ot=(Ie,We,qe)=>{const Lt=jt({},d.mount?u:vr(We)?s:Ea(Ie)?{[Ie]:We}:We);return DH(Ie,o,Lt,qe)},kt=Ie=>Mg(en(d.mount?u:s,Ie,e.shouldUnregister?en(s,Ie,[]):[])),Ne=(Ie,We,qe={})=>{const Lt=en(r,Ie);let gt=We;if(Lt){const _t=Lt._f;_t&&(!_t.disabled&&Hi(u,Ie,u3(We,_t)),gt=dS&&pS(_t.ref)&&ro(We)?"":We,l3(_t.ref)?[..._t.ref.options].forEach(Ft=>Ft.selected=gt.includes(Ft.value)):_t.refs?Cg(_t.ref)?_t.refs.length>1?_t.refs.forEach(Ft=>!Ft.disabled&&(Ft.checked=Array.isArray(gt)?!!gt.find(Sn=>Sn===Ft.value):gt===Ft.value)):_t.refs[0]&&(_t.refs[0].checked=!!gt):_t.refs.forEach(Ft=>Ft.checked=Ft.value===gt):uS(_t.ref)?_t.ref.value="":(_t.ref.value=gt,_t.ref.type||O.watch.next({name:Ie})))}(qe.shouldDirty||qe.shouldTouch)&&de(Ie,gt,qe.shouldTouch,qe.shouldDirty,!0),qe.shouldValidate&&Ot(Ie)},Ve=(Ie,We,qe)=>{for(const Lt in We){const gt=We[Lt],_t=`${Ie}.${Lt}`,Ft=en(r,_t);(o.array.has(Ie)||!Nv(gt)||Ft&&!Ft._f)&&!Zd(gt)?Ve(_t,gt,qe):Ne(_t,gt,qe)}},tt=(Ie,We,qe={})=>{const Lt=en(r,Ie),gt=o.array.has(Ie),_t=Wu(We);Hi(u,Ie,_t),gt?(O.array.next({name:Ie,values:u}),(k.isDirty||k.dirtyFields)&&qe.shouldDirty&&(n.dirtyFields=gS(s,u),O.state.next({name:Ie,dirtyFields:n.dirtyFields,isDirty:mt(Ie,_t)}))):Lt&&!Lt._f&&!ro(_t)?Ve(Ie,_t,qe):Ne(Ie,_t,qe),QL(Ie,o)&&O.state.next({}),O.watch.next({name:Ie})},ct=async Ie=>{const We=Ie.target;let qe=We.name;const Lt=en(r,qe);if(Lt){let gt,_t;const Ft=We.type?_S(Lt._f):SH(Ie),Sn=Ie.type===XL.BLUR||Ie.type===XL.FOCUS_OUT,Fn=!FH(Lt._f)&&!t.resolver&&!en(n.errors,qe)&&!Lt._f.deps||BH(Sn,en(n.touchedFields,qe),n.isSubmitted,j,$),Li=QL(qe,o,Sn);Hi(u,qe,Ft),Sn?(Lt._f.onBlur&&Lt._f.onBlur(Ie),y&&y(0)):Lt._f.onChange&&Lt._f.onChange(Ie);const dn=de(qe,Ft,Sn,!1),Ir=!bs(dn)||Li;if(!Sn&&O.watch.next({name:qe,type:Ie.type}),Fn)return Ir&&O.state.next(jt({name:qe},Li?{}:dn));if(!Sn&&Li&&O.state.next({}),M[qe]=(M[qe],1),O.state.next({isValidating:!0}),t.resolver){const{errors:sr}=await Ce([qe]),xr=h3(n.errors,r,qe),Mt=h3(sr,r,xr.name||qe);gt=Mt.error,qe=Mt.name,_t=bs(sr)}else gt=(await s3(Lt,en(u,qe),G,t.shouldUseNativeValidation))[qe],_t=await U(!0);Lt._f.deps&&Ot(Lt._f.deps),xe(qe,_t,gt,dn)}},Ot=async(Ie,We={})=>{let qe,Lt;const gt=aS(Ie);if(O.state.next({isValidating:!0}),t.resolver){const _t=await je(vr(Ie)?Ie:gt);qe=bs(_t),Lt=Ie?!gt.some(Ft=>en(_t,Ft)):qe}else Ie?(Lt=(await Promise.all(gt.map(async _t=>{const Ft=en(r,_t);return await ze(Ft&&Ft._f?{[_t]:Ft}:Ft)}))).every(Boolean),!(!Lt&&!n.isValid)&&U()):Lt=qe=await ze(r);return O.state.next(Ai(jt(jt({},!Ea(Ie)||k.isValid&&qe!==n.isValid?{}:{name:Ie}),t.resolver?{isValid:qe}:{}),{errors:n.errors,isValidating:!1})),We.shouldFocus&&!Lt&&cS(r,_t=>en(n.errors,_t),Ie?gt:o.mount),Lt},Ut=Ie=>{const We=jt(jt({},s),d.mount?u:{});return vr(Ie)?We:Ea(Ie)?en(We,Ie):Ie.map(qe=>en(We,qe))},un=(Ie,We)=>({invalid:!!en((We||n).errors,Ie),isDirty:!!en((We||n).dirtyFields,Ie),isTouched:!!en((We||n).touchedFields,Ie),error:en((We||n).errors,Ie)}),st=Ie=>{Ie?aS(Ie).forEach(We=>vo(n.errors,We)):n.errors={},O.state.next({errors:n.errors})},at=(Ie,We,qe)=>{const Lt=(en(r,Ie,{_f:{}})._f||{}).ref;Hi(n.errors,Ie,Ai(jt({},We),{ref:Lt})),O.state.next({name:Ie,errors:n.errors,isValid:!1}),qe&&qe.shouldFocus&&Lt&&Lt.focus&&Lt.focus()},xt=(Ie,We)=>zv(Ie)?O.watch.subscribe({next:qe=>Ie(ot(void 0,We),qe)}):ot(Ie,We,!0),Vt=(Ie,We={})=>{for(const qe of Ie?aS(Ie):o.mount)o.mount.delete(qe),o.array.delete(qe),en(r,qe)&&(We.keepValue||(vo(r,qe),vo(u,qe)),!We.keepError&&vo(n.errors,qe),!We.keepDirty&&vo(n.dirtyFields,qe),!We.keepTouched&&vo(n.touchedFields,qe),!t.shouldUnregister&&!We.keepDefaultValue&&vo(s,qe));O.watch.next({}),O.state.next(jt(jt({},n),We.keepDirty?{isDirty:mt()}:{})),!We.keepIsValid&&U()},Gt=(Ie,We={})=>{let qe=en(r,Ie);const Lt=Rv(We.disabled);return Hi(r,Ie,{_f:jt(Ai(jt({},qe&&qe._f?qe._f:{ref:{name:Ie}}),{name:Ie,mount:!0}),We)}),o.mount.add(Ie),qe?Lt&&Hi(u,Ie,We.disabled?void 0:en(u,Ie,_S(qe._f))):ie(Ie,!0,We.value),Ai(jt(jt({},Lt?{disabled:We.disabled}:{}),t.shouldUseNativeValidation?{required:!!We.required,min:kg(We.min),max:kg(We.max),minLength:kg(We.minLength),maxLength:kg(We.maxLength),pattern:kg(We.pattern)}:{}),{name:Ie,onChange:ct,onBlur:ct,ref:gt=>{if(gt){Gt(Ie,We),qe=en(r,Ie);const _t=vr(gt.value)&&gt.querySelectorAll&&gt.querySelectorAll("input,select,textarea")[0]||gt,Ft=zH(_t),Sn=qe._f.refs||[];if(Ft?Sn.find(Fn=>Fn===_t):_t===qe._f.ref)return;Hi(r,Ie,{_f:jt(jt({},qe._f),Ft?{refs:[...Sn.filter(mS),_t,...Array.isArray(en(s,Ie))?[{}]:[]],ref:{type:_t.type,name:Ie}}:{ref:_t})}),ie(Ie,!1,void 0,_t)}else qe=en(r,Ie,{}),qe._f&&(qe._f.mount=!1),(t.shouldUnregister||We.shouldUnregister)&&!(CH(o.array,Ie)&&d.action)&&o.unMount.add(Ie)}})};return{control:{register:Gt,unregister:Vt,getFieldState:un,_executeSchema:Ce,_getWatch:ot,_getDirty:mt,_updateValid:U,_removeUnmounted:pt,_updateFieldArray:Z,_getFieldArray:kt,_subjects:O,_proxyFormState:k,get _fields(){return r},get _formValues(){return u},get _stateFlags(){return d},set _stateFlags(Ie){d=Ie},get _defaultValues(){return s},get _names(){return o},set _names(Ie){o=Ie},get _formState(){return n},set _formState(Ie){n=Ie},get _options(){return t},set _options(Ie){t=jt(jt({},t),Ie)}},trigger:Ot,register:Gt,handleSubmit:(Ie,We)=>async qe=>{qe&&(qe.preventDefault&&qe.preventDefault(),qe.persist&&qe.persist());let Lt=!0,gt=Wu(u);O.state.next({isSubmitting:!0});try{if(t.resolver){const{errors:_t,values:Ft}=await Ce();n.errors=_t,gt=Ft}else await ze(r);bs(n.errors)?(O.state.next({errors:{},isSubmitting:!0}),await Ie(gt,qe)):(We&&await We(jt({},n.errors),qe),t.shouldFocusError&&cS(r,_t=>en(n.errors,_t),o.mount))}catch(_t){throw Lt=!1,_t}finally{n.isSubmitted=!0,O.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:bs(n.errors)&&Lt,submitCount:n.submitCount+1,errors:n.errors})}},watch:xt,setValue:tt,getValues:Ut,reset:(Ie,We={})=>{const qe=Ie||s,Lt=Wu(qe),gt=Ie&&!bs(Ie)?Lt:s;if(We.keepDefaultValues||(s=qe),!We.keepValues){if(We.keepDirtyValues)for(const _t of o.mount)en(n.dirtyFields,_t)?Hi(gt,_t,en(u,_t)):tt(_t,en(gt,_t));else{if(dS&&vr(Ie))for(const _t of o.mount){const Ft=en(r,_t);if(Ft&&Ft._f){const Sn=Array.isArray(Ft._f.refs)?Ft._f.refs[0]:Ft._f.ref;try{if(pS(Sn)){Sn.closest("form").reset();break}}catch{}}}r={}}u=e.shouldUnregister?We.keepDefaultValues?Wu(s):{}:Lt,O.array.next({values:gt}),O.watch.next({values:gt})}o={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},d.mount=!k.isValid||!!We.keepIsValid,d.watch=!!e.shouldUnregister,O.state.next({submitCount:We.keepSubmitCount?n.submitCount:0,isDirty:We.keepDirty||We.keepDirtyValues?n.isDirty:!!(We.keepDefaultValues&&!Kd(Ie,s)),isSubmitted:We.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:We.keepDirty||We.keepDirtyValues?n.dirtyFields:We.keepDefaultValues&&Ie?gS(s,Ie):{},touchedFields:We.keepTouched?n.touchedFields:{},errors:We.keepErrors?n.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},resetField:(Ie,We={})=>{en(r,Ie)&&(vr(We.defaultValue)?tt(Ie,en(s,Ie)):(tt(Ie,We.defaultValue),Hi(s,Ie,We.defaultValue)),We.keepTouched||vo(n.touchedFields,Ie),We.keepDirty||(vo(n.dirtyFields,Ie),n.isDirty=We.defaultValue?mt(Ie,en(s,Ie)):mt()),We.keepError||(vo(n.errors,Ie),k.isValid&&U()),O.state.next(jt({},n)))},clearErrors:st,unregister:Vt,setError:at,setFocus:(Ie,We={})=>{const qe=en(r,Ie)._f,Lt=qe.refs?qe.refs[0]:qe.ref;Lt.focus(),We.shouldSelect&&Lt.select()},getFieldState:un}}function XQ(e={}){const t=Zr.useRef(),[n,r]=Zr.useState({isDirty:!1,isValidating:!1,dirtyFields:{},isSubmitted:!1,submitCount:0,touchedFields:{},isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,errors:{}});t.current?t.current.control._options=e:t.current=Ai(jt({},jH(e)),{formState:n});const s=t.current.control,u=Zr.useCallback(d=>{kH(d,s._proxyFormState,!0)&&(s._formState=jt(jt({},s._formState),d),r(jt({},s._formState)))},[s]);return AH({subject:s._subjects.state,callback:u}),Zr.useEffect(()=>{s._stateFlags.mount||(s._proxyFormState.isValid&&s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()}),t.current.formState=MH(n,s._proxyFormState),t.current}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(n),!0).forEach(function(r){Sa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UH(e){if(Array.isArray(e))return e}function $H(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,u=!1,d,o;try{for(n=n.call(e);!(s=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));s=!0);}catch(y){u=!0,o=y}finally{try{!s&&n.return!=null&&n.return()}finally{if(u)throw o}}return r}}function yS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f3(e,t){if(!!e){if(typeof e=="string")return yS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yS(e,t)}}function GH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ml(e,t){return UH(e)||$H(e,t)||f3(e,t)||GH()}function Jd(e,t){if(e==null)return{};var n=SE(e,t),r,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)r=u[s],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}var WH=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function HH(e){var t=e.defaultInputValue,n=t===void 0?"":t,r=e.defaultMenuIsOpen,s=r===void 0?!1:r,u=e.defaultValue,d=u===void 0?null:u,o=e.inputValue,y=e.menuIsOpen,w=e.onChange,M=e.onInputChange,k=e.onMenuClose,O=e.onMenuOpen,$=e.value,j=Jd(e,WH),G=ke.exports.useState(o!==void 0?o:n),B=ml(G,2),U=B[0],Z=B[1],re=ke.exports.useState(y!==void 0?y:s),ie=ml(re,2),de=ie[0],xe=ie[1],Ce=ke.exports.useState($!==void 0?$:d),je=ml(Ce,2),ze=je[0],pt=je[1],mt=ke.exports.useCallback(function(Ot,Ut){typeof w=="function"&&w(Ot,Ut),pt(Ot)},[w]),ot=ke.exports.useCallback(function(Ot,Ut){var un;typeof M=="function"&&(un=M(Ot,Ut)),Z(un!==void 0?un:Ot)},[M]),kt=ke.exports.useCallback(function(){typeof O=="function"&&O(),xe(!0)},[O]),Ne=ke.exports.useCallback(function(){typeof k=="function"&&k(),xe(!1)},[k]),Ve=o!==void 0?o:U,tt=y!==void 0?y:de,ct=$!==void 0?$:ze;return ji(ji({},j),{},{inputValue:Ve,menuIsOpen:tt,onChange:mt,onInputChange:ot,onMenuClose:Ne,onMenuOpen:kt,value:ct})}function qH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function YH(e,t,n){return t&&p3(e.prototype,t),n&&p3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hv(e,t)}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(e)}function XH(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Uv(e){return Uv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uv(e)}function KH(e,t){if(t&&(Uv(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E7(e)}function JH(e){var t=XH();return function(){var r=jv(e),s;if(t){var u=jv(this).constructor;s=Reflect.construct(r,arguments,u)}else s=r.apply(this,arguments);return KH(this,s)}}function QH(e){if(Array.isArray(e))return yS(e)}function eq(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m3(e){return QH(e)||eq(e)||f3(e)||tq()}function nq(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function iq(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var rq=function(){function e(n){var r=this;this._insertTag=function(s){var u;r.tags.length===0?r.insertionPoint?u=r.insertionPoint.nextSibling:r.prepend?u=r.container.firstChild:u=r.before:u=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,u),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(iq(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var u=nq(s);try{u.insertRule(r,u.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),so="-ms-",$v="-moz-",si="-webkit-",g3="comm",vS="rule",xS="decl",oq="@import",_3="@keyframes",sq=Math.abs,Gv=String.fromCharCode,aq=Object.assign;function lq(e,t){return jr(e,0)^45?(((t<<2^jr(e,0))<<2^jr(e,1))<<2^jr(e,2))<<2^jr(e,3):0}function y3(e){return e.trim()}function cq(e,t){return(e=t.exec(e))?e[0]:e}function li(e,t,n){return e.replace(t,n)}function bS(e,t){return e.indexOf(t)}function jr(e,t){return e.charCodeAt(t)|0}function Ag(e,t,n){return e.slice(t,n)}function Ta(e){return e.length}function wS(e){return e.length}function Wv(e,t){return t.push(e),e}function uq(e,t){return e.map(t).join("")}var Hv=1,Qd=1,v3=0,zo=0,ur=0,ef="";function qv(e,t,n,r,s,u,d){return{value:e,root:t,parent:n,type:r,props:s,children:u,line:Hv,column:Qd,length:d,return:""}}function Dg(e,t){return aq(qv("",null,null,"",null,null,0),e,{length:-e.length},t)}function hq(){return ur}function dq(){return ur=zo>0?jr(ef,--zo):0,Qd--,ur===10&&(Qd=1,Hv--),ur}function Jo(){return ur=zo<v3?jr(ef,zo++):0,Qd++,ur===10&&(Qd=1,Hv++),ur}function Ca(){return jr(ef,zo)}function Yv(){return zo}function Ig(e,t){return Ag(ef,e,t)}function Pg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function x3(e){return Hv=Qd=1,v3=Ta(ef=e),zo=0,[]}function b3(e){return ef="",e}function Zv(e){return y3(Ig(zo-1,ES(e===91?e+2:e===40?e+1:e)))}function fq(e){for(;(ur=Ca())&&ur<33;)Jo();return Pg(e)>2||Pg(ur)>3?"":" "}function pq(e,t){for(;--t&&Jo()&&!(ur<48||ur>102||ur>57&&ur<65||ur>70&&ur<97););return Ig(e,Yv()+(t<6&&Ca()==32&&Jo()==32))}function ES(e){for(;Jo();)switch(ur){case e:return zo;case 34:case 39:e!==34&&e!==39&&ES(ur);break;case 40:e===41&&ES(e);break;case 92:Jo();break}return zo}function mq(e,t){for(;Jo()&&e+ur!==47+10;)if(e+ur===42+42&&Ca()===47)break;return"/*"+Ig(t,zo-1)+"*"+Gv(e===47?e:Jo())}function gq(e){for(;!Pg(Ca());)Jo();return Ig(e,zo)}function _q(e){return b3(Xv("",null,null,null,[""],e=x3(e),0,[0],e))}function Xv(e,t,n,r,s,u,d,o,y){for(var w=0,M=0,k=d,O=0,$=0,j=0,G=1,B=1,U=1,Z=0,re="",ie=s,de=u,xe=r,Ce=re;B;)switch(j=Z,Z=Jo()){case 40:if(j!=108&&jr(Ce,k-1)==58){bS(Ce+=li(Zv(Z),"&","&\f"),"&\f")!=-1&&(U=-1);break}case 34:case 39:case 91:Ce+=Zv(Z);break;case 9:case 10:case 13:case 32:Ce+=fq(j);break;case 92:Ce+=pq(Yv()-1,7);continue;case 47:switch(Ca()){case 42:case 47:Wv(yq(mq(Jo(),Yv()),t,n),y);break;default:Ce+="/"}break;case 123*G:o[w++]=Ta(Ce)*U;case 125*G:case 59:case 0:switch(Z){case 0:case 125:B=0;case 59+M:$>0&&Ta(Ce)-k&&Wv($>32?E3(Ce+";",r,n,k-1):E3(li(Ce," ","")+";",r,n,k-2),y);break;case 59:Ce+=";";default:if(Wv(xe=w3(Ce,t,n,w,M,s,o,re,ie=[],de=[],k),u),Z===123)if(M===0)Xv(Ce,t,xe,xe,ie,u,k,o,de);else switch(O===99&&jr(Ce,3)===110?100:O){case 100:case 109:case 115:Xv(e,xe,xe,r&&Wv(w3(e,xe,xe,0,0,s,o,re,s,ie=[],k),de),s,de,k,o,r?ie:de);break;default:Xv(Ce,xe,xe,xe,[""],de,0,o,de)}}w=M=$=0,G=U=1,re=Ce="",k=d;break;case 58:k=1+Ta(Ce),$=j;default:if(G<1){if(Z==123)--G;else if(Z==125&&G++==0&&dq()==125)continue}switch(Ce+=Gv(Z),Z*G){case 38:U=M>0?1:(Ce+="\f",-1);break;case 44:o[w++]=(Ta(Ce)-1)*U,U=1;break;case 64:Ca()===45&&(Ce+=Zv(Jo())),O=Ca(),M=k=Ta(re=Ce+=gq(Yv())),Z++;break;case 45:j===45&&Ta(Ce)==2&&(G=0)}}return u}function w3(e,t,n,r,s,u,d,o,y,w,M){for(var k=s-1,O=s===0?u:[""],$=wS(O),j=0,G=0,B=0;j<r;++j)for(var U=0,Z=Ag(e,k+1,k=sq(G=d[j])),re=e;U<$;++U)(re=y3(G>0?O[U]+" "+Z:li(Z,/&\f/g,O[U])))&&(y[B++]=re);return qv(e,t,n,s===0?vS:o,y,w,M)}function yq(e,t,n){return qv(e,t,n,g3,Gv(hq()),Ag(e,2,-2),0)}function E3(e,t,n,r){return qv(e,t,n,xS,Ag(e,0,r),Ag(e,r+1,-1),r)}function tf(e,t){for(var n="",r=wS(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function vq(e,t,n,r){switch(e.type){case oq:case xS:return e.return=e.return||e.value;case g3:return"";case _3:return e.return=e.value+"{"+tf(e.children,r)+"}";case vS:e.value=e.props.join(",")}return Ta(n=tf(e.children,r))?e.return=e.value+"{"+n+"}":""}function xq(e){var t=wS(e);return function(n,r,s,u){for(var d="",o=0;o<t;o++)d+=e[o](n,r,s,u)||"";return d}}function bq(e){return function(t){t.root||(t=t.return)&&e(t)}}function wq(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Eq=function(t,n,r){for(var s=0,u=0;s=u,u=Ca(),s===38&&u===12&&(n[r]=1),!Pg(u);)Jo();return Ig(t,zo)},Sq=function(t,n){var r=-1,s=44;do switch(Pg(s)){case 0:s===38&&Ca()===12&&(n[r]=1),t[r]+=Eq(zo-1,n,r);break;case 2:t[r]+=Zv(s);break;case 4:if(s===44){t[++r]=Ca()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=Gv(s)}while(s=Jo());return t},Tq=function(t,n){return b3(Sq(x3(t),n))},S3=new WeakMap,Cq=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!S3.get(r))&&!s){S3.set(t,!0);for(var u=[],d=Tq(n,u),o=r.props,y=0,w=0;y<d.length;y++)for(var M=0;M<o.length;M++,w++)t.props[w]=u[y]?d[y].replace(/&\f/g,o[M]):o[M]+" "+d[y]}}},Mq=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function T3(e,t){switch(lq(e,t)){case 5103:return si+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return si+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return si+e+$v+e+so+e+e;case 6828:case 4268:return si+e+so+e+e;case 6165:return si+e+so+"flex-"+e+e;case 5187:return si+e+li(e,/(\w+).+(:[^]+)/,si+"box-$1$2"+so+"flex-$1$2")+e;case 5443:return si+e+so+"flex-item-"+li(e,/flex-|-self/,"")+e;case 4675:return si+e+so+"flex-line-pack"+li(e,/align-content|flex-|-self/,"")+e;case 5548:return si+e+so+li(e,"shrink","negative")+e;case 5292:return si+e+so+li(e,"basis","preferred-size")+e;case 6060:return si+"box-"+li(e,"-grow","")+si+e+so+li(e,"grow","positive")+e;case 4554:return si+li(e,/([^-])(transform)/g,"$1"+si+"$2")+e;case 6187:return li(li(li(e,/(zoom-|grab)/,si+"$1"),/(image-set)/,si+"$1"),e,"")+e;case 5495:case 3959:return li(e,/(image-set\([^]*)/,si+"$1$`$1");case 4968:return li(li(e,/(.+:)(flex-)?(.*)/,si+"box-pack:$3"+so+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+si+e+e;case 4095:case 3583:case 4068:case 2532:return li(e,/(.+)-inline(.+)/,si+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ta(e)-1-t>6)switch(jr(e,t+1)){case 109:if(jr(e,t+4)!==45)break;case 102:return li(e,/(.+:)(.+)-([^]+)/,"$1"+si+"$2-$3$1"+$v+(jr(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~bS(e,"stretch")?T3(li(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(jr(e,t+1)!==115)break;case 6444:switch(jr(e,Ta(e)-3-(~bS(e,"!important")&&10))){case 107:return li(e,":",":"+si)+e;case 101:return li(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+si+(jr(e,14)===45?"inline-":"")+"box$3$1"+si+"$2$3$1"+so+"$2box$3")+e}break;case 5936:switch(jr(e,t+11)){case 114:return si+e+so+li(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return si+e+so+li(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return si+e+so+li(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return si+e+so+e+e}return e}var kq=function(t,n,r,s){if(t.length>-1&&!t.return)switch(t.type){case xS:t.return=T3(t.value,t.length);break;case _3:return tf([Dg(t,{value:li(t.value,"@","@"+si)})],s);case vS:if(t.length)return uq(t.props,function(u){switch(cq(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return tf([Dg(t,{props:[li(u,/:(read-\w+)/,":"+$v+"$1")]})],s);case"::placeholder":return tf([Dg(t,{props:[li(u,/:(plac\w+)/,":"+si+"input-$1")]}),Dg(t,{props:[li(u,/:(plac\w+)/,":"+$v+"$1")]}),Dg(t,{props:[li(u,/:(plac\w+)/,so+"input-$1")]})],s)}return""})}},Aq=[kq],Dq=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(G){var B=G.getAttribute("data-emotion");B.indexOf(" ")!==-1&&(document.head.appendChild(G),G.setAttribute("data-s",""))})}var s=t.stylisPlugins||Aq,u={},d,o=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(G){for(var B=G.getAttribute("data-emotion").split(" "),U=1;U<B.length;U++)u[B[U]]=!0;o.push(G)});var y,w=[Cq,Mq];{var M,k=[vq,bq(function(G){M.insert(G)})],O=xq(w.concat(s,k)),$=function(B){return tf(_q(B),O)};y=function(B,U,Z,re){M=Z,$(B?B+"{"+U.styles+"}":U.styles),re&&(j.inserted[U.name]=!0)}}var j={key:n,sheet:new rq({key:n,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:y};return j.sheet.hydrate(o),j},C3={exports:{}},mi={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dr=typeof Symbol=="function"&&Symbol.for,SS=Dr?Symbol.for("react.element"):60103,TS=Dr?Symbol.for("react.portal"):60106,Kv=Dr?Symbol.for("react.fragment"):60107,Jv=Dr?Symbol.for("react.strict_mode"):60108,Qv=Dr?Symbol.for("react.profiler"):60114,ex=Dr?Symbol.for("react.provider"):60109,tx=Dr?Symbol.for("react.context"):60110,CS=Dr?Symbol.for("react.async_mode"):60111,nx=Dr?Symbol.for("react.concurrent_mode"):60111,ix=Dr?Symbol.for("react.forward_ref"):60112,rx=Dr?Symbol.for("react.suspense"):60113,Iq=Dr?Symbol.for("react.suspense_list"):60120,ox=Dr?Symbol.for("react.memo"):60115,sx=Dr?Symbol.for("react.lazy"):60116,Pq=Dr?Symbol.for("react.block"):60121,Oq=Dr?Symbol.for("react.fundamental"):60117,Lq=Dr?Symbol.for("react.responder"):60118,zq=Dr?Symbol.for("react.scope"):60119;function Qo(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case SS:switch(e=e.type,e){case CS:case nx:case Kv:case Qv:case Jv:case rx:return e;default:switch(e=e&&e.$$typeof,e){case tx:case ix:case sx:case ox:case ex:return e;default:return t}}case TS:return t}}}function M3(e){return Qo(e)===nx}mi.AsyncMode=CS;mi.ConcurrentMode=nx;mi.ContextConsumer=tx;mi.ContextProvider=ex;mi.Element=SS;mi.ForwardRef=ix;mi.Fragment=Kv;mi.Lazy=sx;mi.Memo=ox;mi.Portal=TS;mi.Profiler=Qv;mi.StrictMode=Jv;mi.Suspense=rx;mi.isAsyncMode=function(e){return M3(e)||Qo(e)===CS};mi.isConcurrentMode=M3;mi.isContextConsumer=function(e){return Qo(e)===tx};mi.isContextProvider=function(e){return Qo(e)===ex};mi.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===SS};mi.isForwardRef=function(e){return Qo(e)===ix};mi.isFragment=function(e){return Qo(e)===Kv};mi.isLazy=function(e){return Qo(e)===sx};mi.isMemo=function(e){return Qo(e)===ox};mi.isPortal=function(e){return Qo(e)===TS};mi.isProfiler=function(e){return Qo(e)===Qv};mi.isStrictMode=function(e){return Qo(e)===Jv};mi.isSuspense=function(e){return Qo(e)===rx};mi.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Kv||e===nx||e===Qv||e===Jv||e===rx||e===Iq||typeof e=="object"&&e!==null&&(e.$$typeof===sx||e.$$typeof===ox||e.$$typeof===ex||e.$$typeof===tx||e.$$typeof===ix||e.$$typeof===Oq||e.$$typeof===Lq||e.$$typeof===zq||e.$$typeof===Pq)};mi.typeOf=Qo;C3.exports=mi;var k3=C3.exports,Rq={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Fq={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},A3={};A3[k3.ForwardRef]=Rq;A3[k3.Memo]=Fq;var Bq=!0;function D3(e,t,n){var r="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):r+=s+" "}),r}var MS=function(t,n,r){var s=t.key+"-"+n.name;(r===!1||Bq===!1)&&t.registered[s]===void 0&&(t.registered[s]=n.styles)},I3=function(t,n,r){MS(t,n,r);var s=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var u=n;do t.insert(n===u?"."+s:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function Nq(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Vq={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jq=/[A-Z]|^ms/g,Uq=/_EMO_([^_]+?)_([^]*?)_EMO_/g,P3=function(t){return t.charCodeAt(1)===45},O3=function(t){return t!=null&&typeof t!="boolean"},kS=wq(function(e){return P3(e)?e:e.replace(jq,"-$&").toLowerCase()}),L3=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Uq,function(r,s,u){return Ma={name:s,styles:u,next:Ma},s})}return Vq[t]!==1&&!P3(t)&&typeof n=="number"&&n!==0?n+"px":n};function Og(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ma={name:n.name,styles:n.styles,next:Ma},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Ma={name:r.name,styles:r.styles,next:Ma},r=r.next;var s=n.styles+";";return s}return $q(e,t,n)}case"function":{if(e!==void 0){var u=Ma,d=n(e);return Ma=u,Og(e,t,d)}break}}if(t==null)return n;var o=t[n];return o!==void 0?o:n}function $q(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Og(e,t,n[s])+";";else for(var u in n){var d=n[u];if(typeof d!="object")t!=null&&t[d]!==void 0?r+=u+"{"+t[d]+"}":O3(d)&&(r+=kS(u)+":"+L3(u,d)+";");else if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var o=0;o<d.length;o++)O3(d[o])&&(r+=kS(u)+":"+L3(u,d[o])+";");else{var y=Og(e,t,d);switch(u){case"animation":case"animationName":{r+=kS(u)+":"+y+";";break}default:r+=u+"{"+y+"}"}}}return r}var z3=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ma,AS=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,u="";Ma=void 0;var d=t[0];d==null||d.raw===void 0?(s=!1,u+=Og(r,n,d)):u+=d[0];for(var o=1;o<t.length;o++)u+=Og(r,n,t[o]),s&&(u+=d[o]);z3.lastIndex=0;for(var y="",w;(w=z3.exec(u))!==null;)y+="-"+w[1];var M=Nq(u)+y;return{name:M,styles:u,next:Ma}},Gq=function(t){return t()},Wq=uk["useInsertionEffect"]?uk["useInsertionEffect"]:!1,R3=Wq||Gq,DS={}.hasOwnProperty,F3=ke.exports.createContext(typeof HTMLElement!="undefined"?Dq({key:"css"}):null);F3.Provider;var B3=function(t){return ke.exports.forwardRef(function(n,r){var s=ke.exports.useContext(F3);return t(n,s,r)})},N3=ke.exports.createContext({}),IS="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Hq=function(t,n){var r={};for(var s in n)DS.call(n,s)&&(r[s]=n[s]);return r[IS]=t,r},qq=function(t){var n=t.cache,r=t.serialized,s=t.isStringTag;return MS(n,r,s),R3(function(){return I3(n,r,s)}),null},Yq=B3(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var s=e[IS],u=[r],d="";typeof e.className=="string"?d=D3(t.registered,u,e.className):e.className!=null&&(d=e.className+" ");var o=AS(u,void 0,ke.exports.useContext(N3));d+=t.key+"-"+o.name;var y={};for(var w in e)DS.call(e,w)&&w!=="css"&&w!==IS&&(y[w]=e[w]);return y.ref=n,y.className=d,ke.exports.createElement(ke.exports.Fragment,null,ke.exports.createElement(qq,{cache:t,serialized:o,isStringTag:typeof s=="string"}),ke.exports.createElement(s,y))}),cn=function(t,n){var r=arguments;if(n==null||!DS.call(n,"css"))return ke.exports.createElement.apply(void 0,r);var s=r.length,u=new Array(s);u[0]=Yq,u[1]=Hq(t,n);for(var d=2;d<s;d++)u[d]=r[d];return ke.exports.createElement.apply(null,u)};function PS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return AS(t)}var Zq=function(){var t=PS.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Xq=function e(t){for(var n=t.length,r=0,s="";r<n;r++){var u=t[r];if(u!=null){var d=void 0;switch(typeof u){case"boolean":break;case"object":{if(Array.isArray(u))d=e(u);else{d="";for(var o in u)u[o]&&o&&(d&&(d+=" "),d+=o)}break}default:d=u}d&&(s&&(s+=" "),s+=d)}}return s};function Kq(e,t,n){var r=[],s=D3(e,r,n);return r.length<2?n:s+t(r)}var Jq=function(t){var n=t.cache,r=t.serializedArr;return R3(function(){for(var s=0;s<r.length;s++)I3(n,r[s],!1)}),null},Qq=B3(function(e,t){var n=!1,r=[],s=function(){for(var w=arguments.length,M=new Array(w),k=0;k<w;k++)M[k]=arguments[k];var O=AS(M,t.registered);return r.push(O),MS(t,O,!1),t.key+"-"+O.name},u=function(){for(var w=arguments.length,M=new Array(w),k=0;k<w;k++)M[k]=arguments[k];return Kq(t.registered,s,Xq(M))},d={css:s,cx:u,theme:ke.exports.useContext(N3)},o=e.children(d);return n=!0,ke.exports.createElement(ke.exports.Fragment,null,ke.exports.createElement(Jq,{cache:t,serializedArr:r}),o)});function eY(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function V3(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Hu(e){if(e==null)return window;if(!V3(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function tY(e){return Hu(e).getComputedStyle(e)}function j3(e){return V3(e)?"":e?(e.nodeName||"").toLowerCase():""}function nY(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function U3(e){return e instanceof Hu(e).HTMLElement}function ax(e){return e instanceof Hu(e).Element}function iY(e){return e instanceof Hu(e).Node}function rY(e){if(typeof ShadowRoot=="undefined")return!1;const t=Hu(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function $3(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=tY(e);return/auto|scroll|overlay|hidden/.test(t+r+n)&&!["inline","contents"].includes(s)}function oY(){return!/^((?!chrome|android).)*safari/i.test(nY())}function sY(e){return["html","body","#document"].includes(j3(e))}const G3=Math.round;function W3(e,t,n){var r,s,u,d;t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect();let y=1,w=1;t&&U3(e)&&(y=e.offsetWidth>0&&G3(o.width)/e.offsetWidth||1,w=e.offsetHeight>0&&G3(o.height)/e.offsetHeight||1);const M=ax(e)?Hu(e):window,k=!oY()&&n,O=(o.left+(k&&(r=(s=M.visualViewport)==null?void 0:s.offsetLeft)!=null?r:0))/y,$=(o.top+(k&&(u=(d=M.visualViewport)==null?void 0:d.offsetTop)!=null?u:0))/w,j=o.width/y,G=o.height/w;return{width:j,height:G,top:$,right:O+j,bottom:$+G,left:O,x:O,y:$}}function aY(e){return((iY(e)?e.ownerDocument:e.document)||window.document).documentElement}function lY(e){return j3(e)==="html"?e:e.assignedSlot||e.parentNode||(rY(e)?e.host:null)||aY(e)}function H3(e){const t=lY(e);return sY(t)?e.ownerDocument.body:U3(t)&&$3(t)?t:H3(t)}function lx(e,t){var n;t===void 0&&(t=[]);const r=H3(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),u=Hu(r),d=s?[u].concat(u.visualViewport||[],$3(r)?r:[]):r,o=t.concat(d);return s?o:o.concat(lx(d))}function cY(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:u=!0,elementResize:d=!0,animationFrame:o=!1}=r,y=s&&!o,w=y||u?[...ax(e)?lx(e):e.contextElement?lx(e.contextElement):[],...lx(t)]:[];w.forEach(j=>{y&&j.addEventListener("scroll",n,{passive:!0}),u&&j.addEventListener("resize",n)});let M=null;if(d){let j=!0;M=new ResizeObserver(()=>{j||n(),j=!1}),ax(e)&&!o&&M.observe(e),!ax(e)&&e.contextElement&&!o&&M.observe(e.contextElement),M.observe(t)}let k,O=o?W3(e):null;o&&$();function $(){const j=W3(e);O&&(j.x!==O.x||j.y!==O.y||j.width!==O.width||j.height!==O.height)&&n(),O=j,k=requestAnimationFrame($)}return n(),()=>{var j;w.forEach(G=>{y&&G.removeEventListener("scroll",n),u&&G.removeEventListener("resize",n)}),(j=M)==null||j.disconnect(),M=null,o&&cancelAnimationFrame(k)}}var OS=ke.exports.useLayoutEffect,uY=["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],cx=function(){};function hY(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function dY(e,t,n){var r=[n];if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&r.push("".concat(hY(e,s)));return r.filter(function(u){return u}).map(function(u){return String(u).trim()}).join(" ")}var q3=function(t){return bY(t)?t.filter(Boolean):Uv(t)==="object"&&t!==null?[t]:[]},Y3=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var n=Jd(t,uY);return ji({},n)};function ux(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function fY(e){return ux(e)?window.innerHeight:e.clientHeight}function Z3(e){return ux(e)?window.pageYOffset:e.scrollTop}function hx(e,t){if(ux(e)){window.scrollTo(0,t);return}e.scrollTop=t}function pY(e){var t=getComputedStyle(e),n=t.position==="absolute",r=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(n&&t.position==="static")&&r.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function mY(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function dx(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:cx,s=Z3(e),u=t-s,d=10,o=0;function y(){o+=d;var w=mY(o,s,u,n);hx(e,w),o<n?window.requestAnimationFrame(y):r(e)}y()}function X3(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),s=t.offsetHeight/3;r.bottom+s>n.bottom?hx(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):r.top-s<n.top&&hx(e,Math.max(t.offsetTop-s,0))}function gY(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function K3(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function _Y(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var J3=!1,yY={get passive(){return J3=!0}},fx=typeof window!="undefined"?window:{};fx.addEventListener&&fx.removeEventListener&&(fx.addEventListener("p",cx,yY),fx.removeEventListener("p",cx,!1));var vY=J3;function xY(e){return e!=null}function bY(e){return Array.isArray(e)}function px(e,t,n){return e?t:n}function Q3(e){return e}function ez(e){return e}var wY=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];var u=Object.entries(t).filter(function(d){var o=ml(d,1),y=o[0];return!r.includes(y)});return u.reduce(function(d,o){var y=ml(o,2),w=y[0],M=y[1];return d[w]=M,d},{})};function EY(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,s=e.placement,u=e.shouldScroll,d=e.isFixedPosition,o=e.theme,y=o.spacing,w=pY(n),M={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return M;var k=w.getBoundingClientRect(),O=k.height,$=n.getBoundingClientRect(),j=$.bottom,G=$.height,B=$.top,U=n.offsetParent.getBoundingClientRect(),Z=U.top,re=d?window.innerHeight:fY(w),ie=Z3(w),de=parseInt(getComputedStyle(n).marginBottom,10),xe=parseInt(getComputedStyle(n).marginTop,10),Ce=Z-xe,je=re-B,ze=Ce+ie,pt=O-ie-B,mt=j-re+ie+de,ot=ie+B-xe,kt=160;switch(s){case"auto":case"bottom":if(je>=G)return{placement:"bottom",maxHeight:t};if(pt>=G&&!d)return u&&dx(w,mt,kt),{placement:"bottom",maxHeight:t};if(!d&&pt>=r||d&&je>=r){u&&dx(w,mt,kt);var Ne=d?je-de:pt-de;return{placement:"bottom",maxHeight:Ne}}if(s==="auto"||d){var Ve=t,tt=d?Ce:ze;return tt>=r&&(Ve=Math.min(tt-de-y.controlHeight,t)),{placement:"top",maxHeight:Ve}}if(s==="bottom")return u&&hx(w,mt),{placement:"bottom",maxHeight:t};break;case"top":if(Ce>=G)return{placement:"top",maxHeight:t};if(ze>=G&&!d)return u&&dx(w,ot,kt),{placement:"top",maxHeight:t};if(!d&&ze>=r||d&&Ce>=r){var ct=t;return(!d&&ze>=r||d&&Ce>=r)&&(ct=d?Ce-xe:ze-xe),u&&dx(w,ot,kt),{placement:"top",maxHeight:ct}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return M}function SY(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var tz=function(t){return t==="auto"?"bottom":t},TY=function(t){var n,r=t.placement,s=t.theme,u=s.borderRadius,d=s.spacing,o=s.colors;return n={label:"menu"},Sa(n,SY(r),"100%"),Sa(n,"backgroundColor",o.neutral0),Sa(n,"borderRadius",u),Sa(n,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),Sa(n,"marginBottom",d.menuGutter),Sa(n,"marginTop",d.menuGutter),Sa(n,"position","absolute"),Sa(n,"width","100%"),Sa(n,"zIndex",1),n},nz=ke.exports.createContext(null),CY=function(t){var n=t.children,r=t.minMenuHeight,s=t.maxMenuHeight,u=t.menuPlacement,d=t.menuPosition,o=t.menuShouldScrollIntoView,y=t.theme,w=ke.exports.useContext(nz)||{},M=w.setPortalPlacement,k=ke.exports.useRef(null),O=ke.exports.useState(s),$=ml(O,2),j=$[0],G=$[1],B=ke.exports.useState(null),U=ml(B,2),Z=U[0],re=U[1];return OS(function(){var ie=k.current;if(!!ie){var de=d==="fixed",xe=o&&!de,Ce=EY({maxHeight:s,menuEl:ie,minHeight:r,placement:u,shouldScroll:xe,isFixedPosition:de,theme:y});G(Ce.maxHeight),re(Ce.placement),M==null||M(Ce.placement)}},[s,u,d,o,r,M,y]),n({ref:k,placerProps:ji(ji({},t),{},{placement:Z||tz(u),maxHeight:j})})},MY=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerRef,o=t.innerProps;return cn("div",ln({css:u("menu",t),className:s({menu:!0},r),ref:d},o),n)},kY=function(t){var n=t.maxHeight,r=t.theme.spacing.baseUnit;return{maxHeight:n,overflowY:"auto",paddingBottom:r,paddingTop:r,position:"relative",WebkitOverflowScrolling:"touch"}},AY=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps,o=t.innerRef,y=t.isMulti;return cn("div",ln({css:u("menuList",t),className:s({"menu-list":!0,"menu-list--is-multi":y},r),ref:o},d),n)},iz=function(t){var n=t.theme,r=n.spacing.baseUnit,s=n.colors;return{color:s.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px"),textAlign:"center"}},DY=iz,IY=iz,rz=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps;return cn("div",ln({css:u("noOptionsMessage",t),className:s({"menu-notice":!0,"menu-notice--no-options":!0},r)},d),n)};rz.defaultProps={children:"No options"};var oz=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps;return cn("div",ln({css:u("loadingMessage",t),className:s({"menu-notice":!0,"menu-notice--loading":!0},r)},d),n)};oz.defaultProps={children:"Loading..."};var PY=function(t){var n=t.rect,r=t.offset,s=t.position;return{left:n.left,position:s,top:r,width:n.width,zIndex:1}},OY=function(t){var n=t.appendTo,r=t.children,s=t.className,u=t.controlElement,d=t.cx,o=t.innerProps,y=t.menuPlacement,w=t.menuPosition,M=t.getStyles,k=ke.exports.useRef(null),O=ke.exports.useRef(null),$=ke.exports.useState(tz(y)),j=ml($,2),G=j[0],B=j[1],U=ke.exports.useMemo(function(){return{setPortalPlacement:B}},[]),Z=ke.exports.useState(null),re=ml(Z,2),ie=re[0],de=re[1],xe=ke.exports.useCallback(function(){if(!!u){var pt=gY(u),mt=w==="fixed"?0:window.pageYOffset,ot=pt[G]+mt;(ot!==(ie==null?void 0:ie.offset)||pt.left!==(ie==null?void 0:ie.rect.left)||pt.width!==(ie==null?void 0:ie.rect.width))&&de({offset:ot,rect:pt})}},[u,w,G,ie==null?void 0:ie.offset,ie==null?void 0:ie.rect.left,ie==null?void 0:ie.rect.width]);OS(function(){xe()},[xe]);var Ce=ke.exports.useCallback(function(){typeof O.current=="function"&&(O.current(),O.current=null),u&&k.current&&(O.current=cY(u,k.current,xe,{elementResize:"ResizeObserver"in window}))},[u,xe]);OS(function(){Ce()},[Ce]);var je=ke.exports.useCallback(function(pt){k.current=pt,Ce()},[Ce]);if(!n&&w!=="fixed"||!ie)return null;var ze=cn("div",ln({ref:je,css:M("menuPortal",{offset:ie.offset,position:w,rect:ie.rect}),className:d({"menu-portal":!0},s)},o),r);return cn(nz.Provider,{value:U},n?$p.exports.createPortal(ze,n):ze)},LY=function(t){var n=t.isDisabled,r=t.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},zY=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps,o=t.isDisabled,y=t.isRtl;return cn("div",ln({css:u("container",t),className:s({"--is-disabled":o,"--is-rtl":y},r)},d),n)},RY=function(t){var n=t.theme.spacing,r=t.isMulti,s=t.hasValue,u=t.selectProps.controlShouldRenderValue;return{alignItems:"center",display:r&&s&&u?"flex":"grid",flex:1,flexWrap:"wrap",padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},FY=function(t){var n=t.children,r=t.className,s=t.cx,u=t.innerProps,d=t.isMulti,o=t.getStyles,y=t.hasValue;return cn("div",ln({css:o("valueContainer",t),className:s({"value-container":!0,"value-container--is-multi":d,"value-container--has-value":y},r)},u),n)},BY=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},NY=function(t){var n=t.children,r=t.className,s=t.cx,u=t.innerProps,d=t.getStyles;return cn("div",ln({css:d("indicatorsContainer",t),className:s({indicators:!0},r)},u),n)},sz,VY=["size"],jY={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},az=function(t){var n=t.size,r=Jd(t,VY);return cn("svg",ln({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:jY},r))},LS=function(t){return cn(az,ln({size:20},t),cn("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},lz=function(t){return cn(az,ln({size:20},t),cn("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},cz=function(t){var n=t.isFocused,r=t.theme,s=r.spacing.baseUnit,u=r.colors;return{label:"indicatorContainer",color:n?u.neutral60:u.neutral20,display:"flex",padding:s*2,transition:"color 150ms",":hover":{color:n?u.neutral80:u.neutral40}}},UY=cz,$Y=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps;return cn("div",ln({css:u("dropdownIndicator",t),className:s({indicator:!0,"dropdown-indicator":!0},r)},d),n||cn(lz,null))},GY=cz,WY=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps;return cn("div",ln({css:u("clearIndicator",t),className:s({indicator:!0,"clear-indicator":!0},r)},d),n||cn(LS,null))},HY=function(t){var n=t.isDisabled,r=t.theme,s=r.spacing.baseUnit,u=r.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:n?u.neutral10:u.neutral20,marginBottom:s*2,marginTop:s*2,width:1}},qY=function(t){var n=t.className,r=t.cx,s=t.getStyles,u=t.innerProps;return cn("span",ln({},u,{css:s("indicatorSeparator",t),className:r({"indicator-separator":!0},n)}))},YY=Zq(sz||(sz=eY([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),ZY=function(t){var n=t.isFocused,r=t.size,s=t.theme,u=s.colors,d=s.spacing.baseUnit;return{label:"loadingIndicator",color:n?u.neutral60:u.neutral20,display:"flex",padding:d*2,transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"}},zS=function(t){var n=t.delay,r=t.offset;return cn("span",{css:PS({animation:"".concat(YY," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},uz=function(t){var n=t.className,r=t.cx,s=t.getStyles,u=t.innerProps,d=t.isRtl;return cn("div",ln({css:s("loadingIndicator",t),className:r({indicator:!0,"loading-indicator":!0},n)},u),cn(zS,{delay:0,offset:d}),cn(zS,{delay:160,offset:!0}),cn(zS,{delay:320,offset:!d}))};uz.defaultProps={size:4};var XY=function(t){var n=t.isDisabled,r=t.isFocused,s=t.theme,u=s.colors,d=s.borderRadius,o=s.spacing;return{label:"control",alignItems:"center",backgroundColor:n?u.neutral5:u.neutral0,borderColor:n?u.neutral10:r?u.primary:u.neutral20,borderRadius:d,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(u.primary):void 0,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:o.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:r?u.primary:u.neutral30}}},KY=function(t){var n=t.children,r=t.cx,s=t.getStyles,u=t.className,d=t.isDisabled,o=t.isFocused,y=t.innerRef,w=t.innerProps,M=t.menuIsOpen;return cn("div",ln({ref:y,css:s("control",t),className:r({control:!0,"control--is-disabled":d,"control--is-focused":o,"control--menu-is-open":M},u)},w),n)},JY=["data"],QY=function(t){var n=t.theme.spacing;return{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},eZ=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.Heading,o=t.headingProps,y=t.innerProps,w=t.label,M=t.theme,k=t.selectProps;return cn("div",ln({css:u("group",t),className:s({group:!0},r)},y),cn(d,ln({},o,{selectProps:k,theme:M,getStyles:u,cx:s}),w),cn("div",null,n))},tZ=function(t){var n=t.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:n.baseUnit*3,paddingRight:n.baseUnit*3,textTransform:"uppercase"}},nZ=function(t){var n=t.getStyles,r=t.cx,s=t.className,u=Y3(t);u.data;var d=Jd(u,JY);return cn("div",ln({css:n("groupHeading",t),className:r({"group-heading":!0},s)},d))},iZ=["innerRef","isDisabled","isHidden","inputClassName"],rZ=function(t){var n=t.isDisabled,r=t.value,s=t.theme,u=s.spacing,d=s.colors;return ji({margin:u.baseUnit/2,paddingBottom:u.baseUnit/2,paddingTop:u.baseUnit/2,visibility:n?"hidden":"visible",color:d.neutral80,transform:r?"translateZ(0)":""},oZ)},hz={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},oZ={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":ji({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},hz)},sZ=function(t){return ji({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},hz)},aZ=function(t){var n=t.className,r=t.cx,s=t.getStyles,u=t.value,d=Y3(t),o=d.innerRef,y=d.isDisabled,w=d.isHidden,M=d.inputClassName,k=Jd(d,iZ);return cn("div",{className:r({"input-container":!0},n),css:s("input",t),"data-value":u||""},cn("input",ln({className:r({input:!0},M),ref:o,style:sZ(w),disabled:y},k)))},lZ=function(t){var n=t.theme,r=n.spacing,s=n.borderRadius,u=n.colors;return{label:"multiValue",backgroundColor:u.neutral10,borderRadius:s/2,display:"flex",margin:r.baseUnit/2,minWidth:0}},cZ=function(t){var n=t.theme,r=n.borderRadius,s=n.colors,u=t.cropWithEllipsis;return{borderRadius:r/2,color:s.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:u||u===void 0?"ellipsis":void 0,whiteSpace:"nowrap"}},uZ=function(t){var n=t.theme,r=n.spacing,s=n.borderRadius,u=n.colors,d=t.isFocused;return{alignItems:"center",borderRadius:s/2,backgroundColor:d?u.dangerLight:void 0,display:"flex",paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:u.dangerLight,color:u.danger}}},dz=function(t){var n=t.children,r=t.innerProps;return cn("div",r,n)},hZ=dz,dZ=dz;function fZ(e){var t=e.children,n=e.innerProps;return cn("div",ln({role:"button"},n),t||cn(LS,{size:14}))}var pZ=function(t){var n=t.children,r=t.className,s=t.components,u=t.cx,d=t.data,o=t.getStyles,y=t.innerProps,w=t.isDisabled,M=t.removeProps,k=t.selectProps,O=s.Container,$=s.Label,j=s.Remove;return cn(Qq,null,function(G){var B=G.css,U=G.cx;return cn(O,{data:d,innerProps:ji({className:U(B(o("multiValue",t)),u({"multi-value":!0,"multi-value--is-disabled":w},r))},y),selectProps:k},cn($,{data:d,innerProps:{className:U(B(o("multiValueLabel",t)),u({"multi-value__label":!0},r))},selectProps:k},n),cn(j,{data:d,innerProps:ji({className:U(B(o("multiValueRemove",t)),u({"multi-value__remove":!0},r)),"aria-label":"Remove ".concat(n||"option")},M),selectProps:k}))})},mZ=function(t){var n=t.isDisabled,r=t.isFocused,s=t.isSelected,u=t.theme,d=u.spacing,o=u.colors;return{label:"option",backgroundColor:s?o.primary:r?o.primary25:"transparent",color:n?o.neutral20:s?o.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(d.baseUnit*2,"px ").concat(d.baseUnit*3,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:n?void 0:s?o.primary:o.primary50}}},gZ=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.isDisabled,o=t.isFocused,y=t.isSelected,w=t.innerRef,M=t.innerProps;return cn("div",ln({css:u("option",t),className:s({option:!0,"option--is-disabled":d,"option--is-focused":o,"option--is-selected":y},r),ref:w,"aria-disabled":d},M),n)},_Z=function(t){var n=t.theme,r=n.spacing,s=n.colors;return{label:"placeholder",color:s.neutral50,gridArea:"1 / 1 / 2 / 3",marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2}},yZ=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.innerProps;return cn("div",ln({css:u("placeholder",t),className:s({placeholder:!0},r)},d),n)},vZ=function(t){var n=t.isDisabled,r=t.theme,s=r.spacing,u=r.colors;return{label:"singleValue",color:n?u.neutral40:u.neutral80,gridArea:"1 / 1 / 2 / 3",marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},xZ=function(t){var n=t.children,r=t.className,s=t.cx,u=t.getStyles,d=t.isDisabled,o=t.innerProps;return cn("div",ln({css:u("singleValue",t),className:s({"single-value":!0,"single-value--is-disabled":d},r)},o),n)},bZ={ClearIndicator:WY,Control:KY,DropdownIndicator:$Y,DownChevron:lz,CrossIcon:LS,Group:eZ,GroupHeading:nZ,IndicatorsContainer:NY,IndicatorSeparator:qY,Input:aZ,LoadingIndicator:uz,Menu:MY,MenuList:AY,MenuPortal:OY,LoadingMessage:oz,NoOptionsMessage:rz,MultiValue:pZ,MultiValueContainer:hZ,MultiValueLabel:dZ,MultiValueRemove:fZ,Option:gZ,Placeholder:yZ,SelectContainer:zY,SingleValue:xZ,ValueContainer:FY},wZ=function(t){return ji(ji({},bZ),t.components)},fz=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function EZ(e,t){return!!(e===t||fz(e)&&fz(t))}function SZ(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!EZ(e[n],t[n]))return!1;return!0}function TZ(e,t){t===void 0&&(t=SZ);var n=null;function r(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var d=e.apply(this,s);return n={lastResult:d,lastArgs:s,lastThis:this},d}return r.clear=function(){n=null},r}var CZ={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},pz=function(t){return cn("span",ln({css:CZ},t))},MZ={guidance:function(t){var n=t.isSearchable,r=t.isMulti,s=t.isDisabled,u=t.tabSelectsValue,d=t.context;switch(d){case"menu":return"Use Up and Down to choose options".concat(s?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(u?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(t["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var n=t.action,r=t.label,s=r===void 0?"":r,u=t.labels,d=t.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(u.length>1?"s":""," ").concat(u.join(","),", selected.");case"select-option":return d?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var n=t.context,r=t.focused,s=t.options,u=t.label,d=u===void 0?"":u,o=t.selectValue,y=t.isDisabled,w=t.isSelected,M=function(j,G){return j&&j.length?"".concat(j.indexOf(G)+1," of ").concat(j.length):""};if(n==="value"&&o)return"value ".concat(d," focused, ").concat(M(o,r),".");if(n==="menu"){var k=y?" disabled":"",O="".concat(w?"selected":"focused").concat(k);return"option ".concat(d," ").concat(O,", ").concat(M(s,r),".")}return""},onFilter:function(t){var n=t.inputValue,r=t.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},kZ=function(t){var n=t.ariaSelection,r=t.focusedOption,s=t.focusedValue,u=t.focusableOptions,d=t.isFocused,o=t.selectValue,y=t.selectProps,w=t.id,M=y.ariaLiveMessages,k=y.getOptionLabel,O=y.inputValue,$=y.isMulti,j=y.isOptionDisabled,G=y.isSearchable,B=y.menuIsOpen,U=y.options,Z=y.screenReaderStatus,re=y.tabSelectsValue,ie=y["aria-label"],de=y["aria-live"],xe=ke.exports.useMemo(function(){return ji(ji({},MZ),M||{})},[M]),Ce=ke.exports.useMemo(function(){var Ne="";if(n&&xe.onChange){var Ve=n.option,tt=n.options,ct=n.removedValue,Ot=n.removedValues,Ut=n.value,un=function(Tn){return Array.isArray(Tn)?null:Tn},st=ct||Ve||un(Ut),at=st?k(st):"",xt=tt||Ot||void 0,Vt=xt?xt.map(k):[],Gt=ji({isDisabled:st&&j(st,o),label:at,labels:Vt},n);Ne=xe.onChange(Gt)}return Ne},[n,xe,j,o,k]),je=ke.exports.useMemo(function(){var Ne="",Ve=r||s,tt=!!(r&&o&&o.includes(r));if(Ve&&xe.onFocus){var ct={focused:Ve,label:k(Ve),isDisabled:j(Ve,o),isSelected:tt,options:u,context:Ve===r?"menu":"value",selectValue:o};Ne=xe.onFocus(ct)}return Ne},[r,s,k,j,xe,u,o]),ze=ke.exports.useMemo(function(){var Ne="";if(B&&U.length&&xe.onFilter){var Ve=Z({count:u.length});Ne=xe.onFilter({inputValue:O,resultsMessage:Ve})}return Ne},[u,O,B,xe,U,Z]),pt=ke.exports.useMemo(function(){var Ne="";if(xe.guidance){var Ve=s?"value":B?"menu":"input";Ne=xe.guidance({"aria-label":ie,context:Ve,isDisabled:r&&j(r,o),isMulti:$,isSearchable:G,tabSelectsValue:re})}return Ne},[ie,r,s,$,j,G,B,xe,o,re]),mt="".concat(je," ").concat(ze," ").concat(pt),ot=cn(ke.exports.Fragment,null,cn("span",{id:"aria-selection"},Ce),cn("span",{id:"aria-context"},mt)),kt=(n==null?void 0:n.action)==="initial-input-focus";return cn(ke.exports.Fragment,null,cn(pz,{id:w},kt&&ot),cn(pz,{"aria-live":de,"aria-atomic":"false","aria-relevant":"additions text"},d&&!kt&&ot))},RS=[{base:"A",letters:"A\u24B6\uFF21\xC0\xC1\xC2\u1EA6\u1EA4\u1EAA\u1EA8\xC3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xC4\u01DE\u1EA2\xC5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xC6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xC7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xC8\xC9\xCA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xCB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xCC\xCD\xCE\u0128\u012A\u012C\u0130\xCF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xD1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xD2\xD3\xD4\u1ED2\u1ED0\u1ED6\u1ED4\xD5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xD6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xD8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xD9\xDA\xDB\u0168\u1E78\u016A\u1E7A\u016C\xDC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xDD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xE0\xE1\xE2\u1EA7\u1EA5\u1EAB\u1EA9\xE3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xE4\u01DF\u1EA3\xE5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xE6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xE7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xE8\xE9\xEA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xEB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xEC\xED\xEE\u0129\u012B\u012D\xEF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xF1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xF2\xF3\xF4\u1ED3\u1ED1\u1ED7\u1ED5\xF5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xF6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xF8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xDF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xF9\xFA\xFB\u0169\u1E79\u016B\u1E7B\u016D\xFC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xFD\u0177\u1EF9\u0233\u1E8F\xFF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],AZ=new RegExp("["+RS.map(function(e){return e.letters}).join("")+"]","g"),mz={};for(var FS=0;FS<RS.length;FS++)for(var BS=RS[FS],NS=0;NS<BS.letters.length;NS++)mz[BS.letters[NS]]=BS.base;var gz=function(t){return t.replace(AZ,function(n){return mz[n]})},DZ=TZ(gz),_z=function(t){return t.replace(/^\s+|\s+$/g,"")},IZ=function(t){return"".concat(t.label," ").concat(t.value)},PZ=function(t){return function(n,r){if(n.data.__isNew__)return!0;var s=ji({ignoreCase:!0,ignoreAccents:!0,stringify:IZ,trim:!0,matchFrom:"any"},t),u=s.ignoreCase,d=s.ignoreAccents,o=s.stringify,y=s.trim,w=s.matchFrom,M=y?_z(r):r,k=y?_z(o(n)):o(n);return u&&(M=M.toLowerCase(),k=k.toLowerCase()),d&&(M=DZ(M),k=gz(k)),w==="start"?k.substr(0,M.length)===M:k.indexOf(M)>-1}},OZ=["innerRef"];function LZ(e){var t=e.innerRef,n=Jd(e,OZ),r=wY(n,"onExited","in","enter","exit","appear");return cn("input",ln({ref:t},r,{css:PS({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var zZ=function(t){t.preventDefault(),t.stopPropagation()};function RZ(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,s=e.onTopArrive,u=e.onTopLeave,d=ke.exports.useRef(!1),o=ke.exports.useRef(!1),y=ke.exports.useRef(0),w=ke.exports.useRef(null),M=ke.exports.useCallback(function(B,U){if(w.current!==null){var Z=w.current,re=Z.scrollTop,ie=Z.scrollHeight,de=Z.clientHeight,xe=w.current,Ce=U>0,je=ie-de-re,ze=!1;je>U&&d.current&&(r&&r(B),d.current=!1),Ce&&o.current&&(u&&u(B),o.current=!1),Ce&&U>je?(n&&!d.current&&n(B),xe.scrollTop=ie,ze=!0,d.current=!0):!Ce&&-U>re&&(s&&!o.current&&s(B),xe.scrollTop=0,ze=!0,o.current=!0),ze&&zZ(B)}},[n,r,s,u]),k=ke.exports.useCallback(function(B){M(B,B.deltaY)},[M]),O=ke.exports.useCallback(function(B){y.current=B.changedTouches[0].clientY},[]),$=ke.exports.useCallback(function(B){var U=y.current-B.changedTouches[0].clientY;M(B,U)},[M]),j=ke.exports.useCallback(function(B){if(!!B){var U=vY?{passive:!1}:!1;B.addEventListener("wheel",k,U),B.addEventListener("touchstart",O,U),B.addEventListener("touchmove",$,U)}},[$,O,k]),G=ke.exports.useCallback(function(B){!B||(B.removeEventListener("wheel",k,!1),B.removeEventListener("touchstart",O,!1),B.removeEventListener("touchmove",$,!1))},[$,O,k]);return ke.exports.useEffect(function(){if(!!t){var B=w.current;return j(B),function(){G(B)}}},[t,j,G]),function(B){w.current=B}}var yz=["boxSizing","height","overflow","paddingRight","position"],vz={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function xz(e){e.preventDefault()}function bz(e){e.stopPropagation()}function wz(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;e===0?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Ez(){return"ontouchstart"in window||navigator.maxTouchPoints}var Sz=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Lg=0,nf={capture:!1,passive:!1};function FZ(e){var t=e.isEnabled,n=e.accountForScrollbars,r=n===void 0?!0:n,s=ke.exports.useRef({}),u=ke.exports.useRef(null),d=ke.exports.useCallback(function(y){if(!!Sz){var w=document.body,M=w&&w.style;if(r&&yz.forEach(function(j){var G=M&&M[j];s.current[j]=G}),r&&Lg<1){var k=parseInt(s.current.paddingRight,10)||0,O=document.body?document.body.clientWidth:0,$=window.innerWidth-O+k||0;Object.keys(vz).forEach(function(j){var G=vz[j];M&&(M[j]=G)}),M&&(M.paddingRight="".concat($,"px"))}w&&Ez()&&(w.addEventListener("touchmove",xz,nf),y&&(y.addEventListener("touchstart",wz,nf),y.addEventListener("touchmove",bz,nf))),Lg+=1}},[r]),o=ke.exports.useCallback(function(y){if(!!Sz){var w=document.body,M=w&&w.style;Lg=Math.max(Lg-1,0),r&&Lg<1&&yz.forEach(function(k){var O=s.current[k];M&&(M[k]=O)}),w&&Ez()&&(w.removeEventListener("touchmove",xz,nf),y&&(y.removeEventListener("touchstart",wz,nf),y.removeEventListener("touchmove",bz,nf)))}},[r]);return ke.exports.useEffect(function(){if(!!t){var y=u.current;return d(y),function(){o(y)}}},[t,d,o]),function(y){u.current=y}}var BZ=function(){return document.activeElement&&document.activeElement.blur()},NZ={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function VZ(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,s=r===void 0?!0:r,u=e.onBottomArrive,d=e.onBottomLeave,o=e.onTopArrive,y=e.onTopLeave,w=RZ({isEnabled:s,onBottomArrive:u,onBottomLeave:d,onTopArrive:o,onTopLeave:y}),M=FZ({isEnabled:n}),k=function($){w($),M($)};return cn(ke.exports.Fragment,null,n&&cn("div",{onClick:BZ,css:NZ}),t(k))}var jZ={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},UZ=function(t){var n=t.name,r=t.onFocus;return cn("input",{required:!0,name:n,tabIndex:-1,onFocus:r,css:jZ,value:"",onChange:function(){}})},$Z=function(t){return t.label},GZ=function(t){return t.label},WZ=function(t){return t.value},HZ=function(t){return!!t.isDisabled},qZ={clearIndicator:GY,container:LY,control:XY,dropdownIndicator:UY,group:QY,groupHeading:tZ,indicatorsContainer:BY,indicatorSeparator:HY,input:rZ,loadingIndicator:ZY,loadingMessage:IY,menu:TY,menuList:kY,menuPortal:PY,multiValue:lZ,multiValueLabel:cZ,multiValueRemove:uZ,noOptionsMessage:DY,option:mZ,placeholder:_Z,singleValue:vZ,valueContainer:RY},YZ={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},ZZ=4,Tz=4,XZ=38,KZ=Tz*2,JZ={baseUnit:Tz,controlHeight:XZ,menuGutter:KZ},VS={borderRadius:ZZ,colors:YZ,spacing:JZ},QZ={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:K3(),captureMenuScroll:!K3(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:PZ(),formatGroupLabel:$Z,getOptionLabel:GZ,getOptionValue:WZ,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:HZ,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!_Y(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var n=t.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0};function Cz(e,t,n,r){var s=Iz(e,t,n),u=Pz(e,t,n),d=Dz(e,t),o=mx(e,t);return{type:"option",data:t,isDisabled:s,isSelected:u,label:d,value:o,index:r}}function Mz(e,t){return e.options.map(function(n,r){if("options"in n){var s=n.options.map(function(d,o){return Cz(e,d,t,o)}).filter(function(d){return Az(e,d)});return s.length>0?{type:"group",data:n,options:s,index:r}:void 0}var u=Cz(e,n,t,r);return Az(e,u)?u:void 0}).filter(xY)}function kz(e){return e.reduce(function(t,n){return n.type==="group"?t.push.apply(t,m3(n.options.map(function(r){return r.data}))):t.push(n.data),t},[])}function eX(e,t){return kz(Mz(e,t))}function Az(e,t){var n=e.inputValue,r=n===void 0?"":n,s=t.data,u=t.isSelected,d=t.label,o=t.value;return(!Lz(e)||!u)&&Oz(e,{label:d,value:o,data:s},r)}function tX(e,t){var n=e.focusedValue,r=e.selectValue,s=r.indexOf(n);if(s>-1){var u=t.indexOf(n);if(u>-1)return n;if(s<t.length)return t[s]}return null}function nX(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}var Dz=function(t,n){return t.getOptionLabel(n)},mx=function(t,n){return t.getOptionValue(n)};function Iz(e,t,n){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,n):!1}function Pz(e,t,n){if(n.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,n);var r=mx(e,t);return n.some(function(s){return mx(e,s)===r})}function Oz(e,t,n){return e.filterOption?e.filterOption(t,n):!0}var Lz=function(t){var n=t.hideSelectedOptions,r=t.isMulti;return n===void 0?r:n},iX=1,zz=function(e){ZH(n,e);var t=JH(n);function n(r){var s;if(qH(this,n),s=t.call(this,r),s.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.instancePrefix="",s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(o){s.controlRef=o},s.focusedOptionRef=null,s.getFocusedOptionRef=function(o){s.focusedOptionRef=o},s.menuListRef=null,s.getMenuListRef=function(o){s.menuListRef=o},s.inputRef=null,s.getInputRef=function(o){s.inputRef=o},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(o,y){var w=s.props,M=w.onChange,k=w.name;y.name=k,s.ariaOnChange(o,y),M(o,y)},s.setValue=function(o,y,w){var M=s.props,k=M.closeMenuOnSelect,O=M.isMulti,$=M.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:$}),k&&(s.setState({inputIsHiddenAfterUpdate:!O}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(o,{action:y,option:w})},s.selectOption=function(o){var y=s.props,w=y.blurInputOnSelect,M=y.isMulti,k=y.name,O=s.state.selectValue,$=M&&s.isOptionSelected(o,O),j=s.isOptionDisabled(o,O);if($){var G=s.getOptionValue(o);s.setValue(ez(O.filter(function(B){return s.getOptionValue(B)!==G})),"deselect-option",o)}else if(!j)M?s.setValue(ez([].concat(m3(O),[o])),"select-option",o):s.setValue(Q3(o),"select-option");else{s.ariaOnChange(Q3(o),{action:"select-option",option:o,name:k});return}w&&s.blurInput()},s.removeValue=function(o){var y=s.props.isMulti,w=s.state.selectValue,M=s.getOptionValue(o),k=w.filter(function($){return s.getOptionValue($)!==M}),O=px(y,k,k[0]||null);s.onChange(O,{action:"remove-value",removedValue:o}),s.focusInput()},s.clearValue=function(){var o=s.state.selectValue;s.onChange(px(s.props.isMulti,[],null),{action:"clear",removedValues:o})},s.popValue=function(){var o=s.props.isMulti,y=s.state.selectValue,w=y[y.length-1],M=y.slice(0,y.length-1),k=px(o,M,M[0]||null);s.onChange(k,{action:"pop-value",removedValue:w})},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var o=arguments.length,y=new Array(o),w=0;w<o;w++)y[w]=arguments[w];return dY.apply(void 0,[s.props.classNamePrefix].concat(y))},s.getOptionLabel=function(o){return Dz(s.props,o)},s.getOptionValue=function(o){return mx(s.props,o)},s.getStyles=function(o,y){var w=qZ[o](y);w.boxSizing="border-box";var M=s.props.styles[o];return M?M(w,y):w},s.getElementId=function(o){return"".concat(s.instancePrefix,"-").concat(o)},s.getComponents=function(){return wZ(s.props)},s.buildCategorizedOptions=function(){return Mz(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return kz(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(o,y){s.setState({ariaSelection:ji({value:o},y)})},s.onMenuMouseDown=function(o){o.button===0&&(o.stopPropagation(),o.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(o){s.blockOptionHover=!1},s.onControlMouseDown=function(o){if(!o.defaultPrevented){var y=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&s.onMenuClose():y&&s.openMenu("first"):(y&&(s.openAfterFocus=!0),s.focusInput()),o.target.tagName!=="INPUT"&&o.target.tagName!=="TEXTAREA"&&o.preventDefault()}},s.onDropdownIndicatorMouseDown=function(o){if(!(o&&o.type==="mousedown"&&o.button!==0)&&!s.props.isDisabled){var y=s.props,w=y.isMulti,M=y.menuIsOpen;s.focusInput(),M?(s.setState({inputIsHiddenAfterUpdate:!w}),s.onMenuClose()):s.openMenu("first"),o.preventDefault()}},s.onClearIndicatorMouseDown=function(o){o&&o.type==="mousedown"&&o.button!==0||(s.clearValue(),o.preventDefault(),s.openAfterFocus=!1,o.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(o){typeof s.props.closeMenuOnScroll=="boolean"?o.target instanceof HTMLElement&&ux(o.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(o)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(o){var y=o.touches,w=y&&y.item(0);!w||(s.initialTouchX=w.clientX,s.initialTouchY=w.clientY,s.userIsDragging=!1)},s.onTouchMove=function(o){var y=o.touches,w=y&&y.item(0);if(!!w){var M=Math.abs(w.clientX-s.initialTouchX),k=Math.abs(w.clientY-s.initialTouchY),O=5;s.userIsDragging=M>O||k>O}},s.onTouchEnd=function(o){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(o.target)&&s.menuListRef&&!s.menuListRef.contains(o.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(o){s.userIsDragging||s.onControlMouseDown(o)},s.onClearIndicatorTouchEnd=function(o){s.userIsDragging||s.onClearIndicatorMouseDown(o)},s.onDropdownIndicatorTouchEnd=function(o){s.userIsDragging||s.onDropdownIndicatorMouseDown(o)},s.handleInputChange=function(o){var y=s.props.inputValue,w=o.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(w,{action:"input-change",prevInputValue:y}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(o){s.props.onFocus&&s.props.onFocus(o),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(o){var y=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(o),s.onInputChange("",{action:"input-blur",prevInputValue:y}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(o){s.blockOptionHover||s.state.focusedOption===o||s.setState({focusedOption:o})},s.shouldHideSelectedOptions=function(){return Lz(s.props)},s.onValueInputFocus=function(o){o.preventDefault(),o.stopPropagation(),s.focus()},s.onKeyDown=function(o){var y=s.props,w=y.isMulti,M=y.backspaceRemovesValue,k=y.escapeClearsValue,O=y.inputValue,$=y.isClearable,j=y.isDisabled,G=y.menuIsOpen,B=y.onKeyDown,U=y.tabSelectsValue,Z=y.openMenuOnFocus,re=s.state,ie=re.focusedOption,de=re.focusedValue,xe=re.selectValue;if(!j&&!(typeof B=="function"&&(B(o),o.defaultPrevented))){switch(s.blockOptionHover=!0,o.key){case"ArrowLeft":if(!w||O)return;s.focusValue("previous");break;case"ArrowRight":if(!w||O)return;s.focusValue("next");break;case"Delete":case"Backspace":if(O)return;if(de)s.removeValue(de);else{if(!M)return;w?s.popValue():$&&s.clearValue()}break;case"Tab":if(s.isComposing||o.shiftKey||!G||!U||!ie||Z&&s.isOptionSelected(ie,xe))return;s.selectOption(ie);break;case"Enter":if(o.keyCode===229)break;if(G){if(!ie||s.isComposing)return;s.selectOption(ie);break}return;case"Escape":G?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:O}),s.onMenuClose()):$&&k&&s.clearValue();break;case" ":if(O)return;if(!G){s.openMenu("first");break}if(!ie)return;s.selectOption(ie);break;case"ArrowUp":G?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":G?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!G)return;s.focusOption("pageup");break;case"PageDown":if(!G)return;s.focusOption("pagedown");break;case"Home":if(!G)return;s.focusOption("first");break;case"End":if(!G)return;s.focusOption("last");break;default:return}o.preventDefault()}},s.instancePrefix="react-select-"+(s.props.instanceId||++iX),s.state.selectValue=q3(r.value),r.menuIsOpen&&s.state.selectValue.length){var u=s.buildFocusableOptions(),d=u.indexOf(s.state.selectValue[0]);s.state.focusedOption=u[d]}return s}return YH(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&X3(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(s){var u=this.props,d=u.isDisabled,o=u.menuIsOpen,y=this.state.isFocused;(y&&!d&&s.isDisabled||y&&o&&!s.menuIsOpen)&&this.focusInput(),y&&d&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!y&&!d&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(X3(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,u){this.props.onInputChange(s,u)}},{key:"focusInput",value:function(){!this.inputRef||this.inputRef.focus()}},{key:"blurInput",value:function(){!this.inputRef||this.inputRef.blur()}},{key:"openMenu",value:function(s){var u=this,d=this.state,o=d.selectValue,y=d.isFocused,w=this.buildFocusableOptions(),M=s==="first"?0:w.length-1;if(!this.props.isMulti){var k=w.indexOf(o[0]);k>-1&&(M=k)}this.scrollToFocusedOptionOnUpdate=!(y&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:w[M]},function(){return u.onMenuOpen()})}},{key:"focusValue",value:function(s){var u=this.state,d=u.selectValue,o=u.focusedValue;if(!!this.props.isMulti){this.setState({focusedOption:null});var y=d.indexOf(o);o||(y=-1);var w=d.length-1,M=-1;if(!!d.length){switch(s){case"previous":y===0?M=0:y===-1?M=w:M=y-1;break;case"next":y>-1&&y<w&&(M=y+1);break}this.setState({inputIsHidden:M!==-1,focusedValue:d[M]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",u=this.props.pageSize,d=this.state.focusedOption,o=this.getFocusableOptions();if(!!o.length){var y=0,w=o.indexOf(d);d||(w=-1),s==="up"?y=w>0?w-1:o.length-1:s==="down"?y=(w+1)%o.length:s==="pageup"?(y=w-u,y<0&&(y=0)):s==="pagedown"?(y=w+u,y>o.length-1&&(y=o.length-1)):s==="last"&&(y=o.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:o[y],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(VS):ji(ji({},VS),this.props.theme):VS}},{key:"getCommonProps",value:function(){var s=this.clearValue,u=this.cx,d=this.getStyles,o=this.getValue,y=this.selectOption,w=this.setValue,M=this.props,k=M.isMulti,O=M.isRtl,$=M.options,j=this.hasValue();return{clearValue:s,cx:u,getStyles:d,getValue:o,hasValue:j,isMulti:k,isRtl:O,options:$,selectOption:y,selectProps:M,setValue:w,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,u=s.isClearable,d=s.isMulti;return u===void 0?d:u}},{key:"isOptionDisabled",value:function(s,u){return Iz(this.props,s,u)}},{key:"isOptionSelected",value:function(s,u){return Pz(this.props,s,u)}},{key:"filterOption",value:function(s,u){return Oz(this.props,s,u)}},{key:"formatOptionLabel",value:function(s,u){if(typeof this.props.formatOptionLabel=="function"){var d=this.props.inputValue,o=this.state.selectValue;return this.props.formatOptionLabel(s,{context:u,inputValue:d,selectValue:o})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,u=s.isDisabled,d=s.isSearchable,o=s.inputId,y=s.inputValue,w=s.tabIndex,M=s.form,k=s.menuIsOpen,O=s.required,$=this.getComponents(),j=$.Input,G=this.state,B=G.inputIsHidden,U=G.ariaSelection,Z=this.commonProps,re=o||this.getElementId("input"),ie=ji(ji(ji({"aria-autocomplete":"list","aria-expanded":k,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":O,role:"combobox"},k&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(U==null?void 0:U.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?ke.exports.createElement(j,ln({},Z,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:re,innerRef:this.getInputRef,isDisabled:u,isHidden:B,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:w,form:M,type:"text",value:y},ie)):ke.exports.createElement(LZ,ln({id:re,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:cx,onFocus:this.onInputFocus,disabled:u,tabIndex:w,inputMode:"none",form:M,value:""},ie))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,u=this.getComponents(),d=u.MultiValue,o=u.MultiValueContainer,y=u.MultiValueLabel,w=u.MultiValueRemove,M=u.SingleValue,k=u.Placeholder,O=this.commonProps,$=this.props,j=$.controlShouldRenderValue,G=$.isDisabled,B=$.isMulti,U=$.inputValue,Z=$.placeholder,re=this.state,ie=re.selectValue,de=re.focusedValue,xe=re.isFocused;if(!this.hasValue()||!j)return U?null:ke.exports.createElement(k,ln({},O,{key:"placeholder",isDisabled:G,isFocused:xe,innerProps:{id:this.getElementId("placeholder")}}),Z);if(B)return ie.map(function(je,ze){var pt=je===de,mt="".concat(s.getOptionLabel(je),"-").concat(s.getOptionValue(je));return ke.exports.createElement(d,ln({},O,{components:{Container:o,Label:y,Remove:w},isFocused:pt,isDisabled:G,key:mt,index:ze,removeProps:{onClick:function(){return s.removeValue(je)},onTouchEnd:function(){return s.removeValue(je)},onMouseDown:function(kt){kt.preventDefault()}},data:je}),s.formatOptionLabel(je,"value"))});if(U)return null;var Ce=ie[0];return ke.exports.createElement(M,ln({},O,{data:Ce,isDisabled:G}),this.formatOptionLabel(Ce,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),u=s.ClearIndicator,d=this.commonProps,o=this.props,y=o.isDisabled,w=o.isLoading,M=this.state.isFocused;if(!this.isClearable()||!u||y||!this.hasValue()||w)return null;var k={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return ke.exports.createElement(u,ln({},d,{innerProps:k,isFocused:M}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),u=s.LoadingIndicator,d=this.commonProps,o=this.props,y=o.isDisabled,w=o.isLoading,M=this.state.isFocused;if(!u||!w)return null;var k={"aria-hidden":"true"};return ke.exports.createElement(u,ln({},d,{innerProps:k,isDisabled:y,isFocused:M}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),u=s.DropdownIndicator,d=s.IndicatorSeparator;if(!u||!d)return null;var o=this.commonProps,y=this.props.isDisabled,w=this.state.isFocused;return ke.exports.createElement(d,ln({},o,{isDisabled:y,isFocused:w}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),u=s.DropdownIndicator;if(!u)return null;var d=this.commonProps,o=this.props.isDisabled,y=this.state.isFocused,w={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return ke.exports.createElement(u,ln({},d,{innerProps:w,isDisabled:o,isFocused:y}))}},{key:"renderMenu",value:function(){var s=this,u=this.getComponents(),d=u.Group,o=u.GroupHeading,y=u.Menu,w=u.MenuList,M=u.MenuPortal,k=u.LoadingMessage,O=u.NoOptionsMessage,$=u.Option,j=this.commonProps,G=this.state.focusedOption,B=this.props,U=B.captureMenuScroll,Z=B.inputValue,re=B.isLoading,ie=B.loadingMessage,de=B.minMenuHeight,xe=B.maxMenuHeight,Ce=B.menuIsOpen,je=B.menuPlacement,ze=B.menuPosition,pt=B.menuPortalTarget,mt=B.menuShouldBlockScroll,ot=B.menuShouldScrollIntoView,kt=B.noOptionsMessage,Ne=B.onMenuScrollToTop,Ve=B.onMenuScrollToBottom;if(!Ce)return null;var tt=function(xt,Vt){var Gt=xt.type,hn=xt.data,Tn=xt.isDisabled,ci=xt.isSelected,Oi=xt.label,Ie=xt.value,We=G===hn,qe=Tn?void 0:function(){return s.onOptionHover(hn)},Lt=Tn?void 0:function(){return s.selectOption(hn)},gt="".concat(s.getElementId("option"),"-").concat(Vt),_t={id:gt,onClick:Lt,onMouseMove:qe,onMouseOver:qe,tabIndex:-1};return ke.exports.createElement($,ln({},j,{innerProps:_t,data:hn,isDisabled:Tn,isSelected:ci,key:gt,label:Oi,type:Gt,value:Ie,isFocused:We,innerRef:We?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(xt.data,"menu"))},ct;if(this.hasOptions())ct=this.getCategorizedOptions().map(function(at){if(at.type==="group"){var xt=at.data,Vt=at.options,Gt=at.index,hn="".concat(s.getElementId("group"),"-").concat(Gt),Tn="".concat(hn,"-heading");return ke.exports.createElement(d,ln({},j,{key:hn,data:xt,options:Vt,Heading:o,headingProps:{id:Tn,data:at.data},label:s.formatGroupLabel(at.data)}),at.options.map(function(ci){return tt(ci,"".concat(Gt,"-").concat(ci.index))}))}else if(at.type==="option")return tt(at,"".concat(at.index))});else if(re){var Ot=ie({inputValue:Z});if(Ot===null)return null;ct=ke.exports.createElement(k,j,Ot)}else{var Ut=kt({inputValue:Z});if(Ut===null)return null;ct=ke.exports.createElement(O,j,Ut)}var un={minMenuHeight:de,maxMenuHeight:xe,menuPlacement:je,menuPosition:ze,menuShouldScrollIntoView:ot},st=ke.exports.createElement(CY,ln({},j,un),function(at){var xt=at.ref,Vt=at.placerProps,Gt=Vt.placement,hn=Vt.maxHeight;return ke.exports.createElement(y,ln({},j,un,{innerRef:xt,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove,id:s.getElementId("listbox")},isLoading:re,placement:Gt}),ke.exports.createElement(VZ,{captureEnabled:U,onTopArrive:Ne,onBottomArrive:Ve,lockEnabled:mt},function(Tn){return ke.exports.createElement(w,ln({},j,{innerRef:function(Oi){s.getMenuListRef(Oi),Tn(Oi)},isLoading:re,maxHeight:hn,focusedOption:G}),ct)}))});return pt||ze==="fixed"?ke.exports.createElement(M,ln({},j,{appendTo:pt,controlElement:this.controlRef,menuPlacement:je,menuPosition:ze}),st):st}},{key:"renderFormField",value:function(){var s=this,u=this.props,d=u.delimiter,o=u.isDisabled,y=u.isMulti,w=u.name,M=u.required,k=this.state.selectValue;if(!(!w||o)){if(M&&!this.hasValue())return ke.exports.createElement(UZ,{name:w,onFocus:this.onValueInputFocus});if(y)if(d){var O=k.map(function(G){return s.getOptionValue(G)}).join(d);return ke.exports.createElement("input",{name:w,type:"hidden",value:O})}else{var $=k.length>0?k.map(function(G,B){return ke.exports.createElement("input",{key:"i-".concat(B),name:w,type:"hidden",value:s.getOptionValue(G)})}):ke.exports.createElement("input",{name:w,type:"hidden",value:""});return ke.exports.createElement("div",null,$)}else{var j=k[0]?this.getOptionValue(k[0]):"";return ke.exports.createElement("input",{name:w,type:"hidden",value:j})}}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,u=this.state,d=u.ariaSelection,o=u.focusedOption,y=u.focusedValue,w=u.isFocused,M=u.selectValue,k=this.getFocusableOptions();return ke.exports.createElement(kZ,ln({},s,{id:this.getElementId("live-region"),ariaSelection:d,focusedOption:o,focusedValue:y,isFocused:w,selectValue:M,focusableOptions:k}))}},{key:"render",value:function(){var s=this.getComponents(),u=s.Control,d=s.IndicatorsContainer,o=s.SelectContainer,y=s.ValueContainer,w=this.props,M=w.className,k=w.id,O=w.isDisabled,$=w.menuIsOpen,j=this.state.isFocused,G=this.commonProps=this.getCommonProps();return ke.exports.createElement(o,ln({},G,{className:M,innerProps:{id:k,onKeyDown:this.onKeyDown},isDisabled:O,isFocused:j}),this.renderLiveRegion(),ke.exports.createElement(u,ln({},G,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:O,isFocused:j,menuIsOpen:$}),ke.exports.createElement(y,ln({},G,{isDisabled:O}),this.renderPlaceholderOrValue(),this.renderInput()),ke.exports.createElement(d,ln({},G,{isDisabled:O}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,u){var d=u.prevProps,o=u.clearFocusValueOnUpdate,y=u.inputIsHiddenAfterUpdate,w=u.ariaSelection,M=u.isFocused,k=u.prevWasFocused,O=s.options,$=s.value,j=s.menuIsOpen,G=s.inputValue,B=s.isMulti,U=q3($),Z={};if(d&&($!==d.value||O!==d.options||j!==d.menuIsOpen||G!==d.inputValue)){var re=j?eX(s,U):[],ie=o?tX(u,U):null,de=nX(u,re);Z={selectValue:U,focusedOption:de,focusedValue:ie,clearFocusValueOnUpdate:!1}}var xe=y!=null&&s!==d?{inputIsHidden:y,inputIsHiddenAfterUpdate:void 0}:{},Ce=w,je=M&&k;return M&&!je&&(Ce={value:px(B,U,U[0]||null),options:U,action:"initial-input-focus"},je=!k),(w==null?void 0:w.action)==="initial-input-focus"&&(Ce=null),ji(ji(ji({},Z),xe),{},{prevProps:s,ariaSelection:Ce,prevWasFocused:je})}}]),n}(ke.exports.Component);zz.defaultProps=QZ;var rX=ke.exports.forwardRef(function(e,t){var n=HH(e);return ke.exports.createElement(zz,ln({ref:t},n))}),KQ=rX;function rf(e,t,n,r){function s(u){return u instanceof n?u:new n(function(d){d(u)})}return new(n||(n=Promise))(function(u,d){function o(M){try{w(r.next(M))}catch(k){d(k)}}function y(M){try{w(r.throw(M))}catch(k){d(k)}}function w(M){M.done?u(M.value):s(M.value).then(o,y)}w((r=r.apply(e,t||[])).next())})}function of(e,t){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},r,s,u,d;return d={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function o(w){return function(M){return y([w,M])}}function y(w){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(u=w[0]&2?s.return:w[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,w[1])).done)return u;switch(s=0,u&&(w=[w[0]&2,u.value]),w[0]){case 0:case 1:u=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,s=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!u||w[1]>u[0]&&w[1]<u[3])){n.label=w[1];break}if(w[0]===6&&n.label<u[1]){n.label=u[1],u=w;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(w);break}u[2]&&n.ops.pop(),n.trys.pop();continue}w=t.call(e,n)}catch(M){w=[6,M],s=0}finally{r=u=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}function Rz(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,u=[],d;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)u.push(s.value)}catch(o){d={error:o}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(d)throw d.error}}return u}function Fz(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,u;r<s;r++)(u||!(r in t))&&(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return e.concat(u||Array.prototype.slice.call(t))}var oX=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function zg(e,t){var n=sX(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function sX(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),s=oX.get(r);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}var aX=[".DS_Store","Thumbs.db"];function lX(e){return rf(this,void 0,void 0,function(){return of(this,function(t){return gx(e)&&cX(e.dataTransfer)?[2,fX(e.dataTransfer,e.type)]:uX(e)?[2,hX(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,dX(e)]:[2,[]]})})}function cX(e){return gx(e)}function uX(e){return gx(e)&&gx(e.target)}function gx(e){return typeof e=="object"&&e!==null}function hX(e){return jS(e.target.files).map(function(t){return zg(t)})}function dX(e){return rf(this,void 0,void 0,function(){var t;return of(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return zg(r)})]}})})}function fX(e,t){return rf(this,void 0,void 0,function(){var n,r;return of(this,function(s){switch(s.label){case 0:return e.items?(n=jS(e.items).filter(function(u){return u.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(pX))]):[3,2];case 1:return r=s.sent(),[2,Bz(Nz(r))];case 2:return[2,Bz(jS(e.files).map(function(u){return zg(u)}))]}})})}function Bz(e){return e.filter(function(t){return aX.indexOf(t.name)===-1})}function jS(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function pX(e){if(typeof e.webkitGetAsEntry!="function")return Vz(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?jz(t):Vz(e)}function Nz(e){return e.reduce(function(t,n){return Fz(Fz([],Rz(t),!1),Rz(Array.isArray(n)?Nz(n):[n]),!1)},[])}function Vz(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=zg(t);return Promise.resolve(n)}function mX(e){return rf(this,void 0,void 0,function(){return of(this,function(t){return[2,e.isDirectory?jz(e):gX(e)]})})}function jz(e){var t=e.createReader();return new Promise(function(n,r){var s=[];function u(){var d=this;t.readEntries(function(o){return rf(d,void 0,void 0,function(){var y,w,M;return of(this,function(k){switch(k.label){case 0:if(o.length)return[3,5];k.label=1;case 1:return k.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return y=k.sent(),n(y),[3,4];case 3:return w=k.sent(),r(w),[3,4];case 4:return[3,6];case 5:M=Promise.all(o.map(mX)),s.push(M),u(),k.label=6;case 6:return[2]}})})},function(o){r(o)})}u()})}function gX(e){return rf(this,void 0,void 0,function(){return of(this,function(t){return[2,new Promise(function(n,r){e.file(function(s){var u=zg(s,e.fullPath);n(u)},function(s){r(s)})})]})})}var _X=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",s=(e.type||"").toLowerCase(),u=s.replace(/\/.*$/,"");return n.some(function(d){var o=d.trim().toLowerCase();return o.charAt(0)==="."?r.toLowerCase().endsWith(o):o.endsWith("/*")?u===o.replace(/\/.*$/,""):s===o})}return!0};function Uz(e){return xX(e)||vX(e)||Hz(e)||yX()}function yX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vX(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xX(e){if(Array.isArray(e))return US(e)}function $z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Gz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$z(Object(n),!0).forEach(function(r){Wz(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$z(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rg(e,t){return EX(e)||wX(e,t)||Hz(e,t)||bX()}function bX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hz(e,t){if(!!e){if(typeof e=="string")return US(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return US(e,t)}}function US(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wX(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,u=!1,d,o;try{for(n=n.call(e);!(s=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));s=!0);}catch(y){u=!0,o=y}finally{try{!s&&n.return!=null&&n.return()}finally{if(u)throw o}}return r}}function EX(e){if(Array.isArray(e))return e}var SX="file-invalid-type",TX="file-too-large",CX="file-too-small",MX="too-many-files",kX=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:SX,message:"File type must be ".concat(n)}},qz=function(t){return{code:TX,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Yz=function(t){return{code:CX,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},AX={code:MX,message:"Too many files"};function Zz(e,t){var n=e.type==="application/x-moz-file"||_X(e,t);return[n,n?null:kX(t)]}function Xz(e,t,n){if(qu(e.size))if(qu(t)&&qu(n)){if(e.size>n)return[!1,qz(n)];if(e.size<t)return[!1,Yz(t)]}else{if(qu(t)&&e.size<t)return[!1,Yz(t)];if(qu(n)&&e.size>n)return[!1,qz(n)]}return[!0,null]}function qu(e){return e!=null}function DX(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,u=e.multiple,d=e.maxFiles,o=e.validator;return!u&&t.length>1||u&&d>=1&&t.length>d?!1:t.every(function(y){var w=Zz(y,n),M=Rg(w,1),k=M[0],O=Xz(y,r,s),$=Rg(O,1),j=$[0],G=o?o(y):null;return k&&j&&!G})}function _x(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function yx(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Kz(e){e.preventDefault()}function IX(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function PX(e){return e.indexOf("Edge/")!==-1}function OX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return IX(e)||PX(e)}function ka(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var s=arguments.length,u=new Array(s>1?s-1:0),d=1;d<s;d++)u[d-1]=arguments[d];return t.some(function(o){return!_x(r)&&o&&o.apply(void 0,[r].concat(u)),_x(r)})}}function LX(){return"showOpenFilePicker"in window}function zX(e){if(qu(e)){var t=Object.entries(e).filter(function(n){var r=Rg(n,2),s=r[0],u=r[1],d=!0;return Jz(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),d=!1),(!Array.isArray(u)||!u.every(Qz))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),d=!1),d}).reduce(function(n,r){var s=Rg(r,2),u=s[0],d=s[1];return Gz(Gz({},n),{},Wz({},u,d))},{});return[{accept:t}]}return e}function RX(e){if(qu(e))return Object.entries(e).reduce(function(t,n){var r=Rg(n,2),s=r[0],u=r[1];return[].concat(Uz(t),[s],Uz(u))},[]).filter(function(t){return Jz(t)||Qz(t)}).join(",")}function FX(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function BX(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Jz(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function Qz(e){return/^.*\.[\w]+$/.test(e)}var NX=["children"],VX=["open"],jX=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],UX=["refKey","onChange","onClick"];function $X(e){return HX(e)||WX(e)||eR(e)||GX()}function GX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WX(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function HX(e){if(Array.isArray(e))return GS(e)}function $S(e,t){return ZX(e)||YX(e,t)||eR(e,t)||qX()}function qX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eR(e,t){if(!!e){if(typeof e=="string")return GS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GS(e,t)}}function GS(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YX(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,u=!1,d,o;try{for(n=n.call(e);!(s=(d=n.next()).done)&&(r.push(d.value),!(t&&r.length===t));s=!0);}catch(y){u=!0,o=y}finally{try{!s&&n.return!=null&&n.return()}finally{if(u)throw o}}return r}}function ZX(e){if(Array.isArray(e))return e}function tR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(n),!0).forEach(function(r){WS(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function WS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vx(e,t){if(e==null)return{};var n=XX(e,t),r,s;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(s=0;s<u.length;s++)r=u[s],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function XX(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,u;for(u=0;u<r.length;u++)s=r[u],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var HS=ke.exports.forwardRef(function(e,t){var n=e.children,r=vx(e,NX),s=KX(r),u=s.open,d=vx(s,VX);return ke.exports.useImperativeHandle(t,function(){return{open:u}},[u]),MN(kN,{children:n(Zi(Zi({},d),{},{open:u}))})});HS.displayName="Dropzone";var nR={disabled:!1,getFilesFromEvent:lX,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};HS.defaultProps=nR;HS.propTypes={children:Ci.func,accept:Ci.objectOf(Ci.arrayOf(Ci.string)),multiple:Ci.bool,preventDropOnDocument:Ci.bool,noClick:Ci.bool,noKeyboard:Ci.bool,noDrag:Ci.bool,noDragEventsBubbling:Ci.bool,minSize:Ci.number,maxSize:Ci.number,maxFiles:Ci.number,disabled:Ci.bool,getFilesFromEvent:Ci.func,onFileDialogCancel:Ci.func,onFileDialogOpen:Ci.func,useFsAccessApi:Ci.bool,autoFocus:Ci.bool,onDragEnter:Ci.func,onDragLeave:Ci.func,onDragOver:Ci.func,onDrop:Ci.func,onDropAccepted:Ci.func,onDropRejected:Ci.func,onError:Ci.func,validator:Ci.func};var qS={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function KX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=Zi(Zi({},nR),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,u=t.maxSize,d=t.minSize,o=t.multiple,y=t.maxFiles,w=t.onDragEnter,M=t.onDragLeave,k=t.onDragOver,O=t.onDrop,$=t.onDropAccepted,j=t.onDropRejected,G=t.onFileDialogCancel,B=t.onFileDialogOpen,U=t.useFsAccessApi,Z=t.autoFocus,re=t.preventDropOnDocument,ie=t.noClick,de=t.noKeyboard,xe=t.noDrag,Ce=t.noDragEventsBubbling,je=t.onError,ze=t.validator,pt=ke.exports.useMemo(function(){return RX(n)},[n]),mt=ke.exports.useMemo(function(){return zX(n)},[n]),ot=ke.exports.useMemo(function(){return typeof B=="function"?B:iR},[B]),kt=ke.exports.useMemo(function(){return typeof G=="function"?G:iR},[G]),Ne=ke.exports.useRef(null),Ve=ke.exports.useRef(null),tt=ke.exports.useReducer(JX,qS),ct=$S(tt,2),Ot=ct[0],Ut=ct[1],un=Ot.isFocused,st=Ot.isFileDialogActive,at=ke.exports.useRef(typeof window!="undefined"&&window.isSecureContext&&U&&LX()),xt=function(){!at.current&&st&&setTimeout(function(){if(Ve.current){var tn=Ve.current.files;tn.length||(Ut({type:"closeDialog"}),kt())}},300)};ke.exports.useEffect(function(){return window.addEventListener("focus",xt,!1),function(){window.removeEventListener("focus",xt,!1)}},[Ve,st,kt,at]);var Vt=ke.exports.useRef([]),Gt=function(tn){Ne.current&&Ne.current.contains(tn.target)||(tn.preventDefault(),Vt.current=[])};ke.exports.useEffect(function(){return re&&(document.addEventListener("dragover",Kz,!1),document.addEventListener("drop",Gt,!1)),function(){re&&(document.removeEventListener("dragover",Kz),document.removeEventListener("drop",Gt))}},[Ne,re]),ke.exports.useEffect(function(){return!r&&Z&&Ne.current&&Ne.current.focus(),function(){}},[Ne,Z,r]);var hn=ke.exports.useCallback(function(Mt){je?je(Mt):console.error(Mt)},[je]),Tn=ke.exports.useCallback(function(Mt){Mt.preventDefault(),Mt.persist(),dn(Mt),Vt.current=[].concat($X(Vt.current),[Mt.target]),yx(Mt)&&Promise.resolve(s(Mt)).then(function(tn){if(!(_x(Mt)&&!Ce)){var ti=tn.length,bi=ti>0&&DX({files:tn,accept:pt,minSize:d,maxSize:u,multiple:o,maxFiles:y,validator:ze}),Zn=ti>0&&!bi;Ut({isDragAccept:bi,isDragReject:Zn,isDragActive:!0,type:"setDraggedFiles"}),w&&w(Mt)}}).catch(function(tn){return hn(tn)})},[s,w,hn,Ce,pt,d,u,o,y,ze]),ci=ke.exports.useCallback(function(Mt){Mt.preventDefault(),Mt.persist(),dn(Mt);var tn=yx(Mt);if(tn&&Mt.dataTransfer)try{Mt.dataTransfer.dropEffect="copy"}catch{}return tn&&k&&k(Mt),!1},[k,Ce]),Oi=ke.exports.useCallback(function(Mt){Mt.preventDefault(),Mt.persist(),dn(Mt);var tn=Vt.current.filter(function(bi){return Ne.current&&Ne.current.contains(bi)}),ti=tn.indexOf(Mt.target);ti!==-1&&tn.splice(ti,1),Vt.current=tn,!(tn.length>0)&&(Ut({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),yx(Mt)&&M&&M(Mt))},[Ne,M,Ce]),Ie=ke.exports.useCallback(function(Mt,tn){var ti=[],bi=[];Mt.forEach(function(Zn){var ar=Zz(Zn,pt),br=$S(ar,2),ns=br[0],tr=br[1],An=Xz(Zn,d,u),lo=$S(An,2),co=lo[0],Bo=lo[1],Ur=ze?ze(Zn):null;if(ns&&co&&!Ur)ti.push(Zn);else{var bo=[tr,Bo];Ur&&(bo=bo.concat(Ur)),bi.push({file:Zn,errors:bo.filter(function(Pr){return Pr})})}}),(!o&&ti.length>1||o&&y>=1&&ti.length>y)&&(ti.forEach(function(Zn){bi.push({file:Zn,errors:[AX]})}),ti.splice(0)),Ut({acceptedFiles:ti,fileRejections:bi,type:"setFiles"}),O&&O(ti,bi,tn),bi.length>0&&j&&j(bi,tn),ti.length>0&&$&&$(ti,tn)},[Ut,o,pt,d,u,y,O,$,j,ze]),We=ke.exports.useCallback(function(Mt){Mt.preventDefault(),Mt.persist(),dn(Mt),Vt.current=[],yx(Mt)&&Promise.resolve(s(Mt)).then(function(tn){_x(Mt)&&!Ce||Ie(tn,Mt)}).catch(function(tn){return hn(tn)}),Ut({type:"reset"})},[s,Ie,hn,Ce]),qe=ke.exports.useCallback(function(){if(at.current){Ut({type:"openDialog"}),ot();var Mt={multiple:o,types:mt};window.showOpenFilePicker(Mt).then(function(tn){return s(tn)}).then(function(tn){Ie(tn,null),Ut({type:"closeDialog"})}).catch(function(tn){FX(tn)?(kt(tn),Ut({type:"closeDialog"})):BX(tn)?(at.current=!1,Ve.current?(Ve.current.value=null,Ve.current.click()):hn(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):hn(tn)});return}Ve.current&&(Ut({type:"openDialog"}),ot(),Ve.current.value=null,Ve.current.click())},[Ut,ot,kt,U,Ie,hn,mt,o]),Lt=ke.exports.useCallback(function(Mt){!Ne.current||!Ne.current.isEqualNode(Mt.target)||(Mt.key===" "||Mt.key==="Enter"||Mt.keyCode===32||Mt.keyCode===13)&&(Mt.preventDefault(),qe())},[Ne,qe]),gt=ke.exports.useCallback(function(){Ut({type:"focus"})},[]),_t=ke.exports.useCallback(function(){Ut({type:"blur"})},[]),Ft=ke.exports.useCallback(function(){ie||(OX()?setTimeout(qe,0):qe())},[ie,qe]),Sn=function(tn){return r?null:tn},Fn=function(tn){return de?null:Sn(tn)},Li=function(tn){return xe?null:Sn(tn)},dn=function(tn){Ce&&tn.stopPropagation()},Ir=ke.exports.useMemo(function(){return function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tn=Mt.refKey,ti=tn===void 0?"ref":tn,bi=Mt.role,Zn=Mt.onKeyDown,ar=Mt.onFocus,br=Mt.onBlur,ns=Mt.onClick,tr=Mt.onDragEnter,An=Mt.onDragOver,lo=Mt.onDragLeave,co=Mt.onDrop,Bo=vx(Mt,jX);return Zi(Zi(WS({onKeyDown:Fn(ka(Zn,Lt)),onFocus:Fn(ka(ar,gt)),onBlur:Fn(ka(br,_t)),onClick:Sn(ka(ns,Ft)),onDragEnter:Li(ka(tr,Tn)),onDragOver:Li(ka(An,ci)),onDragLeave:Li(ka(lo,Oi)),onDrop:Li(ka(co,We)),role:typeof bi=="string"&&bi!==""?bi:"presentation"},ti,Ne),!r&&!de?{tabIndex:0}:{}),Bo)}},[Ne,Lt,gt,_t,Ft,Tn,ci,Oi,We,de,xe,r]),sr=ke.exports.useCallback(function(Mt){Mt.stopPropagation()},[]),xr=ke.exports.useMemo(function(){return function(){var Mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tn=Mt.refKey,ti=tn===void 0?"ref":tn,bi=Mt.onChange,Zn=Mt.onClick,ar=vx(Mt,UX),br=WS({accept:pt,multiple:o,type:"file",style:{display:"none"},onChange:Sn(ka(bi,We)),onClick:Sn(ka(Zn,sr)),tabIndex:-1},ti,Ve);return Zi(Zi({},br),ar)}},[Ve,n,o,We,r]);return Zi(Zi({},Ot),{},{isFocused:un&&!r,getRootProps:Ir,getInputProps:xr,rootRef:Ne,inputRef:Ve,open:Sn(qe)})}function JX(e,t){switch(t.type){case"focus":return Zi(Zi({},e),{},{isFocused:!0});case"blur":return Zi(Zi({},e),{},{isFocused:!1});case"openDialog":return Zi(Zi({},qS),{},{isFileDialogActive:!0});case"closeDialog":return Zi(Zi({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Zi(Zi({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return Zi(Zi({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return Zi({},qS);default:return e}}function iR(){}const QX=ke.exports.createContext(null);function eK(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function rR(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function oR(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const s=e.center;e.center=new s.constructor(n.longitude,n.latitude),r=r||s!==e.center}if("zoom"in n){const s=e.zoom;e.zoom=n.zoom,r=r||s!==e.zoom}if("bearing"in n){const s=e.bearing;e.bearing=n.bearing,r=r||s!==e.bearing}if("pitch"in n){const s=e.pitch;e.pitch=n.pitch,r=r||s!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const tK=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sR(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map(r=>{const s=t[r.ref];let u=null;if("interactive"in r&&(u=jt({},r),delete u.interactive),s){u=u||jt({},r),delete u.ref;for(const d of tK)d in s&&(u[d]=s[d])}return u||r});return Ai(jt({},e),{layers:n})}function nK(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,s=Array.isArray(t)?t[0]:t?t.x:0,u=Array.isArray(t)?t[1]:t?t.y:0;return n===s&&r===u}function xc(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!xc(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(!t.hasOwnProperty(s)||!xc(e[s],t[s]))return!1;return!0}return!1}const aR={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},YS={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},lR={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},iK=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],rK=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class sf{constructor(t,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const u=this.props[lR[s.type]];u&&u(s)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const u=this.props[aR[s.type]];if(u){if(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"){const d=this._hoveredFeatures||this._map.queryRenderedFeatures(s.point,{layers:this.props.interactiveLayerIds});s.features=d}u(s),delete s.features}},this._onCameraEvent=s=>{if(!this._internalUpdate){const u=this.props[YS[s.type]];u&&u(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const r=this._updateSettings(t,n);r&&this._createShadowTransform(this._map);const s=this._updateSize(t),u=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(r||s||u&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const r=sf.savedMaps.pop();if(!r)return null;const s=r.map,u=s.getContainer();for(n.className=u.className;u.childNodes.length>0;)n.appendChild(u.childNodes[0]);s._container=n,r.setProps(Ai(jt({},t),{styleDiffing:!1})),s.resize();const{initialViewState:d}=t;return d&&(d.bounds?s.fitBounds(d.bounds,Ai(jt({},d.fitBoundsOptions),{duration:0})):r._updateViewState(d,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),r}_initialize(t){const{props:n}=this,r=Ai(jt(jt({},n),n.initialViewState),{accessToken:n.mapboxAccessToken||oK()||null,container:t,style:sR(n.mapStyle)}),s=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const w=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=w,n.gl)}const u=new this._MapClass(r);s.padding&&u.setPadding(s.padding),n.cursor&&(u.getCanvas().style.cursor=n.cursor),this._createShadowTransform(u);const d=u._render;u._render=w=>{this._inRender=!0,d.call(u,w),this._inRender=!1};const o=u._renderTaskQueue.run;u._renderTaskQueue.run=w=>{o.call(u._renderTaskQueue,w),this._onBeforeRepaint()},u.on("render",()=>this._onAfterRepaint());const y=u.fire;u.fire=this._fireEvent.bind(this,y),u.on("resize",()=>{this._renderTransform.resize(u.transform.width,u.transform.height)}),u.on("styledata",()=>this._updateStyleComponents(this.props,{})),u.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const w in aR)u.on(w,this._onPointerEvent);for(const w in YS)u.on(w,this._onCameraEvent);for(const w in lR)u.on(w,this._onEvent);this._map=u}recycle(){sf.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=eK(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const r=this._map,s=this._renderTransform,{zoom:u,pitch:d,bearing:o}=s,y=r.isMoving();y&&(s.cameraElevationReference="sea");const w=oR(s,jt(jt({},rR(r.transform)),t));if(y&&(s.cameraElevationReference="ground"),w&&n){const M=this._deferredEvents;M.move=!0,M.zoom||(M.zoom=u!==s.zoom),M.rotate||(M.rotate=o!==s.bearing),M.pitch||(M.pitch=d!==s.pitch)}return y||oR(r.transform,t),w}_updateSettings(t,n){const r=this._map;let s=!1;for(const u of iK)u in t&&!xc(t[u],n[u])&&(s=!0,r[`set${u[0].toUpperCase()}${u.slice(1)}`](t[u]));return s}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==n.mapStyle){const r={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(r.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(sR(t.mapStyle),r),!0}return!1}_updateStyleComponents(t,n){const r=this._map;let s=!1;return r.style.loaded()&&("light"in t&&!xc(t.light,n.light)&&(s=!0,r.setLight(t.light)),"fog"in t&&!xc(t.fog,n.fog)&&(s=!0,r.setFog(t.fog)),"terrain"in t&&!xc(t.terrain,n.terrain)&&(!t.terrain||r.getSource(t.terrain.source))&&(s=!0,r.setTerrain(t.terrain))),s}_updateHandlers(t,n){const r=this._map;let s=!1;for(const u of rK){const d=t[u];xc(d,n[u])||(s=!0,d?r[u].enable(d):r[u].disable())}return s}_updateHover(t){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const u=t.type,d=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0;let o;if(u==="mousemove")try{o=this._map.queryRenderedFeatures(t.point,{layers:r.interactiveLayerIds})}catch{o=[]}else o=[];const y=o.length>0;!y&&d&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=o,y&&!d&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=u}else this._hoveredFeatures=null}_fireEvent(t,n,r){const s=this._map,u=s.transform,d=typeof n=="string"?n:n.type;return d==="move"&&this._updateViewState(this.props,!1),d in YS&&(typeof n=="object"&&(n.viewState=rR(u)),this._map.isMoving())?(s.transform=this._renderTransform,t.call(s,n,r),s.transform=u,s):(t.call(s,n,r),s)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&t.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}sf.savedMaps=[];function oK(){let e=null;if(typeof location!="undefined"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",TMPDIR:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.73.1",ZDOTDIR:"/Users/obm_89",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",USER:"obm_89",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yGRHeSeskA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin:/Users/obm_89/Documents/hubmine/node_modules/.bin:/Users/obm_89/Documents/node_modules/.bin:/Users/obm_89/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Library/Frameworks/Python.framework/Versions/3.10/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Frameworks/Python.framework/Versions/3.10/bin",npm_package_json:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/package.json",_:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin/vite",npm_config_userconfig:"/Users/obm_89/.npmrc",npm_config_init_module:"/Users/obm_89/.npm-init.js",USER_ZDOTDIR:"/Users/obm_89",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"2",HOME:"/Users/obm_89",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/obm_89/.npm",LOGNAME:"obm_89",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/vscode-git-c8614585f1.sock",npm_config_user_agent:"npm/8.15.0 node/v16.17.0 darwin x64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}.MapboxAccessToken}catch{}try{e=e||{TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",TMPDIR:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.73.1",ZDOTDIR:"/Users/obm_89",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",USER:"obm_89",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yGRHeSeskA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin:/Users/obm_89/Documents/hubmine/node_modules/.bin:/Users/obm_89/Documents/node_modules/.bin:/Users/obm_89/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Library/Frameworks/Python.framework/Versions/3.10/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Frameworks/Python.framework/Versions/3.10/bin",npm_package_json:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/package.json",_:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin/vite",npm_config_userconfig:"/Users/obm_89/.npmrc",npm_config_init_module:"/Users/obm_89/.npm-init.js",USER_ZDOTDIR:"/Users/obm_89",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"2",HOME:"/Users/obm_89",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/obm_89/.npm",LOGNAME:"obm_89",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/vscode-git-c8614585f1.sock",npm_config_user_agent:"npm/8.15.0 node/v16.17.0 darwin x64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const sK=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function aK(e,t){if(!e)return null;const n=e.map,r={getMap:()=>n,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:s=>e.transform.locationPoint(t.LngLat.convert(s)),unproject:s=>e.transform.pointLocation(t.Point.convert(s)),queryTerrainElevation:(s,u)=>{const d=n.transform;n.transform=e.transform;const o=n.queryTerrainElevation(s,u);return n.transform=d,o}};for(const s of lK(n))!(s in r)&&!sK.includes(s)&&(r[s]=n[s].bind(n));return r}function lK(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}const cK=typeof document!="undefined"?ke.exports.useLayoutEffect:ke.exports.useEffect,uK=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function hK(e,t){for(const n of uK)n in t&&(e[n]=t[n]);t.RTLTextPlugin&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(t.RTLTextPlugin,n=>{n&&console.error(n)},!1)}const xx=ke.exports.createContext(null),dK={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:e=>console.error(e.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},cR=ke.exports.forwardRef((e,t)=>{const n=ke.exports.useContext(QX),[r,s]=ke.exports.useState(null),u=ke.exports.useRef(),{current:d}=ke.exports.useRef({mapLib:null,map:null});ke.exports.useEffect(()=>{const y=e.mapLib;let w=!0,M;return Promise.resolve(y||Promise.resolve().then(function(){return DQ})).then(k=>{if(!!w){if(k.Map||(k=k.default),!k||!k.Map)throw new Error("Invalid mapLib");if(k.supported(e))hK(k,e),e.reuseMaps&&(M=sf.reuse(e,u.current)),M||(M=new sf(k.Map,e,u.current)),d.map=aK(M,k),d.mapLib=k,s(M),n==null||n.onMapMount(d.map,e.id);else throw new Error("Map is not supported by this browser")}}).catch(k=>{e.onError({type:"error",target:null,originalEvent:null,error:k})}),()=>{w=!1,M&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?M.recycle():M.destroy())}},[]),cK(()=>{r&&r.setProps(e)}),ke.exports.useImperativeHandle(t,()=>d.map,[r]);const o=ke.exports.useMemo(()=>jt({position:"relative",width:"100%",height:"100%"},e.style),[e.style]);return ke.exports.createElement("div",{id:e.id,ref:u,style:o},r&&ke.exports.createElement(xx.Provider,{value:d},e.children))});cR.displayName="Map";cR.defaultProps=dK;const fK=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Yu(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const s=t[r];Number.isFinite(s)&&!fK.test(r)?n[r]=`${s}px`:n[r]=s}}const pK={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};function uR(e){const{map:t,mapLib:n}=ke.exports.useContext(xx),r=ke.exports.useRef({props:e});r.current.props=e;const s=ke.exports.useMemo(()=>{let u=!1;ke.exports.Children.forEach(e.children,y=>{y&&(u=!0)});const d=Ai(jt({},e),{element:u?document.createElement("div"):null}),o=new n.Marker(d).setLngLat([e.longitude,e.latitude]);return o.getElement().addEventListener("click",y=>{var w,M;(M=(w=r.current.props).onClick)===null||M===void 0||M.call(w,{type:"click",target:o,originalEvent:y})}),o.on("dragstart",y=>{var w,M;const k=y;k.lngLat=s.getLngLat(),(M=(w=r.current.props).onDragStart)===null||M===void 0||M.call(w,k)}),o.on("drag",y=>{var w,M;const k=y;k.lngLat=s.getLngLat(),(M=(w=r.current.props).onDrag)===null||M===void 0||M.call(w,k)}),o.on("dragend",y=>{var w,M;const k=y;k.lngLat=s.getLngLat(),(M=(w=r.current.props).onDragEnd)===null||M===void 0||M.call(w,k)}),o},[]);return ke.exports.useEffect(()=>(s.addTo(t.getMap()),()=>{s.remove()}),[]),ke.exports.useEffect(()=>{Yu(s.getElement(),e.style)},[e.style]),(s.getLngLat().lng!==e.longitude||s.getLngLat().lat!==e.latitude)&&s.setLngLat([e.longitude,e.latitude]),e.offset&&!nK(s.getOffset(),e.offset)&&s.setOffset(e.offset),s.isDraggable()!==e.draggable&&s.setDraggable(e.draggable),s.getRotation()!==e.rotation&&s.setRotation(e.rotation),s.getRotationAlignment()!==e.rotationAlignment&&s.setRotationAlignment(e.rotationAlignment),s.getPitchAlignment()!==e.pitchAlignment&&s.setPitchAlignment(e.pitchAlignment),s.getPopup()!==e.popup&&s.setPopup(e.popup),$p.exports.createPortal(e.children,s.getElement())}uR.defaultProps=pK;var JQ=ke.exports.memo(uR);function hR(e){return new Set(e?e.trim().split(/\s+/):[])}function mK(e){const{map:t,mapLib:n}=ke.exports.useContext(xx),r=ke.exports.useMemo(()=>document.createElement("div"),[]),s=ke.exports.useRef({props:e});s.current.props=e;const u=ke.exports.useMemo(()=>{const d=jt({},e),o=new n.Popup(d).setLngLat([e.longitude,e.latitude]);return o.once("open",y=>{var w,M;(M=(w=s.current.props).onOpen)===null||M===void 0||M.call(w,y)}),o},[]);if(ke.exports.useEffect(()=>{const d=o=>{var y,w;(w=(y=s.current.props).onClose)===null||w===void 0||w.call(y,o)};return u.on("close",d),u.setDOMContent(r).addTo(t.getMap()),()=>{u.off("close",d),u.isOpen()&&u.remove()}},[]),ke.exports.useEffect(()=>{Yu(u.getElement(),e.style)},[e.style]),u.isOpen()&&((u.getLngLat().lng!==e.longitude||u.getLngLat().lat!==e.latitude)&&u.setLngLat([e.longitude,e.latitude]),e.offset&&!xc(u.options.offset,e.offset)&&u.setOffset(e.offset),(u.options.anchor!==e.anchor||u.options.maxWidth!==e.maxWidth)&&(u.options.anchor=e.anchor,u.setMaxWidth(e.maxWidth)),u.options.className!==e.className)){const d=hR(u.options.className),o=hR(e.className);for(const y of d)o.has(y)||u.removeClassName(y);for(const y of o)d.has(y)||u.addClassName(y);u.options.className=e.className}return $p.exports.createPortal(e.children,r)}ke.exports.memo(mK);function Fg(e,t,n,r){const s=ke.exports.useContext(xx),u=ke.exports.useMemo(()=>e(s),[]);return ke.exports.useEffect(()=>{const d=r||n||t,o=typeof t=="function"&&typeof n=="function"?t:null,y=typeof n=="function"?n:typeof t=="function"?t:null,{map:w}=s;return w.hasControl(u)||(w.addControl(u,d==null?void 0:d.position),o&&o(s)),()=>{y&&y(s),w.hasControl(u)&&w.removeControl(u)}},[]),u}function gK(e){const t=Fg(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return ke.exports.useEffect(()=>{Yu(t._container,e.style)},[e.style]),null}ke.exports.memo(gK);function _K(e){const t=Fg(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return ke.exports.useEffect(()=>{Yu(t._controlContainer,e.style)},[e.style]),null}ke.exports.memo(_K);const dR=ke.exports.forwardRef((e,t)=>{const n=ke.exports.useRef({props:e}),r=Fg(({mapLib:s})=>{const u=new s.GeolocateControl(e),d=u._setupUI;return u._setupUI=o=>{u._container.hasChildNodes()||d(o)},u.on("geolocate",o=>{var y,w;(w=(y=n.current.props).onGeolocate)===null||w===void 0||w.call(y,o)}),u.on("error",o=>{var y,w;(w=(y=n.current.props).onError)===null||w===void 0||w.call(y,o)}),u.on("outofmaxbounds",o=>{var y,w;(w=(y=n.current.props).onOutOfMaxBounds)===null||w===void 0||w.call(y,o)}),u.on("trackuserlocationstart",o=>{var y,w;(w=(y=n.current.props).onTrackUserLocationStart)===null||w===void 0||w.call(y,o)}),u.on("trackuserlocationend",o=>{var y,w;(w=(y=n.current.props).onTrackUserLocationEnd)===null||w===void 0||w.call(y,o)}),u},{position:e.position});return n.current.props=e,ke.exports.useImperativeHandle(t,()=>({trigger:()=>r.trigger()}),[]),ke.exports.useEffect(()=>{Yu(r._container,e.style)},[e.style]),null});dR.displayName="GeolocateControl";var QQ=ke.exports.memo(dR);function yK(e){const t=Fg(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return ke.exports.useEffect(()=>{Yu(t._container,e.style)},[e.style]),null}var eee=ke.exports.memo(yK);const vK={unit:"metric",maxWidth:100};function fR(e){const t=Fg(({mapLib:n})=>new n.ScaleControl(e),{position:e.position});return(t.options.unit!==e.unit||t.options.maxWidth!==e.maxWidth)&&(t.options.maxWidth=e.maxWidth,t.setUnit(e.unit)),ke.exports.useEffect(()=>{Yu(t._container,e.style)},[e.style]),null}fR.defaultProps=vK;ke.exports.memo(fR);var af=bK,xK=Object.prototype.hasOwnProperty;function bK(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)xK.call(n,r)&&(e[r]=n[r])}return e}var pR={exports:{}};(function(e,t){(function(){var n={};e.exports=n,n.simpleFilter=function(r,s){return s.filter(function(u){return n.test(r,u)})},n.test=function(r,s){return n.match(r,s)!==null},n.match=function(r,s,u){u=u||{};var d=0,o=[],y=s.length,w=0,M=0,k=u.pre||"",O=u.post||"",$=u.caseSensitive&&s||s.toLowerCase(),j;r=u.caseSensitive&&r||r.toLowerCase();for(var G=0;G<y;G++)j=s[G],$[G]===r[d]?(j=k+j+O,d+=1,M+=1+M):M=0,w+=M,o[o.length]=j;return d===r.length?(w=$===r?1/0:w,{rendered:o.join(""),score:w}):null},n.filter=function(r,s,u){return!s||s.length===0?[]:typeof r!="string"?s:(u=u||{},s.reduce(function(d,o,y,w){var M=o;u.extract&&(M=u.extract(o));var k=n.match(r,M,u);return k!=null&&(d[d.length]={string:k.rendered,score:k.score,index:y,original:o}),d},[]).sort(function(d,o){var y=o.score-d.score;return y||d.index-o.index}))}})()})(pR);var Ro=function(e){return this.component=e,this.items=[],this.active=0,this.wrapper=document.createElement("div"),this.wrapper.className="suggestions-wrapper",this.element=document.createElement("ul"),this.element.className="suggestions",this.wrapper.appendChild(this.element),this.selectingListItem=!1,e.el.parentNode.insertBefore(this.wrapper,e.el.nextSibling),this};Ro.prototype.show=function(){this.element.style.display="block"};Ro.prototype.hide=function(){this.element.style.display="none"};Ro.prototype.add=function(e){this.items.push(e)};Ro.prototype.clear=function(){this.items=[],this.active=0};Ro.prototype.isEmpty=function(){return!this.items.length};Ro.prototype.isVisible=function(){return this.element.style.display==="block"};Ro.prototype.draw=function(){if(this.element.innerHTML="",this.items.length===0){this.hide();return}for(var e=0;e<this.items.length;e++)this.drawItem(this.items[e],this.active===e);this.show()};Ro.prototype.drawItem=function(e,t){var n=document.createElement("li"),r=document.createElement("a");t&&(n.className+=" active"),r.innerHTML=e.string,n.appendChild(r),this.element.appendChild(n),n.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),n.addEventListener("mouseup",function(){this.handleMouseUp.call(this,e)}.bind(this))};Ro.prototype.handleMouseUp=function(e){this.selectingListItem=!1,this.component.value(e.original),this.clear(),this.draw()};Ro.prototype.move=function(e){this.active=e,this.draw()};Ro.prototype.previous=function(){this.move(this.active===0?this.items.length-1:this.active-1)};Ro.prototype.next=function(){this.move(this.active===this.items.length-1?0:this.active+1)};Ro.prototype.drawError=function(e){var t=document.createElement("li");t.innerHTML=e,this.element.appendChild(t),this.show()};var wK=Ro,EK=af,SK=pR.exports,TK=wK,ao=function(e,t,n){return n=n||{},this.options=EK({minLength:2,limit:5,filter:!0,hideOnBlur:!0},n),this.el=e,this.data=t||[],this.list=new TK(this),this.query="",this.selected=null,this.list.draw(),this.el.addEventListener("keyup",function(r){this.handleKeyUp(r.keyCode)}.bind(this),!1),this.el.addEventListener("keydown",function(r){this.handleKeyDown(r)}.bind(this)),this.el.addEventListener("focus",function(){this.handleFocus()}.bind(this)),this.el.addEventListener("blur",function(){this.handleBlur()}.bind(this)),this.el.addEventListener("paste",function(r){this.handlePaste(r)}.bind(this)),this.render=this.options.render?this.options.render.bind(this):this.render.bind(this),this.getItemValue=this.options.getItemValue?this.options.getItemValue.bind(this):this.getItemValue.bind(this),this};ao.prototype.handleKeyUp=function(e){e===40||e===38||e===27||e===13||e===9||this.handleInputChange(this.el.value)};ao.prototype.handleKeyDown=function(e){switch(e.keyCode){case 13:case 9:this.list.isEmpty()||(this.list.isVisible()&&e.preventDefault(),this.value(this.list.items[this.list.active].original),this.list.hide());break;case 27:this.list.isEmpty()||this.list.hide();break;case 38:this.list.previous();break;case 40:this.list.next();break}};ao.prototype.handleBlur=function(){!this.list.selectingListItem&&this.options.hideOnBlur&&this.list.hide()};ao.prototype.handlePaste=function(e){if(e.clipboardData)this.handleInputChange(e.clipboardData.getData("Text"));else{var t=this;setTimeout(function(){t.handleInputChange(e.target.value)},100)}};ao.prototype.handleInputChange=function(e){if(this.query=this.normalize(e),this.list.clear(),this.query.length<this.options.minLength){this.list.draw();return}this.getCandidates(function(t){for(var n=0;n<t.length&&(this.list.add(t[n]),n!==this.options.limit-1);n++);this.list.draw()}.bind(this))};ao.prototype.handleFocus=function(){this.list.isEmpty()||this.list.show(),this.list.selectingListItem=!1};ao.prototype.update=function(e){this.data=e,this.handleKeyUp()};ao.prototype.clear=function(){this.data=[],this.list.clear()};ao.prototype.normalize=function(e){return e=e.toLowerCase(),e};ao.prototype.match=function(e,t){return e.indexOf(t)>-1};ao.prototype.value=function(e){if(this.selected=e,this.el.value=this.getItemValue(e),document.createEvent){var t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.el.dispatchEvent(t)}else this.el.fireEvent("onchange")};ao.prototype.getCandidates=function(e){var t={pre:"<strong>",post:"</strong>",extract:function(r){return this.getItemValue(r)}.bind(this)},n;this.options.filter?(n=SK.filter(this.query,this.data,t),n=n.map(function(r){return{original:r.original,string:this.render(r.original,r.string)}}.bind(this))):n=this.data.map(function(r){var s=this.render(r);return{original:r,string:s}}.bind(this)),e(n)};ao.prototype.getItemValue=function(e){return e};ao.prototype.render=function(e,t){if(t)return t;for(var n=e.original?this.getItemValue(e.original):this.getItemValue(e),r=this.normalize(n),s=r.lastIndexOf(this.query);s>-1;){var u=s+this.query.length;n=n.slice(0,s)+"<strong>"+n.slice(s,u)+"</strong>"+n.slice(u),s=r.slice(0,s).lastIndexOf(this.query)}return n};ao.prototype.renderError=function(e){this.list.drawError(e)};var CK=ao,mR=CK,MK=mR;typeof window!="undefined"&&(window.Suggestions=mR);var kK="Expected a function",gR=0/0,AK="[object Symbol]",DK=/^\s+|\s+$/g,IK=/^[-+]0x[0-9a-f]+$/i,PK=/^0b[01]+$/i,OK=/^0o[0-7]+$/i,LK=parseInt,zK=typeof Ls=="object"&&Ls&&Ls.Object===Object&&Ls,RK=typeof self=="object"&&self&&self.Object===Object&&self,FK=zK||RK||Function("return this")(),BK=Object.prototype,NK=BK.toString,VK=Math.max,jK=Math.min,ZS=function(){return FK.Date.now()};function UK(e,t,n){var r,s,u,d,o,y,w=0,M=!1,k=!1,O=!0;if(typeof e!="function")throw new TypeError(kK);t=_R(t)||0,XS(n)&&(M=!!n.leading,k="maxWait"in n,u=k?VK(_R(n.maxWait)||0,t):u,O="trailing"in n?!!n.trailing:O);function $(xe){var Ce=r,je=s;return r=s=void 0,w=xe,d=e.apply(je,Ce),d}function j(xe){return w=xe,o=setTimeout(U,t),M?$(xe):d}function G(xe){var Ce=xe-y,je=xe-w,ze=t-Ce;return k?jK(ze,u-je):ze}function B(xe){var Ce=xe-y,je=xe-w;return y===void 0||Ce>=t||Ce<0||k&&je>=u}function U(){var xe=ZS();if(B(xe))return Z(xe);o=setTimeout(U,G(xe))}function Z(xe){return o=void 0,O&&r?$(xe):(r=s=void 0,d)}function re(){o!==void 0&&clearTimeout(o),w=0,r=y=s=o=void 0}function ie(){return o===void 0?d:Z(ZS())}function de(){var xe=ZS(),Ce=B(xe);if(r=arguments,s=this,y=xe,Ce){if(o===void 0)return j(y);if(k)return o=setTimeout(U,t),$(y)}return o===void 0&&(o=setTimeout(U,t)),d}return de.cancel=re,de.flush=ie,de}function XS(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function $K(e){return!!e&&typeof e=="object"}function GK(e){return typeof e=="symbol"||$K(e)&&NK.call(e)==AK}function _R(e){if(typeof e=="number")return e;if(GK(e))return gR;if(XS(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=XS(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(DK,"");var n=PK.test(e);return n||OK.test(e)?LK(e.slice(2),n?2:8):IK.test(e)?gR:+e}var WK=UK,KS={exports:{}},lf=typeof Reflect=="object"?Reflect:null,yR=lf&&typeof lf.apply=="function"?lf.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},bx;lf&&typeof lf.ownKeys=="function"?bx=lf.ownKeys:Object.getOwnPropertySymbols?bx=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:bx=function(t){return Object.getOwnPropertyNames(t)};function HK(e){console&&console.warn&&console.warn(e)}var vR=Number.isNaN||function(t){return t!==t};function xi(){xi.init.call(this)}KS.exports=xi;KS.exports.once=XK;xi.EventEmitter=xi;xi.prototype._events=void 0;xi.prototype._eventsCount=0;xi.prototype._maxListeners=void 0;var xR=10;function wx(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(xi,"defaultMaxListeners",{enumerable:!0,get:function(){return xR},set:function(e){if(typeof e!="number"||e<0||vR(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");xR=e}});xi.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xi.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||vR(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function bR(e){return e._maxListeners===void 0?xi.defaultMaxListeners:e._maxListeners}xi.prototype.getMaxListeners=function(){return bR(this)};xi.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=t==="error",u=this._events;if(u!==void 0)s=s&&u.error===void 0;else if(!s)return!1;if(s){var d;if(n.length>0&&(d=n[0]),d instanceof Error)throw d;var o=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw o.context=d,o}var y=u[t];if(y===void 0)return!1;if(typeof y=="function")yR(y,this,n);else for(var w=y.length,M=CR(y,w),r=0;r<w;++r)yR(M[r],this,n);return!0};function wR(e,t,n,r){var s,u,d;if(wx(n),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),u=e._events),d=u[t]),d===void 0)d=u[t]=n,++e._eventsCount;else if(typeof d=="function"?d=u[t]=r?[n,d]:[d,n]:r?d.unshift(n):d.push(n),s=bR(e),s>0&&d.length>s&&!d.warned){d.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=d.length,HK(o)}return e}xi.prototype.addListener=function(t,n){return wR(this,t,n,!1)};xi.prototype.on=xi.prototype.addListener;xi.prototype.prependListener=function(t,n){return wR(this,t,n,!0)};function qK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ER(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},s=qK.bind(r);return s.listener=n,r.wrapFn=s,s}xi.prototype.once=function(t,n){return wx(n),this.on(t,ER(this,t,n)),this};xi.prototype.prependOnceListener=function(t,n){return wx(n),this.prependListener(t,ER(this,t,n)),this};xi.prototype.removeListener=function(t,n){var r,s,u,d,o;if(wx(n),s=this._events,s===void 0)return this;if(r=s[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount==0?this._events=Object.create(null):(delete s[t],s.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(u=-1,d=r.length-1;d>=0;d--)if(r[d]===n||r[d].listener===n){o=r[d].listener,u=d;break}if(u<0)return this;u===0?r.shift():YK(r,u),r.length===1&&(s[t]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",t,o||n)}return this};xi.prototype.off=xi.prototype.removeListener;xi.prototype.removeAllListeners=function(t){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var u=Object.keys(r),d;for(s=0;s<u.length;++s)d=u[s],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(t,n[s]);return this};function SR(e,t,n){var r=e._events;if(r===void 0)return[];var s=r[t];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?ZK(s):CR(s,s.length)}xi.prototype.listeners=function(t){return SR(this,t,!0)};xi.prototype.rawListeners=function(t){return SR(this,t,!1)};xi.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):TR.call(e,t)};xi.prototype.listenerCount=TR;function TR(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}xi.prototype.eventNames=function(){return this._eventsCount>0?bx(this._events):[]};function CR(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function YK(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function ZK(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function XK(e,t){return new Promise(function(n,r){function s(d){e.removeListener(t,u),r(d)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",s),n([].slice.call(arguments))}MR(e,t,u,{once:!0}),t!=="error"&&KK(e,s,{once:!0})})}function KK(e,t,n){typeof e.on=="function"&&MR(e,"error",t,n)}function MR(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function s(u){r.once&&e.removeEventListener(t,s),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var JK={fr:{name:"France",bbox:[[-4.59235,41.380007],[9.560016,51.148506]]},us:{name:"United States",bbox:[[-171.791111,18.91619],[-66.96466,71.357764]]},ru:{name:"Russia",bbox:[[19.66064,41.151416],[190.10042,81.2504]]},ca:{name:"Canada",bbox:[[-140.99778,41.675105],[-52.648099,83.23324]]}};function QK(e){var t=e.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return t?{key:t[1],value:t[2]}:null}function eJ(e){var t=e.match(/<?([^>]*)>(.*)/);if(!t)return null;var n=t[1],r=t[2].split(";"),s=null,u=r.reduce(function(d,o){var y=QK(o);return y?y.key==="rel"?(s||(s=y.value),d):(d[y.key]=y.value,d):d},{});return s?{url:n,rel:s,params:u}:null}function tJ(e){return e?e.split(/,\s*</).reduce(function(t,n){var r=eJ(n);if(!r)return t;var s=r.rel.split(/\s+/);return s.forEach(function(u){t[u]||(t[u]={url:r.url,params:r.params})}),t},{}):{}}var nJ=tJ,iJ=nJ;function JS(e,t){this.request=e,this.headers=t.headers,this.rawBody=t.body,this.statusCode=t.statusCode;try{this.body=JSON.parse(t.body||"{}")}catch{this.body=t.body}this.links=iJ(this.headers.link)}JS.prototype.hasNextPage=function(){return!!this.links.next};JS.prototype.nextPage=function(){return this.hasNextPage()?this.request._extend({path:this.links.next.url}):null};var rJ=JS,Ex={API_ORIGIN:"https://api.mapbox.com",EVENT_PROGRESS_DOWNLOAD:"downloadProgress",EVENT_PROGRESS_UPLOAD:"uploadProgress",EVENT_ERROR:"error",EVENT_RESPONSE:"response",ERROR_HTTP:"HttpError",ERROR_REQUEST_ABORTED:"RequestAbortedError"},kR=Ex;function oJ(e){var t=e.type||kR.ERROR_HTTP,n;if(e.body)try{n=JSON.parse(e.body)}catch{n=e.body}else n=null;var r=e.message||null;r||(typeof n=="string"?r=n:n&&typeof n.message=="string"?r=n.message:t===kR.ERROR_REQUEST_ABORTED&&(r="Request aborted")),this.message=r,this.type=t,this.statusCode=e.statusCode||null,this.request=e.request,this.body=n}var sJ=oJ;function aJ(e){var t=e.indexOf(":"),n=e.substring(0,t).trim().toLowerCase(),r=e.substring(t+1).trim();return{name:n,value:r}}function lJ(e){var t={};return e&&e.trim().split(/[\r|\n]+/).forEach(function(n){var r=aJ(n);t[r.name]=r.value}),t}var cJ=lJ,uJ=rJ,AR=sJ,QS=Ex,hJ=cJ,Sx={};function dJ(e){var t=Sx[e.id];!t||(t.abort(),delete Sx[e.id])}function fJ(e,t){return new uJ(e,{body:t.response,headers:hJ(t.getAllResponseHeaders()),statusCode:t.status})}function DR(e){var t=e.total,n=e.loaded,r=100*n/t;return{total:t,transferred:n,percent:r}}function IR(e,t){return new Promise(function(n,r){t.onprogress=function(d){e.emitter.emit(QS.EVENT_PROGRESS_DOWNLOAD,DR(d))};var s=e.file;s&&(t.upload.onprogress=function(d){e.emitter.emit(QS.EVENT_PROGRESS_UPLOAD,DR(d))}),t.onerror=function(d){r(d)},t.onabort=function(){var d=new AR({request:e,type:QS.ERROR_REQUEST_ABORTED});r(d)},t.onload=function(){if(delete Sx[e.id],t.status<200||t.status>=400){var d=new AR({request:e,body:t.response,statusCode:t.status});r(d);return}n(t)};var u=e.body;typeof u=="string"?t.send(u):u?t.send(JSON.stringify(u)):s?t.send(s):t.send(),Sx[e.id]=t}).then(function(n){return fJ(e,n)})}function PR(e,t){var n=e.url(t),r=new window.XMLHttpRequest;return r.open(e.method,n),Object.keys(e.headers).forEach(function(s){r.setRequestHeader(s,e.headers[s])}),r}function pJ(e){return Promise.resolve().then(function(){var t=PR(e,e.client.accessToken);return IR(e,t)})}var mJ={browserAbort:dJ,sendRequestXhr:IR,browserSend:pJ,createRequestXhr:PR},eT={exports:{}};/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */(function(e,t){(function(n){var r=t,s=e&&e.exports==r&&e,u=typeof Ls=="object"&&Ls;(u.global===u||u.window===u)&&(n=u);var d=function(j){this.message=j};d.prototype=new Error,d.prototype.name="InvalidCharacterError";var o=function(j){throw new d(j)},y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=/[\t\n\f\r ]/g,M=function(j){j=String(j).replace(w,"");var G=j.length;G%4==0&&(j=j.replace(/==?$/,""),G=j.length),(G%4==1||/[^+a-zA-Z0-9/]/.test(j))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var B=0,U,Z,re="",ie=-1;++ie<G;)Z=y.indexOf(j.charAt(ie)),U=B%4?U*64+Z:Z,B++%4&&(re+=String.fromCharCode(255&U>>(-2*B&6)));return re},k=function(j){j=String(j),/[^\0-\xFF]/.test(j)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var G=j.length%3,B="",U=-1,Z,re,ie,de,xe=j.length-G;++U<xe;)Z=j.charCodeAt(U)<<16,re=j.charCodeAt(++U)<<8,ie=j.charCodeAt(++U),de=Z+re+ie,B+=y.charAt(de>>18&63)+y.charAt(de>>12&63)+y.charAt(de>>6&63)+y.charAt(de&63);return G==2?(Z=j.charCodeAt(U)<<8,re=j.charCodeAt(++U),de=Z+re,B+=y.charAt(de>>10)+y.charAt(de>>4&63)+y.charAt(de<<2&63)+"="):G==1&&(de=j.charCodeAt(U),B+=y.charAt(de>>2)+y.charAt(de<<4&63)+"=="),B},O={encode:k,decode:M,version:"0.1.0"};if(r&&!r.nodeType)if(s)s.exports=O;else for(var $ in O)O.hasOwnProperty($)&&(r[$]=O[$]);else n.base64=O})(Ls)})(eT,eT.exports);var gJ=eT.exports,tT={};function _J(e){if(tT[e])return tT[e];var t=e.split("."),n=t[0],r=t[1];if(!r)throw new Error("Invalid token");var s=yJ(r),u={usage:n,user:s.u};return Zu(s,"a")&&(u.authorization=s.a),Zu(s,"exp")&&(u.expires=s.exp*1e3),Zu(s,"iat")&&(u.created=s.iat*1e3),Zu(s,"scopes")&&(u.scopes=s.scopes),Zu(s,"client")&&(u.client=s.client),Zu(s,"ll")&&(u.lastLogin=s.ll),Zu(s,"iu")&&(u.impersonator=s.iu),tT[e]=u,u}function yJ(e){try{return JSON.parse(gJ.decode(e))}catch{throw new Error("Invalid token")}}function Zu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var OR=_J,LR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(y,w,M){this.fn=y,this.context=w,this.once=M||!1}function u(y,w,M,k,O){if(typeof M!="function")throw new TypeError("The listener must be a function");var $=new s(M,k||y,O),j=n?n+w:w;return y._events[j]?y._events[j].fn?y._events[j]=[y._events[j],$]:y._events[j].push($):(y._events[j]=$,y._eventsCount++),y}function d(y,w){--y._eventsCount==0?y._events=new r:delete y._events[w]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var w=[],M,k;if(this._eventsCount===0)return w;for(k in M=this._events)t.call(M,k)&&w.push(n?k.slice(1):k);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(M)):w},o.prototype.listeners=function(w){var M=n?n+w:w,k=this._events[M];if(!k)return[];if(k.fn)return[k.fn];for(var O=0,$=k.length,j=new Array($);O<$;O++)j[O]=k[O].fn;return j},o.prototype.listenerCount=function(w){var M=n?n+w:w,k=this._events[M];return k?k.fn?1:k.length:0},o.prototype.emit=function(w,M,k,O,$,j){var G=n?n+w:w;if(!this._events[G])return!1;var B=this._events[G],U=arguments.length,Z,re;if(B.fn){switch(B.once&&this.removeListener(w,B.fn,void 0,!0),U){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,M),!0;case 3:return B.fn.call(B.context,M,k),!0;case 4:return B.fn.call(B.context,M,k,O),!0;case 5:return B.fn.call(B.context,M,k,O,$),!0;case 6:return B.fn.call(B.context,M,k,O,$,j),!0}for(re=1,Z=new Array(U-1);re<U;re++)Z[re-1]=arguments[re];B.fn.apply(B.context,Z)}else{var ie=B.length,de;for(re=0;re<ie;re++)switch(B[re].once&&this.removeListener(w,B[re].fn,void 0,!0),U){case 1:B[re].fn.call(B[re].context);break;case 2:B[re].fn.call(B[re].context,M);break;case 3:B[re].fn.call(B[re].context,M,k);break;case 4:B[re].fn.call(B[re].context,M,k,O);break;default:if(!Z)for(de=1,Z=new Array(U-1);de<U;de++)Z[de-1]=arguments[de];B[re].fn.apply(B[re].context,Z)}}return!0},o.prototype.on=function(w,M,k){return u(this,w,M,k,!1)},o.prototype.once=function(w,M,k){return u(this,w,M,k,!0)},o.prototype.removeListener=function(w,M,k,O){var $=n?n+w:w;if(!this._events[$])return this;if(!M)return d(this,$),this;var j=this._events[$];if(j.fn)j.fn===M&&(!O||j.once)&&(!k||j.context===k)&&d(this,$);else{for(var G=0,B=[],U=j.length;G<U;G++)(j[G].fn!==M||O&&!j[G].once||k&&j[G].context!==k)&&B.push(j[G]);B.length?this._events[$]=B.length===1?B[0]:B:d(this,$)}return this},o.prototype.removeAllListeners=function(w){var M;return w?(M=n?n+w:w,this._events[M]&&d(this,M)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(LR);function vJ(e){return e.map(encodeURIComponent).join(",")}function zR(e){return Array.isArray(e)?vJ(e):encodeURIComponent(String(e))}function RR(e,t,n){if(n===!1||n===null)return e;var r=/\?/.test(e)?"&":"?",s=encodeURIComponent(t);return n!==void 0&&n!==""&&n!==!0&&(s+="="+zR(n)),""+e+r+s}function xJ(e,t){if(!t)return e;var n=e;return Object.keys(t).forEach(function(r){var s=t[r];s!==void 0&&(Array.isArray(s)&&(s=s.filter(function(u){return u!=null}).join(",")),n=RR(n,r,s))}),n}function bJ(e,t){if(!t||e.slice(0,4)==="http")return e;var n=e[0]==="/"?"":"/";return""+t.replace(/\/$/,"")+n+e}function wJ(e,t){return t?e.replace(/\/:([a-zA-Z0-9]+)/g,function(n,r){var s=t[r];if(s===void 0)throw new Error("Unspecified route parameter "+r);var u=zR(s);return"/"+u}):e}var EJ={appendQueryObject:xJ,appendQueryParam:RR,prependOrigin:bJ,interpolateRouteParams:wJ},SJ=OR,nT=af,TJ=LR.exports,Tx=EJ,FR=Ex,CJ=1;function bc(e,t){if(!e)throw new Error("MapiRequest requires a client");if(!t||!t.path||!t.method)throw new Error("MapiRequest requires an options object with path and method properties");var n={};t.body&&(n["content-type"]="application/json");var r=nT(n,t.headers),s=Object.keys(r).reduce(function(u,d){return u[d.toLowerCase()]=r[d],u},{});this.id=CJ++,this._options=t,this.emitter=new TJ,this.client=e,this.response=null,this.error=null,this.sent=!1,this.aborted=!1,this.path=t.path,this.method=t.method,this.origin=t.origin||e.origin,this.query=t.query||{},this.params=t.params||{},this.body=t.body||null,this.file=t.file||null,this.encoding=t.encoding||"utf8",this.sendFileAs=t.sendFileAs||null,this.headers=s}bc.prototype.url=function(t){var n=Tx.prependOrigin(this.path,this.origin);n=Tx.appendQueryObject(n,this.query);var r=this.params,s=t==null?this.client.accessToken:t;if(s){n=Tx.appendQueryParam(n,"access_token",s);var u=SJ(s).user;r=nT({ownerId:u},r)}return n=Tx.interpolateRouteParams(n,r),n};bc.prototype.send=function(){var t=this;if(t.sent)throw new Error("This request has already been sent. Check the response and error properties. Create a new request with clone().");return t.sent=!0,t.client.sendRequest(t).then(function(n){return t.response=n,t.emitter.emit(FR.EVENT_RESPONSE,n),n},function(n){throw t.error=n,t.emitter.emit(FR.EVENT_ERROR,n),n})};bc.prototype.abort=function(){this._nextPageRequest&&(this._nextPageRequest.abort(),delete this._nextPageRequest),!(this.response||this.error||this.aborted)&&(this.aborted=!0,this.client.abortRequest(this))};bc.prototype.eachPage=function(t){var n=this;function r(d){function o(){delete n._nextPageRequest;var y=d.nextPage();y&&(n._nextPageRequest=y,u(y))}t(null,d,o)}function s(d){t(d,null,function(){})}function u(d){d.send().then(r,s)}u(this)};bc.prototype.clone=function(){return this._extend()};bc.prototype._extend=function(t){var n=nT(this._options,t);return new bc(this.client,n)};var MJ=bc,kJ=OR,AJ=MJ,DJ=Ex;function BR(e){if(!e||!e.accessToken)throw new Error("Cannot create a client without an access token");kJ(e.accessToken),this.accessToken=e.accessToken,this.origin=e.origin||DJ.API_ORIGIN}BR.prototype.createRequest=function(t){return new AJ(this,t)};var NR=BR,VR=mJ,jR=NR;function cf(e){jR.call(this,e)}cf.prototype=Object.create(jR.prototype);cf.prototype.constructor=cf;cf.prototype.sendRequest=VR.browserSend;cf.prototype.abortRequest=VR.browserAbort;function IJ(e){return new cf(e)}var UR=IJ,PJ=UR,OJ=PJ,LJ=Object.prototype.toString,zJ=function(e){var t;return LJ.call(e)==="[object Object]"&&(t=Object.getPrototypeOf(e),t===null||t===Object.getPrototypeOf({}))},RJ=zJ,FJ=af,$R="value",iT=`
  `,Pi={};Pi.assert=function(e,t){return t=t||{},function(n){var r=wc(e,n);if(!!r){var s=rT(r,t);throw t.apiName&&(s=t.apiName+": "+s),new Error(s)}}};Pi.shape=function(t){var n=jJ(t);return function(s){var u=wc(Pi.plainObject,s);if(u)return u;for(var d,o,y=[],w=0;w<n.length;w++)d=n[w].key,o=n[w].value,u=wc(o,s[d]),u&&y.push([d].concat(u));return y.length<2?y[0]:function(M){y=y.map(function($){var j=$[0],G=rT($,M).split(`
`).join(iT);return"- "+j+": "+G});var k=M.path.join("."),O=k===$R?"":" of "+k;return"The following properties"+O+" have invalid values:"+iT+y.join(iT)}}};Pi.strictShape=function(t){var n=Pi.shape(t);return function(s){var u=n(s);if(u)return u;var d=Object.keys(s).reduce(function(o,y){return t[y]===void 0&&o.push(y),o},[]);if(d.length!==0)return function(){return"The following keys are invalid: "+d.join(", ")}}};Pi.arrayOf=function(t){return GR(t)};Pi.tuple=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return GR(t)};function GR(e){var t=Array.isArray(e),n=function(r){return t?e[r]:e};return function(s){var u=wc(Pi.plainArray,s);if(u)return u;if(t&&s.length!==e.length)return"an array with "+e.length+" items";for(var d=0;d<s.length;d++)if(u=wc(n(d),s[d]),u)return[d].concat(u)}}Pi.required=function(t){function n(r){return r==null?function(s){return WR(s,HR(s.path)?"cannot be undefined/null.":"is required.")}:t.apply(this,arguments)}return n.__required=!0,n};Pi.oneOfType=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);return function(r){var s=t.map(function(u){return wc(u,r)}).filter(Boolean);if(s.length===t.length)return s.every(function(u){return u.length===1&&typeof u[0]=="string"})?BJ(s.map(function(u){return u[0]})):s.reduce(function(u,d){return d.length>u.length?d:u})}};Pi.equal=function(t){return function(r){if(r!==t)return JSON.stringify(t)}};Pi.oneOf=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments),n=t.map(function(r){return Pi.equal(r)});return Pi.oneOfType.apply(this,n)};Pi.range=function(t){var n=t[0],r=t[1];return function(u){var d=wc(Pi.number,u);if(d||u<n||u>r)return"number between "+n+" & "+r+" (inclusive)"}};Pi.any=function(){};Pi.boolean=function(t){if(typeof t!="boolean")return"boolean"};Pi.number=function(t){if(typeof t!="number")return"number"};Pi.plainArray=function(t){if(!Array.isArray(t))return"array"};Pi.plainObject=function(t){if(!RJ(t))return"object"};Pi.string=function(t){if(typeof t!="string")return"string"};Pi.func=function(t){if(typeof t!="function")return"function"};function wc(e,t){if(!(t==null&&!e.hasOwnProperty("__required"))){var n=e(t);if(n)return Array.isArray(n)?n:[n]}}function rT(e,t){var n=e.length,r=e[n-1],s=e.slice(0,n-1);return s.length===0&&(s=[$R]),t=FJ(t,{path:s}),typeof r=="function"?r(t):WR(t,NJ(r))}function BJ(e){return e.length<2?e[0]:e.length===2?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e.slice(-1)}function NJ(e){return"must be "+VJ(e)+"."}function VJ(e){return/^an? /.test(e)?e:/^[aeiou]/i.test(e)?"an "+e:/^[a-z]/i.test(e)?"a "+e:e}function WR(e,t){var n=HR(e.path),r=e.path.join(".")+" "+t,s=n?"Item at position ":"";return s+r}function HR(e){return typeof e[e.length-1]=="number"||typeof e[0]=="number"}function jJ(e){return Object.keys(e||{}).map(function(t){return{key:t,value:e[t]}})}Pi.validate=wc;Pi.processMessage=rT;var UJ=Pi,$J=af,uf=UJ;function GJ(e){if(typeof window!="undefined")return e instanceof Ls.Blob||e instanceof Ls.ArrayBuffer?void 0:"Blob or ArrayBuffer";if(!(typeof e=="string"||e.pipe!==void 0))return"Filename or Readable stream"}function WJ(e,t){return uf.assert(uf.strictShape(e),t)}function HJ(e){var t="date";if(typeof e=="boolean")return t;try{var n=new Date(e);if(n.getTime&&isNaN(n.getTime()))return t}catch{return t}}function qJ(e){return uf.tuple(uf.number,uf.number)(e)}var YJ=$J(uf,{file:GJ,date:HJ,coordinates:qJ,assertShape:WJ});function ZJ(e,t){var n=function(r,s){return t.indexOf(r)!==-1&&s!==void 0};return typeof t=="function"&&(n=t),Object.keys(e).filter(function(r){return n(r,e[r])}).reduce(function(r,s){return r[s]=e[s],r},{})}var XJ=ZJ;function KJ(e,t){return Object.keys(e).reduce(function(n,r){return n[r]=t(r,e[r]),n},{})}var JJ=KJ,QJ=JJ;function eQ(e){return QJ(e,function(t,n){return typeof n=="boolean"?JSON.stringify(n):n})}var tQ=eQ,nQ=NR,iQ=UR;function rQ(e){return function(t){var n;nQ.prototype.isPrototypeOf(t)?n=t:n=iQ(t);var r=Object.create(e);return r.client=n,r}}var oQ=rQ,qR=af,jn=YJ,Cx=XJ,YR=tQ,sQ=oQ,oT={},ZR=["country","region","postcode","district","place","locality","neighborhood","address","poi","poi.landmark"];oT.forwardGeocode=function(e){jn.assertShape({query:jn.required(jn.string),mode:jn.oneOf("mapbox.places","mapbox.places-permanent"),countries:jn.arrayOf(jn.string),proximity:jn.oneOf(jn.coordinates,"ip"),types:jn.arrayOf(jn.oneOf(ZR)),autocomplete:jn.boolean,bbox:jn.arrayOf(jn.number),limit:jn.number,language:jn.arrayOf(jn.string),routing:jn.boolean,fuzzyMatch:jn.boolean,worldview:jn.string})(e),e.mode=e.mode||"mapbox.places";var t=YR(qR({country:e.countries},Cx(e,["proximity","types","autocomplete","bbox","limit","language","routing","fuzzyMatch","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Cx(e,["mode","query"]),query:t})};oT.reverseGeocode=function(e){jn.assertShape({query:jn.required(jn.coordinates),mode:jn.oneOf("mapbox.places","mapbox.places-permanent"),countries:jn.arrayOf(jn.string),types:jn.arrayOf(jn.oneOf(ZR)),bbox:jn.arrayOf(jn.number),limit:jn.number,language:jn.arrayOf(jn.string),reverseMode:jn.oneOf("distance","score"),routing:jn.boolean,worldview:jn.string})(e),e.mode=e.mode||"mapbox.places";var t=YR(qR({country:e.countries},Cx(e,["country","types","bbox","limit","language","reverseMode","routing","worldview"])));return this.client.createRequest({method:"GET",path:"/geocoding/v5/:mode/:query.json",params:Cx(e,["mode","query"]),query:t})};var aQ=sQ(oT);let lQ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",XR=e=>crypto.getRandomValues(new Uint8Array(e)),KR=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*r*t/e.length);return()=>{let u="";for(;;){let d=n(s),o=s;for(;o--;)if(u+=e[d[o]&r]||"",u.length===t)return u}}},cQ=(e,t)=>KR(e,t,XR),uQ=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=n[e]&63;r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r<63?t+="_":t+="-"}return t};var hQ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",nanoid:uQ,customAlphabet:cQ,customRandom:KR,urlAlphabet:lQ,random:XR}),dQ=HM(hQ),fQ=dQ.nanoid;function JR(e){this.origin=e.origin||"https://api.mapbox.com",this.endpoint="events/v2",this.access_token=e.accessToken,this.version="0.2.0",this.sessionID=this.generateSessionID(),this.userAgent=this.getUserAgent(),this.options=e,this.send=this.send.bind(this),this.countries=e.countries?e.countries.split(","):null,this.types=e.types?e.types.split(","):null,this.bbox=e.bbox?e.bbox:null,this.language=e.language?e.language.split(","):null,this.limit=e.limit?+e.limit:null,this.locale=navigator.language||null,this.enableEventLogging=this.shouldEnableLogging(e),this.eventQueue=new Array,this.flushInterval=e.flushInterval||1e3,this.maxQueueSize=e.maxQueueSize||100,this.timer=this.flushInterval?setTimeout(this.flush.bind(this),this.flushInterval):null,this.lastSentInput="",this.lastSentIndex=0}JR.prototype={select:function(e,t){var n=this.getSelectedIndex(e,t),r=this.getEventPayload("search.select",t);if(r.resultIndex=n,r.resultPlaceName=e.place_name,r.resultId=e.id,!(n===this.lastSentIndex&&r.queryString===this.lastSentInput||n==-1)&&(this.lastSentIndex=n,this.lastSentInput=r.queryString,!!r.queryString))return this.push(r)},start:function(e){var t=this.getEventPayload("search.start",e);if(!!t.queryString)return this.push(t)},keyevent:function(e,t){if(!!e.key&&!(e.metaKey||[9,27,37,39,13,38,40].indexOf(e.keyCode)!==-1)){var n=this.getEventPayload("search.keystroke",t);if(n.lastAction=e.key,!!n.queryString)return this.push(n)}},send:function(e,t){if(!this.enableEventLogging)return t?t():void 0;var n=this.getRequestOptions(e);this.request(n,function(r){if(r)return this.handleError(r,t);if(t)return t()}.bind(this))},getRequestOptions:function(e){Array.isArray(e)||(e=[e]);var t={method:"POST",host:this.origin,path:this.endpoint+"?access_token="+this.access_token,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return t},getEventPayload:function(e,t){var n;t.options.proximity?typeof t.options.proximity=="object"?n=[t.options.proximity.longitude,t.options.proximity.latitude]:t.options.proximity==="ip"?n=[999,999]:n=t.options.proximity:n=null;var r=t._map?t._map.getZoom():void 0,s={event:e,created:+new Date,sessionIdentifier:this.sessionID,country:this.countries,userAgent:this.userAgent,language:this.language,bbox:this.bbox,types:this.types,endpoint:"mapbox.places",autocomplete:t.options.autocomplete,fuzzyMatch:t.options.fuzzyMatch,proximity:n,limit:t.options.limit,routing:t.options.routing,worldview:t.options.worldview,mapZoom:r,keyboardLocale:this.locale};return e==="search.select"?s.queryString=t.inputString:e!="search.select"&&t._inputEl?s.queryString=t._inputEl.value:s.queryString=t.inputString,s},request:function(e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(this.readyState==4)return this.status==204?t(null):t(this.statusText)},n.open(e.method,e.host+"/"+e.path,!0);for(var r in e.headers){var s=e.headers[r];n.setRequestHeader(r,s)}n.send(e.body)},handleError:function(e,t){if(t)return t(e)},generateSessionID:function(){return fQ()},getUserAgent:function(){return"mapbox-gl-geocoder."+this.version+"."+navigator.userAgent},getSelectedIndex:function(e,t){if(!!t._typeahead){var n=t._typeahead.data,r=e.id,s=n.map(function(d){return d.id}),u=s.indexOf(r);return u}},shouldEnableLogging:function(e){return!(e.enableEventLogging===!1||e.origin&&e.origin!=="https://api.mapbox.com"||e.localGeocoder||e.filter)},flush:function(){this.eventQueue.length>0&&(this.send(this.eventQueue),this.eventQueue=new Array),this.timer&&clearTimeout(this.timer),this.flushInterval&&(this.timer=setTimeout(this.flush.bind(this),this.flushInterval))},push:function(e,t){this.eventQueue.push(e),(this.eventQueue.length>=this.maxQueueSize||t)&&this.flush()},remove:function(){this.flush()}};var pQ=JR,mQ={de:"Suche",it:"Ricerca",en:"Search",nl:"Zoeken",fr:"Chercher",ca:"Cerca",he:"\u05DC\u05D7\u05E4\u05E9",ja:"\u30B5\u30FC\u30C1",lv:"Mekl\u0113t",pt:"Procurar",sr:"\u041F\u0440\u0435\u0442\u0440\u0430\u0433\u0430",zh:"\u641C\u7D22",cs:"Vyhled\xE1v\xE1n\xED",hu:"Keres\xE9s",ka:"\u10EB\u10D8\u10D4\u10D1\u10D0",nb:"S\xF8ke",sk:"Vyh\u013Ead\xE1vanie",th:"\u0E04\u0E49\u0E19\u0E2B\u0E32",fi:"Hae",is:"Leita",ko:"\uC218\uC0C9",pl:"Szukaj",sl:"Iskanje",fa:"\u062C\u0633\u062A\u062C\u0648",ru:"\u041F\u043E\u0438\u0441\u043A"},gQ={placeholder:mQ},QR={exports:{}};(function(e){(function(t,n,r){e.exports?e.exports=r():t[n]=r()})(Ls,"subtag",function(){var t="",n=/^([a-zA-Z]{2,3})(?:[_-]+([a-zA-Z]{3})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{4})(?=$|[_-]+))?(?:[_-]+([a-zA-Z]{2}|[0-9]{3})(?=$|[_-]+))?/;function r(y){return y.match(n)||[]}function s(y){return r(y).filter(function(w,M){return w&&M})}function u(y){return y=r(y),{language:y[1]||t,extlang:y[2]||t,script:y[3]||t,region:y[4]||t}}function d(y,w,M){Object.defineProperty(y,w,{value:M,enumerable:!0})}function o(y,w,M){function k(O){return r(O)[y]||t}d(k,"pattern",w),d(u,M,k)}return o(1,/^[a-zA-Z]{2,3}$/,"language"),o(2,/^[a-zA-Z]{3}$/,"extlang"),o(3,/^[a-zA-Z]{4}$/,"script"),o(4,/^[a-zA-Z]{2}$|^[0-9]{3}$/,"region"),d(u,"split",s),u})})(QR);function e5(){}e5.prototype={isSupport:function(){return Boolean(window.navigator.geolocation)},getCurrentPosition:function(){const e={enableHighAccuracy:!0};return new Promise(function(t,n){window.navigator.geolocation.getCurrentPosition(t,n,e)})}};var _Q=e5;function yQ(e,t){const n=t5(e),r=["address","street","place","country"];var s;if(typeof t=="function")return t(n);const u=r.indexOf(t);return u===-1?s=r:s=r.slice(u),s.reduce(function(d,o){return n[o]?(d!==""&&(d=d+", "),d+n[o]):d},"")}function t5(e){const t=e.address||"",n=e.text||"",r=e.place_name||"",u={address:r.split(",")[0],houseNumber:t,street:n,placeName:r};return e.context.forEach(function(d){const o=d.id.split(".")[0];u[o]=d.text}),u}const vQ=/^[ ]*(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)[ ]*$/;var xQ={transformFeatureToGeolocationText:yQ,getAddressInfo:t5,REVERSE_GEOCODE_COORD_RGX:vQ},bQ=MK,wQ=WK,Xu=af,EQ=KS.exports.EventEmitter,n5=JK,sT=OJ,aT=aQ,SQ=pQ,TQ=gQ,CQ=QR.exports,MQ=_Q,i5=xQ;const Ec={FORWARD:0,LOCAL:1,REVERSE:2};function kQ(){var e=document.createElement("div");return e.className="mapboxgl-ctrl-geocoder--powered-by",e.innerHTML='<a href="https://www.mapbox.com/search-service" target="_blank">Powered by Mapbox</a>',e}function r5(e){this._eventEmitter=new EQ,this.options=Xu({},this.options,e),this.inputString="",this.fresh=!0,this.lastSelected=null,this.geolocation=new MQ}r5.prototype={options:{zoom:16,flyTo:!0,trackProximity:!0,minLength:2,reverseGeocode:!1,flipCoordinates:!1,limit:5,origin:"https://api.mapbox.com",enableEventLogging:!0,marker:!0,mapboxgl:null,collapsed:!1,clearAndBlurOnEsc:!1,clearOnBlur:!1,enableGeolocation:!1,addressAccuracy:"street",getItemValue:function(e){return e.place_name},render:function(e){var t=e.place_name.split(",");return'<div class="mapboxgl-ctrl-geocoder--suggestion"><div class="mapboxgl-ctrl-geocoder--suggestion-title">'+t[0]+'</div><div class="mapboxgl-ctrl-geocoder--suggestion-address">'+t.splice(1,t.length).join(",")+"</div></div>"}},addTo:function(e){function t(n,r){if(!document.body.contains(r))throw new Error("Element provided to #addTo() exists, but is not in the DOM");const s=n.onAdd();r.appendChild(s)}if(e._controlContainer)e.addControl(this);else if(e instanceof HTMLElement)t(this,e);else if(typeof e=="string"){const n=document.querySelectorAll(e);if(n.length===0)throw new Error("Element ",e,"not found.");if(n.length>1)throw new Error("Geocoder can only be added to a single html element");t(this,n[0])}else throw new Error("Error: addTo must be a mapbox-gl-js map, an html element, or a CSS selector query for a single html element")},onAdd:function(e){if(e&&typeof e!="string"&&(this._map=e),this.setLanguage(),this.options.localGeocoderOnly||(this.geocoderService=aT(sT({accessToken:this.options.accessToken,origin:this.options.origin}))),this.options.localGeocoderOnly&&!this.options.localGeocoder)throw new Error("A localGeocoder function must be specified to use localGeocoderOnly mode");this.eventManager=new SQ(this.options),this._onChange=this._onChange.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onPaste=this._onPaste.bind(this),this._onBlur=this._onBlur.bind(this),this._showButton=this._showButton.bind(this),this._hideButton=this._hideButton.bind(this),this._onQueryResult=this._onQueryResult.bind(this),this.clear=this.clear.bind(this),this._updateProximity=this._updateProximity.bind(this),this._collapse=this._collapse.bind(this),this._unCollapse=this._unCollapse.bind(this),this._clear=this._clear.bind(this),this._clearOnBlur=this._clearOnBlur.bind(this),this._geolocateUser=this._geolocateUser.bind(this);var t=this.container=document.createElement("div");t.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl";var n=this.createIcon("search",'<path d="M7.4 2.5c-2.7 0-4.9 2.2-4.9 4.9s2.2 4.9 4.9 4.9c1 0 1.8-.2 2.5-.8l3.7 3.7c.2.2.4.3.8.3.7 0 1.1-.4 1.1-1.1 0-.3-.1-.5-.3-.8L11.4 10c.4-.8.8-1.6.8-2.5.1-2.8-2.1-5-4.8-5zm0 1.6c1.8 0 3.2 1.4 3.2 3.2s-1.4 3.2-3.2 3.2-3.3-1.3-3.3-3.1 1.4-3.3 3.3-3.3z"/>');this._inputEl=document.createElement("input"),this._inputEl.type="text",this._inputEl.className="mapboxgl-ctrl-geocoder--input",this.setPlaceholder(),this.options.collapsed&&(this._collapse(),this.container.addEventListener("mouseenter",this._unCollapse),this.container.addEventListener("mouseleave",this._collapse),this._inputEl.addEventListener("focus",this._unCollapse)),(this.options.collapsed||this.options.clearOnBlur)&&this._inputEl.addEventListener("blur",this._onBlur),this._inputEl.addEventListener("keydown",wQ(this._onKeyDown,200)),this._inputEl.addEventListener("paste",this._onPaste),this._inputEl.addEventListener("change",this._onChange),this.container.addEventListener("mouseenter",this._showButton),this.container.addEventListener("mouseleave",this._hideButton),this._inputEl.addEventListener("keyup",function(w){this.eventManager.keyevent(w,this)}.bind(this));var r=document.createElement("div");r.classList.add("mapboxgl-ctrl-geocoder--pin-right"),this._clearEl=document.createElement("button"),this._clearEl.setAttribute("aria-label","Clear"),this._clearEl.addEventListener("click",this.clear),this._clearEl.className="mapboxgl-ctrl-geocoder--button";var s=this.createIcon("close",'<path d="M3.8 2.5c-.6 0-1.3.7-1.3 1.3 0 .3.2.7.5.8L7.2 9 3 13.2c-.3.3-.5.7-.5 1 0 .6.7 1.3 1.3 1.3.3 0 .7-.2 1-.5L9 10.8l4.2 4.2c.2.3.7.3 1 .3.6 0 1.3-.7 1.3-1.3 0-.3-.2-.7-.3-1l-4.4-4L15 4.6c.3-.2.5-.5.5-.8 0-.7-.7-1.3-1.3-1.3-.3 0-.7.2-1 .3L9 7.1 4.8 2.8c-.3-.1-.7-.3-1-.3z"/>');if(this._clearEl.appendChild(s),this._loadingEl=this.createIcon("loading",'<path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"/><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"/>'),r.appendChild(this._clearEl),r.appendChild(this._loadingEl),t.appendChild(n),t.appendChild(this._inputEl),t.appendChild(r),this.options.enableGeolocation&&this.geolocation.isSupport()){this._geolocateEl=document.createElement("button"),this._geolocateEl.setAttribute("aria-label","Geolocate"),this._geolocateEl.addEventListener("click",this._geolocateUser),this._geolocateEl.className="mapboxgl-ctrl-geocoder--button";var u=this.createIcon("geolocate",'<path d="M12.999 3.677L2.042 8.269c-.962.403-.747 1.823.29 1.912l5.032.431.431 5.033c.089 1.037 1.509 1.252 1.912.29l4.592-10.957c.345-.822-.477-1.644-1.299-1.299z" fill="#4264fb"/>');this._geolocateEl.appendChild(u),r.appendChild(this._geolocateEl),this._showGeolocateButton()}var d=this._typeahead=new bQ(this._inputEl,[],{filter:!1,minLength:this.options.minLength,limit:this.options.limit});this.setRenderFunction(this.options.render),d.getItemValue=this.options.getItemValue;var o=d.list.draw,y=this._footerNode=kQ();return d.list.draw=function(){o.call(this),y.addEventListener("mousedown",function(){this.selectingListItem=!0}.bind(this)),y.addEventListener("mouseup",function(){this.selectingListItem=!1}.bind(this)),this.element.appendChild(y)},this.mapMarker=null,this._handleMarker=this._handleMarker.bind(this),this._map&&(this.options.trackProximity&&(this._updateProximity(),this._map.on("moveend",this._updateProximity)),this._mapboxgl=this.options.mapboxgl,!this._mapboxgl&&this.options.marker&&(console.error("No mapboxgl detected in options. Map markers are disabled. Please set options.mapboxgl."),this.options.marker=!1)),t},_geolocateUser:function(){this._hideGeolocateButton(),this._showLoadingIcon(),this.geolocation.getCurrentPosition().then(function(e){this._hideLoadingIcon();const t={geometry:{type:"Point",coordinates:[e.coords.longitude,e.coords.latitude]}};this._handleMarker(t),this._fly(t),this._typeahead.clear(),this._typeahead.selected=!0,this.lastSelected=JSON.stringify(t),this._showClearButton(),this.fresh=!1;const n={limit:1,language:[this.options.language],query:t.geometry.coordinates,types:["address"]};if(this.options.localGeocoderOnly){const r=t.geometry.coordinates[0]+","+t.geometry.coordinates[1];this._setInputValue(r),this._eventEmitter.emit("result",{result:t})}else this.geocoderService.reverseGeocode(n).send().then(function(r){const s=r.body.features[0];if(s){const u=i5.transformFeatureToGeolocationText(s,this.options.addressAccuracy);this._setInputValue(u),s.user_coordinates=t.geometry.coordinates,this._eventEmitter.emit("result",{result:s})}else this._eventEmitter.emit("result",{result:{user_coordinates:t.geometry.coordinates}})}.bind(this))}.bind(this)).catch(function(e){e.code===1?this._renderUserDeniedGeolocationError():this._renderLocationError(),this._hideLoadingIcon(),this._showGeolocateButton(),this._hideAttribution()}.bind(this))},createIcon:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","mapboxgl-ctrl-geocoder--icon mapboxgl-ctrl-geocoder--icon-"+e),n.setAttribute("viewBox","0 0 18 18"),n.setAttribute("xml:space","preserve"),n.setAttribute("width",18),n.setAttribute("height",18),n.innerHTML=t,n},onRemove:function(){return this.container.parentNode.removeChild(this.container),this.options.trackProximity&&this._map&&this._map.off("moveend",this._updateProximity),this._removeMarker(),this._map=null,this},_setInputValue:function(e){this._inputEl.value=e,setTimeout(function(){this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0)}.bind(this),1)},_onPaste:function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t.length>=this.options.minLength&&this._geocode(t)},_onKeyDown:function(e){var t=27,n=9;if(e.keyCode===t&&this.options.clearAndBlurOnEsc)return this._clear(e),this._inputEl.blur();var r=e.target&&e.target.shadowRoot?e.target.shadowRoot.activeElement:e.target,s=r?r.value:"";if(!s)return this.fresh=!0,e.keyCode!==n&&this.clear(e),this._showGeolocateButton(),this._hideClearButton();this._hideGeolocateButton(),!(e.metaKey||[n,t,37,39,13,38,40].indexOf(e.keyCode)!==-1)&&r.value.length>=this.options.minLength&&this._geocode(r.value)},_showButton:function(){this._typeahead.selected&&this._showClearButton()},_hideButton:function(){this._typeahead.selected&&this._hideClearButton()},_showClearButton:function(){this._clearEl.style.display="block"},_hideClearButton:function(){this._clearEl.style.display="none"},_showGeolocateButton:function(){this._geolocateEl&&this.geolocation.isSupport()&&(this._geolocateEl.style.display="block")},_hideGeolocateButton:function(){this._geolocateEl&&(this._geolocateEl.style.display="none")},_showLoadingIcon:function(){this._loadingEl.style.display="block"},_hideLoadingIcon:function(){this._loadingEl.style.display="none"},_showAttribution:function(){this._footerNode.style.display="block"},_hideAttribution:function(){this._footerNode.style.display="none"},_onBlur:function(e){this.options.clearOnBlur&&this._clearOnBlur(e),this.options.collapsed&&this._collapse()},_onChange:function(){var e=this._typeahead.selected;e&&JSON.stringify(e)!==this.lastSelected&&(this._hideClearButton(),this.options.flyTo&&this._fly(e),this.options.marker&&this._mapboxgl&&this._handleMarker(e),this._inputEl.focus(),this._inputEl.scrollLeft=0,this._inputEl.setSelectionRange(0,0),this.lastSelected=JSON.stringify(e),this._eventEmitter.emit("result",{result:e}),this.eventManager.select(e,this))},_fly:function(e){var t;if(e.properties&&n5[e.properties.short_code])t=Xu({},this.options.flyTo),this._map&&this._map.fitBounds(n5[e.properties.short_code].bbox,t);else if(e.bbox){var n=e.bbox;t=Xu({},this.options.flyTo),this._map&&this._map.fitBounds([[n[0],n[1]],[n[2],n[3]]],t)}else{var r={zoom:this.options.zoom};t=Xu({},r,this.options.flyTo),e.center?t.center=e.center:e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&(t.center=e.geometry.coordinates),this._map&&this._map.flyTo(t)}},_requestType:function(e,t){var n;return e.localGeocoderOnly?n=Ec.LOCAL:e.reverseGeocode&&i5.REVERSE_GEOCODE_COORD_RGX.test(t)?n=Ec.REVERSE:n=Ec.FORWARD,n},_setupConfig:function(e,t){const n=["bbox","limit","proximity","countries","types","language","reverseMode","mode","autocomplete","fuzzyMatch","routing","worldview"],r=/[\s,]+/;var s=this,u=n.reduce(function(o,y){if(s.options[y]===void 0||s.options[y]===null)return o;["countries","types","language"].indexOf(y)>-1?o[y]=s.options[y].split(r):o[y]=s.options[y];const w=typeof s.options[y].longitude=="number"&&typeof s.options[y].latitude=="number";if(y==="proximity"&&w){const M=s.options[y].longitude,k=s.options[y].latitude;o[y]=[M,k]}return o},{});switch(e){case Ec.REVERSE:{var d=t.split(r).map(function(o){return parseFloat(o,10)});s.options.flipCoordinates||d.reverse(),u.types&&u.types[0],u=Xu(u,{query:d,limit:1}),["proximity","autocomplete","fuzzyMatch","bbox"].forEach(function(o){o in u&&delete u[o]})}break;case Ec.FORWARD:{const o=t.trim();/^(-?\d{1,3}(\.\d{0,256})?)[, ]+(-?\d{1,3}(\.\d{0,256})?)?$/.test(o)&&(t=t.replace(/,/g," ")),u=Xu(u,{query:t})}break}return u},_geocode:function(e){this.inputString=e,this._showLoadingIcon(),this._eventEmitter.emit("loading",{query:e});const t=this._requestType(this.options,e),n=this._setupConfig(t,e);var r;switch(t){case Ec.LOCAL:r=Promise.resolve();break;case Ec.FORWARD:r=this.geocoderService.forwardGeocode(n).send();break;case Ec.REVERSE:r=this.geocoderService.reverseGeocode(n).send();break}var s=this.options.localGeocoder?this.options.localGeocoder(e)||[]:[],u=[],d=null;return r.catch(function(o){d=o}.bind(this)).then(function(o){this._hideLoadingIcon();var y={};return o?o.statusCode=="200"&&(y=o.body,y.request=o.request,y.headers=o.headers):y={type:"FeatureCollection",features:[]},y.config=n,this.fresh&&(this.eventManager.start(this),this.fresh=!1),y.features=y.features?s.concat(y.features):s,this.options.externalGeocoder?(u=this.options.externalGeocoder(e,y.features)||Promise.resolve([]),u.then(function(w){return y.features=y.features?w.concat(y.features):w,y},function(){return y})):y}.bind(this)).then(function(o){if(d)throw d;this.options.filter&&o.features.length&&(o.features=o.features.filter(this.options.filter)),o.features.length?(this._showClearButton(),this._hideGeolocateButton(),this._showAttribution(),this._eventEmitter.emit("results",o),this._typeahead.update(o.features)):(this._hideClearButton(),this._hideAttribution(),this._typeahead.selected=null,this._renderNoResults(),this._eventEmitter.emit("results",o))}.bind(this)).catch(function(o){this._hideLoadingIcon(),this._hideAttribution(),s.length&&this.options.localGeocoder||u.length&&this.options.externalGeocoder?(this._showClearButton(),this._hideGeolocateButton(),this._typeahead.update(s)):(this._hideClearButton(),this._typeahead.selected=null,this._renderError()),this._eventEmitter.emit("results",{features:s}),this._eventEmitter.emit("error",{error:o})}.bind(this)),r},_clear:function(e){e&&e.preventDefault(),this._inputEl.value="",this._typeahead.selected=null,this._typeahead.clear(),this._onChange(),this._hideClearButton(),this._showGeolocateButton(),this._removeMarker(),this.lastSelected=null,this._eventEmitter.emit("clear"),this.fresh=!0},clear:function(e){this._clear(e),this._inputEl.focus()},_clearOnBlur:function(e){var t=this;e.relatedTarget&&t._clear(e)},_onQueryResult:function(e){var t=e.body;if(!!t.features.length){var n=t.features[0];this._typeahead.selected=n,this._inputEl.value=n.place_name,this._onChange()}},_updateProximity:function(){if(!(!this._map||!this.options.trackProximity))if(this._map.getZoom()>9){var e=this._map.getCenter().wrap();this.setProximity({longitude:e.lng,latitude:e.lat},!1)}else this.setProximity(null,!1)},_collapse:function(){!this._inputEl.value&&this._inputEl!==document.activeElement&&this.container.classList.add("mapboxgl-ctrl-geocoder--collapsed")},_unCollapse:function(){this.container.classList.remove("mapboxgl-ctrl-geocoder--collapsed")},query:function(e){return this._geocode(e).then(this._onQueryResult),this},_renderError:function(){var e="<div class='mapbox-gl-geocoder--error'>There was an error reaching the server</div>";this._renderMessage(e)},_renderLocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>A location error has occurred</div>";this._renderMessage(e)},_renderNoResults:function(){var e="<div class='mapbox-gl-geocoder--error mapbox-gl-geocoder--no-results'>No results found</div>";this._renderMessage(e)},_renderUserDeniedGeolocationError:function(){var e="<div class='mapbox-gl-geocoder--error'>Geolocation permission denied</div>";this._renderMessage(e)},_renderMessage:function(e){this._typeahead.update([]),this._typeahead.selected=null,this._typeahead.clear(),this._typeahead.renderError(e)},_getPlaceholderText:function(){if(this.options.placeholder)return this.options.placeholder;if(this.options.language){var e=this.options.language.split(",")[0],t=CQ.language(e),n=TQ.placeholder[t];if(n)return n}return"Search"},setInput:function(e){return this._inputEl.value=e,this._typeahead.selected=null,this._typeahead.clear(),e.length>=this.options.minLength&&this._geocode(e),this},setProximity:function(e,t=!0){return this.options.proximity=e,t&&(this.options.trackProximity=!1),this},getProximity:function(){return this.options.proximity},setRenderFunction:function(e){return e&&typeof e=="function"&&(this._typeahead.render=e),this},getRenderFunction:function(){return this._typeahead.render},setLanguage:function(e){var t=navigator.language||navigator.userLanguage||navigator.browserLanguage;return this.options.language=e||this.options.language||t,this},getLanguage:function(){return this.options.language},getZoom:function(){return this.options.zoom},setZoom:function(e){return this.options.zoom=e,this},getFlyTo:function(){return this.options.flyTo},setFlyTo:function(e){return this.options.flyTo=e,this},getPlaceholder:function(){return this.options.placeholder},setPlaceholder:function(e){return this.placeholder=e||this._getPlaceholderText(),this._inputEl.placeholder=this.placeholder,this._inputEl.setAttribute("aria-label",this.placeholder),this},getBbox:function(){return this.options.bbox},setBbox:function(e){return this.options.bbox=e,this},getCountries:function(){return this.options.countries},setCountries:function(e){return this.options.countries=e,this},getTypes:function(){return this.options.types},setTypes:function(e){return this.options.types=e,this},getMinLength:function(){return this.options.minLength},setMinLength:function(e){return this.options.minLength=e,this._typeahead&&(this._typeahead.options.minLength=e),this},getLimit:function(){return this.options.limit},setLimit:function(e){return this.options.limit=e,this._typeahead&&(this._typeahead.options.limit=e),this},getFilter:function(){return this.options.filter},setFilter:function(e){return this.options.filter=e,this},setOrigin:function(e){return this.options.origin=e,this.geocoderService=aT(sT({accessToken:this.options.accessToken,origin:this.options.origin})),this},getOrigin:function(){return this.options.origin},setAccessToken:function(e){return this.options.accessToken=e,this.geocoderService=aT(sT({accessToken:this.options.accessToken,origin:this.options.origin})),this},setAutocomplete:function(e){return this.options.autocomplete=e,this},getAutocomplete:function(){return this.options.autocomplete},setFuzzyMatch:function(e){return this.options.fuzzyMatch=e,this},getFuzzyMatch:function(){return this.options.fuzzyMatch},setRouting:function(e){return this.options.routing=e,this},getRouting:function(){return this.options.routing},setWorldview:function(e){return this.options.worldview=e,this},getWorldview:function(){return this.options.worldview},_handleMarker:function(e){if(!!this._map){this._removeMarker();var t={color:"#4668F2"},n=Xu({},t,this.options.marker);return this.mapMarker=new this._mapboxgl.Marker(n),e.center?this.mapMarker.setLngLat(e.center).addTo(this._map):e.geometry&&e.geometry.type&&e.geometry.type==="Point"&&e.geometry.coordinates&&this.mapMarker.setLngLat(e.geometry.coordinates).addTo(this._map),this}},_removeMarker:function(){this.mapMarker&&(this.mapMarker.remove(),this.mapMarker=null)},on:function(e,t){return this._eventEmitter.on(e,t),this},off:function(e,t){return this._eventEmitter.removeListener(e,t),this.eventManager.remove(),this}};var tee=r5,lT={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ls,function(){var n,r,s;function u(o,y){if(!n)n=y;else if(!r)r=y;else{var w="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",M={};n(M),s=y(M),typeof window!="undefined"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}u(["exports"],function(o){var y=typeof self!="undefined"?self:{},w=M;function M(l,i,a,h){this.cx=3*l,this.bx=3*(a-l)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=l,this.p1y=h,this.p2x=a,this.p2y=h}M.prototype.sampleCurveX=function(l){return((this.ax*l+this.bx)*l+this.cx)*l},M.prototype.sampleCurveY=function(l){return((this.ay*l+this.by)*l+this.cy)*l},M.prototype.sampleCurveDerivativeX=function(l){return(3*this.ax*l+2*this.bx)*l+this.cx},M.prototype.solveCurveX=function(l,i){var a,h,p,g,v;for(i===void 0&&(i=1e-6),p=l,v=0;v<8;v++){if(g=this.sampleCurveX(p)-l,Math.abs(g)<i)return p;var x=this.sampleCurveDerivativeX(p);if(Math.abs(x)<1e-6)break;p-=g/x}if((p=l)<(a=0))return a;if(p>(h=1))return h;for(;a<h;){if(g=this.sampleCurveX(p),Math.abs(g-l)<i)return p;l>g?a=p:h=p,p=.5*(h-a)+a}return p},M.prototype.solve=function(l,i){return this.sampleCurveY(this.solveCurveX(l,i))};var k=O;function O(l,i){this.x=l,this.y=i}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(l){return this.clone()._add(l)},sub:function(l){return this.clone()._sub(l)},multByPoint:function(l){return this.clone()._multByPoint(l)},divByPoint:function(l){return this.clone()._divByPoint(l)},mult:function(l){return this.clone()._mult(l)},div:function(l){return this.clone()._div(l)},rotate:function(l){return this.clone()._rotate(l)},rotateAround:function(l,i){return this.clone()._rotateAround(l,i)},matMult:function(l){return this.clone()._matMult(l)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(l){return this.x===l.x&&this.y===l.y},dist:function(l){return Math.sqrt(this.distSqr(l))},distSqr:function(l){var i=l.x-this.x,a=l.y-this.y;return i*i+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith:function(l){return this.angleWithSep(l.x,l.y)},angleWithSep:function(l,i){return Math.atan2(this.x*i-this.y*l,this.x*l+this.y*i)},_matMult:function(l){var i=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=i,this},_add:function(l){return this.x+=l.x,this.y+=l.y,this},_sub:function(l){return this.x-=l.x,this.y-=l.y,this},_mult:function(l){return this.x*=l,this.y*=l,this},_div:function(l){return this.x/=l,this.y/=l,this},_multByPoint:function(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint:function(l){return this.x/=l.x,this.y/=l.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var l=this.y;return this.y=this.x,this.x=-l,this},_rotate:function(l){var i=Math.cos(l),a=Math.sin(l),h=a*this.x+i*this.y;return this.x=i*this.x-a*this.y,this.y=h,this},_rotateAround:function(l,i){var a=Math.cos(l),h=Math.sin(l),p=i.y+h*(this.x-i.x)+a*(this.y-i.y);return this.x=i.x+a*(this.x-i.x)-h*(this.y-i.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},O.convert=function(l){return l instanceof O?l:Array.isArray(l)?new O(l[0],l[1]):l};const $=Math.PI/180,j=180/Math.PI;function G(l){return l*$}function B(l){return l*j}const U=[[0,0],[1,0],[1,1],[0,1]];function Z(l){if(l<=0)return 0;if(l>=1)return 1;const i=l*l,a=i*l;return 4*(l<.5?a:3*(l-i)+a-.75)}function re(l,i,a,h){const p=new w(l,i,a,h);return function(g){return p.solve(g)}}const ie=re(.25,.1,.25,1);function de(l,i,a){return Math.min(a,Math.max(i,l))}function xe(l,i,a){return(a=de((a-l)/(i-l),0,1))*a*(3-2*a)}function Ce(l,i,a){const h=a-i,p=((l-i)%h+h)%h+i;return p===i?a:p}function je(l,i,a){if(!l.length)return a(null,[]);let h=l.length;const p=new Array(l.length);let g=null;l.forEach((v,x)=>{i(v,(S,T)=>{S&&(g=S),p[x]=T,--h==0&&a(g,p)})})}function ze(l){const i=[];for(const a in l)i.push(l[a]);return i}function pt(l,...i){for(const a of i)for(const h in a)l[h]=a[h];return l}let mt=1;function ot(){return mt++}function kt(){return function l(i){return i?(i^Math.random()*(16>>i/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,l)}()}function Ne(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))}function Ve(l){return!!l&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(l)}function tt(l,i){l.forEach(a=>{i[a]&&(i[a]=i[a].bind(i))})}function ct(l,i){return l.indexOf(i,l.length-i.length)!==-1}function Ot(l,i,a){const h={};for(const p in l)h[p]=i.call(a||this,l[p],p,l);return h}function Ut(l,i,a){const h={};for(const p in l)i.call(a||this,l[p],p,l)&&(h[p]=l[p]);return h}function un(l){return Array.isArray(l)?l.map(un):typeof l=="object"&&l?Ot(l,un):l}const st={};function at(l){st[l]||(typeof console!="undefined"&&console.warn(l),st[l]=!0)}function xt(l,i,a){return(a.y-l.y)*(i.x-l.x)>(i.y-l.y)*(a.x-l.x)}function Vt(l){let i=0;for(let a,h,p=0,g=l.length,v=g-1;p<g;v=p++)a=l[p],h=l[v],i+=(h.x-a.x)*(a.y+h.y);return i}function Gt(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function hn(l){const i={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,h,p,g)=>{const v=p||g;return i[h]=!v||v.toLowerCase(),""}),i["max-age"]){const a=parseInt(i["max-age"],10);isNaN(a)?delete i["max-age"]:i["max-age"]=a}return i}let Tn=null;function ci(l){if(Tn==null){const i=l.navigator?l.navigator.userAgent:null;Tn=!!l.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Tn}function Oi(l){try{const i=y[l];return i.setItem("_mapbox_test_",1),i.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ie(l,i){return[l[4*i],l[4*i+1],l[4*i+2],l[4*i+3]]}const We=y.performance;function qe(l){const i=l?l.url.toString():void 0;return We.getEntriesByName(i)}var Lt="2.10.0";let gt,_t,Ft,Sn;const Fn={now:()=>Ft!==void 0?Ft:y.performance.now(),setNow(l){Ft=l},restoreNow(){Ft=void 0},frame(l){const i=y.requestAnimationFrame(l);return{cancel:()=>y.cancelAnimationFrame(i)}},getImageData(l,i=0){const{width:a,height:h}=l;Sn||(Sn=y.document.createElement("canvas"));const p=Sn.getContext("2d");if(!p)throw new Error("failed to create canvas 2d context");return(a>Sn.width||h>Sn.height)&&(Sn.width=a,Sn.height=h),p.clearRect(-i,-i,a+2*i,h+2*i),p.drawImage(l,0,0,a,h),p.getImageData(-i,-i,a+2*i,h+2*i)},resolveURL:l=>(gt||(gt=y.document.createElement("a")),gt.href=l,gt.href),get devicePixelRatio(){return y.devicePixelRatio},get prefersReducedMotion(){return!!y.matchMedia&&(_t==null&&(_t=y.matchMedia("(prefers-reduced-motion: reduce)")),_t.matches)}};let Li;const dn={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(Li==null){const l=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{Li={TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",TMPDIR:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.73.1",ZDOTDIR:"/Users/obm_89",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",USER:"obm_89",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yGRHeSeskA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin:/Users/obm_89/Documents/hubmine/node_modules/.bin:/Users/obm_89/Documents/node_modules/.bin:/Users/obm_89/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Library/Frameworks/Python.framework/Versions/3.10/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Frameworks/Python.framework/Versions/3.10/bin",npm_package_json:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/package.json",_:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin/vite",npm_config_userconfig:"/Users/obm_89/.npmrc",npm_config_init_module:"/Users/obm_89/.npm-init.js",USER_ZDOTDIR:"/Users/obm_89",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"2",HOME:"/Users/obm_89",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/obm_89/.npm",LOGNAME:"obm_89",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/vscode-git-c8614585f1.sock",npm_config_user_agent:"npm/8.15.0 node/v16.17.0 darwin x64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}.API_URL_REGEX!=null?new RegExp({TERM_PROGRAM:"vscode",NODE:"/usr/local/bin/node",INIT_CWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",TERM:"xterm-256color",SHELL:"/bin/zsh",npm_config_metrics_registry:"https://registry.npmjs.org/",TMPDIR:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/",npm_config_global_prefix:"/usr/local",TERM_PROGRAM_VERSION:"1.73.1",ZDOTDIR:"/Users/obm_89",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",MallocNanoZone:"0",COLOR:"1",npm_config_noproxy:"",npm_config_local_prefix:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",USER:"obm_89",COMMAND_MODE:"unix2003",npm_config_globalconfig:"/usr/local/etc/npmrc",SSH_AUTH_SOCK:"/private/tmp/com.apple.launchd.yGRHeSeskA/Listeners",__CF_USER_TEXT_ENCODING:"0x1F5:0x0:0x0",npm_execpath:"/usr/local/lib/node_modules/npm/bin/npm-cli.js",PATH:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin:/Users/obm_89/Documents/hubmine/node_modules/.bin:/Users/obm_89/Documents/node_modules/.bin:/Users/obm_89/node_modules/.bin:/Users/node_modules/.bin:/node_modules/.bin:/usr/local/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/Library/Frameworks/Python.framework/Versions/3.10/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Library/Frameworks/Python.framework/Versions/3.10/bin",npm_package_json:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/package.json",_:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0/node_modules/.bin/vite",npm_config_userconfig:"/Users/obm_89/.npmrc",npm_config_init_module:"/Users/obm_89/.npm-init.js",USER_ZDOTDIR:"/Users/obm_89",__CFBundleIdentifier:"com.microsoft.VSCode",npm_command:"run-script",PWD:"/Users/obm_89/Documents/hubmine/supplier-dashboard2.0",npm_lifecycle_event:"build",EDITOR:"vi",npm_package_name:"mosaic-react",LANG:"en_US.UTF-8",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"--ms-enable-electron-run-as-node",XPC_FLAGS:"0x0",npm_config_node_gyp:"/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",npm_package_version:"0.1.0",XPC_SERVICE_NAME:"0",VSCODE_INJECTION:"1",SHLVL:"2",HOME:"/Users/obm_89",VSCODE_GIT_ASKPASS_MAIN:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js",npm_config_cache:"/Users/obm_89/.npm",LOGNAME:"obm_89",npm_lifecycle_script:"vite build",VSCODE_GIT_IPC_HANDLE:"/var/folders/f4/2qq8zkcs4r53yjjf133vjlhc0000gn/T/vscode-git-c8614585f1.sock",npm_config_user_agent:"npm/8.15.0 node/v16.17.0 darwin x64 workspaces/false",VSCODE_GIT_ASKPASS_NODE:"/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper.app/Contents/MacOS/Code Helper",GIT_ASKPASS:"/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh",npm_node_execpath:"/usr/local/bin/node",npm_config_prefix:"/usr/local",COLORTERM:"truecolor",NODE_ENV:"production"}.API_URL_REGEX):l}catch{Li=l}}return Li},get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Ir={supported:!1,testSupport:function(l){!Mt&&xr&&(tn?ti(l):sr=l)}};let sr,xr,Mt=!1,tn=!1;function ti(l){const i=l.createTexture();l.bindTexture(l.TEXTURE_2D,i);try{if(l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,xr),l.isContextLost())return;Ir.supported=!0}catch{}l.deleteTexture(i),Mt=!0}y.document&&(xr=y.document.createElement("img"),xr.onload=function(){sr&&ti(sr),sr=null,tn=!0},xr.onerror=function(){Mt=!0,sr=null},xr.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const bi="01",Zn="NO_ACCESS_TOKEN";function ar(l){return l.indexOf("mapbox:")===0}function br(l){return dn.API_URL_REGEX.test(l)}const ns=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function tr(l){const i=l.match(ns);if(!i)throw new Error("Unable to parse URL object");return{protocol:i[1],authority:i[2],path:i[3]||"/",params:i[4]?i[4].split("&"):[]}}function An(l){const i=l.params.length?`?${l.params.join("&")}`:"";return`${l.protocol}://${l.authority}${l.path}${i}`}function lo(l){if(!l)return null;const i=l.split(".");if(!i||i.length!==3)return null;try{return JSON.parse(decodeURIComponent(y.atob(i[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class co{constructor(i){this.type=i,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(i){const a=lo(dn.ACCESS_TOKEN);let h="";return h=a&&a.u?y.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(p,g)=>String.fromCharCode(Number("0x"+g)))):dn.ACCESS_TOKEN||"",i?`mapbox.eventData.${i}:${h}`:`mapbox.eventData:${h}`}fetchEventData(){const i=Oi("localStorage"),a=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{const p=y.localStorage.getItem(a);p&&(this.eventData=JSON.parse(p));const g=y.localStorage.getItem(h);g&&(this.anonId=g)}catch{at("Unable to read from LocalStorage")}}saveEventData(){const i=Oi("localStorage"),a=this.getStorageKey(),h=this.getStorageKey("uuid");if(i)try{y.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&y.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{at("Unable to write to LocalStorage")}}processRequests(i){}postEvent(i,a,h,p){if(!dn.EVENTS_URL)return;const g=tr(dn.EVENTS_URL);g.params.push(`access_token=${p||dn.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(i).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:Lt,skuId:bi,userId:this.anonId},x=a?pt(v,a):v,S={url:An(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([x])};this.pendingRequest=Je(S,T=>{this.pendingRequest=null,h(T),this.saveEventData(),this.processRequests(p)})}queueRequest(i,a){this.queue.push(i),this.processRequests(a)}}const Bo=new class extends co{constructor(l){super("appUserTurnstile"),this._customAccessToken=l}postTurnstileEvent(l,i){dn.EVENTS_URL&&dn.ACCESS_TOKEN&&Array.isArray(l)&&l.some(a=>ar(a)||br(a))&&this.queueRequest(Date.now(),i)}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const i=lo(dn.ACCESS_TOKEN),a=i?i.u:dn.ACCESS_TOKEN;let h=a!==this.eventData.tokenU;Ve(this.anonId)||(this.anonId=kt(),h=!0);const p=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),v=new Date(p),x=(p-this.eventData.lastSuccess)/864e5;h=h||x>=1||x<-1||g.getDate()!==v.getDate()}else h=!0;h?this.postEvent(p,{"enabled.telemetry":!1},g=>{g||(this.eventData.lastSuccess=p,this.eventData.tokenU=a)},l):this.processRequests()}},Ur=Bo.postTurnstileEvent.bind(Bo),bo=new class extends co{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(l,i,a,h){this.skuToken=i,this.errorCb=h,dn.EVENTS_URL&&(a||dn.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},a):this.errorCb(new Error(Zn)))}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:a}=this.queue.shift();i&&this.success[i]||(this.anonId||this.fetchEventData(),Ve(this.anonId)||(this.anonId=kt()),this.postEvent(a,{skuToken:this.skuToken},h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},l))}},Pr=bo.postMapLoadEvent.bind(bo),gl=new class extends co{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(l,i,a,h){if(!dn.API_URL||!dn.SESSION_PATH)return;const p=tr(dn.API_URL+dn.SESSION_PATH);p.params.push(`sku=${i||""}`),p.params.push(`access_token=${h||dn.ACCESS_TOKEN||""}`);const g={url:An(p),headers:{"Content-Type":"text/plain"}};this.pendingRequest=wt(g,v=>{this.pendingRequest=null,a(v),this.saveEventData(),this.processRequests(h)})}getSessionAPI(l,i,a,h){this.skuToken=i,this.errorCb=h,dn.SESSION_PATH&&dn.API_URL&&(a||dn.ACCESS_TOKEN?this.queueRequest({id:l,timestamp:Date.now()},a):this.errorCb(new Error(Zn)))}processRequests(l){if(this.pendingRequest||this.queue.length===0)return;const{id:i,timestamp:a}=this.queue.shift();i&&this.success[i]||this.getSession(a,this.skuToken,h=>{h?this.errorCb(h):i&&(this.success[i]=!0)},l)}},Sc=gl.getSessionAPI.bind(gl),se=new Set;let fe,Le=500,Qe=50,Et={};function ft(l){const i=H(l);let a,h;i&&i.forEach(g=>{const v=g.split("=");v[0]==="language"?a=v[1]:v[0]==="worldview"&&(h=v[1])});let p="mapbox-tiles";return a&&(p+=`-${a}`),h&&(p+=`-${h}`),p}function X(){try{return y.caches}catch{}}function N(l){const i=X();i&&!Et[l]&&(Et[l]=i.open(l))}function H(l){const i=l.indexOf("?");return i>0?l.slice(i+1).split("&"):[]}function Q(l){const i=l.indexOf("?");if(i<0)return l;const a=H(l).filter(h=>{const p=h.split("=");return p[0]==="language"||p[0]==="worldview"});return a.length?`${l.slice(0,i)}?${a.join("&")}`:l.slice(0,i)}let he=1/0;const ye={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ye);class Ae extends Error{constructor(i,a,h){a===401&&br(h)&&(i+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(i),this.status=a,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const De=Gt()?()=>self.worker&&self.worker.referrer:()=>(y.location.protocol==="blob:"?y.parent:y).location.href,we=function(l,i){if(!(/^file:/.test(a=l.url)||/^file:/.test(De())&&!/^\w+:/.test(a))){if(y.fetch&&y.Request&&y.AbortController&&y.Request.prototype.hasOwnProperty("signal"))return function(h,p){const g=new y.AbortController,v=new y.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:De(),signal:g.signal});let x=!1,S=!1;const T=(D=v.url).indexOf("sku=")>0&&br(D);var D;h.type==="json"&&v.headers.set("Accept","application/json");const P=(F,V,q)=>{if(S)return;if(F&&F.message!=="SecurityError"&&at(F),V&&q)return L(V);const K=Date.now();y.fetch(v).then(le=>{if(le.ok){const ge=T?le.clone():null;return L(le,ge,K)}return p(new Ae(le.statusText,le.status,h.url))}).catch(le=>{le.code!==20&&p(new Error(le.message))})},L=(F,V,q)=>{(h.type==="arrayBuffer"?F.arrayBuffer():h.type==="json"?F.json():F.text()).then(K=>{S||(V&&q&&function(le,ge,ue){const pe=ft(le.url);if(N(pe),!Et[pe])return;const Te={status:ge.status,statusText:ge.statusText,headers:new y.Headers};ge.headers.forEach((Fe,He)=>Te.headers.set(He,Fe));const _e=hn(ge.headers.get("Cache-Control")||"");if(_e["no-store"])return;_e["max-age"]&&Te.headers.set("Expires",new Date(ue+1e3*_e["max-age"]).toUTCString());const Be=Te.headers.get("Expires");Be&&(new Date(Be).getTime()-ue<42e4||function(Fe,He){if(fe===void 0)try{new Response(new ReadableStream),fe=!0}catch{fe=!1}fe?He(Fe.body):Fe.blob().then(He)}(ge,Fe=>{const He=new y.Response(Fe,Te);N(pe),Et[pe]&&Et[pe].then(dt=>dt.put(Q(le.url),He)).catch(dt=>at(dt.message))}))}(v,V,q),x=!0,p(null,K,F.headers.get("Cache-Control"),F.headers.get("Expires")))}).catch(K=>{S||p(new Error(K.message))})};return T?function(F,V){const q=ft(F.url);if(N(q),!Et[q])return V(null);const K=Q(F.url);Et[q].then(le=>{le.match(K).then(ge=>{const ue=function(pe){if(!pe)return!1;const Te=new Date(pe.headers.get("Expires")||0),_e=hn(pe.headers.get("Cache-Control")||"");return Te>Date.now()&&!_e["no-cache"]}(ge);le.delete(K),ue&&le.put(K,ge.clone()),V(null,ge,ue)}).catch(V)}).catch(V)}(v,P):P(null,null),{cancel:()=>{S=!0,x||g.abort()}}}(l,i);if(Gt()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",l,i,void 0,!0)}var a;return function(h,p){const g=new y.XMLHttpRequest;g.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const v in h.headers)g.setRequestHeader(v,h.headers[v]);return h.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=h.credentials==="include",g.onerror=()=>{p(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let v=g.response;if(h.type==="json")try{v=JSON.parse(g.response)}catch(x){return p(x)}p(null,v,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else p(new Ae(g.statusText,g.status,h.url))},g.send(h.body),{cancel:()=>g.abort()}}(l,i)},Oe=function(l,i){return we(pt(l,{type:"arrayBuffer"}),i)},Je=function(l,i){return we(pt(l,{method:"POST"}),i)},wt=function(l,i){return we(pt(l,{method:"GET"}),i)};function rt(l){const i=y.document.createElement("a");return i.href=l,i.protocol===y.document.location.protocol&&i.host===y.document.location.host}const Yt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Xt,$t;Xt=[],$t=0;const Jt=function(l,i){if(Ir.supported&&(l.headers||(l.headers={}),l.headers.accept="image/webp,*/*"),$t>=dn.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:l,callback:i,cancelled:!1,cancel(){this.cancelled=!0}};return Xt.push(g),g}$t++;let a=!1;const h=()=>{if(!a)for(a=!0,$t--;Xt.length&&$t<dn.MAX_PARALLEL_IMAGE_REQUESTS;){const g=Xt.shift(),{requestParameters:v,callback:x,cancelled:S}=g;S||(g.cancel=Jt(v,x).cancel)}},p=Oe(l,(g,v,x,S)=>{h(),g?i(g):v&&(y.createImageBitmap?function(T,D){const P=new y.Blob([new Uint8Array(T)],{type:"image/png"});y.createImageBitmap(P).then(L=>{D(null,L)}).catch(L=>{D(new Error(`Could not load image because of ${L.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(T,D)=>i(T,D,x,S)):function(T,D){const P=new y.Image,L=y.URL;P.onload=()=>{D(null,P),L.revokeObjectURL(P.src),P.onload=null,y.requestAnimationFrame(()=>{P.src=Yt})},P.onerror=()=>D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const F=new y.Blob([new Uint8Array(T)],{type:"image/png"});P.src=T.byteLength?L.createObjectURL(F):Yt}(v,(T,D)=>i(T,D,x,S)))});return{cancel:()=>{p.cancel(),h()}}};function gn(l,i,a){a[l]&&a[l].indexOf(i)!==-1||(a[l]=a[l]||[],a[l].push(i))}function Un(l,i,a){if(a&&a[l]){const h=a[l].indexOf(i);h!==-1&&a[l].splice(h,1)}}class Xn{constructor(i,a={}){pt(this,a),this.type=i}}class $n extends Xn{constructor(i,a={}){super("error",pt({error:i},a))}}class Kt{on(i,a){return this._listeners=this._listeners||{},gn(i,a,this._listeners),this}off(i,a){return Un(i,a,this._listeners),Un(i,a,this._oneTimeListeners),this}once(i,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},gn(i,a,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,a){typeof i=="string"&&(i=new Xn(i,a||{}));const h=i.type;if(this.listens(h)){i.target=this;const p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const x of p)x.call(this,i);const g=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const x of g)Un(h,x,this._oneTimeListeners),x.call(this,i);const v=this._eventedParent;v&&(pt(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(i))}else i instanceof $n&&console.error(i.error);return this}listens(i){return!!(this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i))}setEventedParent(i,a){return this._eventedParent=i,this._eventedParentData=a,this}}var Ge=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function uo(l,...i){for(const a of i)for(const h in a)l[h]=a[h];return l}function Mi(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Ws(l){if(Array.isArray(l))return l.map(Ws);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const i={};for(const a in l)i[a]=Ws(l[a]);return i}return Mi(l)}class Ku extends Error{constructor(i,a){super(a),this.message=a,this.key=i}}var No=Ku;class Ju{constructor(i,a=[]){this.parent=i,this.bindings={};for(const[h,p]of a)this.bindings[h]=p}concat(i){return new Ju(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}var Dx=Ju;const _l={kind:"null"},At={kind:"number"},xn={kind:"string"},bn={kind:"boolean"},Vo={kind:"color"},jo={kind:"object"},pn={kind:"value"},Tc={kind:"collator"},Cc={kind:"formatted"},Mc={kind:"resolvedImage"};function ho(l,i){return{kind:"array",itemType:l,N:i}}function wi(l){if(l.kind==="array"){const i=wi(l.itemType);return typeof l.N=="number"?`array<${i}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${i}>`}return l.kind}const Vg=[_l,At,xn,bn,Vo,Cc,jo,ho(pn),Mc];function yl(l,i){if(i.kind==="error")return null;if(l.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!yl(l.itemType,i.itemType))&&(typeof l.N!="number"||l.N===i.N))return null}else{if(l.kind===i.kind)return null;if(l.kind==="value"){for(const a of Vg)if(!yl(a,i))return null}}return`Expected ${wi(l)} but found ${wi(i)} instead.`}function Qu(l,i){return i.some(a=>a.kind===l.kind)}function Hs(l,i){return i.some(a=>a==="null"?l===null:a==="array"?Array.isArray(l):a==="object"?l&&!Array.isArray(l)&&typeof l=="object":a===typeof l)}function ff(l){var i={exports:{}};return l(i,i.exports),i.exports}var qs=ff(function(l,i){var a={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function h(x){return(x=Math.round(x))<0?0:x>255?255:x}function p(x){return h(x[x.length-1]==="%"?parseFloat(x)/100*255:parseInt(x))}function g(x){return(S=x[x.length-1]==="%"?parseFloat(x)/100:parseFloat(x))<0?0:S>1?1:S;var S}function v(x,S,T){return T<0?T+=1:T>1&&(T-=1),6*T<1?x+(S-x)*T*6:2*T<1?S:3*T<2?x+(S-x)*(2/3-T)*6:x}try{i.parseCSSColor=function(x){var S,T=x.replace(/ /g,"").toLowerCase();if(T in a)return a[T].slice();if(T[0]==="#")return T.length===4?(S=parseInt(T.substr(1),16))>=0&&S<=4095?[(3840&S)>>4|(3840&S)>>8,240&S|(240&S)>>4,15&S|(15&S)<<4,1]:null:T.length===7&&(S=parseInt(T.substr(1),16))>=0&&S<=16777215?[(16711680&S)>>16,(65280&S)>>8,255&S,1]:null;var D=T.indexOf("("),P=T.indexOf(")");if(D!==-1&&P+1===T.length){var L=T.substr(0,D),F=T.substr(D+1,P-(D+1)).split(","),V=1;switch(L){case"rgba":if(F.length!==4)return null;V=g(F.pop());case"rgb":return F.length!==3?null:[p(F[0]),p(F[1]),p(F[2]),V];case"hsla":if(F.length!==4)return null;V=g(F.pop());case"hsl":if(F.length!==3)return null;var q=(parseFloat(F[0])%360+360)%360/360,K=g(F[1]),le=g(F[2]),ge=le<=.5?le*(K+1):le+K-le*K,ue=2*le-ge;return[h(255*v(ue,ge,q+1/3)),h(255*v(ue,ge,q)),h(255*v(ue,ge,q-1/3)),V];default:return null}}return null}}catch{}});class Or{constructor(i,a,h,p=1){this.r=i,this.g=a,this.b=h,this.a=p}static parse(i){if(!i)return;if(i instanceof Or)return i;if(typeof i!="string")return;const a=qs.parseCSSColor(i);return a?new Or(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[i,a,h,p]=this.toArray();return`rgba(${Math.round(i)},${Math.round(a)},${Math.round(h)},${p})`}toArray(){const{r:i,g:a,b:h,a:p}=this;return p===0?[0,0,0,0]:[255*i/p,255*a/p,255*h/p,p]}toArray01(){const{r:i,g:a,b:h,a:p}=this;return p===0?[0,0,0,0]:[i/p,a/p,h/p,p]}toArray01PremultipliedAlpha(){const{r:i,g:a,b:h,a:p}=this;return[i,a,h,p]}}Or.black=new Or(0,0,0,1),Or.white=new Or(1,1,1,1),Or.transparent=new Or(0,0,0,0),Or.red=new Or(1,0,0,1),Or.blue=new Or(0,0,1,1);var Wn=Or;class pf{constructor(i,a,h){this.sensitivity=i?a?"variant":"case":a?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,a){return this.collator.compare(i,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class kc{constructor(i,a,h,p,g){this.text=i.normalize?i.normalize():i,this.image=a,this.scale=h,this.fontStack=p,this.textColor=g}}class $r{constructor(i){this.sections=i}static fromString(i){return new $r([new kc(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof $r?i:$r.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}serialize(){const i=["format"];for(const a of this.sections){if(a.image){i.push(["image",a.image.name]);continue}i.push(a.text);const h={};a.fontStack&&(h["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(h["font-scale"]=a.scale),a.textColor&&(h["text-color"]=["rgba"].concat(a.textColor.toArray())),i.push(h)}return i}}class Gr{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Gr({name:i,available:!1}):null}serialize(){return["image",this.name]}}function mf(l,i,a,h){return typeof l=="number"&&l>=0&&l<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof a=="number"&&a>=0&&a<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[l,i,a,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[l,i,a,h]:[l,i,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ys(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof Wn||l instanceof pf||l instanceof $r||l instanceof Gr)return!0;if(Array.isArray(l)){for(const i of l)if(!Ys(i))return!1;return!0}if(typeof l=="object"){for(const i in l)if(!Ys(l[i]))return!1;return!0}return!1}function Ui(l){if(l===null)return _l;if(typeof l=="string")return xn;if(typeof l=="boolean")return bn;if(typeof l=="number")return At;if(l instanceof Wn)return Vo;if(l instanceof pf)return Tc;if(l instanceof $r)return Cc;if(l instanceof Gr)return Mc;if(Array.isArray(l)){const i=l.length;let a;for(const h of l){const p=Ui(h);if(a){if(a===p)continue;a=pn;break}a=p}return ho(a||pn,i)}return jo}function Ac(l){const i=typeof l;return l===null?"":i==="string"||i==="number"||i==="boolean"?String(l):l instanceof Wn||l instanceof $r||l instanceof Gr?l.toString():JSON.stringify(l)}class gf{constructor(i,a){this.type=i,this.value=a}static parse(i,a){if(i.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Ys(i[1]))return a.error("invalid value");const h=i[1];let p=Ui(h);const g=a.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new gf(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Wn?["rgba"].concat(this.value.toArray()):this.value instanceof $r?this.value.serialize():this.value}}var Dc=gf,lr=class{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}};const Ic={string:xn,number:At,boolean:bn,object:jo};class _f{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");let h,p=1;const g=i[0];if(g==="array"){let x,S;if(i.length>2){const T=i[1];if(typeof T!="string"||!(T in Ic)||T==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);x=Ic[T],p++}else x=pn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return a.error('The length argument to "array" must be a positive integer literal',2);S=i[2],p++}h=ho(x,S)}else h=Ic[g];const v=[];for(;p<i.length;p++){const x=a.parse(i[p],p,pn);if(!x)return null;v.push(x)}return new _f(h,v)}evaluate(i){for(let a=0;a<this.args.length;a++){const h=this.args[a].evaluate(i);if(!yl(this.type,Ui(h)))return h;if(a===this.args.length-1)throw new lr(`Expected value to be of type ${wi(this.type)}, but found ${wi(Ui(h))} instead.`)}return null}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=this.type,a=[i.kind];if(i.kind==="array"){const h=i.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){a.push(h.kind);const p=i.N;(typeof p=="number"||this.args.length>1)&&a.push(p)}}return a.concat(this.args.map(h=>h.serialize()))}}var wo=_f;class Pc{constructor(i){this.type=Cc,this.sections=i}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const h=i[1];if(!Array.isArray(h)&&typeof h=="object")return a.error("First argument must be an image or text section.");const p=[];let g=!1;for(let v=1;v<=i.length-1;++v){const x=i[v];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let S=null;if(x["font-scale"]&&(S=a.parse(x["font-scale"],1,At),!S))return null;let T=null;if(x["text-font"]&&(T=a.parse(x["text-font"],1,ho(xn)),!T))return null;let D=null;if(x["text-color"]&&(D=a.parse(x["text-color"],1,Vo),!D))return null;const P=p[p.length-1];P.scale=S,P.font=T,P.textColor=D}else{const S=a.parse(i[v],1,pn);if(!S)return null;const T=S.type.kind;if(T!=="string"&&T!=="value"&&T!=="null"&&T!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:S,scale:null,font:null,textColor:null})}}return new Pc(p)}evaluate(i){return new $r(this.sections.map(a=>{const h=a.content.evaluate(i);return Ui(h)===Mc?new kc("",h,null,null,null):new kc(Ac(h),null,a.scale?a.scale.evaluate(i):null,a.font?a.font.evaluate(i).join(","):null,a.textColor?a.textColor.evaluate(i):null)}))}eachChild(i){for(const a of this.sections)i(a.content),a.scale&&i(a.scale),a.font&&i(a.font),a.textColor&&i(a.textColor)}outputDefined(){return!1}serialize(){const i=["format"];for(const a of this.sections){i.push(a.content.serialize());const h={};a.scale&&(h["font-scale"]=a.scale.serialize()),a.font&&(h["text-font"]=a.font.serialize()),a.textColor&&(h["text-color"]=a.textColor.serialize()),i.push(h)}return i}}class eh{constructor(i){this.type=Mc,this.input=i}static parse(i,a){if(i.length!==2)return a.error("Expected two arguments.");const h=a.parse(i[1],1,xn);return h?new eh(h):a.error("No image name provided.")}evaluate(i){const a=this.input.evaluate(i),h=Gr.fromString(a);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(a)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ix={"to-boolean":bn,"to-color":Vo,"to-number":At,"to-string":xn};class yf{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expected at least one argument.");const h=i[0];if((h==="to-boolean"||h==="to-string")&&i.length!==2)return a.error("Expected one argument.");const p=Ix[h],g=[];for(let v=1;v<i.length;v++){const x=a.parse(i[v],v,pn);if(!x)return null;g.push(x)}return new yf(p,g)}evaluate(i){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(i));if(this.type.kind==="color"){let a,h;for(const p of this.args){if(a=p.evaluate(i),h=null,a instanceof Wn)return a;if(typeof a=="string"){const g=i.parseColor(a);if(g)return g}else if(Array.isArray(a)&&(h=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:mf(a[0],a[1],a[2],a[3]),!h))return new Wn(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new lr(h||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const h of this.args){if(a=h.evaluate(i),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new lr(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?$r.fromString(Ac(this.args[0].evaluate(i))):this.type.kind==="resolvedImage"?Gr.fromString(Ac(this.args[0].evaluate(i))):Ac(this.args[0].evaluate(i))}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Pc([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new eh(this.args[0]).serialize();const i=[`to-${this.type.kind}`];return this.eachChild(a=>{i.push(a.serialize())}),i}}var vl=yf;const Px=["Unknown","Point","LineString","Polygon"];var jg=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Px[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const l=this.featureDistanceData.center,i=this.featureDistanceData.scale,{x:a,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*i-l[0])+this.featureDistanceData.bearing[1]*(h*i-l[1])}return 0}parseColor(l){let i=this._parseColorCache[l];return i||(i=this._parseColorCache[l]=Wn.parse(l)),i}};class Aa{constructor(i,a,h,p){this.name=i,this.type=a,this._evaluate=h,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(i=>i.serialize()))}static parse(i,a){const h=i[0],p=Aa.definitions[h];if(!p)return a.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(p)?p[0]:p.type,v=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,x=v.filter(([T])=>!Array.isArray(T)||T.length===i.length-1);let S=null;for(const[T,D]of x){S=new Ia(a.registry,a.path,null,a.scope);const P=[];let L=!1;for(let F=1;F<i.length;F++){const V=i[F],q=Array.isArray(T)?T[F-1]:T.type,K=S.parse(V,1+P.length,q);if(!K){L=!0;break}P.push(K)}if(!L)if(Array.isArray(T)&&T.length!==P.length)S.error(`Expected ${T.length} arguments, but found ${P.length} instead.`);else{for(let F=0;F<P.length;F++){const V=Array.isArray(T)?T[F]:T.type,q=P[F];S.concat(F+1).checkSubtype(V,q.type)}if(S.errors.length===0)return new Aa(h,g,D,P)}}if(x.length===1)a.errors.push(...S.errors);else{const T=(x.length?x:v).map(([P])=>{return L=P,Array.isArray(L)?`(${L.map(wi).join(", ")})`:`(${wi(L.type)}...)`;var L}).join(" | "),D=[];for(let P=1;P<i.length;P++){const L=a.parse(i[P],1+D.length);if(!L)return null;D.push(wi(L.type))}a.error(`Expected arguments of type ${T}, but found (${D.join(", ")}) instead.`)}return null}static register(i,a){Aa.definitions=a;for(const h in a)i[h]=Aa}}var Uo=Aa;class th{constructor(i,a,h){this.type=Tc,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=a}static parse(i,a){if(i.length!==2)return a.error("Expected one argument.");const h=i[1];if(typeof h!="object"||Array.isArray(h))return a.error("Collator options argument must be an object.");const p=a.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,bn);if(!p)return null;const g=a.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,bn);if(!g)return null;let v=null;return h.locale&&(v=a.parse(h.locale,1,xn),!v)?null:new th(p,g,v)}evaluate(i){return new pf(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}serialize(){const i={};return i["case-sensitive"]=this.caseSensitive.serialize(),i["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(i.locale=this.locale.serialize()),["collator",i]}}const Zs=8192;function vf(l,i){l[0]=Math.min(l[0],i[0]),l[1]=Math.min(l[1],i[1]),l[2]=Math.max(l[2],i[0]),l[3]=Math.max(l[3],i[1])}function nh(l,i){return!(l[0]<=i[0]||l[2]>=i[2]||l[1]<=i[1]||l[3]>=i[3])}function Ox(l,i){const a=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(a*p*Zs),Math.round(h*p*Zs)]}function Lx(l,i,a){const h=l[0]-i[0],p=l[1]-i[1],g=l[0]-a[0],v=l[1]-a[1];return h*v-g*p==0&&h*g<=0&&p*v<=0}function ih(l,i){let a=!1;for(let v=0,x=i.length;v<x;v++){const S=i[v];for(let T=0,D=S.length;T<D-1;T++){if(Lx(l,S[T],S[T+1]))return!1;(p=S[T])[1]>(h=l)[1]!=(g=S[T+1])[1]>h[1]&&h[0]<(g[0]-p[0])*(h[1]-p[1])/(g[1]-p[1])+p[0]&&(a=!a)}}var h,p,g;return a}function rh(l,i){for(let a=0;a<i.length;a++)if(ih(l,i[a]))return!0;return!1}function Ug(l,i,a,h){const p=h[0]-a[0],g=h[1]-a[1],v=(l[0]-a[0])*g-p*(l[1]-a[1]),x=(i[0]-a[0])*g-p*(i[1]-a[1]);return v>0&&x<0||v<0&&x>0}function zx(l,i,a){for(const T of a)for(let D=0;D<T.length-1;++D)if((x=[(v=T[D+1])[0]-(g=T[D])[0],v[1]-g[1]])[0]*(S=[(p=i)[0]-(h=l)[0],p[1]-h[1]])[1]-x[1]*S[0]!=0&&Ug(h,p,g,v)&&Ug(g,v,h,p))return!0;var h,p,g,v,x,S;return!1}function $g(l,i){for(let a=0;a<l.length;++a)if(!ih(l[a],i))return!1;for(let a=0;a<l.length-1;++a)if(zx(l[a],l[a+1],i))return!1;return!0}function Rx(l,i){for(let a=0;a<i.length;a++)if($g(l,i[a]))return!0;return!1}function Eo(l,i,a){const h=[];for(let p=0;p<l.length;p++){const g=[];for(let v=0;v<l[p].length;v++){const x=Ox(l[p][v],a);vf(i,x),g.push(x)}h.push(g)}return h}function xf(l,i,a){const h=[];for(let p=0;p<l.length;p++){const g=Eo(l[p],i,a);h.push(g)}return h}function bf(l,i,a,h){if(l[0]<a[0]||l[0]>a[2]){const p=.5*h;let g=l[0]-a[0]>p?-h:a[0]-l[0]>p?h:0;g===0&&(g=l[0]-a[2]>p?-h:a[2]-l[0]>p?h:0),l[0]+=g}vf(i,l)}function wf(l,i,a,h){const p=Math.pow(2,h.z)*Zs,g=[h.x*Zs,h.y*Zs],v=[];if(!l)return v;for(const x of l)for(const S of x){const T=[S.x+g[0],S.y+g[1]];bf(T,i,a,p),v.push(T)}return v}function Ef(l,i,a,h){const p=Math.pow(2,h.z)*Zs,g=[h.x*Zs,h.y*Zs],v=[];if(!l)return v;for(const S of l){const T=[];for(const D of S){const P=[D.x+g[0],D.y+g[1]];vf(i,P),T.push(P)}v.push(T)}if(i[2]-i[0]<=p/2){(x=i)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(const S of v)for(const T of S)bf(T,i,a,p)}var x;return v}class xl{constructor(i,a){this.type=bn,this.geojson=i,this.geometries=a}static parse(i,a){if(i.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Ys(i[1])){const h=i[1];if(h.type==="FeatureCollection")for(let p=0;p<h.features.length;++p){const g=h.features[p].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new xl(h,h.features[p].geometry)}else if(h.type==="Feature"){const p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new xl(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new xl(h,h)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if(h.type==="Polygon"){const x=Eo(h.coordinates,g,v),S=wf(a.geometry(),p,g,v);if(!nh(p,g))return!1;for(const T of S)if(!ih(T,x))return!1}if(h.type==="MultiPolygon"){const x=xf(h.coordinates,g,v),S=wf(a.geometry(),p,g,v);if(!nh(p,g))return!1;for(const T of S)if(!rh(T,x))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(a,h){const p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if(h.type==="Polygon"){const x=Eo(h.coordinates,g,v),S=Ef(a.geometry(),p,g,v);if(!nh(p,g))return!1;for(const T of S)if(!$g(T,x))return!1}if(h.type==="MultiPolygon"){const x=xf(h.coordinates,g,v),S=Ef(a.geometry(),p,g,v);if(!nh(p,g))return!1;for(const T of S)if(!Rx(T,x))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var oh=xl;function Da(l){if(l instanceof Uo&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof oh)return!1;let i=!0;return l.eachChild(a=>{i&&!Da(a)&&(i=!1)}),i}function Xs(l){if(l instanceof Uo&&l.name==="feature-state")return!1;let i=!0;return l.eachChild(a=>{i&&!Xs(a)&&(i=!1)}),i}function Oc(l,i){if(l instanceof Uo&&i.indexOf(l.name)>=0)return!1;let a=!0;return l.eachChild(h=>{a&&!Oc(h,i)&&(a=!1)}),a}class sh{constructor(i,a){this.type=a.type,this.name=i,this.boundExpression=a}static parse(i,a){if(i.length!==2||typeof i[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const h=i[1];return a.scope.has(h)?new sh(h,a.scope.get(h)):a.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var ah=sh;class lh{constructor(i,a=[],h,p=new Dx,g=[]){this.registry=i,this.path=a,this.key=a.map(v=>`[${v}]`).join(""),this.scope=p,this.errors=g,this.expectedType=h}parse(i,a,h,p,g={}){return a?this.concat(a,h,p)._parse(i,g):this._parse(i,g)}_parse(i,a){function h(p,g,v){return v==="assert"?new wo(g,[p]):v==="coerce"?new vl(g,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[p];if(g){let v=g.parse(i,this);if(!v)return null;if(this.expectedType){const x=this.expectedType,S=v.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value")if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(this.checkSubtype(x,S))return null}else v=h(v,x,a.typeAnnotation||"coerce");else v=h(v,x,a.typeAnnotation||"assert")}if(!(v instanceof Dc)&&v.type.kind!=="resolvedImage"&&Ln(v)){const x=new jg;try{v=new Dc(v.type,v.evaluate(x))}catch(S){return this.error(S.message),null}}return v}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,a,h){const p=typeof i=="number"?this.path.concat(i):this.path,g=h?this.scope.concat(h):this.scope;return new lh(this.registry,p,a||null,g,this.errors)}error(i,...a){const h=`${this.key}${a.map(p=>`[${p}]`).join("")}`;this.errors.push(new No(h,i))}checkSubtype(i,a){const h=yl(i,a);return h&&this.error(h),h}}var Ia=lh;function Ln(l){if(l instanceof ah)return Ln(l.boundExpression);if(l instanceof Uo&&l.name==="error"||l instanceof th||l instanceof oh)return!1;const i=l instanceof vl||l instanceof wo;let a=!0;return l.eachChild(h=>{a=i?a&&Ln(h):a&&h instanceof Dc}),!!a&&Da(l)&&Oc(l,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function ch(l,i){const a=l.length-1;let h,p,g=0,v=a,x=0;for(;g<=v;)if(x=Math.floor((g+v)/2),h=l[x],p=l[x+1],h<=i){if(x===a||i<p)return x;g=x+1}else{if(!(h>i))throw new lr("Input is not a number.");v=x-1}return 0}class Sf{constructor(i,a,h){this.type=i,this.input=a,this.labels=[],this.outputs=[];for(const[p,g]of h)this.labels.push(p),this.outputs.push(g)}static parse(i,a){if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");const h=a.parse(i[1],1,At);if(!h)return null;const p=[];let g=null;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);for(let v=1;v<i.length;v+=2){const x=v===1?-1/0:i[v],S=i[v+1],T=v,D=v+1;if(typeof x!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',T);if(p.length&&p[p.length-1][0]>=x)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',T);const P=a.parse(S,D,g);if(!P)return null;g=g||P.type,p.push([x,P])}return new Sf(g,h,p)}evaluate(i){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=a[0])return h[0].evaluate(i);const g=a.length;return p>=a[g-1]?h[g-1].evaluate(i):h[ch(a,p)].evaluate(i)}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){const i=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&i.push(this.labels[a]),i.push(this.outputs[a].serialize());return i}}var Tf=Sf;function Dn(l,i,a){return l*(1-a)+i*a}function bl(l,i,a){return l.map((h,p)=>Dn(h,i[p],a))}var Lc=Object.freeze({__proto__:null,number:Dn,color:function(l,i,a){return new Wn(Dn(l.r,i.r,a),Dn(l.g,i.g,a),Dn(l.b,i.b,a),Dn(l.a,i.a,a))},array:bl});const Cf=.95047,Mf=1.08883,kf=4/29,Ks=6/29,zc=3*Ks*Ks,Fx=Math.PI/180,Af=180/Math.PI;function uh(l){return l>.008856451679035631?Math.pow(l,1/3):l/zc+kf}function Df(l){return l>Ks?l*l*l:zc*(l-kf)}function If(l){return 255*(l<=.0031308?12.92*l:1.055*Math.pow(l,1/2.4)-.055)}function hh(l){return(l/=255)<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Gg(l){const i=hh(l.r),a=hh(l.g),h=hh(l.b),p=uh((.4124564*i+.3575761*a+.1804375*h)/Cf),g=uh((.2126729*i+.7151522*a+.072175*h)/1);return{l:116*g-16,a:500*(p-g),b:200*(g-uh((.0193339*i+.119192*a+.9503041*h)/Mf)),alpha:l.a}}function Pf(l){let i=(l.l+16)/116,a=isNaN(l.a)?i:i+l.a/500,h=isNaN(l.b)?i:i-l.b/200;return i=1*Df(i),a=Cf*Df(a),h=Mf*Df(h),new Wn(If(3.2404542*a-1.5371385*i-.4985314*h),If(-.969266*a+1.8760108*i+.041556*h),If(.0556434*a-.2040259*i+1.0572252*h),l.alpha)}function Wg(l,i,a){const h=i-l;return l+a*(h>180||h<-180?h-360*Math.round(h/360):h)}const Rc={forward:Gg,reverse:Pf,interpolate:function(l,i,a){return{l:Dn(l.l,i.l,a),a:Dn(l.a,i.a,a),b:Dn(l.b,i.b,a),alpha:Dn(l.alpha,i.alpha,a)}}},wl={forward:function(l){const{l:i,a,b:h}=Gg(l),p=Math.atan2(h,a)*Af;return{h:p<0?p+360:p,c:Math.sqrt(a*a+h*h),l:i,alpha:l.a}},reverse:function(l){const i=l.h*Fx,a=l.c;return Pf({l:l.l,a:Math.cos(i)*a,b:Math.sin(i)*a,alpha:l.alpha})},interpolate:function(l,i,a){return{h:Wg(l.h,i.h,a),c:Dn(l.c,i.c,a),l:Dn(l.l,i.l,a),alpha:Dn(l.alpha,i.alpha,a)}}};var Hg=Object.freeze({__proto__:null,lab:Rc,hcl:wl});class Fc{constructor(i,a,h,p,g){this.type=i,this.operator=a,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(const[v,x]of g)this.labels.push(v),this.outputs.push(x)}static interpolationFactor(i,a,h,p){let g=0;if(i.name==="exponential")g=dh(a,i.base,h,p);else if(i.name==="linear")g=dh(a,1,h,p);else if(i.name==="cubic-bezier"){const v=i.controlPoints;g=new w(v[0],v[1],v[2],v[3]).solve(dh(a,1,h,p))}return g}static parse(i,a){let[h,p,g,...v]=i;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const T=p[1];if(typeof T!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:T}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const T=p.slice(1);if(T.length!==4||T.some(D=>typeof D!="number"||D<0||D>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:T}}}if(i.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(g=a.parse(g,2,At),!g)return null;const x=[];let S=null;h==="interpolate-hcl"||h==="interpolate-lab"?S=Vo:a.expectedType&&a.expectedType.kind!=="value"&&(S=a.expectedType);for(let T=0;T<v.length;T+=2){const D=v[T],P=v[T+1],L=T+3,F=T+4;if(typeof D!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',L);if(x.length&&x[x.length-1][0]>=D)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',L);const V=a.parse(P,F,S);if(!V)return null;S=S||V.type,x.push([D,V])}return S.kind==="number"||S.kind==="color"||S.kind==="array"&&S.itemType.kind==="number"&&typeof S.N=="number"?new Fc(S,h,p,g,x):a.error(`Type ${wi(S)} is not interpolatable.`)}evaluate(i){const a=this.labels,h=this.outputs;if(a.length===1)return h[0].evaluate(i);const p=this.input.evaluate(i);if(p<=a[0])return h[0].evaluate(i);const g=a.length;if(p>=a[g-1])return h[g-1].evaluate(i);const v=ch(a,p),x=Fc.interpolationFactor(this.interpolation,p,a[v],a[v+1]),S=h[v].evaluate(i),T=h[v+1].evaluate(i);return this.operator==="interpolate"?Lc[this.type.kind.toLowerCase()](S,T,x):this.operator==="interpolate-hcl"?wl.reverse(wl.interpolate(wl.forward(S),wl.forward(T),x)):Rc.reverse(Rc.interpolate(Rc.forward(S),Rc.forward(T),x))}eachChild(i){i(this.input);for(const a of this.outputs)i(a)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}serialize(){let i;i=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,i,this.input.serialize()];for(let h=0;h<this.labels.length;h++)a.push(this.labels[h],this.outputs[h].serialize());return a}}function dh(l,i,a,h){const p=h-a,g=l-a;return p===0?0:i===1?g/p:(Math.pow(i,g)-1)/(Math.pow(i,p)-1)}var is=Fc;class Of{constructor(i,a){this.type=i,this.args=a}static parse(i,a){if(i.length<2)return a.error("Expectected at least one argument.");let h=null;const p=a.expectedType;p&&p.kind!=="value"&&(h=p);const g=[];for(const x of i.slice(1)){const S=a.parse(x,1+g.length,h,void 0,{typeAnnotation:"omit"});if(!S)return null;h=h||S.type,g.push(S)}const v=p&&g.some(x=>yl(p,x.type));return new Of(v?pn:h,g)}evaluate(i){let a,h=null,p=0;for(const g of this.args){if(p++,h=g.evaluate(i),h&&h instanceof Gr&&!h.available&&(a||(a=h),h=null,p===this.args.length))return a;if(h!==null)break}return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}serialize(){const i=["coalesce"];return this.eachChild(a=>{i.push(a.serialize())}),i}}var qg=Of;class Lf{constructor(i,a){this.type=a.type,this.bindings=[].concat(i),this.result=a}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const a of this.bindings)i(a[1]);i(this.result)}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const h=[];for(let g=1;g<i.length-1;g+=2){const v=i[g];if(typeof v!="string")return a.error(`Expected string, but found ${typeof v} instead.`,g);if(/[^a-zA-Z0-9_]/.test(v))return a.error("Variable names must contain only alphanumeric characters or '_'.",g);const x=a.parse(i[g+1],g+1);if(!x)return null;h.push([v,x])}const p=a.parse(i[i.length-1],i.length-1,a.expectedType,h);return p?new Lf(h,p):null}outputDefined(){return this.result.outputDefined()}serialize(){const i=["let"];for(const[a,h]of this.bindings)i.push(a,h.serialize());return i.push(this.result.serialize()),i}}var Yg=Lf;class zf{constructor(i,a,h){this.type=i,this.index=a,this.input=h}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,At),p=a.parse(i[2],2,ho(a.expectedType||pn));return h&&p?new zf(p.type.itemType,h,p):null}evaluate(i){const a=this.index.evaluate(i),h=this.input.evaluate(i);if(a<0)throw new lr(`Array index out of bounds: ${a} < 0.`);if(a>=h.length)throw new lr(`Array index out of bounds: ${a} > ${h.length-1}.`);if(a!==Math.floor(a))throw new lr(`Array index must be an integer, but found ${a} instead.`);return h[a]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var Zg=zf;class Rf{constructor(i,a){this.type=bn,this.needle=i,this.haystack=a}static parse(i,a){if(i.length!==3)return a.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,pn),p=a.parse(i[2],2,pn);return h&&p?Qu(h.type,[bn,xn,At,_l,pn])?new Rf(h,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${wi(h.type)} instead`):null}evaluate(i){const a=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(h==null)return!1;if(!Hs(a,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${wi(Ui(a))} instead.`);if(!Hs(h,["string","array"]))throw new lr(`Expected second argument to be of type array or string, but found ${wi(Ui(h))} instead.`);return h.indexOf(a)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Bx=Rf;class fh{constructor(i,a,h){this.type=At,this.needle=i,this.haystack=a,this.fromIndex=h}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,pn),p=a.parse(i[2],2,pn);if(!h||!p)return null;if(!Qu(h.type,[bn,xn,At,_l,pn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${wi(h.type)} instead`);if(i.length===4){const g=a.parse(i[3],3,At);return g?new fh(h,p,g):null}return new fh(h,p)}evaluate(i){const a=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Hs(a,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${wi(Ui(a))} instead.`);if(!Hs(h,["string","array"]))throw new lr(`Expected second argument to be of type array or string, but found ${wi(Ui(h))} instead.`);if(this.fromIndex){const p=this.fromIndex.evaluate(i);return h.indexOf(a,p)}return h.indexOf(a)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const i=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),i]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Nx=fh;class ph{constructor(i,a,h,p,g,v){this.inputType=i,this.type=a,this.input=h,this.cases=p,this.outputs=g,this.otherwise=v}static parse(i,a){if(i.length<5)return a.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return a.error("Expected an even number of arguments.");let h,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const g={},v=[];for(let T=2;T<i.length-1;T+=2){let D=i[T];const P=i[T+1];Array.isArray(D)||(D=[D]);const L=a.concat(T);if(D.length===0)return L.error("Expected at least one branch label.");for(const V of D){if(typeof V!="number"&&typeof V!="string")return L.error("Branch labels must be numbers or strings.");if(typeof V=="number"&&Math.abs(V)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof V=="number"&&Math.floor(V)!==V)return L.error("Numeric branch labels must be integer values.");if(h){if(L.checkSubtype(h,Ui(V)))return null}else h=Ui(V);if(g[String(V)]!==void 0)return L.error("Branch labels must be unique.");g[String(V)]=v.length}const F=a.parse(P,T,p);if(!F)return null;p=p||F.type,v.push(F)}const x=a.parse(i[1],1,pn);if(!x)return null;const S=a.parse(i[i.length-1],i.length-1,p);return S?x.type.kind!=="value"&&a.concat(1).checkSubtype(h,x.type)?null:new ph(h,p,x,g,v,S):null}evaluate(i){const a=this.input.evaluate(i);return(Ui(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),h=[],p={};for(const v of a){const x=p[this.cases[v]];x===void 0?(p[this.cases[v]]=h.length,h.push([this.cases[v],[v]])):h[x][1].push(v)}const g=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,x]of h)i.push(x.length===1?g(x[0]):x.map(g)),i.push(this.outputs[v].serialize());return i.push(this.otherwise.serialize()),i}}var Xg=ph;class mh{constructor(i,a,h){this.type=i,this.branches=a,this.otherwise=h}static parse(i,a){if(i.length<4)return a.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return a.error("Expected an odd number of arguments.");let h;a.expectedType&&a.expectedType.kind!=="value"&&(h=a.expectedType);const p=[];for(let v=1;v<i.length-1;v+=2){const x=a.parse(i[v],v,bn);if(!x)return null;const S=a.parse(i[v+1],v+1,h);if(!S)return null;p.push([x,S]),h=h||S.type}const g=a.parse(i[i.length-1],i.length-1,h);return g?new mh(h,p,g):null}evaluate(i){for(const[a,h]of this.branches)if(a.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[a,h]of this.branches)i(a),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const i=["case"];return this.eachChild(a=>{i.push(a.serialize())}),i}}var Vx=mh;class gh{constructor(i,a,h,p){this.type=i,this.input=a,this.beginIndex=h,this.endIndex=p}static parse(i,a){if(i.length<=2||i.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const h=a.parse(i[1],1,pn),p=a.parse(i[2],2,At);if(!h||!p)return null;if(!Qu(h.type,[ho(pn),xn,pn]))return a.error(`Expected first argument to be of type array or string, but found ${wi(h.type)} instead`);if(i.length===4){const g=a.parse(i[3],3,At);return g?new gh(h.type,h,p,g):null}return new gh(h.type,h,p)}evaluate(i){const a=this.input.evaluate(i),h=this.beginIndex.evaluate(i);if(!Hs(a,["string","array"]))throw new lr(`Expected first argument to be of type array or string, but found ${wi(Ui(a))} instead.`);if(this.endIndex){const p=this.endIndex.evaluate(i);return a.slice(h,p)}return a.slice(h)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const i=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),i]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Kg=gh;function Ff(l,i){return l==="=="||l==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Bf(l,i,a,h){return h.compare(i,a)===0}function El(l,i,a){const h=l!=="=="&&l!=="!=";return class o5{constructor(g,v,x){this.type=bn,this.lhs=g,this.rhs=v,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||v.type.kind==="value"}static parse(g,v){if(g.length!==3&&g.length!==4)return v.error("Expected two or three arguments.");const x=g[0];let S=v.parse(g[1],1,pn);if(!S)return null;if(!Ff(x,S.type))return v.concat(1).error(`"${x}" comparisons are not supported for type '${wi(S.type)}'.`);let T=v.parse(g[2],2,pn);if(!T)return null;if(!Ff(x,T.type))return v.concat(2).error(`"${x}" comparisons are not supported for type '${wi(T.type)}'.`);if(S.type.kind!==T.type.kind&&S.type.kind!=="value"&&T.type.kind!=="value")return v.error(`Cannot compare types '${wi(S.type)}' and '${wi(T.type)}'.`);h&&(S.type.kind==="value"&&T.type.kind!=="value"?S=new wo(T.type,[S]):S.type.kind!=="value"&&T.type.kind==="value"&&(T=new wo(S.type,[T])));let D=null;if(g.length===4){if(S.type.kind!=="string"&&T.type.kind!=="string"&&S.type.kind!=="value"&&T.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(D=v.parse(g[3],3,Tc),!D)return null}return new o5(S,T,D)}evaluate(g){const v=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(h&&this.hasUntypedArgument){const S=Ui(v),T=Ui(x);if(S.kind!==T.kind||S.kind!=="string"&&S.kind!=="number")throw new lr(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${S.kind}, ${T.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const S=Ui(v),T=Ui(x);if(S.kind!=="string"||T.kind!=="string")return i(g,v,x)}return this.collator?a(g,v,x,this.collator.evaluate(g)):i(g,v,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[l];return this.eachChild(v=>{g.push(v.serialize())}),g}}}const jx=El("==",function(l,i,a){return i===a},Bf),Ux=El("!=",function(l,i,a){return i!==a},function(l,i,a,h){return!Bf(0,i,a,h)}),$x=El("<",function(l,i,a){return i<a},function(l,i,a,h){return h.compare(i,a)<0}),_h=El(">",function(l,i,a){return i>a},function(l,i,a,h){return h.compare(i,a)>0}),Jg=El("<=",function(l,i,a){return i<=a},function(l,i,a,h){return h.compare(i,a)<=0}),Qg=El(">=",function(l,i,a){return i>=a},function(l,i,a,h){return h.compare(i,a)>=0});class Nf{constructor(i,a,h,p,g,v){this.type=xn,this.number=i,this.locale=a,this.currency=h,this.unit=p,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(i,a){if(i.length!==3)return a.error("Expected two arguments.");const h=a.parse(i[1],1,At);if(!h)return null;const p=i[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=a.parse(p.locale,1,xn),!g))return null;let v=null;if(p.currency&&(v=a.parse(p.currency,1,xn),!v))return null;let x=null;if(p.unit&&(x=a.parse(p.unit,1,xn),!x))return null;let S=null;if(p["min-fraction-digits"]&&(S=a.parse(p["min-fraction-digits"],1,At),!S))return null;let T=null;return p["max-fraction-digits"]&&(T=a.parse(p["max-fraction-digits"],1,At),!T)?null:new Nf(h,g,v,x,S,T)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(i):void 0,unit:this.unit?this.unit.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.unit&&i(this.unit),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const i={};return this.locale&&(i.locale=this.locale.serialize()),this.currency&&(i.currency=this.currency.serialize()),this.unit&&(i.unit=this.unit.serialize()),this.minFractionDigits&&(i["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(i["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),i]}}class Vf{constructor(i){this.type=At,this.input=i}static parse(i,a){if(i.length!==2)return a.error(`Expected 1 argument, but found ${i.length-1} instead.`);const h=a.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${wi(h.type)} instead.`):new Vf(h):null}evaluate(i){const a=this.input.evaluate(i);if(typeof a=="string"||Array.isArray(a))return a.length;throw new lr(`Expected value to be of type string or array, but found ${wi(Ui(a))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}serialize(){const i=["length"];return this.eachChild(a=>{i.push(a.serialize())}),i}}const e_={"==":jx,"!=":Ux,">":_h,"<":$x,">=":Qg,"<=":Jg,array:wo,at:Zg,boolean:wo,case:Vx,coalesce:qg,collator:th,format:Pc,image:eh,in:Bx,"index-of":Nx,interpolate:is,"interpolate-hcl":is,"interpolate-lab":is,length:Vf,let:Yg,literal:Dc,match:Xg,number:wo,"number-format":Nf,object:wo,slice:Kg,step:Tf,string:wo,"to-boolean":vl,"to-color":vl,"to-number":vl,"to-string":vl,var:ah,within:oh};function jf(l,[i,a,h,p]){i=i.evaluate(l),a=a.evaluate(l),h=h.evaluate(l);const g=p?p.evaluate(l):1,v=mf(i,a,h,g);if(v)throw new lr(v);return new Wn(i/255*g,a/255*g,h/255*g,g)}function Uf(l,i){return l in i}function yh(l,i){const a=i[l];return a===void 0?null:a}function Es(l){return{type:l}}Uo.register(e_,{error:[{kind:"error"},[xn],(l,[i])=>{throw new lr(i.evaluate(l))}],typeof:[xn,[pn],(l,[i])=>wi(Ui(i.evaluate(l)))],"to-rgba":[ho(At,4),[Vo],(l,[i])=>i.evaluate(l).toArray()],rgb:[Vo,[At,At,At],jf],rgba:[Vo,[At,At,At,At],jf],has:{type:bn,overloads:[[[xn],(l,[i])=>Uf(i.evaluate(l),l.properties())],[[xn,jo],(l,[i,a])=>Uf(i.evaluate(l),a.evaluate(l))]]},get:{type:pn,overloads:[[[xn],(l,[i])=>yh(i.evaluate(l),l.properties())],[[xn,jo],(l,[i,a])=>yh(i.evaluate(l),a.evaluate(l))]]},"feature-state":[pn,[xn],(l,[i])=>yh(i.evaluate(l),l.featureState||{})],properties:[jo,[],l=>l.properties()],"geometry-type":[xn,[],l=>l.geometryType()],id:[pn,[],l=>l.id()],zoom:[At,[],l=>l.globals.zoom],pitch:[At,[],l=>l.globals.pitch||0],"distance-from-center":[At,[],l=>l.distanceFromCenter()],"heatmap-density":[At,[],l=>l.globals.heatmapDensity||0],"line-progress":[At,[],l=>l.globals.lineProgress||0],"sky-radial-progress":[At,[],l=>l.globals.skyRadialProgress||0],accumulated:[pn,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[At,Es(At),(l,i)=>{let a=0;for(const h of i)a+=h.evaluate(l);return a}],"*":[At,Es(At),(l,i)=>{let a=1;for(const h of i)a*=h.evaluate(l);return a}],"-":{type:At,overloads:[[[At,At],(l,[i,a])=>i.evaluate(l)-a.evaluate(l)],[[At],(l,[i])=>-i.evaluate(l)]]},"/":[At,[At,At],(l,[i,a])=>i.evaluate(l)/a.evaluate(l)],"%":[At,[At,At],(l,[i,a])=>i.evaluate(l)%a.evaluate(l)],ln2:[At,[],()=>Math.LN2],pi:[At,[],()=>Math.PI],e:[At,[],()=>Math.E],"^":[At,[At,At],(l,[i,a])=>Math.pow(i.evaluate(l),a.evaluate(l))],sqrt:[At,[At],(l,[i])=>Math.sqrt(i.evaluate(l))],log10:[At,[At],(l,[i])=>Math.log(i.evaluate(l))/Math.LN10],ln:[At,[At],(l,[i])=>Math.log(i.evaluate(l))],log2:[At,[At],(l,[i])=>Math.log(i.evaluate(l))/Math.LN2],sin:[At,[At],(l,[i])=>Math.sin(i.evaluate(l))],cos:[At,[At],(l,[i])=>Math.cos(i.evaluate(l))],tan:[At,[At],(l,[i])=>Math.tan(i.evaluate(l))],asin:[At,[At],(l,[i])=>Math.asin(i.evaluate(l))],acos:[At,[At],(l,[i])=>Math.acos(i.evaluate(l))],atan:[At,[At],(l,[i])=>Math.atan(i.evaluate(l))],min:[At,Es(At),(l,i)=>Math.min(...i.map(a=>a.evaluate(l)))],max:[At,Es(At),(l,i)=>Math.max(...i.map(a=>a.evaluate(l)))],abs:[At,[At],(l,[i])=>Math.abs(i.evaluate(l))],round:[At,[At],(l,[i])=>{const a=i.evaluate(l);return a<0?-Math.round(-a):Math.round(a)}],floor:[At,[At],(l,[i])=>Math.floor(i.evaluate(l))],ceil:[At,[At],(l,[i])=>Math.ceil(i.evaluate(l))],"filter-==":[bn,[xn,pn],(l,[i,a])=>l.properties()[i.value]===a.value],"filter-id-==":[bn,[pn],(l,[i])=>l.id()===i.value],"filter-type-==":[bn,[xn],(l,[i])=>l.geometryType()===i.value],"filter-<":[bn,[xn,pn],(l,[i,a])=>{const h=l.properties()[i.value],p=a.value;return typeof h==typeof p&&h<p}],"filter-id-<":[bn,[pn],(l,[i])=>{const a=l.id(),h=i.value;return typeof a==typeof h&&a<h}],"filter->":[bn,[xn,pn],(l,[i,a])=>{const h=l.properties()[i.value],p=a.value;return typeof h==typeof p&&h>p}],"filter-id->":[bn,[pn],(l,[i])=>{const a=l.id(),h=i.value;return typeof a==typeof h&&a>h}],"filter-<=":[bn,[xn,pn],(l,[i,a])=>{const h=l.properties()[i.value],p=a.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[bn,[pn],(l,[i])=>{const a=l.id(),h=i.value;return typeof a==typeof h&&a<=h}],"filter->=":[bn,[xn,pn],(l,[i,a])=>{const h=l.properties()[i.value],p=a.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[bn,[pn],(l,[i])=>{const a=l.id(),h=i.value;return typeof a==typeof h&&a>=h}],"filter-has":[bn,[pn],(l,[i])=>i.value in l.properties()],"filter-has-id":[bn,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[bn,[ho(xn)],(l,[i])=>i.value.indexOf(l.geometryType())>=0],"filter-id-in":[bn,[ho(pn)],(l,[i])=>i.value.indexOf(l.id())>=0],"filter-in-small":[bn,[xn,ho(pn)],(l,[i,a])=>a.value.indexOf(l.properties()[i.value])>=0],"filter-in-large":[bn,[xn,ho(pn)],(l,[i,a])=>function(h,p,g,v){for(;g<=v;){const x=g+v>>1;if(p[x]===h)return!0;p[x]>h?v=x-1:g=x+1}return!1}(l.properties()[i.value],a.value,0,a.value.length-1)],all:{type:bn,overloads:[[[bn,bn],(l,[i,a])=>i.evaluate(l)&&a.evaluate(l)],[Es(bn),(l,i)=>{for(const a of i)if(!a.evaluate(l))return!1;return!0}]]},any:{type:bn,overloads:[[[bn,bn],(l,[i,a])=>i.evaluate(l)||a.evaluate(l)],[Es(bn),(l,i)=>{for(const a of i)if(a.evaluate(l))return!0;return!1}]]},"!":[bn,[bn],(l,[i])=>!i.evaluate(l)],"is-supported-script":[bn,[xn],(l,[i])=>{const a=l.globals&&l.globals.isSupportedScript;return!a||a(i.evaluate(l))}],upcase:[xn,[xn],(l,[i])=>i.evaluate(l).toUpperCase()],downcase:[xn,[xn],(l,[i])=>i.evaluate(l).toLowerCase()],concat:[xn,Es(pn),(l,i)=>i.map(a=>Ac(a.evaluate(l))).join("")],"resolved-locale":[xn,[Tc],(l,[i])=>i.evaluate(l).resolvedLocale()]});var Bc=e_;function t_(l){return{result:"success",value:l}}function Sl(l){return{result:"error",value:l}}function Tl(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function n_(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function $f(l){return!!l.expression&&l.expression.interpolated}function zn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Nc(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)}function i_(l){return l}function Vc(l,i){const a=i.type==="color",h=l.stops&&typeof l.stops[0][0]=="object",p=h||!(h||l.property!==void 0),g=l.type||($f(i)?"exponential":"interval");if(a&&((l=uo({},l)).stops&&(l.stops=l.stops.map(T=>[T[0],Wn.parse(T[1])])),l.default=Wn.parse(l.default?l.default:i.default)),l.colorSpace&&l.colorSpace!=="rgb"&&!Hg[l.colorSpace])throw new Error(`Unknown color space: ${l.colorSpace}`);let v,x,S;if(g==="exponential")v=Gf;else if(g==="interval")v=Js;else if(g==="categorical"){v=Gx,x=Object.create(null);for(const T of l.stops)x[T[0]]=T[1];S=typeof l.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);v=Cl}if(h){const T={},D=[];for(let F=0;F<l.stops.length;F++){const V=l.stops[F],q=V[0].zoom;T[q]===void 0&&(T[q]={zoom:q,type:l.type,property:l.property,default:l.default,stops:[]},D.push(q)),T[q].stops.push([V[0].value,V[1]])}const P=[];for(const F of D)P.push([T[F].zoom,Vc(T[F],i)]);const L={name:"linear"};return{kind:"composite",interpolationType:L,interpolationFactor:is.interpolationFactor.bind(void 0,L),zoomStops:P.map(F=>F[0]),evaluate:({zoom:F},V)=>Gf({stops:P,base:l.base},i,F).evaluate(F,V)}}if(p){const T=g==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:T,interpolationFactor:is.interpolationFactor.bind(void 0,T),zoomStops:l.stops.map(D=>D[0]),evaluate:({zoom:D})=>v(l,i,D,x,S)}}return{kind:"source",evaluate(T,D){const P=D&&D.properties?D.properties[l.property]:void 0;return P===void 0?jc(l.default,i.default):v(l,i,P,x,S)}}}function jc(l,i,a){return l!==void 0?l:i!==void 0?i:a!==void 0?a:void 0}function Gx(l,i,a,h,p){return jc(typeof a===p?h[a]:void 0,l.default,i.default)}function Js(l,i,a){if(zn(a)!=="number")return jc(l.default,i.default);const h=l.stops.length;if(h===1||a<=l.stops[0][0])return l.stops[0][1];if(a>=l.stops[h-1][0])return l.stops[h-1][1];const p=ch(l.stops.map(g=>g[0]),a);return l.stops[p][1]}function Gf(l,i,a){const h=l.base!==void 0?l.base:1;if(zn(a)!=="number")return jc(l.default,i.default);const p=l.stops.length;if(p===1||a<=l.stops[0][0])return l.stops[0][1];if(a>=l.stops[p-1][0])return l.stops[p-1][1];const g=ch(l.stops.map(D=>D[0]),a),v=function(D,P,L,F){const V=F-L,q=D-L;return V===0?0:P===1?q/V:(Math.pow(P,q)-1)/(Math.pow(P,V)-1)}(a,h,l.stops[g][0],l.stops[g+1][0]),x=l.stops[g][1],S=l.stops[g+1][1];let T=Lc[i.type]||i_;if(l.colorSpace&&l.colorSpace!=="rgb"){const D=Hg[l.colorSpace];T=(P,L)=>D.reverse(D.interpolate(D.forward(P),D.forward(L),v))}return typeof x.evaluate=="function"?{evaluate(...D){const P=x.evaluate.apply(void 0,D),L=S.evaluate.apply(void 0,D);if(P!==void 0&&L!==void 0)return T(P,L,v)}}:T(x,S,v)}function Cl(l,i,a){return i.type==="color"?a=Wn.parse(a):i.type==="formatted"?a=$r.fromString(a.toString()):i.type==="resolvedImage"?a=Gr.fromString(a.toString()):zn(a)===i.type||i.type==="enum"&&i.values[a]||(a=void 0),jc(a,l.default,i.default)}class Wf{constructor(i,a){this.expression=i,this._warningHistory={},this._evaluator=new jg,this._defaultValue=a?function(h){return h.type==="color"&&(Nc(h.default)||Array.isArray(h.default))?new Wn(0,0,0,0):h.type==="color"?Wn.parse(h.default)||null:h.default===void 0?null:h.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(i,a,h,p,g,v,x,S){return this._evaluator.globals=i,this._evaluator.feature=a,this._evaluator.featureState=h,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null,this.expression.evaluate(this._evaluator)}evaluate(i,a,h,p,g,v,x,S){this._evaluator.globals=i,this._evaluator.feature=a||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=x||null,this._evaluator.featureDistanceData=S||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new lr(`Expected value to be one of ${Object.keys(this._enumValues).map(D=>JSON.stringify(D)).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console!="undefined"&&console.warn(T.message)),this._defaultValue}}}function vh(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in Bc}function Ml(l,i){const a=new Ia(Bc,[],i?function(p){const g={color:Vo,string:xn,number:At,enum:xn,boolean:bn,formatted:Cc,resolvedImage:Mc};return p.type==="array"?ho(g[p.value]||pn,p.length):g[p.type]}(i):void 0),h=a.parse(l,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?t_(new Wf(h,i)):Sl(a.errors)}class Hf{constructor(i,a){this.kind=i,this._styleExpression=a,this.isStateDependent=i!=="constant"&&!Xs(a.expression)}evaluateWithoutErrorHandling(i,a,h,p,g,v){return this._styleExpression.evaluateWithoutErrorHandling(i,a,h,p,g,v)}evaluate(i,a,h,p,g,v){return this._styleExpression.evaluate(i,a,h,p,g,v)}}class Uc{constructor(i,a,h,p){this.kind=i,this.zoomStops=h,this._styleExpression=a,this.isStateDependent=i!=="camera"&&!Xs(a.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,a,h,p,g,v){return this._styleExpression.evaluateWithoutErrorHandling(i,a,h,p,g,v)}evaluate(i,a,h,p,g,v){return this._styleExpression.evaluate(i,a,h,p,g,v)}interpolationFactor(i,a,h){return this.interpolationType?is.interpolationFactor(this.interpolationType,i,a,h):0}}function qf(l,i){if((l=Ml(l,i)).result==="error")return l;const a=l.value.expression,h=Da(a);if(!h&&!Tl(i))return Sl([new No("","data expressions not supported")]);const p=Oc(a,["zoom","pitch","distance-from-center"]);if(!p&&!n_(i))return Sl([new No("","zoom expressions not supported")]);const g=Al(a);return g||p?g instanceof No?Sl([g]):g instanceof is&&!$f(i)?Sl([new No("",'"interpolate" expressions cannot be used with this property')]):t_(g?new Uc(h?"camera":"composite",l.value,g.labels,g instanceof is?g.interpolation:void 0):new Hf(h?"constant":"source",l.value)):Sl([new No("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class kl{constructor(i,a){this._parameters=i,this._specification=a,uo(this,Vc(this._parameters,this._specification))}static deserialize(i){return new kl(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Al(l){let i=null;if(l instanceof Yg)i=Al(l.result);else if(l instanceof qg){for(const a of l.args)if(i=Al(a),i)break}else(l instanceof Tf||l instanceof is)&&l.input instanceof Uo&&l.input.name==="zoom"&&(i=l);return i instanceof No||l.eachChild(a=>{const h=Al(a);h instanceof No?i=h:!i&&h?i=new No("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&h&&i!==h&&(i=new No("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}class Dt{constructor(i,a,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function fo(l){const i=l.key,a=l.value,h=l.valueSpec||{},p=l.objectElementValidators||{},g=l.style,v=l.styleSpec;let x=[];const S=zn(a);if(S!=="object")return[new Dt(i,a,`object expected, ${S} found`)];for(const T in a){const D=T.split(".")[0],P=h[D]||h["*"];let L;p[D]?L=p[D]:h[D]?L=dr:p["*"]?L=p["*"]:h["*"]&&(L=dr),L?x=x.concat(L({key:(i&&`${i}.`)+T,value:a[T],valueSpec:P,style:g,styleSpec:v,object:a,objectKey:T},a)):x.push(new Dt(i,a[T],`unknown property "${T}"`))}for(const T in h)p[T]||h[T].required&&h[T].default===void 0&&a[T]===void 0&&x.push(new Dt(i,a,`missing required property "${T}"`));return x}function Yf(l){const i=l.value,a=l.valueSpec,h=l.style,p=l.styleSpec,g=l.key,v=l.arrayElementValidator||dr;if(zn(i)!=="array")return[new Dt(g,i,`array expected, ${zn(i)} found`)];if(a.length&&i.length!==a.length)return[new Dt(g,i,`array length ${a.length} expected, length ${i.length} found`)];if(a["min-length"]&&i.length<a["min-length"])return[new Dt(g,i,`array length at least ${a["min-length"]} expected, length ${i.length} found`)];let x={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};p.$version<7&&(x.function=a.function),zn(a.value)==="object"&&(x=a.value);let S=[];for(let T=0;T<i.length;T++)S=S.concat(v({array:i,arrayIndex:T,value:i[T],valueSpec:x,style:h,styleSpec:p,key:`${g}[${T}]`}));return S}function Zf(l){const i=l.key,a=l.value,h=l.valueSpec;let p=zn(a);if(p==="number"&&a!=a&&(p="NaN"),p!=="number")return[new Dt(i,a,`number expected, ${p} found`)];if("minimum"in h){let g=h.minimum;if(zn(h.minimum)==="array"&&(g=h.minimum[l.arrayIndex]),a<g)return[new Dt(i,a,`${a} is less than the minimum value ${g}`)]}if("maximum"in h){let g=h.maximum;if(zn(h.maximum)==="array"&&(g=h.maximum[l.arrayIndex]),a>g)return[new Dt(i,a,`${a} is greater than the maximum value ${g}`)]}return[]}function $c(l){const i=l.valueSpec,a=Mi(l.value.type);let h,p,g,v={};const x=a!=="categorical"&&l.value.property===void 0,S=!x,T=zn(l.value.stops)==="array"&&zn(l.value.stops[0])==="array"&&zn(l.value.stops[0][0])==="object",D=fo({key:l.key,value:l.value,valueSpec:l.styleSpec.function,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(F){if(a==="identity")return[new Dt(F.key,F.value,'identity function may not have a "stops" property')];let V=[];const q=F.value;return V=V.concat(Yf({key:F.key,value:q,valueSpec:F.valueSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:P})),zn(q)==="array"&&q.length===0&&V.push(new Dt(F.key,q,"array must have at least one stop")),V},default:function(F){return dr({key:F.key,value:F.value,valueSpec:i,style:F.style,styleSpec:F.styleSpec})}}});return a==="identity"&&x&&D.push(new Dt(l.key,l.value,'missing required property "property"')),a==="identity"||l.value.stops||D.push(new Dt(l.key,l.value,'missing required property "stops"')),a==="exponential"&&l.valueSpec.expression&&!$f(l.valueSpec)&&D.push(new Dt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(S&&!Tl(l.valueSpec)?D.push(new Dt(l.key,l.value,"property functions not supported")):x&&!n_(l.valueSpec)&&D.push(new Dt(l.key,l.value,"zoom functions not supported"))),a!=="categorical"&&!T||l.value.property!==void 0||D.push(new Dt(l.key,l.value,'"property" property is required')),D;function P(F){let V=[];const q=F.value,K=F.key;if(zn(q)!=="array")return[new Dt(K,q,`array expected, ${zn(q)} found`)];if(q.length!==2)return[new Dt(K,q,`array length 2 expected, length ${q.length} found`)];if(T){if(zn(q[0])!=="object")return[new Dt(K,q,`object expected, ${zn(q[0])} found`)];if(q[0].zoom===void 0)return[new Dt(K,q,"object stop key must have zoom")];if(q[0].value===void 0)return[new Dt(K,q,"object stop key must have value")];const le=Mi(q[0].zoom);if(typeof le!="number")return[new Dt(K,q[0].zoom,"stop zoom values must be numbers")];if(g&&g>le)return[new Dt(K,q[0].zoom,"stop zoom values must appear in ascending order")];le!==g&&(g=le,p=void 0,v={}),V=V.concat(fo({key:`${K}[0]`,value:q[0],valueSpec:{zoom:{}},style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:Zf,value:L}}))}else V=V.concat(L({key:`${K}[0]`,value:q[0],valueSpec:{},style:F.style,styleSpec:F.styleSpec},q));return vh(Ws(q[1]))?V.concat([new Dt(`${K}[1]`,q[1],"expressions are not allowed in function stops.")]):V.concat(dr({key:`${K}[1]`,value:q[1],valueSpec:i,style:F.style,styleSpec:F.styleSpec}))}function L(F,V){const q=zn(F.value),K=Mi(F.value),le=F.value!==null?F.value:V;if(h){if(q!==h)return[new Dt(F.key,le,`${q} stop domain type must match previous stop domain type ${h}`)]}else h=q;if(q!=="number"&&q!=="string"&&q!=="boolean"&&typeof K!="number"&&typeof K!="string"&&typeof K!="boolean")return[new Dt(F.key,le,"stop domain value must be a number, string, or boolean")];if(q!=="number"&&a!=="categorical"){let ge=`number expected, ${q} found`;return Tl(i)&&a===void 0&&(ge+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Dt(F.key,le,ge)]}return a!=="categorical"||q!=="number"||typeof K=="number"&&isFinite(K)&&Math.floor(K)===K?a!=="categorical"&&q==="number"&&typeof K=="number"&&typeof p=="number"&&p!==void 0&&K<p?[new Dt(F.key,le,"stop domain values must appear in ascending order")]:(p=K,a==="categorical"&&K in v?[new Dt(F.key,le,"stop domain values must be unique")]:(v[K]=!0,[])):[new Dt(F.key,le,`integer expected, found ${String(K)}`)]}}function $o(l){const i=(l.expressionContext==="property"?qf:Ml)(Ws(l.value),l.valueSpec);if(i.result==="error")return i.value.map(h=>new Dt(`${l.key}${h.key}`,l.value,h.message));const a=i.value.expression||i.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!a.outputDefined())return[new Dt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!Xs(a))return[new Dt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter")return Xf(a,l);if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Oc(a,["zoom","feature-state"]))return[new Dt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!Da(a))return[new Dt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xf(l,i){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const p of i.valueSpec.expression.parameters)a.delete(p);if(a.size===0)return[];const h=[];return l instanceof Uo&&a.has(l.name)?[new Dt(i.key,i.value,`["${l.name}"] expression is not supported in a filter for a ${i.object.type} layer with id: ${i.object.id}`)]:(l.eachChild(p=>{h.push(...Xf(p,i))}),h)}function Gc(l){const i=l.key,a=l.value,h=l.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Mi(a))===-1&&p.push(new Dt(i,a,`expected one of [${h.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(h.values).indexOf(Mi(a))===-1&&p.push(new Dt(i,a,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function Wc(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const i of l.slice(1))if(!Wc(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}function Hc(l,i="fill"){if(l==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Wc(l)||(l=xh(l));const a=l;let h=!0;try{h=function(T){if(!Ss(T))return T;let D=Ws(T);return Kf(D),D=r_(D),D}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const p=Ge[`filter_${i}`],g=Ml(h,p);let v=null;if(g.result==="error")throw new Error(g.value.map(T=>`${T.key}: ${T.message}`).join(", "));v=(T,D,P)=>g.value.evaluate(T,D,{},P);let x=null,S=null;if(h!==a){const T=Ml(a,p);if(T.result==="error")throw new Error(T.value.map(D=>`${D.key}: ${D.message}`).join(", "));x=(D,P,L,F,V)=>T.value.evaluate(D,P,{},L,void 0,void 0,F,V),S=!Da(T.value.expression)}return v=v,{filter:v,dynamicFilter:x||void 0,needGeometry:o_(h),needFeature:!!S}}function r_(l){if(!Array.isArray(l))return l;const i=function(a){if(Wx.has(a[0])){for(let h=1;h<a.length;h++)if(Ss(a[h]))return!0}return a}(l);return i===!0?i:i.map(a=>r_(a))}function Kf(l){let i=!1;const a=[];if(l[0]==="case"){for(let h=1;h<l.length-1;h+=2)i=i||Ss(l[h]),a.push(l[h+1]);a.push(l[l.length-1])}else if(l[0]==="match"){i=i||Ss(l[1]);for(let h=2;h<l.length-1;h+=2)a.push(l[h+1]);a.push(l[l.length-1])}else if(l[0]==="step"){i=i||Ss(l[1]);for(let h=1;h<l.length-1;h+=2)a.push(l[h+1])}i&&(l.length=0,l.push("any",...a));for(let h=1;h<l.length;h++)Kf(l[h])}function Ss(l){if(!Array.isArray(l))return!1;if((i=l[0])==="pitch"||i==="distance-from-center")return!0;var i;for(let a=1;a<l.length;a++)if(Ss(l[a]))return!0;return!1}const Wx=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Hx(l,i){return l<i?-1:l>i?1:0}function o_(l){if(!Array.isArray(l))return!1;if(l[0]==="within")return!0;for(let i=1;i<l.length;i++)if(o_(l[i]))return!0;return!1}function xh(l){if(!l)return!0;const i=l[0];return l.length<=1?i!=="any":i==="=="?Jf(l[1],l[2],"=="):i==="!="?wr(Jf(l[1],l[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Jf(l[1],l[2],i):i==="any"?(a=l.slice(1),["any"].concat(a.map(xh))):i==="all"?["all"].concat(l.slice(1).map(xh)):i==="none"?["all"].concat(l.slice(1).map(xh).map(wr)):i==="in"?qc(l[1],l.slice(2)):i==="!in"?wr(qc(l[1],l.slice(2))):i==="has"?Yc(l[1]):i==="!has"?wr(Yc(l[1])):i!=="within"||l;var a}function Jf(l,i,a){switch(l){case"$type":return[`filter-type-${a}`,i];case"$id":return[`filter-id-${a}`,i];default:return[`filter-${a}`,l,i]}}function qc(l,i){if(i.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(a=>typeof a!=typeof i[0])?["filter-in-large",l,["literal",i.sort(Hx)]]:["filter-in-small",l,["literal",i]]}}function Yc(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function wr(l){return["!",l]}function Dl(l){return Wc(Ws(l.value))?$o(uo({},l,{expressionContext:"filter",valueSpec:l.styleSpec[`filter_${l.layerType||"fill"}`]})):s_(l)}function s_(l){const i=l.value,a=l.key;if(zn(i)!=="array")return[new Dt(a,i,`array expected, ${zn(i)} found`)];const h=l.styleSpec;let p,g=[];if(i.length<1)return[new Dt(a,i,"filter array must have at least 1 element")];switch(g=g.concat(Gc({key:`${a}[0]`,value:i[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),Mi(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Mi(i[1])==="$type"&&g.push(new Dt(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&g.push(new Dt(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=zn(i[1]),p!=="string"&&g.push(new Dt(`${a}[1]`,i[1],`string expected, ${p} found`)));for(let v=2;v<i.length;v++)p=zn(i[v]),Mi(i[1])==="$type"?g=g.concat(Gc({key:`${a}[${v}]`,value:i[v],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new Dt(`${a}[${v}]`,i[v],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let v=1;v<i.length;v++)g=g.concat(s_({key:`${a}[${v}]`,value:i[v],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":p=zn(i[1]),i.length!==2?g.push(new Dt(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new Dt(`${a}[1]`,i[1],`string expected, ${p} found`));break;case"within":p=zn(i[1]),i.length!==2?g.push(new Dt(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="object"&&g.push(new Dt(`${a}[1]`,i[1],`object expected, ${p} found`))}return g}function a_(l,i){const a=l.key,h=l.style,p=l.styleSpec,g=l.value,v=l.objectKey,x=p[`${i}_${l.layerType}`];if(!x)return[];const S=v.match(/^(.*)-transition$/);if(i==="paint"&&S&&x[S[1]]&&x[S[1]].transition)return dr({key:a,value:g,valueSpec:p.transition,style:h,styleSpec:p});const T=l.valueSpec||x[v];if(!T)return[new Dt(a,g,`unknown property "${v}"`)];let D;if(zn(g)==="string"&&Tl(T)&&!T.tokens&&(D=/^{([^}]+)}$/.exec(g)))return[new Dt(a,g,`"${v}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const P=[];return l.layerType==="symbol"&&(v==="text-field"&&h&&!h.glyphs&&P.push(new Dt(a,g,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&Nc(Ws(g))&&Mi(g.type)==="identity"&&P.push(new Dt(a,g,'"text-font" does not support identity functions'))),P.concat(dr({key:l.key,value:g,valueSpec:T,style:h,styleSpec:p,expressionContext:"property",propertyType:i,propertyKey:v}))}function l_(l){return a_(l,"paint")}function c_(l){return a_(l,"layout")}function bh(l){let i=[];const a=l.value,h=l.key,p=l.style,g=l.styleSpec;a.type||a.ref||i.push(new Dt(h,a,'either "type" or "ref" is required'));let v=Mi(a.type);const x=Mi(a.ref);if(a.id){const S=Mi(a.id);for(let T=0;T<l.arrayIndex;T++){const D=p.layers[T];Mi(D.id)===S&&i.push(new Dt(h,a.id,`duplicate layer id "${a.id}", previously used at line ${D.id.__line__}`))}}if("ref"in a){let S;["type","source","source-layer","filter","layout"].forEach(T=>{T in a&&i.push(new Dt(h,a[T],`"${T}" is prohibited for ref layers`))}),p.layers.forEach(T=>{Mi(T.id)===x&&(S=T)}),S?S.ref?i.push(new Dt(h,a.ref,"ref cannot reference another ref layer")):v=Mi(S.type):typeof x=="string"&&i.push(new Dt(h,a.ref,`ref layer "${x}" not found`))}else if(v!=="background"&&v!=="sky")if(a.source){const S=p.sources&&p.sources[a.source],T=S&&Mi(S.type);S?T==="vector"&&v==="raster"?i.push(new Dt(h,a.source,`layer "${a.id}" requires a raster source`)):T==="raster"&&v!=="raster"?i.push(new Dt(h,a.source,`layer "${a.id}" requires a vector source`)):T!=="vector"||a["source-layer"]?T==="raster-dem"&&v!=="hillshade"?i.push(new Dt(h,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||T==="geojson"&&S.lineMetrics||i.push(new Dt(h,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Dt(h,a,`layer "${a.id}" must specify a "source-layer"`)):i.push(new Dt(h,a.source,`source "${a.source}" not found`))}else i.push(new Dt(h,a,'missing required property "source"'));return i=i.concat(fo({key:h,value:a,valueSpec:g.layer,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{"*":()=>[],type:()=>dr({key:`${h}.type`,value:a.type,valueSpec:g.layer.type,style:l.style,styleSpec:l.styleSpec,object:a,objectKey:"type"}),filter:S=>Dl(uo({layerType:v},S)),layout:S=>fo({layer:a,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>c_(uo({layerType:v},T))}}),paint:S=>fo({layer:a,key:S.key,value:S.value,valueSpec:{},style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":T=>l_(uo({layerType:v},T))}})}})),i}function Il(l){const i=l.value,a=l.key,h=zn(i);return h!=="string"?[new Dt(a,i,`string expected, ${h} found`)]:[]}const wh={promoteId:function({key:l,value:i}){if(zn(i)==="string")return Il({key:l,value:i});{const a=[];for(const h in i)a.push(...Il({key:`${l}.${h}`,value:i[h]}));return a}}};function u_(l){const i=l.value,a=l.key,h=l.styleSpec,p=l.style;if(!i.type)return[new Dt(a,i,'"type" is required')];const g=Mi(i.type);let v;switch(g){case"vector":case"raster":case"raster-dem":return v=fo({key:a,value:i,valueSpec:h[`source_${g.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:wh}),v;case"geojson":if(v=fo({key:a,value:i,valueSpec:h.source_geojson,style:p,styleSpec:h,objectElementValidators:wh}),i.cluster)for(const x in i.clusterProperties){const[S,T]=i.clusterProperties[x],D=typeof S=="string"?[S,["accumulated"],["get",x]]:S;v.push(...$o({key:`${a}.${x}.map`,value:T,expressionContext:"cluster-map"})),v.push(...$o({key:`${a}.${x}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return v;case"video":return fo({key:a,value:i,valueSpec:h.source_video,style:p,styleSpec:h});case"image":return fo({key:a,value:i,valueSpec:h.source_image,style:p,styleSpec:h});case"canvas":return[new Dt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Gc({key:`${a}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,styleSpec:h})}}function h_(l){const i=l.value,a=l.styleSpec,h=a.light,p=l.style;let g=[];const v=zn(i);if(i===void 0)return g;if(v!=="object")return g=g.concat([new Dt("light",i,`object expected, ${v} found`)]),g;for(const x in i){const S=x.match(/^(.*)-transition$/);g=g.concat(S&&h[S[1]]&&h[S[1]].transition?dr({key:x,value:i[x],valueSpec:a.transition,style:p,styleSpec:a}):h[x]?dr({key:x,value:i[x],valueSpec:h[x],style:p,styleSpec:a}):[new Dt(x,i[x],`unknown property "${x}"`)])}return g}function Eh(l){const i=l.value,a=l.key,h=l.style,p=l.styleSpec,g=p.terrain;let v=[];const x=zn(i);if(i===void 0)return v;if(x!=="object")return v=v.concat([new Dt("terrain",i,`object expected, ${x} found`)]),v;for(const S in i){const T=S.match(/^(.*)-transition$/);v=v.concat(T&&g[T[1]]&&g[T[1]].transition?dr({key:S,value:i[S],valueSpec:p.transition,style:h,styleSpec:p}):g[S]?dr({key:S,value:i[S],valueSpec:g[S],style:h,styleSpec:p}):[new Dt(S,i[S],`unknown property "${S}"`)])}if(i.source){const S=h.sources&&h.sources[i.source],T=S&&Mi(S.type);S?T!=="raster-dem"&&v.push(new Dt(a,i.source,`terrain cannot be used with a source of type ${String(T)}, it only be used with a "raster-dem" source type`)):v.push(new Dt(a,i.source,`source "${i.source}" not found`))}else v.push(new Dt(a,i,'terrain is missing required property "source"'));return v}function d_(l){const i=l.value,a=l.style,h=l.styleSpec,p=h.fog;let g=[];const v=zn(i);if(i===void 0)return g;if(v!=="object")return g=g.concat([new Dt("fog",i,`object expected, ${v} found`)]),g;for(const x in i){const S=x.match(/^(.*)-transition$/);g=g.concat(S&&p[S[1]]&&p[S[1]].transition?dr({key:x,value:i[x],valueSpec:h.transition,style:a,styleSpec:h}):p[x]?dr({key:x,value:i[x],valueSpec:p[x],style:a,styleSpec:h}):[new Dt(x,i[x],`unknown property "${x}"`)])}return g}const Qf={"*":()=>[],array:Yf,boolean:function(l){const i=l.value,a=l.key,h=zn(i);return h!=="boolean"?[new Dt(a,i,`boolean expected, ${h} found`)]:[]},number:Zf,color:function(l){const i=l.key,a=l.value,h=zn(a);return h!=="string"?[new Dt(i,a,`color expected, ${h} found`)]:qs.parseCSSColor(a)===null?[new Dt(i,a,`color expected, "${a}" found`)]:[]},enum:Gc,filter:Dl,function:$c,layer:bh,object:fo,source:u_,light:h_,terrain:Eh,fog:d_,string:Il,formatted:function(l){return Il(l).length===0?[]:$o(l)},resolvedImage:function(l){return Il(l).length===0?[]:$o(l)},projection:function(l){const i=l.value,a=l.styleSpec,h=a.projection,p=l.style;let g=[];const v=zn(i);if(v==="object")for(const x in i)g=g.concat(dr({key:x,value:i[x],valueSpec:h[x],style:p,styleSpec:a}));else v!=="string"&&(g=g.concat([new Dt("projection",i,`object or string expected, ${v} found`)]));return g}};function dr(l){const i=l.value,a=l.valueSpec,h=l.styleSpec;return a.expression&&Nc(Mi(i))?$c(l):a.expression&&vh(Ws(i))?$o(l):a.type&&Qf[a.type]?Qf[a.type](l):fo(uo({},l,{valueSpec:a.type?h[a.type]:a}))}function qx(l){const i=l.value,a=l.key,h=Il(l);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Dt(a,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&h.push(new Dt(a,i,'"glyphs" url must include a "{range}" token'))),h}function Sh(l,i=Ge){return Ts(dr({key:"",value:l,valueSpec:i.$root,styleSpec:i,style:l,objectElementValidators:{glyphs:qx,"*":()=>[]}}))}const Th=l=>Ts(l_(l)),f_=l=>Ts(c_(l));function Ts(l){return l.slice().sort((i,a)=>i.line&&a.line?i.line-a.line:0)}function ep(l,i){let a=!1;if(i&&i.length)for(const h of i)l.fire(new $n(new Error(h.message))),a=!0;return a}var Pl=So;function So(l,i,a){var h=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;var p=new Int32Array(this.arrayBuffer);l=p[0],this.d=(i=p[1])+2*(a=p[2]);for(var g=0;g<this.d*this.d;g++){var v=p[3+g],x=p[3+g+1];h.push(v===x?null:p.subarray(v,x))}var S=p[3+h.length+1];this.keys=p.subarray(p[3+h.length],S),this.bboxes=p.subarray(S),this.insert=this._insertReadonly}else{this.d=i+2*a;for(var T=0;T<this.d*this.d;T++)h.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=l,this.padding=a,this.scale=i/l,this.uid=0;var D=a/i*l;this.min=-D,this.max=l+D}So.prototype.insert=function(l,i,a,h,p){this._forEachCell(i,a,h,p,this._insertCell,this.uid++),this.keys.push(l),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(h),this.bboxes.push(p)},So.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},So.prototype._insertCell=function(l,i,a,h,p,g){this.cells[p].push(g)},So.prototype.query=function(l,i,a,h,p){var g=this.min,v=this.max;if(l<=g&&i<=g&&v<=a&&v<=h&&!p)return Array.prototype.slice.call(this.keys);var x=[];return this._forEachCell(l,i,a,h,this._queryCell,x,{},p),x},So.prototype._queryCell=function(l,i,a,h,p,g,v,x){var S=this.cells[p];if(S!==null)for(var T=this.keys,D=this.bboxes,P=0;P<S.length;P++){var L=S[P];if(v[L]===void 0){var F=4*L;(x?x(D[F+0],D[F+1],D[F+2],D[F+3]):l<=D[F+2]&&i<=D[F+3]&&a>=D[F+0]&&h>=D[F+1])?(v[L]=!0,g.push(T[L])):v[L]=!1}}},So.prototype._forEachCell=function(l,i,a,h,p,g,v,x){for(var S=this._convertToCellCoord(l),T=this._convertToCellCoord(i),D=this._convertToCellCoord(a),P=this._convertToCellCoord(h),L=S;L<=D;L++)for(var F=T;F<=P;F++){var V=this.d*F+L;if((!x||x(this._convertFromCellCoord(L),this._convertFromCellCoord(F),this._convertFromCellCoord(L+1),this._convertFromCellCoord(F+1)))&&p.call(this,l,i,a,h,V,g,v,x))return}},So.prototype._convertFromCellCoord=function(l){return(l-this.padding)/this.scale},So.prototype._convertToCellCoord=function(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))},So.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var l=this.cells,i=3+this.cells.length+1+1,a=0,h=0;h<this.cells.length;h++)a+=this.cells[h].length;var p=new Int32Array(i+a+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;for(var g=i,v=0;v<l.length;v++){var x=l[v];p[3+v]=g,p.set(x,g),g+=x.length}return p[3+l.length]=g,p.set(this.keys,g),p[3+l.length+1]=g+=this.keys.length,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer};const Ch={};function zt(l,i,a={}){Object.defineProperty(l,"_classRegistryKey",{value:i,writeable:!1}),Ch[i]={klass:l,omit:a.omit||[]}}zt(Object,"Object"),Pl.serialize=function(l,i){const a=l.toArrayBuffer();return i&&i.push(a),{buffer:a}},Pl.deserialize=function(l){return new Pl(l.buffer)},Object.defineProperty(Pl,"name",{value:"Grid"}),zt(Pl,"Grid"),zt(Wn,"Color"),zt(Error,"Error"),zt(Ae,"AJAXError"),zt(Gr,"ResolvedImage"),zt(kl,"StylePropertyFunction"),zt(Wf,"StyleExpression",{omit:["_evaluator"]}),zt(Uc,"ZoomDependentExpression"),zt(Hf,"ZoomConstantExpression"),zt(Uo,"CompoundExpression",{omit:["_evaluate"]});for(const l in Bc)Ch[Bc[l]._classRegistryKey]||zt(Bc[l],`Expression${l}`);function p_(l){return l&&typeof ArrayBuffer!="undefined"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function m_(l){return y.ImageBitmap&&l instanceof y.ImageBitmap}function Ol(l,i){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp)return l;if(p_(l)||m_(l))return i&&i.push(l),l;if(ArrayBuffer.isView(l)){const a=l;return i&&i.push(a.buffer),a}if(l instanceof y.ImageData)return i&&i.push(l.data.buffer),l;if(Array.isArray(l)){const a=[];for(const h of l)a.push(Ol(h,i));return a}if(typeof l=="object"){const a=l.constructor,h=a._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const p=a.serialize?a.serialize(l,i):{};if(!a.serialize){for(const g in l)l.hasOwnProperty(g)&&(Ch[h].omit.indexOf(g)>=0||(p[g]=Ol(l[g],i)));l instanceof Error&&(p.message=l.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(p.$name=h),p}throw new Error("can't serialize object of type "+typeof l)}function Zc(l){if(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||p_(l)||m_(l)||ArrayBuffer.isView(l)||l instanceof y.ImageData)return l;if(Array.isArray(l))return l.map(Zc);if(typeof l=="object"){const i=l.$name||"Object",{klass:a}=Ch[i];if(!a)throw new Error(`can't deserialize unregistered class ${i}`);if(a.deserialize)return a.deserialize(l);const h=Object.create(a.prototype);for(const p of Object.keys(l))p!=="$name"&&(h[p]=Zc(l[p]));return h}throw new Error("can't deserialize object of type "+typeof l)}class g_{constructor(){this.first=!0}update(i,a){const h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=a),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}const __=l=>l>=1536&&l<=1791,y_=l=>l>=1872&&l<=1919,v_=l=>l>=2208&&l<=2303,x_=l=>l>=11904&&l<=12031,b_=l=>l>=12032&&l<=12255,Xc=l=>l>=12272&&l<=12287,Mh=l=>l>=12288&&l<=12351,tp=l=>l>=12352&&l<=12447,Pa=l=>l>=12448&&l<=12543,w_=l=>l>=12544&&l<=12591,np=l=>l>=12704&&l<=12735,E_=l=>l>=12736&&l<=12783,ip=l=>l>=12784&&l<=12799,rp=l=>l>=12800&&l<=13055,op=l=>l>=13056&&l<=13311,sp=l=>l>=13312&&l<=19903,Kc=l=>l>=19968&&l<=40959,kh=l=>l>=40960&&l<=42127,S_=l=>l>=42128&&l<=42191,T_=l=>l>=44032&&l<=55215,C_=l=>l>=63744&&l<=64255,Jc=l=>l>=64336&&l<=65023,M_=l=>l>=65040&&l<=65055,ap=l=>l>=65072&&l<=65103,k_=l=>l>=65104&&l<=65135,lp=l=>l>=65136&&l<=65279,cp=l=>l>=65280&&l<=65519;function Ah(l){for(const i of l)if(Dh(i.charCodeAt(0)))return!0;return!1}function Yx(l){for(const i of l)if(!Zx(i.charCodeAt(0)))return!1;return!0}function Zx(l){return!(__(l)||y_(l)||v_(l)||Jc(l)||lp(l))}function Dh(l){return!(l!==746&&l!==747&&(l<4352||!(np(l)||w_(l)||ap(l)&&!(l>=65097&&l<=65103)||C_(l)||op(l)||x_(l)||E_(l)||!(!Mh(l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||sp(l)||Kc(l)||rp(l)||(i=>i>=12592&&i<=12687)(l)||(i=>i>=43360&&i<=43391)(l)||(i=>i>=55216&&i<=55295)(l)||(i=>i>=4352&&i<=4607)(l)||T_(l)||tp(l)||Xc(l)||(i=>i>=12688&&i<=12703)(l)||b_(l)||ip(l)||Pa(l)&&l!==12540||!(!cp(l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!k_(l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||(i=>i>=5120&&i<=5759)(l)||(i=>i>=6320&&i<=6399)(l)||M_(l)||(i=>i>=19904&&i<=19967)(l)||kh(l)||S_(l))))}function Qc(l){return!(Dh(l)||function(i){return!!((a=>a>=128&&a<=255)(i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||(a=>a>=8192&&a<=8303)(i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||(a=>a>=8448&&a<=8527)(i)||(a=>a>=8528&&a<=8591)(i)||(a=>a>=8960&&a<=9215)(i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||(a=>a>=9216&&a<=9279)(i)&&i!==9251||(a=>a>=9280&&a<=9311)(i)||(a=>a>=9312&&a<=9471)(i)||(a=>a>=9632&&a<=9727)(i)||(a=>a>=9728&&a<=9983)(i)&&!(i>=9754&&i<=9759)||(a=>a>=11008&&a<=11263)(i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Mh(i)||Pa(i)||(a=>a>=57344&&a<=63743)(i)||ap(i)||k_(i)||cp(i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(l))}function m(l){return l>=1424&&l<=2303||Jc(l)||lp(l)}function c(l,i){return!(!i&&m(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||(a=>a>=6016&&a<=6143)(l))}function f(l){for(const i of l)if(m(i.charCodeAt(0)))return!0;return!1}const _="deferred",b="loading",E="loaded";let C=null,A="unavailable",I=null;const z=function(l){l&&typeof l=="string"&&l.indexOf("NetworkError")>-1&&(A="error"),C&&C(l)};function R(){W.fire(new Xn("pluginStateChange",{pluginStatus:A,pluginURL:I}))}const W=new Kt,Y=function(){return A},oe=function(){if(A!==_||!I)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");A=b,R(),I&&Oe({url:I},l=>{l?z(l):(A=E,R())})},ee={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>A===E||ee.applyArabicShaping!=null,isLoading:()=>A===b,setState(l){A=l.pluginStatus,I=l.pluginURL},isParsed:()=>ee.applyArabicShaping!=null&&ee.processBidirectionalText!=null&&ee.processStyledBidirectionalText!=null,getPluginURL:()=>I};class te{constructor(i,a){this.zoom=i,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.zoomHistory=a.zoomHistory,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new g_,this.transition={},this.pitch=0)}isSupportedScript(i){return function(a,h){for(const p of a)if(!c(p.charCodeAt(0),h))return!1;return!0}(i,ee.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,a=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*a}}}class ne{constructor(i,a){this.property=i,this.value=a,this.expression=function(h,p){if(Nc(h))return new kl(h,p);if(vh(h)){const g=qf(h,p);if(g.result==="error")throw new Error(g.value.map(v=>`${v.key}: ${v.message}`).join(", "));return g.value}{let g=h;return typeof h=="string"&&p.type==="color"&&(g=Wn.parse(h)),{kind:"constant",evaluate:()=>g}}}(a===void 0?i.specification.default:a,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,a,h){return this.property.possiblyEvaluate(this,i,a,h)}}class J{constructor(i){this.property=i,this.value=new ne(i,void 0)}transitioned(i,a){return new ae(this.property,this.value,a,pt({},i.transition,this.transition),i.now)}untransitioned(){return new ae(this.property,this.value,null,{},0)}}class ce{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return un(this._values[i].value.value)}setValue(i,a){this._values.hasOwnProperty(i)||(this._values[i]=new J(this._values[i].property)),this._values[i].value=new ne(this._values[i].property,a===null?void 0:un(a))}getTransition(i){return un(this._values[i].transition)}setTransition(i,a){this._values.hasOwnProperty(i)||(this._values[i]=new J(this._values[i].property)),this._values[i].transition=un(a)||void 0}serialize(){const i={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(i[a]=h);const p=this.getTransition(a);p!==void 0&&(i[`${a}-transition`]=p)}return i}transitioned(i,a){const h=new Se(this._properties);for(const p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,a._values[p]);return h}untransitioned(){const i=new Se(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].untransitioned();return i}}class ae{constructor(i,a,h,p,g){const v=p.delay||0,x=p.duration||0;g=g||0,this.property=i,this.value=a,this.begin=g+v,this.end=this.begin+x,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,a,h){const p=i.now||0,g=this.value.possiblyEvaluate(i,a,h),v=this.prior;if(v){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return v.possiblyEvaluate(i,a,h);{const x=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(i,a,h),g,Z(x))}}return g}}class Se{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,a,h){const p=new Ee(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,a,h);return p}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class be{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}getValue(i){return un(this._values[i].value)}setValue(i,a){this._values[i]=new ne(this._values[i].property,a===null?void 0:un(a))}serialize(){const i={};for(const a of Object.keys(this._values)){const h=this.getValue(a);h!==void 0&&(i[a]=h)}return i}possiblyEvaluate(i,a,h){const p=new Ee(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,a,h);return p}}class me{constructor(i,a,h){this.property=i,this.value=a,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,a,h,p){return this.property.evaluate(this.value,this.parameters,i,a,h,p)}}class Ee{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class ve{constructor(i){this.specification=i}possiblyEvaluate(i,a){return i.expression.evaluate(a)}interpolate(i,a,h){const p=Lc[this.specification.type];return p?p(i,a,h):i}}class Me{constructor(i,a){this.specification=i,this.overrides=a}possiblyEvaluate(i,a,h,p){return new me(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(a,null,{},h,p)}:i.expression,a)}interpolate(i,a,h){if(i.value.kind!=="constant"||a.value.kind!=="constant")return i;if(i.value.value===void 0||a.value.value===void 0)return new me(this,{kind:"constant",value:void 0},i.parameters);const p=Lc[this.specification.type];return p?new me(this,{kind:"constant",value:p(i.value.value,a.value.value,h)},i.parameters):i}evaluate(i,a,h,p,g,v){return i.kind==="constant"?i.value:i.evaluate(a,h,p,g,v)}}class Re extends Me{possiblyEvaluate(i,a,h,p){if(i.value===void 0)return new me(this,{kind:"constant",value:void 0},a);if(i.expression.kind==="constant"){const g=i.expression.evaluate(a,null,{},h,p),v=i.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(v,v,v,a);return new me(this,{kind:"constant",value:x},a)}if(i.expression.kind==="camera"){const g=this._calculate(i.expression.evaluate({zoom:a.zoom-1}),i.expression.evaluate({zoom:a.zoom}),i.expression.evaluate({zoom:a.zoom+1}),a);return new me(this,{kind:"constant",value:g},a)}return new me(this,i.expression,a)}evaluate(i,a,h,p,g,v){if(i.kind==="source"){const x=i.evaluate(a,h,p,g,v);return this._calculate(x,x,x,a)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(a.zoom)-1},h,p),i.evaluate({zoom:Math.floor(a.zoom)},h,p),i.evaluate({zoom:Math.floor(a.zoom)+1},h,p),a):i.value}_calculate(i,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:a,other:h}:{from:h,to:a,other:i}}interpolate(i){return i}}class ut{constructor(i){this.specification=i}possiblyEvaluate(i,a,h,p){if(i.value!==void 0){if(i.expression.kind==="constant"){const g=i.expression.evaluate(a,null,{},h,p);return this._calculate(g,g,g,a)}return this._calculate(i.expression.evaluate(new te(Math.floor(a.zoom-1),a)),i.expression.evaluate(new te(Math.floor(a.zoom),a)),i.expression.evaluate(new te(Math.floor(a.zoom+1),a)),a)}}_calculate(i,a,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:a}:{from:h,to:a}}interpolate(i){return i}}class Pe{constructor(i){this.specification=i}possiblyEvaluate(i,a,h,p){return!!i.expression.evaluate(a,null,{},h,p)}interpolate(){return!1}}class Ye{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new te(0,{});for(const h in i){const p=i[h];p.specification.overridable&&this.overridableProperties.push(h);const g=this.defaultPropertyValues[h]=new ne(p,void 0),v=this.defaultTransitionablePropertyValues[h]=new J(p);this.defaultTransitioningPropertyValues[h]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=g.possiblyEvaluate(a)}}}function et(l,i){return 256*(l=de(Math.floor(l),0,255))+de(Math.floor(i),0,255)}zt(Me,"DataDrivenProperty"),zt(ve,"DataConstantProperty"),zt(Re,"CrossFadedDataDrivenProperty"),zt(ut,"CrossFadedProperty"),zt(Pe,"ColorRampProperty");const yt={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class $e{constructor(i,a){this._structArray=i,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class lt{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,a){return i._trim(),a&&(i.isTransferred=!0,a.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const a=Object.create(this.prototype);return a.arrayBuffer=i.arrayBuffer,a.length=i.length,a.capacity=i.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ze(l,i=1){let a=0,h=0;return{members:l.map(p=>{const g=yt[p.type].BYTES_PER_ELEMENT,v=a=Tt(a,Math.max(i,g)),x=p.components||1;return h=Math.max(h,g),a+=g*x,{name:p.name,type:p.type,components:x,offset:v}}),size:Tt(a,Math.max(h,i)),alignment:i}}function Tt(l,i){return Math.ceil(l/i)*i}class bt extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const p=2*i;return this.int16[p+0]=a,this.int16[p+1]=h,i}}bt.prototype.bytesPerElement=4,zt(bt,"StructArrayLayout2i4");class Bt extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,a,h)}emplace(i,a,h,p){const g=3*i;return this.int16[g+0]=a,this.int16[g+1]=h,this.int16[g+2]=p,i}}Bt.prototype.bytesPerElement=6,zt(Bt,"StructArrayLayout3i6");class qt extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h,p)}emplace(i,a,h,p,g){const v=4*i;return this.int16[v+0]=a,this.int16[v+1]=h,this.int16[v+2]=p,this.int16[v+3]=g,i}}qt.prototype.bytesPerElement=8,zt(qt,"StructArrayLayout4i8");class rn extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,a,h,p,g,v,x)}emplace(i,a,h,p,g,v,x,S){const T=6*i,D=12*i,P=3*i;return this.int16[T+0]=a,this.int16[T+1]=h,this.uint8[D+4]=p,this.uint8[D+5]=g,this.uint8[D+6]=v,this.uint8[D+7]=x,this.float32[P+2]=S,i}}rn.prototype.bytesPerElement=12,zt(rn,"StructArrayLayout2i4ub1f12");class wn extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h,p)}emplace(i,a,h,p,g){const v=4*i;return this.float32[v+0]=a,this.float32[v+1]=h,this.float32[v+2]=p,this.float32[v+3]=g,i}}wn.prototype.bytesPerElement=16,zt(wn,"StructArrayLayout4f16");class Nt extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x,S,T,D){const P=this.length;return this.resize(P+1),this.emplace(P,i,a,h,p,g,v,x,S,T,D)}emplace(i,a,h,p,g,v,x,S,T,D,P){const L=10*i;return this.uint16[L+0]=a,this.uint16[L+1]=h,this.uint16[L+2]=p,this.uint16[L+3]=g,this.uint16[L+4]=v,this.uint16[L+5]=x,this.uint16[L+6]=S,this.uint16[L+7]=T,this.uint16[L+8]=D,this.uint16[L+9]=P,i}}Nt.prototype.bytesPerElement=20,zt(Nt,"StructArrayLayout10ui20");class an extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x,S){const T=this.length;return this.resize(T+1),this.emplace(T,i,a,h,p,g,v,x,S)}emplace(i,a,h,p,g,v,x,S,T){const D=8*i;return this.uint16[D+0]=a,this.uint16[D+1]=h,this.uint16[D+2]=p,this.uint16[D+3]=g,this.uint16[D+4]=v,this.uint16[D+5]=x,this.uint16[D+6]=S,this.uint16[D+7]=T,i}}an.prototype.bytesPerElement=16,zt(an,"StructArrayLayout8ui16");class In extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,a,h,p,g,v)}emplace(i,a,h,p,g,v,x){const S=6*i;return this.int16[S+0]=a,this.int16[S+1]=h,this.int16[S+2]=p,this.int16[S+3]=g,this.int16[S+4]=v,this.int16[S+5]=x,i}}In.prototype.bytesPerElement=12,zt(In,"StructArrayLayout6i12");class ui extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x,S,T,D,P,L){const F=this.length;return this.resize(F+1),this.emplace(F,i,a,h,p,g,v,x,S,T,D,P,L)}emplace(i,a,h,p,g,v,x,S,T,D,P,L,F){const V=12*i;return this.int16[V+0]=a,this.int16[V+1]=h,this.int16[V+2]=p,this.int16[V+3]=g,this.uint16[V+4]=v,this.uint16[V+5]=x,this.uint16[V+6]=S,this.uint16[V+7]=T,this.int16[V+8]=D,this.int16[V+9]=P,this.int16[V+10]=L,this.int16[V+11]=F,i}}ui.prototype.bytesPerElement=24,zt(ui,"StructArrayLayout4i4ui4i24");class ki extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v){const x=this.length;return this.resize(x+1),this.emplace(x,i,a,h,p,g,v)}emplace(i,a,h,p,g,v,x){const S=10*i,T=5*i;return this.int16[S+0]=a,this.int16[S+1]=h,this.int16[S+2]=p,this.float32[T+2]=g,this.float32[T+3]=v,this.float32[T+4]=x,i}}ki.prototype.bytesPerElement=20,zt(ki,"StructArrayLayout3i3f20");class Hn extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint32[1*i+0]=a,i}}Hn.prototype.bytesPerElement=4,zt(Hn,"StructArrayLayout1ul4");class fr extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x,S,T,D,P,L,F){const V=this.length;return this.resize(V+1),this.emplace(V,i,a,h,p,g,v,x,S,T,D,P,L,F)}emplace(i,a,h,p,g,v,x,S,T,D,P,L,F,V){const q=20*i,K=10*i;return this.int16[q+0]=a,this.int16[q+1]=h,this.int16[q+2]=p,this.int16[q+3]=g,this.int16[q+4]=v,this.float32[K+3]=x,this.float32[K+4]=S,this.float32[K+5]=T,this.float32[K+6]=D,this.int16[q+14]=P,this.uint32[K+8]=L,this.uint16[q+18]=F,this.uint16[q+19]=V,i}}fr.prototype.bytesPerElement=40,zt(fr,"StructArrayLayout5i4f1i1ul2ui40");class Go extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,a,h,p,g,v,x)}emplace(i,a,h,p,g,v,x,S){const T=8*i;return this.int16[T+0]=a,this.int16[T+1]=h,this.int16[T+2]=p,this.int16[T+4]=g,this.int16[T+5]=v,this.int16[T+6]=x,this.int16[T+7]=S,i}}Go.prototype.bytesPerElement=16,zt(Go,"StructArrayLayout3i2i2i16");class Cs extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,a,h,p,g)}emplace(i,a,h,p,g,v){const x=4*i,S=8*i;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=p,this.int16[S+6]=g,this.int16[S+7]=v,i}}Cs.prototype.bytesPerElement=16,zt(Cs,"StructArrayLayout2f1f2i16");class hi extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h,p)}emplace(i,a,h,p,g){const v=12*i,x=3*i;return this.uint8[v+0]=a,this.uint8[v+1]=h,this.float32[x+1]=p,this.float32[x+2]=g,i}}hi.prototype.bytesPerElement=12,zt(hi,"StructArrayLayout2ub2f12");class gi extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,a,h)}emplace(i,a,h,p){const g=3*i;return this.float32[g+0]=a,this.float32[g+1]=h,this.float32[g+2]=p,i}}gi.prototype.bytesPerElement=12,zt(gi,"StructArrayLayout3f12");class yn extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h){const p=this.length;return this.resize(p+1),this.emplace(p,i,a,h)}emplace(i,a,h,p){const g=3*i;return this.uint16[g+0]=a,this.uint16[g+1]=h,this.uint16[g+2]=p,i}}yn.prototype.bytesPerElement=6,zt(yn,"StructArrayLayout3ui6");class qi extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K,le,ge,ue,pe,Te){const _e=this.length;return this.resize(_e+1),this.emplace(_e,i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K,le,ge,ue,pe,Te)}emplace(i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K,le,ge,ue,pe,Te,_e){const Be=30*i,Fe=15*i,He=60*i;return this.int16[Be+0]=a,this.int16[Be+1]=h,this.int16[Be+2]=p,this.float32[Fe+2]=g,this.float32[Fe+3]=v,this.uint16[Be+8]=x,this.uint16[Be+9]=S,this.uint32[Fe+5]=T,this.uint32[Fe+6]=D,this.uint32[Fe+7]=P,this.uint16[Be+16]=L,this.uint16[Be+17]=F,this.uint16[Be+18]=V,this.float32[Fe+10]=q,this.float32[Fe+11]=K,this.uint8[He+48]=le,this.uint8[He+49]=ge,this.uint8[He+50]=ue,this.uint32[Fe+13]=pe,this.int16[Be+28]=Te,this.uint8[He+58]=_e,i}}qi.prototype.bytesPerElement=60,zt(qi,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Er extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K,le,ge,ue,pe,Te,_e,Be,Fe,He,dt,Ue,Xe,nt,Ke){const ht=this.length;return this.resize(ht+1),this.emplace(ht,i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K,le,ge,ue,pe,Te,_e,Be,Fe,He,dt,Ue,Xe,nt,Ke)}emplace(i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K,le,ge,ue,pe,Te,_e,Be,Fe,He,dt,Ue,Xe,nt,Ke,ht){const it=38*i,Ct=19*i;return this.int16[it+0]=a,this.int16[it+1]=h,this.int16[it+2]=p,this.float32[Ct+2]=g,this.float32[Ct+3]=v,this.int16[it+8]=x,this.int16[it+9]=S,this.int16[it+10]=T,this.int16[it+11]=D,this.int16[it+12]=P,this.int16[it+13]=L,this.uint16[it+14]=F,this.uint16[it+15]=V,this.uint16[it+16]=q,this.uint16[it+17]=K,this.uint16[it+18]=le,this.uint16[it+19]=ge,this.uint16[it+20]=ue,this.uint16[it+21]=pe,this.uint16[it+22]=Te,this.uint16[it+23]=_e,this.uint16[it+24]=Be,this.uint16[it+25]=Fe,this.uint16[it+26]=He,this.uint16[it+27]=dt,this.uint16[it+28]=Ue,this.uint32[Ct+15]=Xe,this.float32[Ct+16]=nt,this.float32[Ct+17]=Ke,this.float32[Ct+18]=ht,i}}Er.prototype.bytesPerElement=76,zt(Er,"StructArrayLayout3i2f6i15ui1ul3f76");class ni extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.float32[1*i+0]=a,i}}ni.prototype.bytesPerElement=4,zt(ni,"StructArrayLayout1f4");class Sr extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a,h,p,g){const v=this.length;return this.resize(v+1),this.emplace(v,i,a,h,p,g)}emplace(i,a,h,p,g,v){const x=5*i;return this.float32[x+0]=a,this.float32[x+1]=h,this.float32[x+2]=p,this.float32[x+3]=g,this.float32[x+4]=v,i}}Sr.prototype.bytesPerElement=20,zt(Sr,"StructArrayLayout5f20");class Oa extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a,h,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,a,h,p)}emplace(i,a,h,p,g){const v=6*i;return this.uint32[3*i+0]=a,this.uint16[v+2]=h,this.uint16[v+3]=p,this.uint16[v+4]=g,i}}Oa.prototype.bytesPerElement=12,zt(Oa,"StructArrayLayout1ul3ui12");class Lr extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const p=2*i;return this.uint16[p+0]=a,this.uint16[p+1]=h,i}}Lr.prototype.bytesPerElement=4,zt(Lr,"StructArrayLayout2ui4");class La extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const a=this.length;return this.resize(a+1),this.emplace(a,i)}emplace(i,a){return this.uint16[1*i+0]=a,i}}La.prototype.bytesPerElement=2,zt(La,"StructArrayLayout1ui2");class za extends lt{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,a){const h=this.length;return this.resize(h+1),this.emplace(h,i,a)}emplace(i,a,h){const p=2*i;return this.float32[p+0]=a,this.float32[p+1]=h,i}}za.prototype.bytesPerElement=8,zt(za,"StructArrayLayout2f8");class Ra extends $e{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}Ra.prototype.size=12;class zr extends In{get(i){return new Ra(this,i)}}zt(zr,"FillExtrusionExtArray");class Fa extends $e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Fa.prototype.size=40;class Qs extends fr{get(i){return new Fa(this,i)}}zt(Qs,"CollisionBoxArray");class eu extends $e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(i){this._structArray.uint8[this._pos1+49]=i}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(i){this._structArray.uint8[this._pos1+50]=i}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(i){this._structArray.uint32[this._pos4+13]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(i){this._structArray.uint8[this._pos1+58]=i}}eu.prototype.size=60;class mT extends qi{get(i){return new eu(this,i)}}zt(mT,"PlacedSymbolArray");class gT extends $e{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(i){this._structArray.uint32[this._pos4+15]=i}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}gT.prototype.size=76;class _T extends Er{get(i){return new gT(this,i)}}zt(_T,"SymbolInstanceArray");class yT extends ni{getoffsetX(i){return this.float32[1*i+0]}}zt(yT,"GlyphOffsetArray");class vT extends Bt{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}zt(vT,"SymbolLineVertexArray");class xT extends $e{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}xT.prototype.size=12;class bT extends Oa{get(i){return new xT(this,i)}}zt(bT,"FeatureIndexArray");class wT extends $e{get a_centroid_pos0(){return this._structArray.uint16[this._pos2+0]}get a_centroid_pos1(){return this._structArray.uint16[this._pos2+1]}}wT.prototype.size=4;class ET extends Lr{get(i){return new wT(this,i)}}zt(ET,"FillExtrusionCentroidArray");class ST extends $e{get a_pos_30(){return this._structArray.int16[this._pos2+0]}get a_pos_31(){return this._structArray.int16[this._pos2+1]}get a_pos_32(){return this._structArray.int16[this._pos2+2]}get a_pos_normal_30(){return this._structArray.int16[this._pos2+3]}get a_pos_normal_31(){return this._structArray.int16[this._pos2+4]}get a_pos_normal_32(){return this._structArray.int16[this._pos2+5]}}ST.prototype.size=12;class TT extends In{get(i){return new ST(this,i)}}zt(TT,"CircleGlobeExtArray");const u5=Ze([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),h5=Ze([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]);var CT=ff(function(l){l.exports=function(i,a){var h,p,g,v,x,S,T,D;for(p=i.length-(h=3&i.length),g=a,x=3432918353,S=461845907,D=0;D<p;)T=255&i.charCodeAt(D)|(255&i.charCodeAt(++D))<<8|(255&i.charCodeAt(++D))<<16|(255&i.charCodeAt(++D))<<24,++D,g=27492+(65535&(v=5*(65535&(g=(g^=T=(65535&(T=(T=(65535&T)*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*S+(((T>>>16)*S&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(v>>>16)&65535)<<16);switch(T=0,h){case 3:T^=(255&i.charCodeAt(D+2))<<16;case 2:T^=(255&i.charCodeAt(D+1))<<8;case 1:g^=T=(65535&(T=(T=(65535&(T^=255&i.charCodeAt(D)))*x+(((T>>>16)*x&65535)<<16)&4294967295)<<15|T>>>17))*S+(((T>>>16)*S&65535)<<16)&4294967295}return g^=i.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0}}),d5=ff(function(l){l.exports=function(i,a){for(var h,p=i.length,g=a^p,v=0;p>=4;)h=1540483477*(65535&(h=255&i.charCodeAt(v)|(255&i.charCodeAt(++v))<<8|(255&i.charCodeAt(++v))<<16|(255&i.charCodeAt(++v))<<24))+((1540483477*(h>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),p-=4,++v;switch(p){case 3:g^=(255&i.charCodeAt(v+2))<<16;case 2:g^=(255&i.charCodeAt(v+1))<<8;case 1:g=1540483477*(65535&(g^=255&i.charCodeAt(v)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0}}),up=CT,f5=d5;up.murmur3=CT,up.murmur2=f5;class A_{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,a,h,p){this.ids.push(MT(i)),this.positions.push(a,h,p)}getPositions(i){const a=MT(i);let h=0,p=this.ids.length-1;for(;h<p;){const v=h+p>>1;this.ids[v]>=a?p=v:h=v+1}const g=[];for(;this.ids[h]===a;)g.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return g}static serialize(i,a){const h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return Xx(h,p,0,h.length-1),a&&a.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(i){const a=new A_;return a.ids=i.ids,a.positions=i.positions,a.indexed=!0,a}}function MT(l){const i=+l;return!isNaN(i)&&Number.MIN_SAFE_INTEGER<=i&&i<=Number.MAX_SAFE_INTEGER?i:up(String(l))}function Xx(l,i,a,h){for(;a<h;){const p=l[a+h>>1];let g=a-1,v=h+1;for(;;){do g++;while(l[g]<p);do v--;while(l[v]>p);if(g>=v)break;D_(l,g,v),D_(i,3*g,3*v),D_(i,3*g+1,3*v+1),D_(i,3*g+2,3*v+2)}v-a<h-v?(Xx(l,i,a,v),a=v+1):(Xx(l,i,v+1,h),h=v)}}function D_(l,i,a){const h=l[i];l[i]=l[a],l[a]=h}zt(A_,"FeaturePositionMap");class Ba{constructor(i){this.gl=i.gl,this.initialized=!1}fetchUniformLocation(i,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(i,a),this.initialized=!0),!!this.location}}class I_ extends Ba{constructor(i){super(i),this.current=0}set(i,a,h){this.fetchUniformLocation(i,a)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class kT extends Ba{constructor(i){super(i),this.current=[0,0,0,0]}set(i,a,h){this.fetchUniformLocation(i,a)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class AT extends Ba{constructor(i){super(i),this.current=Wn.transparent}set(i,a,h){this.fetchUniformLocation(i,a)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const p5=new Float32Array(16),m5=new Float32Array(9),g5=new Float32Array(4);function Kx(l){return[et(255*l.r,255*l.g),et(255*l.b,255*l.a)]}class hp{constructor(i,a,h){this.value=i,this.uniformNames=a.map(p=>`u_${p}`),this.type=h}setUniform(i,a,h,p,g){a.set(i,g,p.constantOr(this.value))}getBinding(i,a){return this.type==="color"?new AT(i):new I_(i)}}class Ih{constructor(i,a){this.uniformNames=a.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,a){this.pixelRatioFrom=a.pixelRatio||1,this.pixelRatioTo=i.pixelRatio||1,this.patternFrom=a.tl.concat(a.br),this.patternTo=i.tl.concat(i.br)}setUniform(i,a,h,p,g){const v=g==="u_pattern_to"||g==="u_dash_to"?this.patternTo:g==="u_pattern_from"||g==="u_dash_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;v&&a.set(i,g,v)}getBinding(i,a){return a==="u_pattern_from"||a==="u_pattern_to"||a==="u_dash_from"||a==="u_dash_to"?new kT(i):new I_(i)}}class Na{constructor(i,a,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=a.map(g=>({name:`a_${g}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,a,h,p,g,v){const x=this.paintVertexArray.length,S=this.expression.evaluate(new te(0),a,{},g,p,v);this.paintVertexArray.resize(i),this._setPaintValue(x,i,S)}updatePaintArray(i,a,h,p,g){const v=this.expression.evaluate({zoom:0},h,p,void 0,g);this._setPaintValue(i,a,v)}_setPaintValue(i,a,h){if(this.type==="color"){const p=Kx(h);for(let g=i;g<a;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=i;p<a;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ms{constructor(i,a,h,p,g,v){this.expression=i,this.uniformNames=a.map(x=>`u_${x}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=a.map(x=>({name:`a_${x}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,a,h,p,g,v){const x=this.expression.evaluate(new te(this.zoom),a,{},g,p,v),S=this.expression.evaluate(new te(this.zoom+1),a,{},g,p,v),T=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(T,i,x,S)}updatePaintArray(i,a,h,p,g){const v=this.expression.evaluate({zoom:this.zoom},h,p,void 0,g),x=this.expression.evaluate({zoom:this.zoom+1},h,p,void 0,g);this._setPaintValue(i,a,v,x)}_setPaintValue(i,a,h,p){if(this.type==="color"){const g=Kx(h),v=Kx(p);for(let x=i;x<a;x++)this.paintVertexArray.emplace(x,g[0],g[1],v[0],v[1])}else{for(let g=i;g<a;g++)this.paintVertexArray.emplace(g,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,a,h,p,g){const v=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,x=de(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);a.set(i,g,x)}getBinding(i,a){return new I_(i)}}class Ll{constructor(i,a,h,p,g,v,x){this.expression=i,this.type=h,this.useIntegerZoom=p,this.zoom=g,this.layerId=x,this.paintVertexAttributes=(h==="array"?h5:u5).members;for(let S=0;S<a.length;++S);this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(i,a,h){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(p,i,a.patterns&&a.patterns[this.layerId],h)}updatePaintArray(i,a,h,p,g,v){this._setPaintValues(i,a,h.patterns&&h.patterns[this.layerId],v)}_setPaintValues(i,a,h,p){if(!p||!h)return;const{min:g,mid:v,max:x}=h,S=p[g],T=p[v],D=p[x];if(S&&T&&D)for(let P=i;P<a;P++)this._setPaintValue(this.zoomInPaintVertexArray,P,T,S),this._setPaintValue(this.zoomOutPaintVertexArray,P,T,D)}_setPaintValue(i,a,h,p){i.emplace(a,h.tl[0],h.tl[1],h.br[0],h.br[1],p.tl[0],p.tl[1],p.br[0],p.br[1],h.pixelRatio,p.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zl{constructor(i,a,h=()=>!0){this.binders={},this._buffers=[];const p=[];for(const g in i.paint._values){if(!h(g))continue;const v=i.paint.get(g);if(!(v instanceof me&&Tl(v.property.specification)))continue;const x=y5(g,i.type),S=v.value,T=v.property.specification.type,D=v.property.useIntegerZoom,P=v.property.specification["property-type"],L=P==="cross-faded"||P==="cross-faded-data-driven",F=String(g)==="line-dasharray"&&i.layout.get("line-cap").value.kind!=="constant";if(S.kind!=="constant"||F)if(S.kind==="source"||F||L){const V=DT(g,T,"source");this.binders[g]=L?new Ll(S,x,T,D,a,V,i.id):new Na(S,x,T,V),p.push(`/a_${g}`)}else{const V=DT(g,T,"composite");this.binders[g]=new Ms(S,x,T,D,a,V),p.push(`/z_${g}`)}else this.binders[g]=L?new Ih(S.value,x):new hp(S.value,x,T),p.push(`/u_${g}`)}this.cacheKey=p.sort().join("")}getMaxValue(i){const a=this.binders[i];return a instanceof Na||a instanceof Ms?a.maxValue:0}populatePaintArrays(i,a,h,p,g,v){for(const x in this.binders){const S=this.binders[x];(S instanceof Na||S instanceof Ms||S instanceof Ll)&&S.populatePaintArray(i,a,h,p,g,v)}}setConstantPatternPositions(i,a){for(const h in this.binders){const p=this.binders[h];p instanceof Ih&&p.setConstantPatternPositions(i,a)}}updatePaintArrays(i,a,h,p,g,v){let x=!1;for(const S in i){const T=a.getPositions(S);for(const D of T){const P=h.feature(D.index);for(const L in this.binders){const F=this.binders[L];if((F instanceof Na||F instanceof Ms||F instanceof Ll)&&F.expression.isStateDependent===!0){const V=p.paint.get(L);F.expression=V.value,F.updatePaintArray(D.start,D.end,P,i[S],g,v),x=!0}}}}return x}defines(){const i=[];for(const a in this.binders){const h=this.binders[a];(h instanceof hp||h instanceof Ih)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){const i=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof Na||h instanceof Ms||h instanceof Ll)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name)}return i}getBinderUniforms(){const i=[];for(const a in this.binders){const h=this.binders[a];if(h instanceof hp||h instanceof Ih||h instanceof Ms)for(const p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i){const a=[];for(const h in this.binders){const p=this.binders[h];if(p instanceof hp||p instanceof Ih||p instanceof Ms)for(const g of p.uniformNames)a.push({name:g,property:h,binding:p.getBinding(i,g)})}return a}setUniforms(i,a,h,p,g){for(const{name:v,property:x,binding:S}of h)this.binders[x].setUniform(i,S,g,p.get(x),v)}updatePaintBuffers(i){this._buffers=[];for(const a in this.binders){const h=this.binders[a];if(i&&h instanceof Ll){const p=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof Na||h instanceof Ms)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(const a in this.binders){const h=this.binders[a];(h instanceof Na||h instanceof Ms||h instanceof Ll)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const a=this.binders[i];(a instanceof Na||a instanceof Ms||a instanceof Ll)&&a.destroy()}}}class tu{constructor(i,a,h=()=>!0){this.programConfigurations={};for(const p of i)this.programConfigurations[p.id]=new zl(p,a,h);this.needsUpload=!1,this._featureMap=new A_,this._bufferOffset=0}populatePaintArrays(i,a,h,p,g,v,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(i,a,p,g,v,x);a.id!==void 0&&this._featureMap.add(a.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,a,h,p,g){for(const v of h)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(i,this._featureMap,a,v,p,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}const _5={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function y5(l,i){return _5[l]||[l.replace(`${i}-`,"").replace(/-/g,"_")]}const v5={"line-pattern":{source:Nt,composite:Nt},"fill-pattern":{source:Nt,composite:Nt},"fill-extrusion-pattern":{source:Nt,composite:Nt},"line-dasharray":{source:an,composite:an}},x5={color:{source:za,composite:wn},number:{source:ni,composite:za}};function DT(l,i,a){const h=v5[l];return h&&h[a]||x5[i][a]}zt(hp,"ConstantBinder"),zt(Ih,"CrossFadedConstantBinder"),zt(Na,"SourceExpressionBinder"),zt(Ll,"CrossFadedCompositeBinder"),zt(Ms,"CompositeExpressionBinder"),zt(zl,"ProgramConfiguration",{omit:["_buffers"]}),zt(tu,"ProgramConfigurationSet");const P_="-transition";class ks extends Kt{constructor(i,a){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,i.type!=="custom"&&(this.metadata=(i=i).metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&i.type!=="sky"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),a.layout&&(this._unevaluatedLayout=new be(a.layout)),a.paint)){this._transitionablePaint=new ce(a.paint);for(const h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(const h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ee(a.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,a,h={}){a!=null&&this._validate(f_,`layers.${this.id}.layout.${i}`,i,a,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,a):this.visibility=a)}getPaintProperty(i){return ct(i,P_)?this._transitionablePaint.getTransition(i.slice(0,-P_.length)):this._transitionablePaint.getValue(i)}setPaintProperty(i,a,h={}){if(a!=null&&this._validate(Th,`layers.${this.id}.paint.${i}`,i,a,h))return!1;if(ct(i,P_))return this._transitionablePaint.setTransition(i.slice(0,-P_.length),a||void 0),!1;{const p=this._transitionablePaint._values[i],g=p.property.specification["property-type"]==="cross-faded-data-driven",v=p.value.isDataDriven(),x=p.value;this._transitionablePaint.setValue(i,a),this._handleSpecialPaintPropertyUpdate(i);const S=this._transitionablePaint._values[i].value;return S.isDataDriven()||v||g||this._handleOverridablePaintPropertyUpdate(i,x,S)}}_handleSpecialPaintPropertyUpdate(i){}getProgramIds(){return null}getProgramConfiguration(i){return null}_handleOverridablePaintPropertyUpdate(i,a,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,a){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,a)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Ut(i,(a,h)=>!(a===void 0||h==="layout"&&!Object.keys(a).length||h==="paint"&&!Object.keys(a).length))}_validate(i,a,h,p,g={}){return(!g||g.validate!==!1)&&ep(this,i.call(Sh,{key:a,layerType:this.type,objectKey:h,value:p,styleSpec:Ge,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const a=this.paint.get(i);if(a instanceof me&&Tl(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Hc(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const b5=Ze([{name:"a_pos",components:2,type:"Int16"}],4),w5=Ze([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Xi{constructor(i=[]){this.segments=i}prepareSegment(i,a,h,p){let g=this.segments[this.segments.length-1];return i>Xi.MAX_VERTEX_ARRAY_LENGTH&&at(`Max vertices per segment is ${Xi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!g||g.vertexLength+i>Xi.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:a.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const i of this.segments)for(const a in i.vaos)i.vaos[a].destroy()}static simpleSegment(i,a,h,p){return new Xi([{vertexOffset:i,primitiveOffset:a,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}Xi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zt(Xi,"SegmentVector");var nn=8192;class Rl{constructor(i,a){i&&(a?this.setSouthWest(i).setNorthEast(a):i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1]))}setNorthEast(i){return this._ne=i instanceof Bn?new Bn(i.lng,i.lat):Bn.convert(i),this}setSouthWest(i){return this._sw=i instanceof Bn?new Bn(i.lng,i.lat):Bn.convert(i),this}extend(i){const a=this._sw,h=this._ne;let p,g;if(i instanceof Bn)p=i,g=i;else{if(!(i instanceof Rl))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Rl.convert(i)):this.extend(Bn.convert(i)):this;if(p=i._sw,g=i._ne,!p||!g)return this}return a||h?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new Bn(p.lng,p.lat),this._ne=new Bn(g.lng,g.lat)),this}getCenter(){return new Bn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Bn(this.getWest(),this.getNorth())}getSouthEast(){return new Bn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:a,lat:h}=Bn.convert(i);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&p}static convert(i){return!i||i instanceof Rl?i:new Rl(i)}}const Jx=63710088e-1;class Bn{constructor(i,a){if(isNaN(i)||isNaN(a))throw new Error(`Invalid LngLat object: (${i}, ${a})`);if(this.lng=+i,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Bn(Ce(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const a=Math.PI/180,h=this.lat*a,p=i.lat*a,g=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*a);return Jx*Math.acos(Math.min(g,1))}toBounds(i=0){const a=360*i/40075017,h=a/Math.cos(Math.PI/180*this.lat);return new Rl(new Bn(this.lng-h,this.lat-a),new Bn(this.lng+h,this.lat+a))}static convert(i){if(i instanceof Bn)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Bn(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Bn(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const IT=2*Math.PI*Jx;function Qx(l){return IT*Math.cos(l*Math.PI/180)}function ea(l){return(180+l)/360}function Va(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function rs(l,i){return l/Qx(i)}function os(l){return 360*l-180}function Tr(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function PT(l,i){return l*Qx(Tr(i))}const ta=85.051129;function OT(l){return 1/Math.cos(l*Math.PI/180)}class Ph{constructor(i,a,h=0){this.x=+i,this.y=+a,this.z=+h}static fromLngLat(i,a=0){const h=Bn.convert(i);return new Ph(ea(h.lng),Va(h.lat),rs(a,h.lat))}toLngLat(){return new Bn(os(this.x),Tr(this.y))}toAltitude(){return PT(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/IT*OT(Tr(this.y))}}function e1(l,i,a,h,p,g,v,x,S){const T=(i+h)/2,D=(a+p)/2,P=new k(T,D);x(P),function(L,F,V,q,K,le){const ge=V-K,ue=q-le;return Math.abs((q-F)*ge-(V-L)*ue)/Math.hypot(ge,ue)}(P.x,P.y,g.x,g.y,v.x,v.y)>=S?(e1(l,i,a,T,D,g,P,x,S),e1(l,T,D,h,p,P,v,x,S)):l.push(v)}function LT(l,i,a){let h=l[0],p=h.x,g=h.y;i(h);const v=[h];for(let x=1;x<l.length;x++){const S=l[x],{x:T,y:D}=S;i(S),e1(v,p,g,T,D,h,S,i,a),p=T,g=D,h=S}return v}function t1(l,i,a,h,p){if(p(i,a)){const g=i.add(a).mult(.5);h(g),t1(l,i,g,h,p),t1(l,g,a,h,p)}else l.push(a)}function E5(l,i,a){let h=l[0];i(h);const p=[h];for(let g=1;g<l.length;g++){const v=l[g];i(v),t1(p,h,v,i,a),h=v}return p}const n1=Math.pow(2,14)-1,zT=-n1-1;function S5(l,i){const a=Math.round(l.x*i),h=Math.round(l.y*i);return l.x=de(a,zT,n1),l.y=de(h,zT,n1),(a<l.x||a>l.x+1||h<l.y||h>l.y+1)&&at("Geometry exceeds allowed extent, reduce your vector tile buffer size"),l}function ja(l,i,a){const h=l.loadGeometry(),p=l.extent,g=nn/p;if(i&&a&&a.projection.isReprojectedInTileSpace){const v=1<<i.z,{scale:x,x:S,y:T,projection:D}=a,P=L=>{const F=os((i.x+L.x/p)/v),V=Tr((i.y+L.y/p)/v),q=D.project(F,V);L.x=(q.x*x-S)*p,L.y=(q.y*x-T)*p};for(let L=0;L<h.length;L++)if(l.type!==1)h[L]=LT(h[L],P,1);else{const F=[];for(const V of h[L])V.x<0||V.x>=p||V.y<0||V.y>=p||(P(V),F.push(V));h[L]=F}}for(const v of h)for(const x of v)S5(x,g);return h}function nu(l,i){return{type:l.type,id:l.id,properties:l.properties,geometry:i?ja(l):[]}}function O_(l,i,a,h,p){l.emplaceBack(2*i+(h+1)/2,2*a+(p+1)/2)}function L_(l,i,a){const h=16384;l.emplaceBack(i.x,i.y,i.z,a[0]*h,a[1]*h,a[2]*h)}class i1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.projection=i.projection,this.layoutVertexArray=new bt,this.indexArray=new yn,this.segments=new Xi,this.programConfigurations=new tu(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,h,p){const g=this.layers[0],v=[];let x=null;g.type==="circle"&&(x=g.layout.get("circle-sort-key"));for(const{feature:T,id:D,index:P,sourceLayerIndex:L}of i){const F=this.layers[0]._featureFilter.needGeometry,V=nu(T,F);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),V,h))continue;const q=x?x.evaluate(V,{},h):void 0,K={id:D,properties:T.properties,type:T.type,sourceLayerIndex:L,index:P,geometry:F?V.geometry:ja(T,h,p),patterns:{},sortKey:q};v.push(K)}x&&v.sort((T,D)=>T.sortKey-D.sortKey);let S=null;p.projection.name==="globe"&&(this.globeExtVertexArray=new TT,S=p.projection);for(const T of v){const{geometry:D,index:P,sourceLayerIndex:L}=T,F=i[P].feature;this.addFeature(T,D,P,a.availableImages,h,S),a.featureIndex.insert(F,D,P,L,this.index)}}update(i,a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,b5.members),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,w5.members))),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(i,a,h,p,g,v){for(const x of a)for(const S of x){const T=S.x,D=S.y;if(T<0||T>=nn||D<0||D>=nn)continue;if(v){const F=v.projectTilePoint(T,D,g),V=v.upVector(g,T,D),q=this.globeExtVertexArray;L_(q,F,V),L_(q,F,V),L_(q,F,V),L_(q,F,V)}const P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),L=P.vertexLength;O_(this.layoutVertexArray,T,D,-1,-1),O_(this.layoutVertexArray,T,D,1,-1),O_(this.layoutVertexArray,T,D,1,1),O_(this.layoutVertexArray,T,D,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+2,L+3),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p,g)}}function RT(l,i){for(let a=0;a<l.length;a++)if(iu(i,l[a]))return!0;for(let a=0;a<i.length;a++)if(iu(l,i[a]))return!0;return!!r1(l,i)}function T5(l,i,a){return!!iu(l,i)||!!o1(i,l,a)}function FT(l,i){if(l.length===1)return NT(i,l[0]);for(let a=0;a<i.length;a++){const h=i[a];for(let p=0;p<h.length;p++)if(iu(l,h[p]))return!0}for(let a=0;a<l.length;a++)if(NT(i,l[a]))return!0;for(let a=0;a<i.length;a++)if(r1(l,i[a]))return!0;return!1}function C5(l,i,a){if(l.length>1){if(r1(l,i))return!0;for(let h=0;h<i.length;h++)if(o1(i[h],l,a))return!0}for(let h=0;h<l.length;h++)if(o1(l[h],i,a))return!0;return!1}function r1(l,i){if(l.length===0||i.length===0)return!1;for(let a=0;a<l.length-1;a++){const h=l[a],p=l[a+1];for(let g=0;g<i.length-1;g++)if(M5(h,p,i[g],i[g+1]))return!0}return!1}function M5(l,i,a,h){return xt(l,a,h)!==xt(i,a,h)&&xt(l,i,a)!==xt(l,i,h)}function o1(l,i,a){const h=a*a;if(i.length===1)return l.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(BT(l,i[p-1],i[p])<h)return!0;return!1}function BT(l,i,a){const h=i.distSqr(a);if(h===0)return l.distSqr(i);const p=((l.x-i.x)*(a.x-i.x)+(l.y-i.y)*(a.y-i.y))/h;return l.distSqr(p<0?i:p>1?a:a.sub(i)._mult(p)._add(i))}function NT(l,i){let a,h,p,g=!1;for(let v=0;v<l.length;v++){a=l[v];for(let x=0,S=a.length-1;x<a.length;S=x++)h=a[x],p=a[S],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(g=!g)}return g}function iu(l,i){let a=!1;for(let h=0,p=l.length-1;h<l.length;p=h++){const g=l[h],v=l[p];g.y>i.y!=v.y>i.y&&i.x<(v.x-g.x)*(i.y-g.y)/(v.y-g.y)+g.x&&(a=!a)}return a}function VT(l,i,a,h,p){for(const v of l)if(i<=v.x&&a<=v.y&&h>=v.x&&p>=v.y)return!0;const g=[new k(i,a),new k(i,p),new k(h,p),new k(h,a)];if(l.length>2){for(const v of g)if(iu(l,v))return!0}for(let v=0;v<l.length-1;v++)if(k5(l[v],l[v+1],g))return!0;return!1}function k5(l,i,a){const h=a[0],p=a[2];if(l.x<h.x&&i.x<h.x||l.x>p.x&&i.x>p.x||l.y<h.y&&i.y<h.y||l.y>p.y&&i.y>p.y)return!1;const g=xt(l,i,a[0]);return g!==xt(l,i,a[1])||g!==xt(l,i,a[2])||g!==xt(l,i,a[3])}function Oh(l,i,a){const h=i.paint.get(l).value;return h.kind==="constant"?h.value:a.programConfigurations.get(i.id).getMaxValue(l)}function z_(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function jT(l,i,a,h,p){if(!i[0]&&!i[1])return l;const g=k.convert(i)._mult(p);a==="viewport"&&g._rotate(-h);const v=[];for(let x=0;x<l.length;x++)v.push(l[x].sub(g));return v}function UT(l,i,a,h){const p=k.convert(l)._mult(h);return i==="viewport"&&p._rotate(-a),p}zt(i1,"CircleBucket",{omit:["layers"]});const A5=new Ye({"circle-sort-key":new Me(Ge.layout_circle["circle-sort-key"])});var D5={paint:new Ye({"circle-radius":new Me(Ge.paint_circle["circle-radius"]),"circle-color":new Me(Ge.paint_circle["circle-color"]),"circle-blur":new Me(Ge.paint_circle["circle-blur"]),"circle-opacity":new Me(Ge.paint_circle["circle-opacity"]),"circle-translate":new ve(Ge.paint_circle["circle-translate"]),"circle-translate-anchor":new ve(Ge.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ve(Ge.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ve(Ge.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Me(Ge.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Me(Ge.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Me(Ge.paint_circle["circle-stroke-opacity"])}),layout:A5},R_=1e-6,To=typeof Float32Array!="undefined"?Float32Array:Array;function $T(){var l=new To(9);return To!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function na(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function s1(l,i){var a=i[0],h=i[1],p=i[2],g=i[3],v=i[4],x=i[5],S=i[6],T=i[7],D=i[8],P=i[9],L=i[10],F=i[11],V=i[12],q=i[13],K=i[14],le=i[15],ge=a*x-h*v,ue=a*S-p*v,pe=a*T-g*v,Te=h*S-p*x,_e=h*T-g*x,Be=p*T-g*S,Fe=D*q-P*V,He=D*K-L*V,dt=D*le-F*V,Ue=P*K-L*q,Xe=P*le-F*q,nt=L*le-F*K,Ke=ge*nt-ue*Xe+pe*Ue+Te*dt-_e*He+Be*Fe;return Ke?(l[0]=(x*nt-S*Xe+T*Ue)*(Ke=1/Ke),l[1]=(p*Xe-h*nt-g*Ue)*Ke,l[2]=(q*Be-K*_e+le*Te)*Ke,l[3]=(L*_e-P*Be-F*Te)*Ke,l[4]=(S*dt-v*nt-T*He)*Ke,l[5]=(a*nt-p*dt+g*He)*Ke,l[6]=(K*pe-V*Be-le*ue)*Ke,l[7]=(D*Be-L*pe+F*ue)*Ke,l[8]=(v*Xe-x*dt+T*Fe)*Ke,l[9]=(h*dt-a*Xe-g*Fe)*Ke,l[10]=(V*_e-q*pe+le*ge)*Ke,l[11]=(P*pe-D*_e-F*ge)*Ke,l[12]=(x*He-v*Ue-S*Fe)*Ke,l[13]=(a*Ue-h*He+p*Fe)*Ke,l[14]=(q*ue-V*Te-K*ge)*Ke,l[15]=(D*Te-P*ue+L*ge)*Ke,l):null}function Lh(l,i,a){var h=i[0],p=i[1],g=i[2],v=i[3],x=i[4],S=i[5],T=i[6],D=i[7],P=i[8],L=i[9],F=i[10],V=i[11],q=i[12],K=i[13],le=i[14],ge=i[15],ue=a[0],pe=a[1],Te=a[2],_e=a[3];return l[0]=ue*h+pe*x+Te*P+_e*q,l[1]=ue*p+pe*S+Te*L+_e*K,l[2]=ue*g+pe*T+Te*F+_e*le,l[3]=ue*v+pe*D+Te*V+_e*ge,l[4]=(ue=a[4])*h+(pe=a[5])*x+(Te=a[6])*P+(_e=a[7])*q,l[5]=ue*p+pe*S+Te*L+_e*K,l[6]=ue*g+pe*T+Te*F+_e*le,l[7]=ue*v+pe*D+Te*V+_e*ge,l[8]=(ue=a[8])*h+(pe=a[9])*x+(Te=a[10])*P+(_e=a[11])*q,l[9]=ue*p+pe*S+Te*L+_e*K,l[10]=ue*g+pe*T+Te*F+_e*le,l[11]=ue*v+pe*D+Te*V+_e*ge,l[12]=(ue=a[12])*h+(pe=a[13])*x+(Te=a[14])*P+(_e=a[15])*q,l[13]=ue*p+pe*S+Te*L+_e*K,l[14]=ue*g+pe*T+Te*F+_e*le,l[15]=ue*v+pe*D+Te*V+_e*ge,l}function dp(l,i,a){var h,p,g,v,x,S,T,D,P,L,F,V,q=a[0],K=a[1],le=a[2];return i===l?(l[12]=i[0]*q+i[4]*K+i[8]*le+i[12],l[13]=i[1]*q+i[5]*K+i[9]*le+i[13],l[14]=i[2]*q+i[6]*K+i[10]*le+i[14],l[15]=i[3]*q+i[7]*K+i[11]*le+i[15]):(p=i[1],g=i[2],v=i[3],x=i[4],S=i[5],T=i[6],D=i[7],P=i[8],L=i[9],F=i[10],V=i[11],l[0]=h=i[0],l[1]=p,l[2]=g,l[3]=v,l[4]=x,l[5]=S,l[6]=T,l[7]=D,l[8]=P,l[9]=L,l[10]=F,l[11]=V,l[12]=h*q+x*K+P*le+i[12],l[13]=p*q+S*K+L*le+i[13],l[14]=g*q+T*K+F*le+i[14],l[15]=v*q+D*K+V*le+i[15]),l}function ru(l,i,a){var h=a[0],p=a[1],g=a[2];return l[0]=i[0]*h,l[1]=i[1]*h,l[2]=i[2]*h,l[3]=i[3]*h,l[4]=i[4]*p,l[5]=i[5]*p,l[6]=i[6]*p,l[7]=i[7]*p,l[8]=i[8]*g,l[9]=i[9]*g,l[10]=i[10]*g,l[11]=i[11]*g,l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l}function a1(l,i,a){var h=Math.sin(a),p=Math.cos(a),g=i[4],v=i[5],x=i[6],S=i[7],T=i[8],D=i[9],P=i[10],L=i[11];return i!==l&&(l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[4]=g*p+T*h,l[5]=v*p+D*h,l[6]=x*p+P*h,l[7]=S*p+L*h,l[8]=T*p-g*h,l[9]=D*p-v*h,l[10]=P*p-x*h,l[11]=L*p-S*h,l}function F_(l,i,a){var h=Math.sin(a),p=Math.cos(a),g=i[0],v=i[1],x=i[2],S=i[3],T=i[8],D=i[9],P=i[10],L=i[11];return i!==l&&(l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=g*p-T*h,l[1]=v*p-D*h,l[2]=x*p-P*h,l[3]=S*p-L*h,l[8]=g*h+T*p,l[9]=v*h+D*p,l[10]=x*h+P*p,l[11]=S*h+L*p,l}function GT(l,i){return l[0]=i[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=i[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function WT(l,i,a){var h,p,g,v=a[0],x=a[1],S=a[2],T=Math.hypot(v,x,S);return T<R_?null:(v*=T=1/T,x*=T,S*=T,h=Math.sin(i),p=Math.cos(i),l[0]=v*v*(g=1-p)+p,l[1]=x*v*g+S*h,l[2]=S*v*g-x*h,l[3]=0,l[4]=v*x*g-S*h,l[5]=x*x*g+p,l[6]=S*x*g+v*h,l[7]=0,l[8]=v*S*g+x*h,l[9]=x*S*g-v*h,l[10]=S*S*g+p,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l)}Math.hypot||(Math.hypot=function(){for(var l=0,i=arguments.length;i--;)l+=arguments[i]*arguments[i];return Math.sqrt(l)});var I5=Lh;function l1(){var l=new To(3);return To!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function HT(l){var i=new To(3);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i}function fp(l){return Math.hypot(l[0],l[1],l[2])}function zh(l,i,a){var h=new To(3);return h[0]=l,h[1]=i,h[2]=a,h}function Fl(l,i,a){return l[0]=i[0]+a[0],l[1]=i[1]+a[1],l[2]=i[2]+a[2],l}function c1(l,i,a){return l[0]=i[0]-a[0],l[1]=i[1]-a[1],l[2]=i[2]-a[2],l}function qT(l,i,a){return l[0]=i[0]*a[0],l[1]=i[1]*a[1],l[2]=i[2]*a[2],l}function u1(l,i,a){return l[0]=Math.min(i[0],a[0]),l[1]=Math.min(i[1],a[1]),l[2]=Math.min(i[2],a[2]),l}function h1(l,i,a){return l[0]=Math.max(i[0],a[0]),l[1]=Math.max(i[1],a[1]),l[2]=Math.max(i[2],a[2]),l}function As(l,i,a){return l[0]=i[0]*a,l[1]=i[1]*a,l[2]=i[2]*a,l}function B_(l,i,a,h){return l[0]=i[0]+a[0]*h,l[1]=i[1]+a[1]*h,l[2]=i[2]+a[2]*h,l}function Wr(l,i){var a=i[0],h=i[1],p=i[2],g=a*a+h*h+p*p;return g>0&&(g=1/Math.sqrt(g)),l[0]=i[0]*g,l[1]=i[1]*g,l[2]=i[2]*g,l}function ss(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]}function d1(l,i,a){var h=i[0],p=i[1],g=i[2],v=a[0],x=a[1],S=a[2];return l[0]=p*S-g*x,l[1]=g*v-h*S,l[2]=h*x-p*v,l}function nr(l,i,a){var h=i[0],p=i[1],g=i[2],v=a[3]*h+a[7]*p+a[11]*g+a[15];return l[0]=(a[0]*h+a[4]*p+a[8]*g+a[12])/(v=v||1),l[1]=(a[1]*h+a[5]*p+a[9]*g+a[13])/v,l[2]=(a[2]*h+a[6]*p+a[10]*g+a[14])/v,l}function YT(l,i,a){var h=a[0],p=a[1],g=a[2],v=i[0],x=i[1],S=i[2],T=p*S-g*x,D=g*v-h*S,P=h*x-p*v,L=p*P-g*D,F=g*T-h*P,V=h*D-p*T,q=2*a[3];return D*=q,P*=q,F*=2,V*=2,l[0]=v+(T*=q)+(L*=2),l[1]=x+D+F,l[2]=S+P+V,l}var pp,Ds=c1,P5=qT,O5=fp;function ZT(l,i,a){return l[0]=i[0]*a,l[1]=i[1]*a,l[2]=i[2]*a,l[3]=i[3]*a,l}function ou(l,i,a){var h=i[0],p=i[1],g=i[2],v=i[3];return l[0]=a[0]*h+a[4]*p+a[8]*g+a[12]*v,l[1]=a[1]*h+a[5]*p+a[9]*g+a[13]*v,l[2]=a[2]*h+a[6]*p+a[10]*g+a[14]*v,l[3]=a[3]*h+a[7]*p+a[11]*g+a[15]*v,l}function XT(){var l=new To(4);return To!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function KT(l){return l[0]=0,l[1]=0,l[2]=0,l[3]=1,l}function JT(l,i,a){a*=.5;var h=i[0],p=i[1],g=i[2],v=i[3],x=Math.sin(a),S=Math.cos(a);return l[0]=h*S+v*x,l[1]=p*S+g*x,l[2]=g*S-p*x,l[3]=v*S-h*x,l}function QT(l,i,a){a*=.5;var h=i[0],p=i[1],g=i[2],v=i[3],x=Math.sin(a),S=Math.cos(a);return l[0]=h*S-g*x,l[1]=p*S+v*x,l[2]=g*S+h*x,l[3]=v*S-p*x,l}l1(),pp=new To(4),To!=Float32Array&&(pp[0]=0,pp[1]=0,pp[2]=0,pp[3]=0),l1(),zh(1,0,0),zh(0,1,0),XT(),XT(),$T();class f1{constructor(i,a){this.pos=i,this.dir=a}intersectsPlane(i,a,h){const p=ss(a,this.dir);if(Math.abs(p)<1e-6)return!1;const g=((i[0]-this.pos[0])*a[0]+(i[1]-this.pos[1])*a[1]+(i[2]-this.pos[2])*a[2])/p;return h[0]=this.pos[0]+this.dir[0]*g,h[1]=this.pos[1]+this.dir[1]*g,h[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(i,a,h){if(function(F,V){var q=F[0],K=F[1],le=F[2],ge=V[0],ue=V[1],pe=V[2];return Math.abs(q-ge)<=R_*Math.max(1,Math.abs(q),Math.abs(ge))&&Math.abs(K-ue)<=R_*Math.max(1,Math.abs(K),Math.abs(ue))&&Math.abs(le-pe)<=R_*Math.max(1,Math.abs(le),Math.abs(pe))}(this.pos,i)||a===0)return h[0]=h[1]=h[2]=0,!1;const[p,g,v]=this.dir,x=this.pos[0]-i[0],S=this.pos[1]-i[1],T=this.pos[2]-i[2],D=p*p+g*g+v*v,P=2*(x*p+S*g+T*v),L=P*P-4*D*(x*x+S*S+T*T-a*a);if(L<0){const F=Math.max(-P/2,0),V=x+p*F,q=S+g*F,K=T+v*F,le=Math.hypot(V,q,K);return h[0]=V*a/le,h[1]=q*a/le,h[2]=K*a/le,!1}{const F=(-P-Math.sqrt(L))/(2*D);if(F<0){const V=Math.hypot(x,S,T);return h[0]=x*a/V,h[1]=S*a/V,h[2]=T*a/V,!1}return h[0]=x+p*F,h[1]=S+g*F,h[2]=T+v*F,!0}}}class p1{constructor(i,a,h,p,g){this.TL=i,this.TR=a,this.BR=h,this.BL=p,this.horizon=g}static fromInvProjectionMatrix(i,a,h){const p=[-1,1,1],g=[1,1,1],v=[1,-1,1],x=[-1,-1,1],S=nr(p,p,i),T=nr(g,g,i),D=nr(v,v,i),P=nr(x,x,i);return new p1(S,T,D,P,a/h)}}class m1{constructor(i,a){this.points=i,this.planes=a}static fromInvProjectionMatrix(i,a,h,p){const g=Math.pow(2,h),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const T=ou([],S,i),D=1/T[3]/a*g;return function(P,L,F){return P[0]=L[0]*F[0],P[1]=L[1]*F[1],P[2]=L[2]*F[2],P[3]=L[3]*F[3],P}(T,T,[D,D,p?1/T[3]:D,D])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const T=Wr([],d1([],Ds([],v[S[0]],v[S[1]]),Ds([],v[S[2]],v[S[1]]))),D=-ss(T,v[S[1]]);return T.concat(D)});return new m1(v,x)}}class po{static fromPoints(i){const a=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],h=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE];for(const p of i)a[0]=Math.min(a[0],p[0]),a[1]=Math.min(a[1],p[1]),a[2]=Math.min(a[2],p[2]),h[0]=Math.max(h[0],p[0]),h[1]=Math.max(h[1],p[1]),h[2]=Math.max(h[2],p[2]);return new po(a,h)}constructor(i,a){this.min=i,this.max=a,this.center=As([],Fl([],this.min,this.max),.5)}quadrant(i){const a=[i%2==0,i<2],h=HT(this.min),p=HT(this.max);for(let g=0;g<a.length;g++)h[g]=a[g]?this.min[g]:this.center[g],p[g]=a[g]?this.center[g]:this.max[g];return p[2]=this.max[2],new po(h,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}distanceZ(i){return Math.max(Math.min(this.max[2],i[2]),this.min[2])-i[2]}getCorners(){const i=this.min,a=this.max;return[[i[0],i[1],i[2]],[a[0],i[1],i[2]],[a[0],a[1],i[2]],[i[0],a[1],i[2]],[i[0],i[1],a[2]],[a[0],i[1],a[2]],[a[0],a[1],a[2]],[i[0],a[1],a[2]]]}intersects(i){const a=this.getCorners();let h=!0;for(let p=0;p<i.planes.length;p++){const g=i.planes[p];let v=0;for(let x=0;x<a.length;x++)v+=ss(g,a[x])+g[3]>=0;if(v===0)return 0;v!==a.length&&(h=!1)}if(h)return 2;for(let p=0;p<3;p++){let g=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let x=0;x<i.points.length;x++){const S=i.points[x][p]-this.min[p];g=Math.min(g,S),v=Math.max(v,S)}if(v<0||g>this.max[p]-this.min[p])return 0}return 1}}function eC(l,i,a,h,p,g,v,x,S){if(g&&l.queryGeometry.isAboveHorizon)return!1;g&&(S*=l.pixelToTileUnitsFactor);const T=l.tileID.canonical,D=a.projection.upVectorScale(T,a.center.lat,a.worldSize).metersToTile;for(const P of i)for(const L of P){const F=L.add(x),V=p&&a.elevation?a.elevation.exaggeration()*p.getElevationAt(F.x,F.y,!0):0,q=a.projection.projectTilePoint(F.x,F.y,T);if(V>0){const ue=a.projection.upVector(T,F.x,F.y);q.x+=ue[0]*D*V,q.y+=ue[1]*D*V,q.z+=ue[2]*D*V}const K=g?F:L5(q.x,q.y,q.z,h),le=g?l.tilespaceRays.map(ue=>R5(ue,V)):l.queryGeometry.screenGeometry,ge=ou([],[q.x,q.y,q.z,1],h);if(!v&&g?S*=ge[3]/a.cameraToCenterDistance:v&&!g&&(S*=a.cameraToCenterDistance/ge[3]),g){const ue=Tr((L.y/nn+T.y)/(1<<T.z));S/=a.projection.pixelsPerMeter(ue,1)/rs(1,ue)}if(T5(le,K,S))return!0}return!1}function L5(l,i,a,h){const p=ou([],[l,i,a,1],h);return new k(p[0]/p[3],p[1]/p[3])}const tC=zh(0,0,0),z5=zh(0,0,1);function R5(l,i){const a=l1();return tC[2]=i,l.intersectsPlane(tC,z5,a),new k(a[0],a[1])}class nC extends i1{}function iC(l,{width:i,height:a},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*a*h)throw new RangeError("mismatched image size")}else p=new Uint8Array(i*a*h);return l.width=i,l.height=a,l.data=p,l}function rC(l,i,a){const{width:h,height:p}=i;h===l.width&&p===l.height||(g1(l,i,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,h),height:Math.min(l.height,p)},a),l.width=h,l.height=p,l.data=i.data)}function g1(l,i,a,h,p,g){if(p.width===0||p.height===0)return i;if(p.width>l.width||p.height>l.height||a.x>l.width-p.width||a.y>l.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const v=l.data,x=i.data;for(let S=0;S<p.height;S++){const T=((a.y+S)*l.width+a.x)*g,D=((h.y+S)*i.width+h.x)*g;for(let P=0;P<p.width*g;P++)x[D+P]=v[T+P]}return i}zt(nC,"HeatmapBucket",{omit:["layers"]});class Ua{constructor(i,a){iC(this,i,1,a)}resize(i){rC(this,new Ua(i),1)}clone(){return new Ua({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,h,p,g){g1(i,a,h,p,g,1)}}class Co{constructor(i,a){iC(this,i,4,a)}resize(i){rC(this,new Co(i),4)}replace(i,a){a?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Co({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,a,h,p,g){g1(i,a,h,p,g,4)}}zt(Ua,"AlphaImage"),zt(Co,"RGBAImage");var F5={paint:new Ye({"heatmap-radius":new Me(Ge.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Me(Ge.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ve(Ge.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Pe(Ge.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ve(Ge.paint_heatmap["heatmap-opacity"])})};function _1(l){const i={},a=l.resolution||256,h=l.clips?l.clips.length:1,p=l.image||new Co({width:a,height:h}),g=(v,x,S)=>{i[l.evaluationKey]=S;const T=l.expression.evaluate(i);p.data[v+x+0]=Math.floor(255*T.r/T.a),p.data[v+x+1]=Math.floor(255*T.g/T.a),p.data[v+x+2]=Math.floor(255*T.b/T.a),p.data[v+x+3]=Math.floor(255*T.a)};if(l.clips)for(let v=0,x=0;v<h;++v,x+=4*a)for(let S=0,T=0;S<a;S++,T+=4){const D=S/(a-1),{start:P,end:L}=l.clips[v];g(x,T,P*(1-D)+L*D)}else for(let v=0,x=0;v<a;v++,x+=4)g(0,x,v/(a-1));return p}var B5={paint:new Ye({"hillshade-illumination-direction":new ve(Ge.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ve(Ge.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ve(Ge.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ve(Ge.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ve(Ge.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ve(Ge.paint_hillshade["hillshade-accent-color"])})};const N5=Ze([{name:"a_pos",components:2,type:"Int16"}],4),{members:V5}=N5;var N_=V_,j5=V_;function V_(l,i,a){a=a||2;var h,p,g,v,x,S,T,D=i&&i.length,P=D?i[0]*a:l.length,L=oC(l,0,P,a,!0),F=[];if(!L||L.next===L.prev)return F;if(D&&(L=function(q,K,le,ge){var ue,pe,Te,_e=[];for(ue=0,pe=K.length;ue<pe;ue++)(Te=oC(q,K[ue]*ge,ue<pe-1?K[ue+1]*ge:q.length,ge,!1))===Te.next&&(Te.steiner=!0),_e.push(Z5(Te));for(_e.sort(H5),ue=0;ue<_e.length;ue++)le=q5(_e[ue],le);return le}(l,i,L,a)),l.length>80*a){h=g=l[0],p=v=l[1];for(var V=a;V<P;V+=a)(x=l[V])<h&&(h=x),(S=l[V+1])<p&&(p=S),x>g&&(g=x),S>v&&(v=S);T=(T=Math.max(g-h,v-p))!==0?32767/T:0}return mp(L,F,a,h,p,T,0),F}function oC(l,i,a,h,p){var g,v;if(p===x1(l,i,a,h)>0)for(g=i;g<a;g+=h)v=lC(g,l[g],l[g+1],v);else for(g=a-h;g>=i;g-=h)v=lC(g,l[g],l[g+1],v);return v&&j_(v,v.next)&&(_p(v),v=v.next),v}function su(l,i){if(!l)return l;i||(i=l);var a,h=l;do if(a=!1,h.steiner||!j_(h,h.next)&&Yi(h.prev,h,h.next)!==0)h=h.next;else{if(_p(h),(h=i=h.prev)===h.next)break;a=!0}while(a||h!==i);return i}function mp(l,i,a,h,p,g,v){if(l){!v&&g&&function(D,P,L,F){var V=D;do V.z===0&&(V.z=y1(V.x,V.y,P,L,F)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==D);V.prevZ.nextZ=null,V.prevZ=null,function(q){var K,le,ge,ue,pe,Te,_e,Be,Fe=1;do{for(le=q,q=null,pe=null,Te=0;le;){for(Te++,ge=le,_e=0,K=0;K<Fe&&(_e++,ge=ge.nextZ);K++);for(Be=Fe;_e>0||Be>0&&ge;)_e!==0&&(Be===0||!ge||le.z<=ge.z)?(ue=le,le=le.nextZ,_e--):(ue=ge,ge=ge.nextZ,Be--),pe?pe.nextZ=ue:q=ue,ue.prevZ=pe,pe=ue;le=ge}pe.nextZ=null,Fe*=2}while(Te>1)}(V)}(l,h,p,g);for(var x,S,T=l;l.prev!==l.next;)if(x=l.prev,S=l.next,g?$5(l,h,p,g):U5(l))i.push(x.i/a|0),i.push(l.i/a|0),i.push(S.i/a|0),_p(l),l=S.next,T=S.next;else if((l=S)===T){v?v===1?mp(l=G5(su(l),i,a),i,a,h,p,g,2):v===2&&W5(l,i,a,h,p,g):mp(su(l),i,a,h,p,g,1);break}}}function U5(l){var i=l.prev,a=l,h=l.next;if(Yi(i,a,h)>=0)return!1;for(var p=i.x,g=a.x,v=h.x,x=i.y,S=a.y,T=h.y,D=p<g?p<v?p:v:g<v?g:v,P=x<S?x<T?x:T:S<T?S:T,L=p>g?p>v?p:v:g>v?g:v,F=x>S?x>T?x:T:S>T?S:T,V=h.next;V!==i;){if(V.x>=D&&V.x<=L&&V.y>=P&&V.y<=F&&Rh(p,x,g,S,v,T,V.x,V.y)&&Yi(V.prev,V,V.next)>=0)return!1;V=V.next}return!0}function $5(l,i,a,h){var p=l.prev,g=l,v=l.next;if(Yi(p,g,v)>=0)return!1;for(var x=p.x,S=g.x,T=v.x,D=p.y,P=g.y,L=v.y,F=x<S?x<T?x:T:S<T?S:T,V=D<P?D<L?D:L:P<L?P:L,q=x>S?x>T?x:T:S>T?S:T,K=D>P?D>L?D:L:P>L?P:L,le=y1(F,V,i,a,h),ge=y1(q,K,i,a,h),ue=l.prevZ,pe=l.nextZ;ue&&ue.z>=le&&pe&&pe.z<=ge;){if(ue.x>=F&&ue.x<=q&&ue.y>=V&&ue.y<=K&&ue!==p&&ue!==v&&Rh(x,D,S,P,T,L,ue.x,ue.y)&&Yi(ue.prev,ue,ue.next)>=0||(ue=ue.prevZ,pe.x>=F&&pe.x<=q&&pe.y>=V&&pe.y<=K&&pe!==p&&pe!==v&&Rh(x,D,S,P,T,L,pe.x,pe.y)&&Yi(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;ue&&ue.z>=le;){if(ue.x>=F&&ue.x<=q&&ue.y>=V&&ue.y<=K&&ue!==p&&ue!==v&&Rh(x,D,S,P,T,L,ue.x,ue.y)&&Yi(ue.prev,ue,ue.next)>=0)return!1;ue=ue.prevZ}for(;pe&&pe.z<=ge;){if(pe.x>=F&&pe.x<=q&&pe.y>=V&&pe.y<=K&&pe!==p&&pe!==v&&Rh(x,D,S,P,T,L,pe.x,pe.y)&&Yi(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function G5(l,i,a){var h=l;do{var p=h.prev,g=h.next.next;!j_(p,g)&&sC(p,h,h.next,g)&&gp(p,g)&&gp(g,p)&&(i.push(p.i/a|0),i.push(h.i/a|0),i.push(g.i/a|0),_p(h),_p(h.next),h=l=g),h=h.next}while(h!==l);return su(h)}function W5(l,i,a,h,p,g){var v=l;do{for(var x=v.next.next;x!==v.prev;){if(v.i!==x.i&&X5(v,x)){var S=aC(v,x);return v=su(v,v.next),S=su(S,S.next),mp(v,i,a,h,p,g,0),void mp(S,i,a,h,p,g,0)}x=x.next}v=v.next}while(v!==l)}function H5(l,i){return l.x-i.x}function q5(l,i){var a=function(p,g){var v,x=g,S=p.x,T=p.y,D=-1/0;do{if(T<=x.y&&T>=x.next.y&&x.next.y!==x.y){var P=x.x+(T-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(P<=S&&P>D&&(D=P,v=x.x<x.next.x?x:x.next,P===S))return v}x=x.next}while(x!==g);if(!v)return null;var L,F=v,V=v.x,q=v.y,K=1/0;x=v;do S>=x.x&&x.x>=V&&S!==x.x&&Rh(T<q?S:D,T,V,q,T<q?D:S,T,x.x,x.y)&&(L=Math.abs(T-x.y)/(S-x.x),gp(x,p)&&(L<K||L===K&&(x.x>v.x||x.x===v.x&&Y5(v,x)))&&(v=x,K=L)),x=x.next;while(x!==F);return v}(l,i);if(!a)return i;var h=aC(a,l);return su(h,h.next),su(a,a.next)}function Y5(l,i){return Yi(l.prev,l,i.prev)<0&&Yi(i.next,l,l.next)<0}function y1(l,i,a,h,p){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-a)*p|0)|l<<8))|l<<4))|l<<2))|l<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Z5(l){var i=l,a=l;do(i.x<a.x||i.x===a.x&&i.y<a.y)&&(a=i),i=i.next;while(i!==l);return a}function Rh(l,i,a,h,p,g,v,x){return(p-v)*(i-x)>=(l-v)*(g-x)&&(l-v)*(h-x)>=(a-v)*(i-x)&&(a-v)*(g-x)>=(p-v)*(h-x)}function X5(l,i){return l.next.i!==i.i&&l.prev.i!==i.i&&!function(a,h){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==h.i&&p.next.i!==h.i&&sC(p,p.next,a,h))return!0;p=p.next}while(p!==a);return!1}(l,i)&&(gp(l,i)&&gp(i,l)&&function(a,h){var p=a,g=!1,v=(a.x+h.x)/2,x=(a.y+h.y)/2;do p.y>x!=p.next.y>x&&p.next.y!==p.y&&v<(p.next.x-p.x)*(x-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==a);return g}(l,i)&&(Yi(l.prev,l,i.prev)||Yi(l,i.prev,i))||j_(l,i)&&Yi(l.prev,l,l.next)>0&&Yi(i.prev,i,i.next)>0)}function Yi(l,i,a){return(i.y-l.y)*(a.x-i.x)-(i.x-l.x)*(a.y-i.y)}function j_(l,i){return l.x===i.x&&l.y===i.y}function sC(l,i,a,h){var p=$_(Yi(l,i,a)),g=$_(Yi(l,i,h)),v=$_(Yi(a,h,l)),x=$_(Yi(a,h,i));return p!==g&&v!==x||!(p!==0||!U_(l,a,i))||!(g!==0||!U_(l,h,i))||!(v!==0||!U_(a,l,h))||!(x!==0||!U_(a,i,h))}function U_(l,i,a){return i.x<=Math.max(l.x,a.x)&&i.x>=Math.min(l.x,a.x)&&i.y<=Math.max(l.y,a.y)&&i.y>=Math.min(l.y,a.y)}function $_(l){return l>0?1:l<0?-1:0}function gp(l,i){return Yi(l.prev,l,l.next)<0?Yi(l,i,l.next)>=0&&Yi(l,l.prev,i)>=0:Yi(l,i,l.prev)<0||Yi(l,l.next,i)<0}function aC(l,i){var a=new v1(l.i,l.x,l.y),h=new v1(i.i,i.x,i.y),p=l.next,g=i.prev;return l.next=i,i.prev=l,a.next=p,p.prev=a,h.next=a,a.prev=h,g.next=h,h.prev=g,h}function lC(l,i,a,h){var p=new v1(l,i,a);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function _p(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function v1(l,i,a){this.i=l,this.x=i,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function x1(l,i,a,h){for(var p=0,g=i,v=a-h;g<a;g+=h)p+=(l[v]-l[g])*(l[g+1]+l[v+1]),v=g;return p}function K5(l,i,a,h,p){cC(l,i,a||0,h||l.length-1,p||J5)}function cC(l,i,a,h,p){for(;h>a;){if(h-a>600){var g=h-a+1,v=i-a+1,x=Math.log(g),S=.5*Math.exp(2*x/3),T=.5*Math.sqrt(x*S*(g-S)/g)*(v-g/2<0?-1:1);cC(l,i,Math.max(a,Math.floor(i-v*S/g+T)),Math.min(h,Math.floor(i+(g-v)*S/g+T)),p)}var D=l[i],P=a,L=h;for(yp(l,a,i),p(l[h],D)>0&&yp(l,a,h);P<L;){for(yp(l,P,L),P++,L--;p(l[P],D)<0;)P++;for(;p(l[L],D)>0;)L--}p(l[a],D)===0?yp(l,a,L):yp(l,++L,h),L<=i&&(a=L+1),i<=L&&(h=L-1)}}function yp(l,i,a){var h=l[i];l[i]=l[a],l[a]=h}function J5(l,i){return l<i?-1:l>i?1:0}function b1(l,i){const a=l.length;if(a<=1)return[l];const h=[];let p,g;for(let v=0;v<a;v++){const x=Vt(l[v]);x!==0&&(l[v].area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(p&&h.push(p),p=[l[v]]):p.push(l[v]))}if(p&&h.push(p),i>1)for(let v=0;v<h.length;v++)h[v].length<=i||(K5(h[v],i,1,h[v].length-1,Q5),h[v]=h[v].slice(0,i));return h}function Q5(l,i){return i.area-l.area}function w1(l,i,a){const h=a.patternDependencies;let p=!1;for(const g of i){const v=g.paint.get(`${l}-pattern`);v.isConstant()||(p=!0);const x=v.constantOr(null);x&&(p=!0,h[x.to]=!0,h[x.from]=!0)}return p}function E1(l,i,a,h,p){const g=p.patternDependencies;for(const v of i){const x=v.paint.get(`${l}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:h-1},a,{},p.availableImages),T=x.evaluate({zoom:h},a,{},p.availableImages),D=x.evaluate({zoom:h+1},a,{},p.availableImages);S=S&&S.name?S.name:S,T=T&&T.name?T.name:T,D=D&&D.name?D.name:D,g[S]=!0,g[T]=!0,g[D]=!0,a.patterns[v.id]={min:S,mid:T,max:D}}}return a}V_.deviation=function(l,i,a,h){var p=i&&i.length,g=Math.abs(x1(l,0,p?i[0]*a:l.length,a));if(p)for(var v=0,x=i.length;v<x;v++)g-=Math.abs(x1(l,i[v]*a,v<x-1?i[v+1]*a:l.length,a));var S=0;for(v=0;v<h.length;v+=3){var T=h[v]*a,D=h[v+1]*a,P=h[v+2]*a;S+=Math.abs((l[T]-l[P])*(l[D+1]-l[T+1])-(l[T]-l[D])*(l[P+1]-l[T+1]))}return g===0&&S===0?0:Math.abs((S-g)/g)},V_.flatten=function(l){for(var i=l[0][0].length,a={vertices:[],holes:[],dimensions:i},h=0,p=0;p<l.length;p++){for(var g=0;g<l[p].length;g++)for(var v=0;v<i;v++)a.vertices.push(l[p][g][v]);p>0&&a.holes.push(h+=l[p-1].length)}return a},N_.default=j5;class G_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new bt,this.indexArray=new yn,this.indexArray2=new Lr,this.programConfigurations=new tu(i.layers,i.zoom),this.segments=new Xi,this.segments2=new Xi,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=i.projection}populate(i,a,h,p){this.hasPattern=w1("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:x,id:S,index:T,sourceLayerIndex:D}of i){const P=this.layers[0]._featureFilter.needGeometry,L=nu(x,P);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),L,h))continue;const F=g?g.evaluate(L,{},h,a.availableImages):void 0,V={id:S,properties:x.properties,type:x.type,sourceLayerIndex:D,index:T,geometry:P?L.geometry:ja(x,h,p),patterns:{},sortKey:F};v.push(V)}g&&v.sort((x,S)=>x.sortKey-S.sortKey);for(const x of v){const{geometry:S,index:T,sourceLayerIndex:D}=x;if(this.hasPattern){const P=E1("fill",this.layers,x,this.zoom,a);this.patternFeatures.push(P)}else this.addFeature(x,S,T,h,{},a.availableImages);a.featureIndex.insert(i[T].feature,S,T,D,this.index)}}update(i,a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h,p)}addFeatures(i,a,h,p,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,V5),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,a,h,p,g,v=[]){for(const x of b1(a,500)){let S=0;for(const V of x)S+=V.length;const T=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),D=T.vertexLength,P=[],L=[];for(const V of x){if(V.length===0)continue;V!==x[0]&&L.push(P.length/2);const q=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),K=q.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(K+V.length-1,K),P.push(V[0].x),P.push(V[0].y);for(let le=1;le<V.length;le++)this.layoutVertexArray.emplaceBack(V[le].x,V[le].y),this.indexArray2.emplaceBack(K+le-1,K+le),P.push(V[le].x),P.push(V[le].y);q.vertexLength+=V.length,q.primitiveLength+=V.length}const F=N_(P,L);for(let V=0;V<F.length;V+=3)this.indexArray.emplaceBack(D+F[V],D+F[V+1],D+F[V+2]);T.vertexLength+=S,T.primitiveLength+=F.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,v,p)}}zt(G_,"FillBucket",{omit:["layers","patternFeatures"]});const eF=new Ye({"fill-sort-key":new Me(Ge.layout_fill["fill-sort-key"])});var tF={paint:new Ye({"fill-antialias":new ve(Ge.paint_fill["fill-antialias"]),"fill-opacity":new Me(Ge.paint_fill["fill-opacity"]),"fill-color":new Me(Ge.paint_fill["fill-color"]),"fill-outline-color":new Me(Ge.paint_fill["fill-outline-color"]),"fill-translate":new ve(Ge.paint_fill["fill-translate"]),"fill-translate-anchor":new ve(Ge.paint_fill["fill-translate-anchor"]),"fill-pattern":new Re(Ge.paint_fill["fill-pattern"])}),layout:eF};const nF=Ze([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),iF=Ze([{name:"a_centroid_pos",components:2,type:"Uint16"}]),rF=Ze([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:oF}=nF;var uC=Fh;function Fh(l,i,a,h,p){this.properties={},this.extent=a,this.type=0,this._pbf=l,this._geometry=-1,this._keys=h,this._values=p,l.readFields(sF,this,i)}function sF(l,i,a){l==1?i.id=a.readVarint():l==2?function(h,p){for(var g=h.readVarint()+h.pos;h.pos<g;){var v=p._keys[h.readVarint()],x=p._values[h.readVarint()];p.properties[v]=x}}(a,i):l==3?i.type=a.readVarint():l==4&&(i._geometry=a.pos)}function aF(l){for(var i,a,h=0,p=0,g=l.length,v=g-1;p<g;v=p++)h+=((a=l[v]).x-(i=l[p]).x)*(i.y+a.y);return h}Fh.types=["Unknown","Point","LineString","Polygon"],Fh.prototype.loadGeometry=function(){var l=this._pbf;l.pos=this._geometry;for(var i,a=l.readVarint()+l.pos,h=1,p=0,g=0,v=0,x=[];l.pos<a;){if(p<=0){var S=l.readVarint();h=7&S,p=S>>3}if(p--,h===1||h===2)g+=l.readSVarint(),v+=l.readSVarint(),h===1&&(i&&x.push(i),i=[]),i.push(new k(g,v));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&x.push(i),x},Fh.prototype.bbox=function(){var l=this._pbf;l.pos=this._geometry;for(var i=l.readVarint()+l.pos,a=1,h=0,p=0,g=0,v=1/0,x=-1/0,S=1/0,T=-1/0;l.pos<i;){if(h<=0){var D=l.readVarint();a=7&D,h=D>>3}if(h--,a===1||a===2)(p+=l.readSVarint())<v&&(v=p),p>x&&(x=p),(g+=l.readSVarint())<S&&(S=g),g>T&&(T=g);else if(a!==7)throw new Error("unknown command "+a)}return[v,S,x,T]},Fh.prototype.toGeoJSON=function(l,i,a){var h,p,g=this.extent*Math.pow(2,a),v=this.extent*l,x=this.extent*i,S=this.loadGeometry(),T=Fh.types[this.type];function D(F){for(var V=0;V<F.length;V++){var q=F[V];F[V]=[360*(q.x+v)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(q.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(h=0;h<S.length;h++)P[h]=S[h][0];D(S=P);break;case 2:for(h=0;h<S.length;h++)D(S[h]);break;case 3:for(S=function(F){var V=F.length;if(V<=1)return[F];for(var q,K,le=[],ge=0;ge<V;ge++){var ue=aF(F[ge]);ue!==0&&(K===void 0&&(K=ue<0),K===ue<0?(q&&le.push(q),q=[F[ge]]):q.push(F[ge]))}return q&&le.push(q),le}(S),h=0;h<S.length;h++)for(p=0;p<S[h].length;p++)D(S[h][p])}S.length===1?S=S[0]:T="Multi"+T;var L={type:"Feature",geometry:{type:T,coordinates:S},properties:this.properties};return"id"in this&&(L.id=this.id),L};var hC=dC;function dC(l,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=l,this._keys=[],this._values=[],this._features=[],l.readFields(lF,this,i),this.length=this._features.length}function lF(l,i,a){l===15?i.version=a.readVarint():l===1?i.name=a.readString():l===5?i.extent=a.readVarint():l===2?i._features.push(a.pos):l===3?i._keys.push(a.readString()):l===4&&i._values.push(function(h){for(var p=null,g=h.readVarint()+h.pos;h.pos<g;){var v=h.readVarint()>>3;p=v===1?h.readString():v===2?h.readFloat():v===3?h.readDouble():v===4?h.readVarint64():v===5?h.readVarint():v===6?h.readSVarint():v===7?h.readBoolean():null}return p}(a))}function cF(l,i,a){if(l===3){var h=new hC(a,a.readVarint()+a.pos);h.length&&(i[h.name]=h)}}dC.prototype.feature=function(l){if(l<0||l>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[l];var i=this._pbf.readVarint()+this._pbf.pos;return new uC(this._pbf,i,this.extent,this._keys,this._values)};var au={VectorTile:function(l,i){this.layers=l.readFields(cF,{},i)},VectorTileFeature:uC,VectorTileLayer:hC};function W_(l,i,a,h){const p=[],g=h===0?(v,x,S,T,D,P)=>{v.push(new k(P,S+(P-x)/(T-x)*(D-S)))}:(v,x,S,T,D,P)=>{v.push(new k(x+(P-S)/(D-S)*(T-x),P))};for(const v of l){const x=[];for(const S of v){if(S.length<=2)continue;const T=[];for(let L=0;L<S.length-1;L++){const F=S[L].x,V=S[L].y,q=S[L+1].x,K=S[L+1].y,le=h===0?F:V,ge=h===0?q:K;le<i?ge>i&&g(T,F,V,q,K,i):le>a?ge<a&&g(T,F,V,q,K,a):T.push(S[L]),ge<i&&le>=i&&g(T,F,V,q,K,i),ge>a&&le<=a&&g(T,F,V,q,K,a)}let D=S[S.length-1];const P=h===0?D.x:D.y;P>=i&&P<=a&&T.push(D),T.length&&(D=T[T.length-1],T[0].x===D.x&&T[0].y===D.y||T.push(T[0]),x.push(T))}x.length&&p.push(x)}return p}const uF=au.VectorTileFeature.types,hF=Math.pow(2,13);function vp(l,i,a,h,p,g,v,x){l.emplaceBack((i<<1)+v,(a<<1)+g,(Math.floor(h*hF)<<1)+p,Math.round(x))}function xp(l,i,a){const h=16384;l.emplaceBack(i.x,i.y,i.z,a[0]*h,a[1]*h,a[2]*h)}class fC{constructor(){this.acc=new k(0,0),this.polyCount=[]}startRing(i){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new k(i.x,i.y),this.max=new k(i.x,i.y))}append(i,a){this.currentPolyCount.edges++,this.acc._add(i);const h=this.min,p=this.max;i.x<h.x?h.x=i.x:i.x>p.x&&(p.x=i.x),i.y<h.y?h.y=i.y:i.y>p.y&&(p.y=i.y),((i.x===0||i.x===nn)&&i.x===a.x)!=((i.y===0||i.y===nn)&&i.y===a.y)&&this.processBorderOverlap(i,a),a.x<0!=i.x<0&&this.addBorderIntersection(0,Dn(a.y,i.y,(0-a.x)/(i.x-a.x))),a.x>nn!=i.x>nn&&this.addBorderIntersection(1,Dn(a.y,i.y,(nn-a.x)/(i.x-a.x))),a.y<0!=i.y<0&&this.addBorderIntersection(2,Dn(a.x,i.x,(0-a.y)/(i.y-a.y))),a.y>nn!=i.y>nn&&this.addBorderIntersection(3,Dn(a.x,i.x,(nn-a.y)/(i.y-a.y)))}addBorderIntersection(i,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[i];a<h[0]&&(h[0]=a),a>h[1]&&(h[1]=a)}processBorderOverlap(i,a){if(i.x===a.x){if(i.y===a.y)return;const h=i.x===0?0:1;this.addBorderIntersection(h,a.y),this.addBorderIntersection(h,i.y)}else{const h=i.y===0?2:3;this.addBorderIntersection(h,a.x),this.addBorderIntersection(h,i.x)}}centroid(){const i=this.polyCount.reduce((a,h)=>a+h.edges,0);return i!==0?this.acc.div(i)._round():new k(0,0)}span(){return new k(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((i,a)=>i+ +(a[0]!==Number.MAX_VALUE),0)}}class bp{constructor(i){this.zoom=i.zoom,this.canonical=i.canonical,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=i.projection,this.layoutVertexArray=new qt,this.centroidVertexArray=new ET,this.indexArray=new yn,this.programConfigurations=new tu(i.layers,i.zoom),this.segments=new Xi,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=i.enableTerrain}populate(i,a,h,p){this.features=[],this.hasPattern=w1("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const v=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*v/(v*v+1)/nn/(1<<g.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:v,index:x,sourceLayerIndex:S}of i){const T=this.layers[0]._featureFilter.needGeometry,D=nu(g,T);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),D,h))continue;const P={id:v,sourceLayerIndex:S,index:x,geometry:T?D.geometry:ja(g,h,p),properties:g.properties,type:g.type,patterns:{}},L=this.layoutVertexArray.length;this.hasPattern?this.features.push(E1("fill-extrusion",this.layers,P,this.zoom,a)):this.addFeature(P,P.geometry,x,h,{},a.availableImages,p),a.featureIndex.insert(g,P.geometry,x,S,this.index,L)}this.sortBorders()}addFeatures(i,a,h,p,g){for(const v of this.features){const{geometry:x}=v;this.addFeature(v,x,v.index,a,h,p,g)}this.sortBorders()}update(i,a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,oF),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=i.createVertexBuffer(this.layoutVertexExtArray,rF.members,!0))),this.programConfigurations.upload(i),this.uploaded=!0}uploadCentroid(i){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,iF.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,a,h,p,g,v,x){const S=[new k(0,0),new k(nn,nn)],T=x.projection,D=T.name==="globe",P=this.enableTerrain&&!D?new fC:null,L=uF[i.type]==="Polygon";D&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new zr);const F=b1(a,500);for(let le=F.length-1;le>=0;le--){const ge=F[le];(ge.length===0||(V=ge[0]).every(ue=>ue.x<=0)||V.every(ue=>ue.x>=nn)||V.every(ue=>ue.y<=0)||V.every(ue=>ue.y>=nn))&&F.splice(le,1)}var V;let q;if(D)q=xC(F,S,p);else{q=[];for(const le of F)q.push({polygon:le,bounds:S})}const K=L?this.edgeRadius:0;for(const{polygon:le,bounds:ge}of q){let ue=0,pe=0;for(const _e of le)L&&!_e[0].equals(_e[_e.length-1])&&_e.push(_e[0]),pe+=L?_e.length-1:_e.length;const Te=this.segments.prepareSegment((L?5:4)*pe,this.layoutVertexArray,this.indexArray);if(L){const _e=[],Be=[];ue=Te.vertexLength;for(const He of le){let dt,Ue;He.length&&He!==le[0]&&Be.push(_e.length/2),dt=He[1].sub(He[0])._perp()._unit();for(let Xe=1;Xe<He.length;Xe++){const nt=He[Xe],Ke=He[Xe===He.length-1?1:Xe+1];let{x:ht,y:it}=nt;if(K){Ue=Ke.sub(nt)._perp()._unit();const Ct=dt.add(Ue)._unit(),fn=K*Math.min(4,1/(dt.x*Ct.x+dt.y*Ct.y));ht+=fn*Ct.x,it+=fn*Ct.y,dt=Ue}vp(this.layoutVertexArray,ht,it,0,0,1,1,0),Te.vertexLength++,_e.push(nt.x,nt.y),D&&xp(this.layoutVertexExtArray,T.projectTilePoint(ht,it,p),T.upVector(p,ht,it))}}const Fe=N_(_e,Be);for(let He=0;He<Fe.length;He+=3)this.indexArray.emplaceBack(ue+Fe[He],ue+Fe[He+2],ue+Fe[He+1]),Te.primitiveLength++}for(const _e of le){P&&_e.length&&P.startRing(_e[0]);let Be,Fe,He,dt=_e.length>4&&_C(_e[_e.length-2],_e[0],_e[1]),Ue=K?dF(_e[_e.length-2],_e[0],_e[1],K):0;Fe=_e[1].sub(_e[0])._perp()._unit();for(let Xe=1,nt=0;Xe<_e.length;Xe++){let Ke=_e[Xe-1],ht=_e[Xe];const it=_e[Xe===_e.length-1?1:Xe+1];if(P&&L&&P.currentPolyCount.top++,gC(ht,Ke,ge)){K&&(Fe=it.sub(ht)._perp()._unit());continue}P&&P.append(ht,Ke);const Ct=ht.sub(Ke)._perp(),fn=Ct.x/(Math.abs(Ct.x)+Math.abs(Ct.y)),mn=Ct.y>0?1:0,Wt=Ke.dist(ht);if(nt+Wt>32768&&(nt=0),K){He=it.sub(ht)._perp()._unit();let Pt=mC(Ke,ht,it,pC(Fe,He),K);isNaN(Pt)&&(Pt=0);const ri=ht.sub(Ke)._unit();Ke=Ke.add(ri.mult(Ue))._round(),ht=ht.add(ri.mult(-Pt))._round(),Ue=Pt,Fe=He}const vt=Te.vertexLength,En=_e.length>4&&_C(Ke,ht,it);let sn=yC(nt,dt,!0);if(vp(this.layoutVertexArray,Ke.x,Ke.y,fn,mn,0,0,sn),vp(this.layoutVertexArray,Ke.x,Ke.y,fn,mn,0,1,sn),nt+=Wt,sn=yC(nt,En,!1),dt=En,vp(this.layoutVertexArray,ht.x,ht.y,fn,mn,0,0,sn),vp(this.layoutVertexArray,ht.x,ht.y,fn,mn,0,1,sn),Te.vertexLength+=4,this.indexArray.emplaceBack(vt+0,vt+1,vt+2),this.indexArray.emplaceBack(vt+1,vt+3,vt+2),Te.primitiveLength+=2,K){const Pt=ue+(Xe===1?_e.length-2:Xe-2),ri=Xe===1?ue:Pt+1;if(this.indexArray.emplaceBack(vt+1,Pt,vt+3),this.indexArray.emplaceBack(Pt,ri,vt+3),Te.primitiveLength+=2,Be===void 0&&(Be=vt),!gC(it,_e[Xe],ge)){const Kn=Xe===_e.length-1?Be:Te.vertexLength;this.indexArray.emplaceBack(vt+2,vt+3,Kn),this.indexArray.emplaceBack(vt+3,Kn+1,Kn),this.indexArray.emplaceBack(vt+3,ri,Kn+1),Te.primitiveLength+=3}}if(D){const Pt=this.layoutVertexExtArray,ri=T.projectTilePoint(Ke.x,Ke.y,p),Kn=T.projectTilePoint(ht.x,ht.y,p),_i=T.upVector(p,Ke.x,Ke.y),_n=T.upVector(p,ht.x,ht.y);xp(Pt,ri,_i),xp(Pt,ri,_i),xp(Pt,Kn,_n),xp(Pt,Kn,_n)}}L&&(ue+=_e.length-1)}}if(P&&P.polyCount.length>0){if(P.borders){P.vertexArrayOffset=this.centroidVertexArray.length;const le=P.borders,ge=this.featuresOnBorder.push(P)-1;for(let ue=0;ue<4;ue++)le[ue][0]!==Number.MAX_VALUE&&this.borders[ue].push(ge)}this.encodeCentroid(P.borders?void 0:P.centroid(),P)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,v,p)}sortBorders(){for(let i=0;i<4;i++)this.borders[i].sort((a,h)=>this.featuresOnBorder[a].borders[i][0]-this.featuresOnBorder[h].borders[i][0])}encodeCentroid(i,a,h=!0){let p,g;if(i)if(i.y!==0){const x=a.span()._mult(this.tileToMeter);p=(Math.max(i.x,1)<<3)+Math.min(7,Math.round(x.x/10)),g=(Math.max(i.y,1)<<3)+Math.min(7,Math.round(x.y/10))}else p=Math.ceil(7*(i.x+450)),g=0;else p=0,g=+h;let v=h?this.centroidVertexArray.length:a.vertexArrayOffset;for(const x of a.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*x.edges+x.top);for(let S=0;S<x.top;S++)this.centroidVertexArray.emplace(v++,p,g);for(let S=0;S<2*x.edges;S++)this.centroidVertexArray.emplace(v++,0,g),this.centroidVertexArray.emplace(v++,p,g)}}}function pC(l,i){const a=l.add(i)._unit();return l.x*a.x+l.y*a.y}function dF(l,i,a,h){const p=i.sub(l)._perp()._unit(),g=a.sub(i)._perp()._unit();return mC(l,i,a,pC(p,g),h)}function mC(l,i,a,h,p){const g=Math.sqrt(1-h*h);return Math.min(l.dist(i)/3,i.dist(a)/3,p*g/h)}function gC(l,i,a){return l.x<a[0].x&&i.x<a[0].x||l.x>a[1].x&&i.x>a[1].x||l.y<a[0].y&&i.y<a[0].y||l.y>a[1].y&&i.y>a[1].y}function _C(l,i,a){if(l.x<0||l.x>=nn||i.x<0||i.x>=nn||a.x<0||a.x>=nn)return!1;const h=a.sub(i),p=h.perp(),g=l.sub(i);return(h.x*g.x+h.y*g.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(g.x*g.x+g.y*g.y))>-.866&&p.x*g.x+p.y*g.y<0}function yC(l,i,a){const h=i?2|l:-3&l;return a?1|h:-2&h}function vC(){const l=Math.PI/32,i=Math.tan(l),a=Jx;return a*Math.sqrt(1+2*i*i)-a}function xC(l,i,a){const h=1<<a.z,p=os(a.x/h),g=os((a.x+1)/h),v=Tr(a.y/h),x=Tr((a.y+1)/h);return function(S,T,D,P,L=0,F){const V=[];if(!S.length||!D||!P)return V;const q=(_e,Be)=>{for(const Fe of _e)V.push({polygon:Fe,bounds:Be})},K=Math.ceil(Math.log2(D)),le=Math.ceil(Math.log2(P)),ge=K-le,ue=[];for(let _e=0;_e<Math.abs(ge);_e++)ue.push(ge>0?0:1);for(let _e=0;_e<Math.min(K,le);_e++)ue.push(0),ue.push(1);let pe=S;if(pe=W_(pe,T[0].y-L,T[1].y+L,1),pe=W_(pe,T[0].x-L,T[1].x+L,0),!pe.length)return V;const Te=[];for(ue.length?Te.push({polygons:pe,bounds:T,depth:0}):q(pe,T);Te.length;){const _e=Te.pop(),Be=_e.depth,Fe=ue[Be],He=_e.bounds[0],dt=_e.bounds[1],Ue=Fe===0?He.x:He.y,Xe=Fe===0?dt.x:dt.y,nt=F?F(Fe,Ue,Xe):.5*(Ue+Xe),Ke=W_(_e.polygons,Ue-L,nt+L,Fe),ht=W_(_e.polygons,nt-L,Xe+L,Fe);if(Ke.length){const it=[He,new k(Fe===0?nt:dt.x,Fe===1?nt:dt.y)];ue.length>Be+1?Te.push({polygons:Ke,bounds:it,depth:Be+1}):q(Ke,it)}if(ht.length){const it=[new k(Fe===0?nt:He.x,Fe===1?nt:He.y),dt];ue.length>Be+1?Te.push({polygons:ht,bounds:it,depth:Be+1}):q(ht,it)}}return V}(l,i,Math.ceil((g-p)/11.25),Math.ceil((v-x)/11.25),1,(S,T,D)=>{if(S===0)return .5*(T+D);{const P=Tr((a.y+T/nn)/h);return(Va(.5*(Tr((a.y+D/nn)/h)+P))*h-a.y)*nn}})}zt(bp,"FillExtrusionBucket",{omit:["layers","features"]}),zt(fC,"PartMetadata");const fF=new Ye({"fill-extrusion-edge-radius":new ve(Ge["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var pF={paint:new Ye({"fill-extrusion-opacity":new ve(Ge["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Me(Ge["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ve(Ge["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ve(Ge["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Re(Ge["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Me(Ge["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Me(Ge["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ve(Ge["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new ve(Ge["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new ve(Ge["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:fF};function bC(l,i,a){var h=2*Math.PI*6378137/256/Math.pow(2,a);return[l*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class H_{constructor(i,a,h){this.z=i,this.x=a,this.y=h,this.key=wp(0,i,i,a,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,a){const h=function(g,v,x){var S=bC(256*g,256*(v=Math.pow(2,x)-v-1),x),T=bC(256*(g+1),256*(v+1),x);return S[0]+","+S[1]+","+T[0]+","+T[1]}(this.x,this.y,this.z),p=function(g,v,x){let S,T="";for(let D=g;D>0;D--)S=1<<D-1,T+=(v&S?1:0)+(x&S?2:0);return T}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",p).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class wC{constructor(i,a){this.wrap=i,this.canonical=a,this.key=wp(i,a.z,a.z,a.x,a.y)}}class Hr{constructor(i,a,h,p,g){this.overscaledZ=i,this.wrap=a,this.canonical=new H_(h,+p,+g),this.key=a===0&&i===h?this.canonical.key:wp(a,i,h,p,g)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){const a=this.canonical.z-i;return i>this.canonical.z?new Hr(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hr(i,this.wrap,i,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(i,a=!0){if(this.overscaledZ===i&&a)return this.key;if(i>this.canonical.z)return wp(this.wrap*+a,i,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-i;return wp(this.wrap*+a,i,i,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(i){if(i.wrap!==this.wrap)return!1;const a=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>a&&i.canonical.y===this.canonical.y>>a}children(i){if(this.overscaledZ>=i)return[new Hr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new Hr(a,this.wrap,a,h,p),new Hr(a,this.wrap,a,h+1,p),new Hr(a,this.wrap,a,h,p+1),new Hr(a,this.wrap,a,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Hr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Hr(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new wC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function wp(l,i,a,h,p){const g=1<<Math.min(a,22);let v=g*(p%g)+h%g;return l&&a<22&&(v+=g*g*((l<0?-2*l-1:2*l)%(1<<2*(22-a)))),16*(32*v+a)+(i-a)}function Ep(l,i){return l.x*i.x+l.y*i.y}function EC(l,i){if(l.length===1){let a=0;const h=i[a++];let p;for(;!p||h.equals(p);)if(p=i[a++],!p)return 1/0;for(;a<i.length;a++){const g=i[a],v=l[0],x=p.sub(h),S=g.sub(h),T=v.sub(h),D=Ep(x,x),P=Ep(x,S),L=Ep(S,S),F=Ep(T,x),V=Ep(T,S),q=D*L-P*P,K=(L*F-P*V)/q,le=(D*V-P*F)/q,ge=h.z*(1-K-le)+p.z*K+g.z*le;if(isFinite(ge))return ge}return 1/0}{let a=1/0;for(const h of i)a=Math.min(a,h.z);return a}}function q_(l){const i=new k(l[0],l[1]);return i.z=l[2],i}function SC(l,i,a,h,p,g,v,x){const S=v*p.getElevationAt(l,i,!0,!0),T=g[0]!==0,D=T?g[1]===0?v*(g[0]/7-450):v*function(P,L,F){const V=Math.floor(L[0]/8),q=Math.floor(L[1]/8),K=10*(L[0]-8*V),le=10*(L[1]-8*q),ge=P.getElevationAt(V,q,!0,!0),ue=P.getMeterToDEM(F),pe=Math.floor(.5*(K*ue-1)),Te=Math.floor(.5*(le*ue-1)),_e=P.tileCoordToPixel(V,q),Be=2*pe+1,Fe=2*Te+1,He=function(ht,it,Ct,fn,mn){return[ht.getElevationAtPixel(it,Ct,!0),ht.getElevationAtPixel(it+mn,Ct,!0),ht.getElevationAtPixel(it,Ct+mn,!0),ht.getElevationAtPixel(it+fn,Ct+mn,!0)]}(P,_e.x-pe,_e.y-Te,Be,Fe),dt=Math.abs(He[0]-He[1]),Ue=Math.abs(He[2]-He[3]),Xe=Math.abs(He[0]-He[2])+Math.abs(He[1]-He[3]),nt=Math.min(.25,.5*ue*(dt+Ue)/Be),Ke=Math.min(.25,.5*ue*Xe/Fe);return ge+Math.max(nt*K,Ke*le)}(p,g,x):S;return{base:S+(a===0)?-1:a,top:T?Math.max(D+h,S+a+2):S+h}}zt(H_,"CanonicalTileID"),zt(Hr,"OverscaledTileID",{omit:["projMatrix"]});const mF=Ze([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:gF}=mF,_F=Ze([{name:"a_packed",components:4,type:"Float32"}]),{members:yF}=_F,vF=au.VectorTileFeature.types,xF=Math.cos(Math.PI/180*37.5);class Y_{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(a=>a.id),this.index=i.index,this.projection=i.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new rn,this.layoutVertexArray2=new wn,this.indexArray=new yn,this.programConfigurations=new tu(i.layers,i.zoom),this.segments=new Xi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(i,a,h,p){this.hasPattern=w1("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:D,id:P,index:L,sourceLayerIndex:F}of i){const V=this.layers[0]._featureFilter.needGeometry,q=nu(D,V);if(!this.layers[0]._featureFilter.filter(new te(this.zoom),q,h))continue;const K=g?g.evaluate(q,{},h):void 0,le={id:P,properties:D.properties,type:D.type,sourceLayerIndex:F,index:L,geometry:V?q.geometry:ja(D,h,p),patterns:{},sortKey:K};v.push(le)}g&&v.sort((D,P)=>D.sortKey-P.sortKey);const{lineAtlas:x,featureIndex:S}=a,T=this.addConstantDashes(x);for(const D of v){const{geometry:P,index:L,sourceLayerIndex:F}=D;if(T&&this.addFeatureDashes(D,x),this.hasPattern){const V=E1("line",this.layers,D,this.zoom,a);this.patternFeatures.push(V)}else this.addFeature(D,P,L,h,x.positions,a.availableImages);S.insert(i[L].feature,P,L,F,this.index)}}addConstantDashes(i){let a=!1;for(const h of this.layers){const p=h.paint.get("line-dasharray").value,g=h.layout.get("line-cap").value;if(p.kind!=="constant"||g.kind!=="constant")a=!0;else{const v=g.value,x=p.value;if(!x)continue;i.addDash(x.from,v),i.addDash(x.to,v),x.other&&i.addDash(x.other,v)}}return a}addFeatureDashes(i,a){const h=this.zoom;for(const p of this.layers){const g=p.paint.get("line-dasharray").value,v=p.layout.get("line-cap").value;if(g.kind==="constant"&&v.kind==="constant")continue;let x,S,T,D,P,L;if(g.kind==="constant"){const K=g.value;if(!K)continue;x=K.other||K.to,S=K.to,T=K.from}else x=g.evaluate({zoom:h-1},i),S=g.evaluate({zoom:h},i),T=g.evaluate({zoom:h+1},i);v.kind==="constant"?D=P=L=v.value:(D=v.evaluate({zoom:h-1},i),P=v.evaluate({zoom:h},i),L=v.evaluate({zoom:h+1},i)),a.addDash(x,D),a.addDash(S,P),a.addDash(T,L);const F=a.getKey(x,D),V=a.getKey(S,P),q=a.getKey(T,L);i.patterns[p.id]={min:F,mid:V,max:q}}}update(i,a,h,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,a,this.stateDependentLayers,h,p)}addFeatures(i,a,h,p,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,h,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,yF)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gF),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&i.properties.hasOwnProperty("mapbox_clip_start")&&i.properties.hasOwnProperty("mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,a,h,p,g,v){const x=this.layers[0].layout,S=x.get("line-join").evaluate(i,{}),T=x.get("line-cap").evaluate(i,{}),D=x.get("line-miter-limit"),P=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const L of a)this.addLine(L,i,S,T,D,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,v,p)}addLine(i,a,h,p,g,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let le=0;le<i.length-1;le++)this.totalDistance+=i[le].dist(i[le+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const x=vF[a.type]==="Polygon";let S=i.length;for(;S>=2&&i[S-1].equals(i[S-2]);)S--;let T=0;for(;T<S-1&&i[T].equals(i[T+1]);)T++;if(S<(x?3:2))return;h==="bevel"&&(g=1.05);const D=this.overscaling<=16?122880/(512*this.overscaling):0,P=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray);let L,F,V,q,K;this.e1=this.e2=-1,x&&(L=i[S-2],K=i[T].sub(L)._unit()._perp());for(let le=T;le<S;le++){if(V=le===S-1?x?i[T+1]:void 0:i[le+1],V&&i[le].equals(V))continue;K&&(q=K),L&&(F=L),L=i[le],K=V?V.sub(L)._unit()._perp():q,q=q||K;let ge=q.add(K);ge.x===0&&ge.y===0||ge._unit();const ue=q.x*K.x+q.y*K.y,pe=ge.x*K.x+ge.y*K.y,Te=pe!==0?1/pe:1/0,_e=2*Math.sqrt(2-2*pe),Be=pe<xF&&F&&V,Fe=q.x*K.y-q.y*K.x>0;if(Be&&le>T){const Ue=L.dist(F);if(Ue>2*D){const Xe=L.sub(L.sub(F)._mult(D/Ue)._round());this.updateDistance(F,Xe),this.addCurrentVertex(Xe,q,0,0,P),F=Xe}}const He=F&&V;let dt=He?h:x?"butt":p;if(He&&dt==="round"&&(Te<v?dt="miter":Te<=2&&(dt="fakeround")),dt==="miter"&&Te>g&&(dt="bevel"),dt==="bevel"&&(Te>2&&(dt="flipbevel"),Te<g&&(dt="miter")),F&&this.updateDistance(F,L),dt==="miter")ge._mult(Te),this.addCurrentVertex(L,ge,0,0,P);else if(dt==="flipbevel"){if(Te>100)ge=K.mult(-1);else{const Ue=Te*q.add(K).mag()/q.sub(K).mag();ge._perp()._mult(Ue*(Fe?-1:1))}this.addCurrentVertex(L,ge,0,0,P),this.addCurrentVertex(L,ge.mult(-1),0,0,P)}else if(dt==="bevel"||dt==="fakeround"){const Ue=-Math.sqrt(Te*Te-1),Xe=Fe?Ue:0,nt=Fe?0:Ue;if(F&&this.addCurrentVertex(L,q,Xe,nt,P),dt==="fakeround"){const Ke=Math.round(180*_e/Math.PI/20);for(let ht=1;ht<Ke;ht++){let it=ht/Ke;if(it!==.5){const fn=it-.5;it+=it*fn*(it-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*fn*fn+(.848013+ue*(.215638*ue-1.06021)))}const Ct=K.sub(q)._mult(it)._add(q)._unit()._mult(Fe?-1:1);this.addHalfVertex(L,Ct.x,Ct.y,!1,Fe,0,P)}}V&&this.addCurrentVertex(L,K,-Xe,-nt,P)}else if(dt==="butt")this.addCurrentVertex(L,ge,0,0,P);else if(dt==="square"){const Ue=F?1:-1;F||this.addCurrentVertex(L,ge,Ue,Ue,P),this.addCurrentVertex(L,ge,0,0,P),F&&this.addCurrentVertex(L,ge,Ue,Ue,P)}else dt==="round"&&(F&&(this.addCurrentVertex(L,q,0,0,P),this.addCurrentVertex(L,q,1,1,P,!0)),V&&(this.addCurrentVertex(L,K,-1,-1,P,!0),this.addCurrentVertex(L,K,0,0,P)));if(Be&&le<S-1){const Ue=L.dist(V);if(Ue>2*D){const Xe=L.add(V.sub(L)._mult(D/Ue)._round());this.updateDistance(L,Xe),this.addCurrentVertex(Xe,K,0,0,P),L=Xe}}}}addCurrentVertex(i,a,h,p,g,v=!1){const x=a.y*p-a.x,S=-a.y-a.x*p;this.addHalfVertex(i,a.x+a.y*h,a.y-a.x*h,v,!1,h,g),this.addHalfVertex(i,x,S,v,!0,-p,g)}addHalfVertex({x:i,y:a},h,p,g,v,x,S){this.layoutVertexArray.emplaceBack((i<<1)+(g?1:0),(a<<1)+(v?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(x===0?0:x<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const T=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,T),S.primitiveLength++),v?this.e2=T:this.e1=T}updateScaledDistance(){if(this.lineClips){const i=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=i*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(i,a){this.distance+=i.dist(a),this.updateScaledDistance()}}zt(Y_,"LineBucket",{omit:["layers","patternFeatures"]});const bF=new Ye({"line-cap":new Me(Ge.layout_line["line-cap"]),"line-join":new Me(Ge.layout_line["line-join"]),"line-miter-limit":new ve(Ge.layout_line["line-miter-limit"]),"line-round-limit":new ve(Ge.layout_line["line-round-limit"]),"line-sort-key":new Me(Ge.layout_line["line-sort-key"])});var TC={paint:new Ye({"line-opacity":new Me(Ge.paint_line["line-opacity"]),"line-color":new Me(Ge.paint_line["line-color"]),"line-translate":new ve(Ge.paint_line["line-translate"]),"line-translate-anchor":new ve(Ge.paint_line["line-translate-anchor"]),"line-width":new Me(Ge.paint_line["line-width"]),"line-gap-width":new Me(Ge.paint_line["line-gap-width"]),"line-offset":new Me(Ge.paint_line["line-offset"]),"line-blur":new Me(Ge.paint_line["line-blur"]),"line-dasharray":new Re(Ge.paint_line["line-dasharray"]),"line-pattern":new Re(Ge.paint_line["line-pattern"]),"line-gradient":new Pe(Ge.paint_line["line-gradient"]),"line-trim-offset":new ve(Ge.paint_line["line-trim-offset"])}),layout:bF};const CC=new class extends Me{possiblyEvaluate(l,i){return i=new te(Math.floor(i.zoom),{now:i.now,fadeDuration:i.fadeDuration,zoomHistory:i.zoomHistory,transition:i.transition}),super.possiblyEvaluate(l,i)}evaluate(l,i,a,h){return i=pt({},i,{zoom:Math.floor(i.zoom)}),super.evaluate(l,i,a,h)}}(TC.paint.properties["line-width"].specification);function MC(l,i){return i>0?i+2*l:l}CC.useIntegerZoom=!0;const wF=Ze([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),EF=Ze([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),SF=Ze([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ze([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const TF=Ze([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),CF=Ze([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ze([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const kC=Ze([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),MF=Ze([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ze([{name:"triangle",components:3,type:"Uint16"}]),Ze([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ze([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ze([{type:"Float32",name:"offsetX"}]),Ze([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Cr=24;const ia=128;function S1(l,i){const{expression:a}=i;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new te(l+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:p}=a;let g=0;for(;g<h.length&&h[g]<=l;)g++;g=Math.max(0,g-1);let v=g;for(;v<h.length&&h[v]<l+1;)v++;v=Math.min(h.length-1,v);const x=h[g],S=h[v];return a.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:p}:{kind:"camera",minZoom:x,maxZoom:S,minSize:a.evaluate(new te(x)),maxSize:a.evaluate(new te(S)),interpolationType:p}}}function Z_(l,{uSize:i,uSizeT:a},{lowerSize:h,upperSize:p}){return l.kind==="source"?h/ia:l.kind==="composite"?Dn(h/ia,p/ia,a):i}function Bh(l,i){let a=0,h=0;if(l.kind==="constant")h=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:p,minZoom:g,maxZoom:v}=l,x=p?de(is.interpolationFactor(p,i,g,v),0,1):0;l.kind==="camera"?h=Dn(l.minSize,l.maxSize,x):a=x}return{uSizeT:a,uSize:h}}var kF=Object.freeze({__proto__:null,getSizeData:S1,evaluateSizeForFeature:Z_,evaluateSizeForZoom:Bh,SIZE_PACK_FACTOR:ia});function AF(l,i,a){return l.sections.forEach(h=>{h.text=function(p,g,v){const x=g.layout.get("text-transform").evaluate(v,{});return x==="uppercase"?p=p.toLocaleUpperCase():x==="lowercase"&&(p=p.toLocaleLowerCase()),ee.applyArabicShaping&&(p=ee.applyArabicShaping(p)),p}(h.text,i,a)}),l}const Sp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function DF(l){return l==="\uFE36"||l==="\uFE48"||l==="\uFE38"||l==="\uFE44"||l==="\uFE42"||l==="\uFE3E"||l==="\uFE3C"||l==="\uFE3A"||l==="\uFE18"||l==="\uFE40"||l==="\uFE10"||l==="\uFE13"||l==="\uFE14"||l==="\uFF40"||l==="\uFFE3"||l==="\uFE11"||l==="\uFE12"}function IF(l){return l==="\uFE35"||l==="\uFE47"||l==="\uFE37"||l==="\uFE43"||l==="\uFE41"||l==="\uFE3D"||l==="\uFE3B"||l==="\uFE39"||l==="\uFE17"||l==="\uFE3F"}var AC=function(l,i,a,h,p){var g,v,x=8*p-h-1,S=(1<<x)-1,T=S>>1,D=-7,P=a?p-1:0,L=a?-1:1,F=l[i+P];for(P+=L,g=F&(1<<-D)-1,F>>=-D,D+=x;D>0;g=256*g+l[i+P],P+=L,D-=8);for(v=g&(1<<-D)-1,g>>=-D,D+=h;D>0;v=256*v+l[i+P],P+=L,D-=8);if(g===0)g=1-T;else{if(g===S)return v?NaN:1/0*(F?-1:1);v+=Math.pow(2,h),g-=T}return(F?-1:1)*v*Math.pow(2,g-h)},DC=function(l,i,a,h,p,g){var v,x,S,T=8*g-p-1,D=(1<<T)-1,P=D>>1,L=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=h?0:g-1,V=h?1:-1,q=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(x=isNaN(i)?1:0,v=D):(v=Math.floor(Math.log(i)/Math.LN2),i*(S=Math.pow(2,-v))<1&&(v--,S*=2),(i+=v+P>=1?L/S:L*Math.pow(2,1-P))*S>=2&&(v++,S/=2),v+P>=D?(x=0,v=D):v+P>=1?(x=(i*S-1)*Math.pow(2,p),v+=P):(x=i*Math.pow(2,P-1)*Math.pow(2,p),v=0));p>=8;l[a+F]=255&x,F+=V,x/=256,p-=8);for(v=v<<p|x,T+=p;T>0;l[a+F]=255&v,F+=V,v/=256,T-=8);l[a+F-V]|=128*q},Tp=ii;function ii(l){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(l)?l:new Uint8Array(l||0),this.pos=0,this.type=0,this.length=this.buf.length}ii.Varint=0,ii.Fixed64=1,ii.Bytes=2,ii.Fixed32=5;var T1=4294967296,IC=1/T1,PC=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");function $a(l){return l.type===ii.Bytes?l.readVarint()+l.pos:l.pos+1}function Nh(l,i,a){return a?4294967296*i+(l>>>0):4294967296*(i>>>0)+(l>>>0)}function OC(l,i,a){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));a.realloc(h);for(var p=a.pos-1;p>=l;p--)a.buf[p+h]=a.buf[p]}function PF(l,i){for(var a=0;a<l.length;a++)i.writeVarint(l[a])}function OF(l,i){for(var a=0;a<l.length;a++)i.writeSVarint(l[a])}function LF(l,i){for(var a=0;a<l.length;a++)i.writeFloat(l[a])}function zF(l,i){for(var a=0;a<l.length;a++)i.writeDouble(l[a])}function RF(l,i){for(var a=0;a<l.length;a++)i.writeBoolean(l[a])}function FF(l,i){for(var a=0;a<l.length;a++)i.writeFixed32(l[a])}function BF(l,i){for(var a=0;a<l.length;a++)i.writeSFixed32(l[a])}function NF(l,i){for(var a=0;a<l.length;a++)i.writeFixed64(l[a])}function VF(l,i){for(var a=0;a<l.length;a++)i.writeSFixed64(l[a])}function X_(l,i){return(l[i]|l[i+1]<<8|l[i+2]<<16)+16777216*l[i+3]}function Vh(l,i,a){l[a]=i,l[a+1]=i>>>8,l[a+2]=i>>>16,l[a+3]=i>>>24}function LC(l,i){return(l[i]|l[i+1]<<8|l[i+2]<<16)+(l[i+3]<<24)}function jF(l,i,a){i.glyphs=[],l===1&&a.readMessage(UF,i)}function UF(l,i,a){if(l===3){const{id:h,bitmap:p,width:g,height:v,left:x,top:S,advance:T}=a.readMessage($F,{});i.glyphs.push({id:h,bitmap:new Ua({width:g+6,height:v+6},p),metrics:{width:g,height:v,left:x,top:S,advance:T}})}else l===4?i.ascender=a.readSVarint():l===5&&(i.descender=a.readSVarint())}function $F(l,i,a){l===1?i.id=a.readVarint():l===2?i.bitmap=a.readBytes():l===3?i.width=a.readVarint():l===4?i.height=a.readVarint():l===5?i.left=a.readSVarint():l===6?i.top=a.readSVarint():l===7&&(i.advance=a.readVarint())}function C1(l){let i=0,a=0;for(const v of l)i+=v.w*v.h,a=Math.max(a,v.w);l.sort((v,x)=>x.h-v.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),a),h:1/0}];let p=0,g=0;for(const v of l)for(let x=h.length-1;x>=0;x--){const S=h[x];if(!(v.w>S.w||v.h>S.h)){if(v.x=S.x,v.y=S.y,g=Math.max(g,v.y+v.h),p=Math.max(p,v.x+v.w),v.w===S.w&&v.h===S.h){const T=h.pop();x<h.length&&(h[x]=T)}else v.h===S.h?(S.x+=v.w,S.w-=v.w):v.w===S.w?(S.y+=v.h,S.h-=v.h):(h.push({x:S.x+v.w,y:S.y,w:S.w-v.w,h:v.h}),S.y+=v.h,S.h-=v.h);break}}return{w:p,h:g,fill:i/(p*g)||0}}ii.prototype={destroy:function(){this.buf=null},readFields:function(l,i,a){for(a=a||this.length;this.pos<a;){var h=this.readVarint(),p=h>>3,g=this.pos;this.type=7&h,l(p,i,this),this.pos===g&&this.skip(h)}return i},readMessage:function(l,i){return this.readFields(l,i,this.readVarint()+this.pos)},readFixed32:function(){var l=X_(this.buf,this.pos);return this.pos+=4,l},readSFixed32:function(){var l=LC(this.buf,this.pos);return this.pos+=4,l},readFixed64:function(){var l=X_(this.buf,this.pos)+X_(this.buf,this.pos+4)*T1;return this.pos+=8,l},readSFixed64:function(){var l=X_(this.buf,this.pos)+LC(this.buf,this.pos+4)*T1;return this.pos+=8,l},readFloat:function(){var l=AC(this.buf,this.pos,!0,23,4);return this.pos+=4,l},readDouble:function(){var l=AC(this.buf,this.pos,!0,52,8);return this.pos+=8,l},readVarint:function(l){var i,a,h=this.buf;return i=127&(a=h[this.pos++]),a<128?i:(i|=(127&(a=h[this.pos++]))<<7,a<128?i:(i|=(127&(a=h[this.pos++]))<<14,a<128?i:(i|=(127&(a=h[this.pos++]))<<21,a<128?i:function(p,g,v){var x,S,T=v.buf;if(x=(112&(S=T[v.pos++]))>>4,S<128||(x|=(127&(S=T[v.pos++]))<<3,S<128)||(x|=(127&(S=T[v.pos++]))<<10,S<128)||(x|=(127&(S=T[v.pos++]))<<17,S<128)||(x|=(127&(S=T[v.pos++]))<<24,S<128)||(x|=(1&(S=T[v.pos++]))<<31,S<128))return Nh(p,x,g);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(a=h[this.pos]))<<28,l,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var l=this.readVarint();return l%2==1?(l+1)/-2:l/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var l=this.readVarint()+this.pos,i=this.pos;return this.pos=l,l-i>=12&&PC?function(a,h,p){return PC.decode(a.subarray(h,p))}(this.buf,i,l):function(a,h,p){for(var g="",v=h;v<p;){var x,S,T,D=a[v],P=null,L=D>239?4:D>223?3:D>191?2:1;if(v+L>p)break;L===1?D<128&&(P=D):L===2?(192&(x=a[v+1]))==128&&(P=(31&D)<<6|63&x)<=127&&(P=null):L===3?(S=a[v+2],(192&(x=a[v+1]))==128&&(192&S)==128&&((P=(15&D)<<12|(63&x)<<6|63&S)<=2047||P>=55296&&P<=57343)&&(P=null)):L===4&&(S=a[v+2],T=a[v+3],(192&(x=a[v+1]))==128&&(192&S)==128&&(192&T)==128&&((P=(15&D)<<18|(63&x)<<12|(63&S)<<6|63&T)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,L=1):P>65535&&(P-=65536,g+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),g+=String.fromCharCode(P),v+=L}return g}(this.buf,i,l)},readBytes:function(){var l=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,l);return this.pos=l,i},readPackedVarint:function(l,i){if(this.type!==ii.Bytes)return l.push(this.readVarint(i));var a=$a(this);for(l=l||[];this.pos<a;)l.push(this.readVarint(i));return l},readPackedSVarint:function(l){if(this.type!==ii.Bytes)return l.push(this.readSVarint());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readSVarint());return l},readPackedBoolean:function(l){if(this.type!==ii.Bytes)return l.push(this.readBoolean());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readBoolean());return l},readPackedFloat:function(l){if(this.type!==ii.Bytes)return l.push(this.readFloat());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readFloat());return l},readPackedDouble:function(l){if(this.type!==ii.Bytes)return l.push(this.readDouble());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readDouble());return l},readPackedFixed32:function(l){if(this.type!==ii.Bytes)return l.push(this.readFixed32());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readFixed32());return l},readPackedSFixed32:function(l){if(this.type!==ii.Bytes)return l.push(this.readSFixed32());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readSFixed32());return l},readPackedFixed64:function(l){if(this.type!==ii.Bytes)return l.push(this.readFixed64());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readFixed64());return l},readPackedSFixed64:function(l){if(this.type!==ii.Bytes)return l.push(this.readSFixed64());var i=$a(this);for(l=l||[];this.pos<i;)l.push(this.readSFixed64());return l},skip:function(l){var i=7&l;if(i===ii.Varint)for(;this.buf[this.pos++]>127;);else if(i===ii.Bytes)this.pos=this.readVarint()+this.pos;else if(i===ii.Fixed32)this.pos+=4;else{if(i!==ii.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(l,i){this.writeVarint(l<<3|i)},realloc:function(l){for(var i=this.length||16;i<this.pos+l;)i*=2;if(i!==this.length){var a=new Uint8Array(i);a.set(this.buf),this.buf=a,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(l){this.realloc(4),Vh(this.buf,l,this.pos),this.pos+=4},writeSFixed32:function(l){this.realloc(4),Vh(this.buf,l,this.pos),this.pos+=4},writeFixed64:function(l){this.realloc(8),Vh(this.buf,-1&l,this.pos),Vh(this.buf,Math.floor(l*IC),this.pos+4),this.pos+=8},writeSFixed64:function(l){this.realloc(8),Vh(this.buf,-1&l,this.pos),Vh(this.buf,Math.floor(l*IC),this.pos+4),this.pos+=8},writeVarint:function(l){(l=+l||0)>268435455||l<0?function(i,a){var h,p;if(i>=0?(h=i%4294967296|0,p=i/4294967296|0):(p=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,p=p+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(g,v,x){x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7)}(h,0,a),function(g,v){var x=(7&g)<<4;v.buf[v.pos++]|=x|((g>>>=3)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g)))))}(p,a)}(l,this):(this.realloc(4),this.buf[this.pos++]=127&l|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=127&(l>>>=7)|(l>127?128:0),l<=127||(this.buf[this.pos++]=l>>>7&127))))},writeSVarint:function(l){this.writeVarint(l<0?2*-l-1:2*l)},writeBoolean:function(l){this.writeVarint(Boolean(l))},writeString:function(l){l=String(l),this.realloc(4*l.length),this.pos++;var i=this.pos;this.pos=function(h,p,g){for(var v,x,S=0;S<p.length;S++){if((v=p.charCodeAt(S))>55295&&v<57344){if(!x){v>56319||S+1===p.length?(h[g++]=239,h[g++]=191,h[g++]=189):x=v;continue}if(v<56320){h[g++]=239,h[g++]=191,h[g++]=189,x=v;continue}v=x-55296<<10|v-56320|65536,x=null}else x&&(h[g++]=239,h[g++]=191,h[g++]=189,x=null);v<128?h[g++]=v:(v<2048?h[g++]=v>>6|192:(v<65536?h[g++]=v>>12|224:(h[g++]=v>>18|240,h[g++]=v>>12&63|128),h[g++]=v>>6&63|128),h[g++]=63&v|128)}return g}(this.buf,l,this.pos);var a=this.pos-i;a>=128&&OC(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeFloat:function(l){this.realloc(4),DC(this.buf,l,this.pos,!0,23,4),this.pos+=4},writeDouble:function(l){this.realloc(8),DC(this.buf,l,this.pos,!0,52,8),this.pos+=8},writeBytes:function(l){var i=l.length;this.writeVarint(i),this.realloc(i);for(var a=0;a<i;a++)this.buf[this.pos++]=l[a]},writeRawMessage:function(l,i){this.pos++;var a=this.pos;l(i,this);var h=this.pos-a;h>=128&&OC(a,h,this),this.pos=a-1,this.writeVarint(h),this.pos+=h},writeMessage:function(l,i,a){this.writeTag(l,ii.Bytes),this.writeRawMessage(i,a)},writePackedVarint:function(l,i){i.length&&this.writeMessage(l,PF,i)},writePackedSVarint:function(l,i){i.length&&this.writeMessage(l,OF,i)},writePackedBoolean:function(l,i){i.length&&this.writeMessage(l,RF,i)},writePackedFloat:function(l,i){i.length&&this.writeMessage(l,LF,i)},writePackedDouble:function(l,i){i.length&&this.writeMessage(l,zF,i)},writePackedFixed32:function(l,i){i.length&&this.writeMessage(l,FF,i)},writePackedSFixed32:function(l,i){i.length&&this.writeMessage(l,BF,i)},writePackedFixed64:function(l,i){i.length&&this.writeMessage(l,NF,i)},writePackedSFixed64:function(l,i){i.length&&this.writeMessage(l,VF,i)},writeBytesField:function(l,i){this.writeTag(l,ii.Bytes),this.writeBytes(i)},writeFixed32Field:function(l,i){this.writeTag(l,ii.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(l,i){this.writeTag(l,ii.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(l,i){this.writeTag(l,ii.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(l,i){this.writeTag(l,ii.Fixed64),this.writeSFixed64(i)},writeVarintField:function(l,i){this.writeTag(l,ii.Varint),this.writeVarint(i)},writeSVarintField:function(l,i){this.writeTag(l,ii.Varint),this.writeSVarint(i)},writeStringField:function(l,i){this.writeTag(l,ii.Bytes),this.writeString(i)},writeFloatField:function(l,i){this.writeTag(l,ii.Fixed32),this.writeFloat(i)},writeDoubleField:function(l,i){this.writeTag(l,ii.Fixed64),this.writeDouble(i)},writeBooleanField:function(l,i){this.writeVarintField(l,Boolean(i))}};class M1{constructor(i,{pixelRatio:a,version:h,stretchX:p,stretchY:g,content:v}){this.paddedRect=i,this.pixelRatio=a,this.stretchX=p,this.stretchY=g,this.content=v,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zC{constructor(i,a){const h={},p={};this.haveRenderCallbacks=[];const g=[];this.addImages(i,h,g),this.addImages(a,p,g);const{w:v,h:x}=C1(g),S=new Co({width:v||1,height:x||1});for(const T in i){const D=i[T],P=h[T].paddedRect;Co.copy(D.data,S,{x:0,y:0},{x:P.x+1,y:P.y+1},D.data)}for(const T in a){const D=a[T],P=p[T].paddedRect,L=P.x+1,F=P.y+1,V=D.data.width,q=D.data.height;Co.copy(D.data,S,{x:0,y:0},{x:L,y:F},D.data),Co.copy(D.data,S,{x:0,y:q-1},{x:L,y:F-1},{width:V,height:1}),Co.copy(D.data,S,{x:0,y:0},{x:L,y:F+q},{width:V,height:1}),Co.copy(D.data,S,{x:V-1,y:0},{x:L-1,y:F},{width:1,height:q}),Co.copy(D.data,S,{x:0,y:0},{x:L+V,y:F},{width:1,height:q})}this.image=S,this.iconPositions=h,this.patternPositions=p}addImages(i,a,h){for(const p in i){const g=i[p],v={x:0,y:0,w:g.data.width+2,h:g.data.height+2};h.push(v),a[p]=new M1(v,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>i.hasImage(h)),i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),a),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),a)}patchUpdatedImage(i,a,h){if(!i||!a||i.version===a.version)return;i.version=a.version;const[p,g]=i.tl;h.update(a.data,void 0,{x:p,y:g})}}zt(M1,"ImagePosition"),zt(zC,"ImageAtlas");const Wo={horizontal:1,vertical:2,horizontalOnly:3};class Cp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,a){const h=new Cp;return h.scale=i||1,h.fontStack=a,h}static forImage(i){const a=new Cp;return a.imageName=i,a}}class jh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,a){const h=new jh;for(let p=0;p<i.sections.length;p++){const g=i.sections[p];g.image?h.addImageSection(g):h.addTextSection(g,a)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSections(){return this.sections}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(i){this.text=function(a,h){let p="";for(let g=0;g<a.length;g++){const v=a.charCodeAt(g+1)||null,x=a.charCodeAt(g-1)||null;p+=!h&&(v&&Qc(v)&&!Sp[a[g+1]]||x&&Qc(x)&&!Sp[a[g-1]])||!Sp[a[g]]?a[g]:Sp[a[g]]}return p}(this.text,i)}trim(){let i=0;for(let h=0;h<this.text.length&&K_[this.text.charCodeAt(h)];h++)i++;let a=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&K_[this.text.charCodeAt(h)];h--)a--;this.text=this.text.substring(i,a),this.sectionIndex=this.sectionIndex.slice(i,a)}substring(i,a){const h=new jh;return h.text=this.text.substring(i,a),h.sectionIndex=this.sectionIndex.slice(i,a),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,a)=>Math.max(i,this.sections[a].scale),0)}addTextSection(i,a){this.text+=i.text,this.sections.push(Cp.forText(i.scale,i.fontStack||a));const h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i){const a=i.image?i.image.name:"";if(a.length===0)return void at("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Cp.forImage(a)),this.sectionIndex.push(this.sections.length-1)):at("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function k1(l,i,a,h,p,g,v,x,S,T,D,P,L,F,V,q){const K=jh.fromFeature(l,p);let le;P===Wo.vertical&&K.verticalizePunctuation(L);const{processBidirectionalText:ge,processStyledBidirectionalText:ue}=ee;if(ge&&K.sections.length===1){le=[];const _e=ge(K.toString(),A1(K,T,g,i,h,F,V));for(const Be of _e){const Fe=new jh;Fe.text=Be,Fe.sections=K.sections;for(let He=0;He<Be.length;He++)Fe.sectionIndex.push(0);le.push(Fe)}}else if(ue){le=[];const _e=ue(K.text,K.sectionIndex,A1(K,T,g,i,h,F,V));for(const Be of _e){const Fe=new jh;Fe.text=Be[0],Fe.sectionIndex=Be[1],Fe.sections=K.sections,le.push(Fe)}}else le=function(_e,Be){const Fe=[],He=_e.text;let dt=0;for(const Ue of Be)Fe.push(_e.substring(dt,Ue)),dt=Ue;return dt<He.length&&Fe.push(_e.substring(dt,He.length)),Fe}(K,A1(K,T,g,i,h,F,V));const pe=[],Te={positionedLines:pe,text:K.toString(),top:D[1],bottom:D[1],left:D[0],right:D[0],writingMode:P,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(_e,Be,Fe,He,dt,Ue,Xe,nt,Ke,ht,it,Ct){let fn=0,mn=0,Wt=0;const vt=nt==="right"?1:nt==="left"?0:.5;let En=!1;for(const _n of dt){const Pn=_n.getSections();for(const oi of Pn){if(oi.imageName)continue;const Jn=Be[oi.fontStack];if(Jn&&(En=Jn.ascender!==void 0&&Jn.descender!==void 0,!En))break}if(!En)break}let sn=0;for(const _n of dt){_n.trim();const Pn=_n.getMaxScale(),oi=(Pn-1)*Cr,Jn={positionedGlyphs:[],lineOffset:0};_e.positionedLines[sn]=Jn;const qn=Jn.positionedGlyphs;let di=0;if(!_n.length()){mn+=Ue,++sn;continue}let Ei=0,pr=0;for(let Cn=0;Cn<_n.length();Cn++){const zi=_n.getSection(Cn),Rr=_n.getSectionIndex(Cn),Rn=_n.getCharCode(Cn);let Si=zi.scale,qr=null,yi=null,$i=null,mr=Cr,cr=0;const Mr=!(Ke===Wo.horizontal||!it&&!Dh(Rn)||it&&(K_[Rn]||(Pt=Rn,__(Pt)||y_(Pt)||v_(Pt)||Jc(Pt)||lp(Pt))));if(zi.imageName){const Yr=He[zi.imageName];if(!Yr)continue;$i=zi.imageName,_e.iconsInText=_e.iconsInText||!0,yi=Yr.paddedRect;const gr=Yr.displaySize;Si=Si*Cr/Ct,qr={width:gr[0],height:gr[1],left:1,top:-3,advance:Mr?gr[1]:gr[0],localGlyph:!1},cr=En?-qr.height*Si:Pn*Cr-17-gr[1]*Si,mr=qr.advance;const Ha=(Mr?gr[0]:gr[1])*Si-Cr*Pn;Ha>0&&Ha>di&&(di=Ha)}else{const Yr=Fe[zi.fontStack];if(!Yr)continue;Yr[Rn]&&(yi=Yr[Rn]);const gr=Be[zi.fontStack];if(!gr)continue;const Ha=gr.glyphs[Rn];if(!Ha)continue;if(qr=Ha.metrics,mr=Rn!==8203?Cr:0,En){const Yh=gr.ascender!==void 0?Math.abs(gr.ascender):0,Bp=gr.descender!==void 0?Math.abs(gr.descender):0,Np=(Yh+Bp)*Si;Ei<Np&&(Ei=Np,pr=(Yh-Bp)/2*Si),cr=-Yh*Si}else cr=(Pn-Si)*Cr-17}Mr?(_e.verticalizable=!0,qn.push({glyph:Rn,imageName:$i,x:fn,y:mn+cr,vertical:Mr,scale:Si,localGlyph:qr.localGlyph,fontStack:zi.fontStack,sectionIndex:Rr,metrics:qr,rect:yi}),fn+=mr*Si+ht):(qn.push({glyph:Rn,imageName:$i,x:fn,y:mn+cr,vertical:Mr,scale:Si,localGlyph:qr.localGlyph,fontStack:zi.fontStack,sectionIndex:Rr,metrics:qr,rect:yi}),fn+=qr.advance*Si+ht)}qn.length!==0&&(Wt=Math.max(fn-ht,Wt),En?VC(qn,vt,di,pr,Ue*Pn/2):VC(qn,vt,di,0,Ue/2)),fn=0;const mo=Ue*Pn+di;Jn.lineOffset=Math.max(di,oi),mn+=mo,++sn}var Pt;const ri=mn,{horizontalAlign:Kn,verticalAlign:_i}=D1(Xe);(function(_n,Pn,oi,Jn,qn,di){const Ei=(Pn-oi)*qn,pr=-di*Jn;for(const mo of _n)for(const Cn of mo.positionedGlyphs)Cn.x+=Ei,Cn.y+=pr})(_e.positionedLines,vt,Kn,_i,Wt,ri),_e.top+=-_i*ri,_e.bottom=_e.top+ri,_e.left+=-Kn*Wt,_e.right=_e.left+Wt,_e.hasBaseline=En}(Te,i,a,h,le,v,x,S,P,T,L,q),!function(_e){for(const Be of _e)if(Be.positionedGlyphs.length!==0)return!1;return!0}(pe)&&Te}const K_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},GF={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function RC(l,i,a,h,p,g){if(i.imageName){const v=h[i.imageName];return v?v.displaySize[0]*i.scale*Cr/g+p:0}{const v=a[i.fontStack],x=v&&v.glyphs[l];return x?x.metrics.advance*i.scale+p:0}}function FC(l,i,a,h){const p=Math.pow(l-i,2);return h?l<i?p/2:2*p:p+Math.abs(a)*a}function WF(l,i,a){let h=0;return l===10&&(h-=1e4),a&&(h+=150),l!==40&&l!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function BC(l,i,a,h,p,g){let v=null,x=FC(i,a,p,g);for(const S of h){const T=FC(i-S.x,a,p,g)+S.badness;T<=x&&(v=S,x=T)}return{index:l,x:i,priorBreak:v,badness:x}}function NC(l){return l?NC(l.priorBreak).concat(l.index):[]}function A1(l,i,a,h,p,g,v){if(g!=="point")return[];if(!l)return[];const x=[],S=function(L,F,V,q,K,le){let ge=0;for(let ue=0;ue<L.length();ue++){const pe=L.getSection(ue);ge+=RC(L.getCharCode(ue),pe,q,K,F,le)}return ge/Math.max(1,Math.ceil(ge/V))}(l,i,a,h,p,v),T=l.text.indexOf("\u200B")>=0;let D=0;for(let L=0;L<l.length();L++){const F=l.getSection(L),V=l.getCharCode(L);if(K_[V]||(D+=RC(V,F,h,p,i,v)),L<l.length()-1){const q=!((P=V)<11904||!(np(P)||w_(P)||ap(P)||C_(P)||op(P)||x_(P)||E_(P)||Mh(P)||sp(P)||Kc(P)||rp(P)||cp(P)||tp(P)||Xc(P)||b_(P)||ip(P)||Pa(P)||M_(P)||S_(P)||kh(P)));(GF[V]||q||F.imageName)&&x.push(BC(L+1,D,S,x,WF(V,l.getCharCode(L+1),q&&T),!1))}}var P;return NC(BC(l.length(),D,S,x,0,!0))}function D1(l){let i=.5,a=.5;switch(l){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:i,verticalAlign:a}}function VC(l,i,a,h,p){if(!(i||a||h||p))return;const g=l.length-1,v=l[g],x=(v.x+v.metrics.advance*v.scale)*i;for(let S=0;S<=g;S++)l[S].x-=x,l[S].y+=a+h+p}function HF(l,i,a){const{horizontalAlign:h,verticalAlign:p}=D1(a),g=i[0]-l.displaySize[0]*h,v=i[1]-l.displaySize[1]*p;return{image:l,top:v,bottom:v+l.displaySize[1],left:g,right:g+l.displaySize[0]}}function jC(l,i,a,h,p,g){const v=l.image;let x;if(v.content){const K=v.content,le=v.pixelRatio||1;x=[K[0]/le,K[1]/le,v.displaySize[0]-K[2]/le,v.displaySize[1]-K[3]/le]}const S=i.left*g,T=i.right*g;let D,P,L,F;a==="width"||a==="both"?(F=p[0]+S-h[3],P=p[0]+T+h[1]):(F=p[0]+(S+T-v.displaySize[0])/2,P=F+v.displaySize[0]);const V=i.top*g,q=i.bottom*g;return a==="height"||a==="both"?(D=p[1]+V-h[0],L=p[1]+q+h[2]):(D=p[1]+(V+q-v.displaySize[1])/2,L=D+v.displaySize[1]),{image:v,top:D,right:P,bottom:L,left:F,collisionPadding:x}}class Ga extends k{constructor(i,a,h,p,g){super(i,a),this.angle=p,this.z=h,g!==void 0&&(this.segment=g)}clone(){return new Ga(this.x,this.y,this.z,this.angle,this.segment)}}function UC(l,i,a,h,p){if(i.segment===void 0)return!0;let g=i,v=i.segment+1,x=0;for(;x>-a/2;){if(v--,v<0)return!1;x-=l[v].dist(g),g=l[v]}x+=l[v].dist(l[v+1]),v++;const S=[];let T=0;for(;x<a/2;){const D=l[v],P=l[v+1];if(!P)return!1;let L=l[v-1].angleTo(D)-D.angleTo(P);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:L}),T+=L;x-S[0].distance>h;)T-=S.shift().angleDelta;if(T>p)return!1;v++,x+=D.dist(P)}return!0}function $C(l){let i=0;for(let a=0;a<l.length-1;a++)i+=l[a].dist(l[a+1]);return i}function GC(l,i,a){return l?.6*i*a:0}function WC(l,i){return Math.max(l?l.right-l.left:0,i?i.right-i.left:0)}function qF(l,i,a,h,p,g){const v=GC(a,p,g),x=WC(a,h)*g;let S=0;const T=$C(l)/2;for(let D=0;D<l.length-1;D++){const P=l[D],L=l[D+1],F=P.dist(L);if(S+F>T){const V=(T-S)/F,q=Dn(P.x,L.x,V),K=Dn(P.y,L.y,V),le=new Ga(q,K,0,L.angleTo(P),D);return!v||UC(l,le,x,v,i)?le:void 0}S+=F}}function YF(l,i,a,h,p,g,v,x,S){const T=GC(h,g,v),D=WC(h,p),P=D*v,L=l[0].x===0||l[0].x===S||l[0].y===0||l[0].y===S;return i-P<i/4&&(i=P+i/4),HC(l,L?i/2*x%i:(D/2+2*g)*v*x%i,i,T,a,P,L,!1,S)}function HC(l,i,a,h,p,g,v,x,S){const T=g/2,D=$C(l);let P=0,L=i-a,F=[];for(let V=0;V<l.length-1;V++){const q=l[V],K=l[V+1],le=q.dist(K),ge=K.angleTo(q);for(;L+a<P+le;){L+=a;const ue=(L-P)/le,pe=Dn(q.x,K.x,ue),Te=Dn(q.y,K.y,ue);if(pe>=0&&pe<S&&Te>=0&&Te<S&&L-T>=0&&L+T<=D){const _e=new Ga(pe,Te,0,ge,V);_e._round(),h&&!UC(l,_e,g,h,p)||F.push(_e)}}P+=le}return x||F.length||v||(F=HC(l,P/2,a,h,p,g,v,!0,S)),F}function qC(l,i,a,h,p){const g=[];for(let v=0;v<l.length;v++){const x=l[v];let S;for(let T=0;T<x.length-1;T++){let D=x[T],P=x[T+1];D.x<i&&P.x<i||(D.x<i?D=new k(i,D.y+(i-D.x)/(P.x-D.x)*(P.y-D.y))._round():P.x<i&&(P=new k(i,D.y+(i-D.x)/(P.x-D.x)*(P.y-D.y))._round()),D.y<a&&P.y<a||(D.y<a?D=new k(D.x+(a-D.y)/(P.y-D.y)*(P.x-D.x),a)._round():P.y<a&&(P=new k(D.x+(a-D.y)/(P.y-D.y)*(P.x-D.x),a)._round()),D.x>=h&&P.x>=h||(D.x>=h?D=new k(h,D.y+(h-D.x)/(P.x-D.x)*(P.y-D.y))._round():P.x>=h&&(P=new k(h,D.y+(h-D.x)/(P.x-D.x)*(P.y-D.y))._round()),D.y>=p&&P.y>=p||(D.y>=p?D=new k(D.x+(p-D.y)/(P.y-D.y)*(P.x-D.x),p)._round():P.y>=p&&(P=new k(D.x+(p-D.y)/(P.y-D.y)*(P.x-D.x),p)._round()),S&&D.equals(S[S.length-1])||(S=[D],g.push(S)),S.push(P)))))}}return g}zt(Ga,"Anchor");const Mp=1e20;function YC(l,i,a,h,p,g,v,x,S){for(let T=i;T<i+h;T++)ZC(l,a*g+T,g,p,v,x,S);for(let T=a;T<a+p;T++)ZC(l,T*g+i,1,h,v,x,S)}function ZC(l,i,a,h,p,g,v){g[0]=0,v[0]=-Mp,v[1]=Mp,p[0]=l[i];for(let x=1,S=0,T=0;x<h;x++){p[x]=l[i+x*a];const D=x*x;do{const P=g[S];T=(p[x]-p[P]+D-P*P)/(x-P)/2}while(T<=v[S]&&--S>-1);S++,g[S]=x,v[S]=T,v[S+1]=Mp}for(let x=0,S=0;x<h;x++){for(;v[S+1]<x;)S++;const T=g[S],D=x-T;l[i+x*a]=p[T]+D*D}}const I1={none:0,ideographs:1,all:2};class Uh{constructor(i,a,h){this.requestManager=i,this.localGlyphMode=a,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(i){this.url=i}getGlyphs(i,a){const h=[];for(const p in i)for(const g of i[p])h.push({stack:p,id:g});je(h,({stack:p,id:g},v)=>{let x=this.entries[p];x||(x=this.entries[p]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let S=x.glyphs[g];if(S!==void 0)return void v(null,{stack:p,id:g,glyph:S});if(S=this._tinySDF(x,p,g),S)return x.glyphs[g]=S,void v(null,{stack:p,id:g,glyph:S});const T=Math.floor(g/256);if(256*T>65535)return void v(new Error("glyphs > 65535 not supported"));if(x.ranges[T])return void v(null,{stack:p,id:g,glyph:S});let D=x.requests[T];D||(D=x.requests[T]=[],Uh.loadGlyphRange(p,T,this.url,this.requestManager,(P,L)=>{if(L){x.ascender=L.ascender,x.descender=L.descender;for(const F in L.glyphs)this._doesCharSupportLocalGlyph(+F)||(x.glyphs[+F]=L.glyphs[+F]);x.ranges[T]=!0}for(const F of D)F(P,L);delete x.requests[T]})),D.push((P,L)=>{P?v(P):L&&v(null,{stack:p,id:g,glyph:L.glyphs[g]||null})})},(p,g)=>{if(p)a(p);else if(g){const v={};for(const{stack:x,id:S,glyph:T}of g)v[x]===void 0&&(v[x]={}),v[x].glyphs===void 0&&(v[x].glyphs={}),v[x].glyphs[S]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics},v[x].ascender=this.entries[x].ascender,v[x].descender=this.entries[x].descender;a(null,v)}})}_doesCharSupportLocalGlyph(i){return this.localGlyphMode!==I1.none&&(this.localGlyphMode===I1.all?!!this.localFontFamily:!!this.localFontFamily&&(Kc(i)||T_(i)||tp(i)||Pa(i)||Mh(i)))}_tinySDF(i,a,h){const p=this.localFontFamily;if(!p||!this._doesCharSupportLocalGlyph(h))return;let g=i.tinySDF;if(!g){let q="400";/bold/i.test(a)?q="900":/medium/i.test(a)?q="500":/light/i.test(a)&&(q="200"),g=i.tinySDF=new Uh.TinySDF({fontFamily:p,fontWeight:q,fontSize:48,buffer:6,radius:16}),g.fontWeight=q}if(this.localGlyphs[g.fontWeight][h])return this.localGlyphs[g.fontWeight][h];const v=String.fromCharCode(h),{data:x,width:S,height:T,glyphWidth:D,glyphHeight:P,glyphLeft:L,glyphTop:F,glyphAdvance:V}=g.draw(v);return this.localGlyphs[g.fontWeight][h]={id:h,bitmap:new Ua({width:S,height:T},x),metrics:{width:D/2,height:P/2,left:L/2,top:F/2-27,advance:V/2,localGlyph:!0}}}}function XC(l,i,a,h){const p=[],g=l.image,v=g.pixelRatio,x=g.paddedRect.w-2,S=g.paddedRect.h-2,T=l.right-l.left,D=l.bottom-l.top,P=g.stretchX||[[0,x]],L=g.stretchY||[[0,S]],F=(Ue,Xe)=>Ue+Xe[1]-Xe[0],V=P.reduce(F,0),q=L.reduce(F,0),K=x-V,le=S-q;let ge=0,ue=V,pe=0,Te=q,_e=0,Be=K,Fe=0,He=le;if(g.content&&h){const Ue=g.content;ge=J_(P,0,Ue[0]),pe=J_(L,0,Ue[1]),ue=J_(P,Ue[0],Ue[2]),Te=J_(L,Ue[1],Ue[3]),_e=Ue[0]-ge,Fe=Ue[1]-pe,Be=Ue[2]-Ue[0]-ue,He=Ue[3]-Ue[1]-Te}const dt=(Ue,Xe,nt,Ke)=>{const ht=Q_(Ue.stretch-ge,ue,T,l.left),it=ey(Ue.fixed-_e,Be,Ue.stretch,V),Ct=Q_(Xe.stretch-pe,Te,D,l.top),fn=ey(Xe.fixed-Fe,He,Xe.stretch,q),mn=Q_(nt.stretch-ge,ue,T,l.left),Wt=ey(nt.fixed-_e,Be,nt.stretch,V),vt=Q_(Ke.stretch-pe,Te,D,l.top),En=ey(Ke.fixed-Fe,He,Ke.stretch,q),sn=new k(ht,Ct),Pt=new k(mn,Ct),ri=new k(mn,vt),Kn=new k(ht,vt),_i=new k(it/v,fn/v),_n=new k(Wt/v,En/v),Pn=i*Math.PI/180;if(Pn){const qn=Math.sin(Pn),di=Math.cos(Pn),Ei=[di,-qn,qn,di];sn._matMult(Ei),Pt._matMult(Ei),Kn._matMult(Ei),ri._matMult(Ei)}const oi=Ue.stretch+Ue.fixed,Jn=Xe.stretch+Xe.fixed;return{tl:sn,tr:Pt,bl:Kn,br:ri,tex:{x:g.paddedRect.x+1+oi,y:g.paddedRect.y+1+Jn,w:nt.stretch+nt.fixed-oi,h:Ke.stretch+Ke.fixed-Jn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_i,pixelOffsetBR:_n,minFontScaleX:Be/v/T,minFontScaleY:He/v/D,isSDF:a}};if(h&&(g.stretchX||g.stretchY)){const Ue=KC(P,K,V),Xe=KC(L,le,q);for(let nt=0;nt<Ue.length-1;nt++){const Ke=Ue[nt],ht=Ue[nt+1];for(let it=0;it<Xe.length-1;it++)p.push(dt(Ke,Xe[it],ht,Xe[it+1]))}}else p.push(dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return p}function J_(l,i,a){let h=0;for(const p of l)h+=Math.max(i,Math.min(a,p[1]))-Math.max(i,Math.min(a,p[0]));return h}function KC(l,i,a){const h=[{fixed:-1,stretch:0}];for(const[p,g]of l){const v=h[h.length-1];h.push({fixed:p-v.stretch,stretch:v.stretch}),h.push({fixed:p-v.stretch,stretch:v.stretch+(g-p)})}return h.push({fixed:i+1,stretch:a}),h}function Q_(l,i,a,h){return l/i*a+h}function ey(l,i,a,h){return l-i*a/h}function ZF(l,i,a,h){const p=i+l.positionedLines[h].lineOffset;return h===0?a+p/2:a+(p+(i+l.positionedLines[h-1].lineOffset))/2}Uh.loadGlyphRange=function(l,i,a,h,p){const g=256*i,v=g+255,x=h.transformRequest(h.normalizeGlyphsURL(a).replace("{fontstack}",l).replace("{range}",`${g}-${v}`),ye.Glyphs);Oe(x,(S,T)=>{if(S)p(S);else if(T){const D={},P=function(L){return new Tp(L).readFields(jF,{})}(T);for(const L of P.glyphs)D[L.id]=L;p(null,{glyphs:D,ascender:P.ascender,descender:P.descender})}})},Uh.TinySDF=class{constructor({fontSize:l=24,buffer:i=3,radius:a=8,cutoff:h=.25,fontFamily:p="sans-serif",fontWeight:g="normal",fontStyle:v="normal"}={}){this.buffer=i,this.cutoff=h,this.radius=a;const x=this.size=l+4*i,S=this._createCanvas(x),T=this.ctx=S.getContext("2d",{willReadFrequently:!0});T.font=`${v} ${g} ${l}px ${p}`,T.textBaseline="alphabetic",T.textAlign="left",T.fillStyle="black",this.gridOuter=new Float64Array(x*x),this.gridInner=new Float64Array(x*x),this.f=new Float64Array(x),this.z=new Float64Array(x+1),this.v=new Uint16Array(x)}_createCanvas(l){const i=document.createElement("canvas");return i.width=i.height=l,i}draw(l){const{width:i,actualBoundingBoxAscent:a,actualBoundingBoxDescent:h,actualBoundingBoxLeft:p,actualBoundingBoxRight:g}=this.ctx.measureText(l),v=Math.ceil(a),x=Math.min(this.size-this.buffer,Math.ceil(g-p)),S=Math.min(this.size-this.buffer,v+Math.ceil(h)),T=x+2*this.buffer,D=S+2*this.buffer,P=Math.max(T*D,0),L=new Uint8ClampedArray(P),F={data:L,width:T,height:D,glyphWidth:x,glyphHeight:S,glyphTop:v,glyphLeft:0,glyphAdvance:i};if(x===0||S===0)return F;const{ctx:V,buffer:q,gridInner:K,gridOuter:le}=this;V.clearRect(q,q,x,S),V.fillText(l,q,q+v);const ge=V.getImageData(q,q,x,S);le.fill(Mp,0,P),K.fill(0,0,P);for(let ue=0;ue<S;ue++)for(let pe=0;pe<x;pe++){const Te=ge.data[4*(ue*x+pe)+3]/255;if(Te===0)continue;const _e=(ue+q)*T+pe+q;if(Te===1)le[_e]=0,K[_e]=Mp;else{const Be=.5-Te;le[_e]=Be>0?Be*Be:0,K[_e]=Be<0?Be*Be:0}}YC(le,0,0,T,D,T,this.f,this.v,this.z),YC(K,q,q,x,S,T,this.f,this.v,this.z);for(let ue=0;ue<P;ue++){const pe=Math.sqrt(le[ue])-Math.sqrt(K[ue]);L[ue]=Math.round(255-255*(pe/this.radius+this.cutoff))}return F}};class XF{constructor(i=[],a=KF){if(this.data=i,this.length=this.data.length,this.compare=a,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const i=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:a,compare:h}=this,p=a[i];for(;i>0;){const g=i-1>>1,v=a[g];if(h(p,v)>=0)break;a[i]=v,i=g}a[i]=p}_down(i){const{data:a,compare:h}=this,p=this.length>>1,g=a[i];for(;i<p;){let v=1+(i<<1),x=a[v];const S=v+1;if(S<this.length&&h(a[S],x)<0&&(v=S,x=a[S]),h(x,g)>=0)break;a[i]=x,i=v}a[i]=g}}function KF(l,i){return l<i?-1:l>i?1:0}function JF(l,i=1,a=!1){let h=1/0,p=1/0,g=-1/0,v=-1/0;const x=l[0];for(let F=0;F<x.length;F++){const V=x[F];(!F||V.x<h)&&(h=V.x),(!F||V.y<p)&&(p=V.y),(!F||V.x>g)&&(g=V.x),(!F||V.y>v)&&(v=V.y)}const S=Math.min(g-h,v-p);let T=S/2;const D=new XF([],QF);if(S===0)return new k(h,p);for(let F=h;F<g;F+=S)for(let V=p;V<v;V+=S)D.push(new $h(F+T,V+T,T,l));let P=function(F){let V=0,q=0,K=0;const le=F[0];for(let ge=0,ue=le.length,pe=ue-1;ge<ue;pe=ge++){const Te=le[ge],_e=le[pe],Be=Te.x*_e.y-_e.x*Te.y;q+=(Te.x+_e.x)*Be,K+=(Te.y+_e.y)*Be,V+=3*Be}return new $h(q/V,K/V,0,F)}(l),L=D.length;for(;D.length;){const F=D.pop();(F.d>P.d||!P.d)&&(P=F,a&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,L)),F.max-P.d<=i||(T=F.h/2,D.push(new $h(F.p.x-T,F.p.y-T,T,l)),D.push(new $h(F.p.x+T,F.p.y-T,T,l)),D.push(new $h(F.p.x-T,F.p.y+T,T,l)),D.push(new $h(F.p.x+T,F.p.y+T,T,l)),L+=4)}return a&&(console.log(`num probes: ${L}`),console.log(`best distance: ${P.d}`)),P.p}function QF(l,i){return i.max-l.max}function $h(l,i,a,h){this.p=new k(l,i),this.h=a,this.d=function(p,g){let v=!1,x=1/0;for(let S=0;S<g.length;S++){const T=g[S];for(let D=0,P=T.length,L=P-1;D<P;L=D++){const F=T[D],V=T[L];F.y>p.y!=V.y>p.y&&p.x<(V.x-F.x)*(p.y-F.y)/(V.y-F.y)+F.x&&(v=!v),x=Math.min(x,BT(p,F,V))}}return(v?1:-1)*Math.sqrt(x)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}const P1=Number.POSITIVE_INFINITY,e4=Math.sqrt(2);function JC(l,i){return i[1]!==P1?function(a,h,p){let g=0,v=0;switch(h=Math.abs(h),p=Math.abs(p),a){case"top-right":case"top-left":case"top":v=p-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-p}switch(a){case"top-right":case"bottom-right":case"right":g=-h;break;case"top-left":case"bottom-left":case"left":g=h}return[g,v]}(l,i[0],i[1]):function(a,h){let p=0,g=0;h<0&&(h=0);const v=h/e4;switch(a){case"top-right":case"top-left":g=v-7;break;case"bottom-right":case"bottom-left":g=7-v;break;case"bottom":g=7-h;break;case"top":g=h-7}switch(a){case"top-right":case"bottom-right":p=-v;break;case"top-left":case"bottom-left":p=v;break;case"left":p=h;break;case"right":p=-h}return[p,g]}(l,i[0])}function t4(l,i,a,h,p,g,v,x,S,T){l.createArrays(),l.tilePixelRatio=nn/(512*l.overscaling),l.compareText={},l.iconsNeedLinear=!1;const D=l.layers[0].layout,P=l.layers[0]._unevaluatedLayout._values,L={};if(l.textSizeData.kind==="composite"){const{minZoom:q,maxZoom:K}=l.textSizeData;L.compositeTextSizes=[P["text-size"].possiblyEvaluate(new te(q),x),P["text-size"].possiblyEvaluate(new te(K),x)]}if(l.iconSizeData.kind==="composite"){const{minZoom:q,maxZoom:K}=l.iconSizeData;L.compositeIconSizes=[P["icon-size"].possiblyEvaluate(new te(q),x),P["icon-size"].possiblyEvaluate(new te(K),x)]}L.layoutTextSize=P["text-size"].possiblyEvaluate(new te(S+1),x),L.layoutIconSize=P["icon-size"].possiblyEvaluate(new te(S+1),x),L.textMaxSize=P["text-size"].possiblyEvaluate(new te(18),x);const F=D.get("text-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",V=D.get("text-size");for(const q of l.features){const K=D.get("text-font").evaluate(q,{},x).join(","),le=V.evaluate(q,{},x),ge=L.layoutTextSize.evaluate(q,{},x),ue=(L.layoutIconSize.evaluate(q,{},x),{horizontal:{},vertical:void 0}),pe=q.text;let Te,_e=[0,0];if(pe){const He=pe.toString(),dt=D.get("text-letter-spacing").evaluate(q,{},x)*Cr,Ue=D.get("text-line-height").evaluate(q,{},x)*Cr,Xe=Yx(He)?dt:0,nt=D.get("text-anchor").evaluate(q,{},x),Ke=D.get("text-variable-anchor");if(!Ke){const Wt=D.get("text-radial-offset").evaluate(q,{},x);_e=Wt?JC(nt,[Wt*Cr,P1]):D.get("text-offset").evaluate(q,{},x).map(vt=>vt*Cr)}let ht=F?"center":D.get("text-justify").evaluate(q,{},x);const it=D.get("symbol-placement"),Ct=it==="point",fn=it==="point"?D.get("text-max-width").evaluate(q,{},x)*Cr:0,mn=Wt=>{l.allowVerticalPlacement&&Ah(He)&&(ue.vertical=k1(pe,i,a,p,K,fn,Ue,nt,Wt,Xe,_e,Wo.vertical,!0,it,ge,le))};if(!F&&Ke){const Wt=ht==="auto"?Ke.map(En=>O1(En)):[ht];let vt=!1;for(let En=0;En<Wt.length;En++){const sn=Wt[En];if(!ue.horizontal[sn])if(vt)ue.horizontal[sn]=ue.horizontal[0];else{const Pt=k1(pe,i,a,p,K,fn,Ue,"center",sn,Xe,_e,Wo.horizontal,!1,it,ge,le);Pt&&(ue.horizontal[sn]=Pt,vt=Pt.positionedLines.length===1)}}mn("left")}else{if(ht==="auto"&&(ht=O1(nt)),Ct||D.get("text-writing-mode").indexOf("horizontal")>=0||!Ah(He)){const Wt=k1(pe,i,a,p,K,fn,Ue,nt,ht,Xe,_e,Wo.horizontal,!1,it,ge,le);Wt&&(ue.horizontal[ht]=Wt)}mn(it==="point"?"left":ht)}}let Be=!1;if(q.icon&&q.icon.name){const He=h[q.icon.name];He&&(Te=HF(p[q.icon.name],D.get("icon-offset").evaluate(q,{},x),D.get("icon-anchor").evaluate(q,{},x)),Be=He.sdf,l.sdfIcons===void 0?l.sdfIcons=He.sdf:l.sdfIcons!==He.sdf&&at("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(He.pixelRatio!==l.pixelRatio||D.get("icon-rotate").constantOr(1)!==0)&&(l.iconsNeedLinear=!0))}const Fe=eM(ue.horizontal)||ue.vertical;l.iconsInText||(l.iconsInText=!!Fe&&Fe.iconsInText),(Fe||Te)&&n4(l,q,ue,Te,h,L,ge,0,_e,Be,v,x,T)}g&&l.generateCollisionDebugBuffers(S,l.collisionBoxArray)}function O1(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function n4(l,i,a,h,p,g,v,x,S,T,D,P,L){let F=g.textMaxSize.evaluate(i,{},P);F===void 0&&(F=v);const V=l.layers[0].layout,q=V.get("icon-offset").evaluate(i,{},P),K=eM(a.horizontal)||a.vertical,le=L.name==="globe",ge=v/24,ue=l.tilePixelRatio*F/24,pe=(Xe=l.overscaling,l.zoom>18&&Xe>2&&(Xe>>=1),Math.max(nn/(512*Xe),1)*V.get("symbol-spacing")),Te=V.get("text-padding")*l.tilePixelRatio,_e=V.get("icon-padding")*l.tilePixelRatio,Be=G(V.get("text-max-angle")),Fe=V.get("text-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",He=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",dt=V.get("symbol-placement"),Ue=pe/2;var Xe;const nt=V.get("icon-text-fit");let Ke;h&&nt!=="none"&&(l.allowVerticalPlacement&&a.vertical&&(Ke=jC(h,a.vertical,nt,V.get("icon-text-fit-padding"),q,ge)),K&&(h=jC(h,K,nt,V.get("icon-text-fit-padding"),q,ge)));const ht=(it,Ct,fn)=>{if(Ct.x<0||Ct.x>=nn||Ct.y<0||Ct.y>=nn)return;let mn=null;if(le){const{x:Wt,y:vt,z:En}=L.projectTilePoint(Ct.x,Ct.y,fn);mn={anchor:new Ga(Wt,vt,En,0,void 0),up:L.upVector(fn,Ct.x,Ct.y)}}(function(Wt,vt,En,sn,Pt,ri,Kn,_i,_n,Pn,oi,Jn,qn,di,Ei,pr,mo,Cn,zi,Rr,Rn,Si,qr,yi,$i){const mr=Wt.addToLineVertexArray(vt,sn);let cr,Mr,Yr,gr,Ha,Yh,Bp,Np=0,FM=0,BM=0,NM=0,X1=-1,K1=-1;const la={};let VM=up("");const uu=En?En.anchor:vt;let J1=0,Q1=0;if(_n._unevaluatedLayout.getValue("text-radial-offset")===void 0?[J1,Q1]=_n.layout.get("text-offset").evaluate(Rn,{},$i).map(Mo=>Mo*Cr):(J1=_n.layout.get("text-radial-offset").evaluate(Rn,{},$i)*Cr,Q1=P1),Wt.allowVerticalPlacement&&Pt.vertical){const Mo=Pt.vertical;if(Ei)Yh=L1(Mo),_i&&(Bp=L1(_i));else{const ko=_n.layout.get("text-rotate").evaluate(Rn,{},$i)+90;Yr=ty(Pn,uu,vt,oi,Jn,qn,Mo,di,ko,pr),_i&&(gr=ty(Pn,uu,vt,oi,Jn,qn,_i,Cn,ko))}}if(ri){const Mo=_n.layout.get("icon-rotate").evaluate(Rn,{},$i),ko=_n.layout.get("icon-text-fit")!=="none",Vp=XC(ri,Mo,qr,ko),tb=_i?XC(_i,Mo,qr,ko):void 0;Mr=ty(Pn,uu,vt,oi,Jn,qn,ri,Cn,Mo),Np=4*Vp.length;const jM=Wt.iconSizeData;let hu=null;jM.kind==="source"?(hu=[ia*_n.layout.get("icon-size").evaluate(Rn,{},$i)],hu[0]>Bl&&at(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):jM.kind==="composite"&&(hu=[ia*Si.compositeIconSizes[0].evaluate(Rn,{},$i),ia*Si.compositeIconSizes[1].evaluate(Rn,{},$i)],(hu[0]>Bl||hu[1]>Bl)&&at(`${Wt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Wt.addSymbols(Wt.icon,Vp,hu,Rr,zi,Rn,!1,En,vt,mr.lineStartIndex,mr.lineLength,-1,yi,$i),X1=Wt.icon.placedSymbolArray.length-1,tb&&(FM=4*tb.length,Wt.addSymbols(Wt.icon,tb,hu,Rr,zi,Rn,Wo.vertical,En,vt,mr.lineStartIndex,mr.lineLength,-1,yi,$i),K1=Wt.icon.placedSymbolArray.length-1)}for(const Mo in Pt.horizontal){const ko=Pt.horizontal[Mo];cr||(VM=up(ko.text),Ei?Ha=L1(ko):cr=ty(Pn,uu,vt,oi,Jn,qn,ko,di,_n.layout.get("text-rotate").evaluate(Rn,{},$i),pr));const Vp=ko.positionedLines.length===1;if(BM+=QC(Wt,En,vt,ko,Kn,_n,Ei,Rn,pr,mr,Pt.vertical?Wo.horizontal:Wo.horizontalOnly,Vp?Object.keys(Pt.horizontal):[Mo],la,X1,Si,yi,$i),Vp)break}Pt.vertical&&(NM+=QC(Wt,En,vt,Pt.vertical,Kn,_n,Ei,Rn,pr,mr,Wo.vertical,["vertical"],la,K1,Si,yi,$i));let Gl=-1;const eb=(Mo,ko)=>Mo?Math.max(Mo,ko):ko;Gl=eb(Ha,Gl),Gl=eb(Yh,Gl),Gl=eb(Bp,Gl);const L4=Gl>-1?1:0;Wt.glyphOffsetArray.length>=Vl.MAX_GLYPHS&&at("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Rn.sortKey!==void 0&&Wt.addToSortKeyRanges(Wt.symbolInstances.length,Rn.sortKey),Wt.symbolInstances.emplaceBack(uu.x,uu.y,uu.z,vt.x,vt.y,la.right>=0?la.right:-1,la.center>=0?la.center:-1,la.left>=0?la.left:-1,la.vertical>=0?la.vertical:-1,X1,K1,VM,cr!==void 0?cr:Wt.collisionBoxArray.length,cr!==void 0?cr+1:Wt.collisionBoxArray.length,Yr!==void 0?Yr:Wt.collisionBoxArray.length,Yr!==void 0?Yr+1:Wt.collisionBoxArray.length,Mr!==void 0?Mr:Wt.collisionBoxArray.length,Mr!==void 0?Mr+1:Wt.collisionBoxArray.length,gr||Wt.collisionBoxArray.length,gr?gr+1:Wt.collisionBoxArray.length,oi,BM,NM,Np,FM,L4,0,J1,Q1,Gl)})(l,Ct,mn,it,a,h,p,Ke,l.layers[0],l.collisionBoxArray,i.index,i.sourceLayerIndex,l.index,Te,Fe,S,0,_e,He,q,i,g,T,D,P)};if(dt==="line")for(const it of qC(i.geometry,0,0,nn,nn)){const Ct=YF(it,pe,Be,a.vertical||K,h,24,ue,l.overscaling,nn);for(const fn of Ct){const mn=K;mn&&i4(l,mn.text,Ue,fn)||ht(it,fn,P)}}else if(dt==="line-center"){for(const it of i.geometry)if(it.length>1){const Ct=qF(it,Be,a.vertical||K,h,24,ue);Ct&&ht(it,Ct,P)}}else if(i.type==="Polygon")for(const it of b1(i.geometry,0)){const Ct=JF(it,16);ht(it[0],new Ga(Ct.x,Ct.y,0,0,void 0),P)}else if(i.type==="LineString")for(const it of i.geometry)ht(it,new Ga(it[0].x,it[0].y,0,0,void 0),P);else if(i.type==="Point")for(const it of i.geometry)for(const Ct of it)ht([Ct],new Ga(Ct.x,Ct.y,0,0,void 0),P)}const Bl=32640;function QC(l,i,a,h,p,g,v,x,S,T,D,P,L,F,V,q,K){const le=function(pe,Te,_e,Be,Fe,He,dt,Ue){const Xe=[];if(Te.positionedLines.length===0)return Xe;const nt=Be.layout.get("text-rotate").evaluate(He,{})*Math.PI/180,Ke=function(mn){const Wt=mn[0],vt=mn[1],En=Wt*vt;return En>0?[Wt,-vt]:En<0?[-Wt,vt]:Wt===0?[vt,Wt]:[vt,-Wt]}(_e);let ht=Math.abs(Te.top-Te.bottom);for(const mn of Te.positionedLines)ht-=mn.lineOffset;const it=Te.positionedLines.length,Ct=ht/it;let fn=Te.top-_e[1];for(let mn=0;mn<it;++mn){const Wt=Te.positionedLines[mn];fn=ZF(Te,Ct,fn,mn);for(const vt of Wt.positionedGlyphs){if(!vt.rect)continue;const En=vt.rect||{};let sn=4,Pt=!0,ri=1,Kn=0;if(vt.imageName){const yi=dt[vt.imageName];if(!yi)continue;if(yi.sdf){at("SDF images are not supported in formatted text and will be ignored.");continue}Pt=!1,ri=yi.pixelRatio,sn=1/ri}const _i=(Fe||Ue)&&vt.vertical,_n=vt.metrics.advance*vt.scale/2,Pn=vt.metrics,oi=vt.rect;if(oi===null)continue;Ue&&Te.verticalizable&&(Kn=vt.imageName?_n-vt.metrics.width*vt.scale/2:0);const Jn=Fe?[vt.x+_n,vt.y]:[0,0];let qn=[0,0],di=[0,0],Ei=!1;Fe||(_i?(di=[vt.x+_n+Ke[0],vt.y+Ke[1]-Kn],Ei=!0):qn=[vt.x+_n+_e[0],vt.y+_e[1]-Kn]);const pr=oi.w*vt.scale/(ri*(vt.localGlyph?2:1)),mo=oi.h*vt.scale/(ri*(vt.localGlyph?2:1));let Cn,zi,Rr,Rn;if(_i){const yi=vt.y-fn,$i=new k(-_n,_n-yi),mr=-Math.PI/2,cr=new k(...di);Cn=new k(-_n+qn[0],qn[1]),Cn._rotateAround(mr,$i)._add(cr),Cn.x+=-yi+_n,Cn.y-=(Pn.left-sn)*vt.scale;const Mr=vt.imageName?Pn.advance*vt.scale:Cr*vt.scale,Yr=String.fromCharCode(vt.glyph);DF(Yr)?Cn.x+=(1-sn)*vt.scale:IF(Yr)?Cn.x+=Mr-Pn.height*vt.scale+(-sn-1)*vt.scale:Cn.x+=vt.imageName||Pn.width+2*sn===oi.w&&Pn.height+2*sn===oi.h?(Mr-mo)/2:(Mr-(Pn.height+2*sn)*vt.scale)/2,zi=new k(Cn.x,Cn.y-pr),Rr=new k(Cn.x+mo,Cn.y),Rn=new k(Cn.x+mo,Cn.y-pr)}else{const yi=(Pn.left-sn)*vt.scale-_n+qn[0],$i=(-Pn.top-sn)*vt.scale+qn[1],mr=yi+pr,cr=$i+mo;Cn=new k(yi,$i),zi=new k(mr,$i),Rr=new k(yi,cr),Rn=new k(mr,cr)}if(nt){let yi;yi=Fe?new k(0,0):Ei?new k(Ke[0],Ke[1]):new k(_e[0],_e[1]),Cn._rotateAround(nt,yi),zi._rotateAround(nt,yi),Rr._rotateAround(nt,yi),Rn._rotateAround(nt,yi)}const Si=new k(0,0),qr=new k(0,0);Xe.push({tl:Cn,tr:zi,bl:Rr,br:Rn,tex:En,writingMode:Te.writingMode,glyphOffset:Jn,sectionIndex:vt.sectionIndex,isSDF:Pt,pixelOffsetTL:Si,pixelOffsetBR:qr,minFontScaleX:0,minFontScaleY:0})}}return Xe}(0,h,S,g,v,x,p,l.allowVerticalPlacement),ge=l.textSizeData;let ue=null;ge.kind==="source"?(ue=[ia*g.layout.get("text-size").evaluate(x,{},K)],ue[0]>Bl&&at(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ge.kind==="composite"&&(ue=[ia*V.compositeTextSizes[0].evaluate(x,{},K),ia*V.compositeTextSizes[1].evaluate(x,{},K)],(ue[0]>Bl||ue[1]>Bl)&&at(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,le,ue,S,v,x,D,i,a,T.lineStartIndex,T.lineLength,F,q,K);for(const pe of P)L[pe]=l.text.placedSymbolArray.length-1;return 4*le.length}function eM(l){for(const i in l)return l[i];return null}function ty(l,i,a,h,p,g,v,x,S,T){let D=v.top,P=v.bottom,L=v.left,F=v.right;const V=v.collisionPadding;if(V&&(L-=V[0],D-=V[1],F+=V[2],P+=V[3]),S){const q=new k(L,D),K=new k(F,D),le=new k(L,P),ge=new k(F,P),ue=G(S);let pe=new k(0,0);T&&(pe=new k(T[0],T[1])),q._rotateAround(ue,pe),K._rotateAround(ue,pe),le._rotateAround(ue,pe),ge._rotateAround(ue,pe),L=Math.min(q.x,K.x,le.x,ge.x),F=Math.max(q.x,K.x,le.x,ge.x),D=Math.min(q.y,K.y,le.y,ge.y),P=Math.max(q.y,K.y,le.y,ge.y)}return l.emplaceBack(i.x,i.y,i.z,a.x,a.y,L,D,F,P,x,h,p,g),l.length-1}function L1(l){l.collisionPadding&&(l.top-=l.collisionPadding[1],l.bottom+=l.collisionPadding[3]);const i=l.bottom-l.top;return i>0?Math.max(10,i):null}function i4(l,i,a,h){const p=l.compareText;if(i in p){const g=p[i];for(let v=g.length-1;v>=0;v--)if(h.dist(g[v])<a)return!0}else p[i]=[];return p[i].push(h),!1}const r4=Ze([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:tM}=r4,nM=Ze([{name:"a_pos_3",components:3,type:"Int16"}]);var kp=Ze([{name:"a_pos",type:"Int16",components:2}]);const Wa=nn/Math.PI/2,z1=2*rs(1,0)*Wa*Math.PI,Gh=[64,32,16],Is=-Wa,Ps=Wa,o4=[new po([Is,Is,Is],[Ps,Ps,Ps]),new po([Is,Is,Is],[0,0,Ps]),new po([0,Is,Is],[Ps,0,Ps]),new po([Is,0,Is],[0,Ps,Ps]),new po([0,0,Is],[Ps,Ps,Ps])];function iM(l,i,a,h=!0){const p=As([],l._camera.position,l.worldSize),g=[i,a,1,1];ou(g,g,l.pixelMatrixInverse),ZT(g,g,1/g[3]);const v=Wr([],Ds([],g,p)),x=l.globeMatrix,S=[x[12],x[13],x[14]],T=Ds([],S,p),D=fp(T),P=Wr([],T),L=l.worldSize/(2*Math.PI),F=ss(P,v),V=Math.asin(L/D);if(V<Math.acos(F)){if(!h)return null;const dt=[],Ue=[];As(dt,v,D/F),Wr(Ue,Ds(Ue,dt,T)),Wr(v,Fl(v,T,As(v,Ue,Math.tan(V)*D)))}const q=[];new f1(p,v).closestPointOnSphere(S,L,q);const K=Wr([],Ie(x,0)),le=Wr([],Ie(x,1)),ge=Wr([],Ie(x,2)),ue=ss(K,q),pe=ss(le,q),Te=ss(ge,q),_e=B(Math.asin(-pe/L));let Be=B(Math.atan2(ue,Te));Be=l.center.lng+function(dt,Ue){const Xe=(Ue-dt+180)%360-180;return Xe<-180?Xe+360:Xe}(l.center.lng,Be);const Fe=ea(Be),He=de(Va(_e),0,1);return new Ph(Fe,He)}class s4{constructor(i,a,h){this.a=Ds([],i,h),this.b=Ds([],a,h),this.center=h;const p=Wr([],this.a),g=Wr([],this.b);this.angle=Math.acos(ss(p,g))}}function R1(l,i){if(l.angle===0)return null;let a;return a=l.a[i]===0?1/l.angle*.5*Math.PI:1/l.angle*Math.atan(l.b[i]/l.a[i]/Math.sin(l.angle)-1/Math.tan(l.angle)),a<0||a>1?null:function(h,p,g,v){const x=Math.sin(g);return h*(Math.sin((1-v)*g)/x)+p*(Math.sin(v*g)/x)}(l.a[i],l.b[i],l.angle,de(a,0,1))+l.center[i]}function ra(l){if(l.z<=1)return o4[l.z+2*l.y+l.x];const i=F1(ny(l));return po.fromPoints(i)}function rM(l,i){const a=Ip(i.zoom);if(a===0)return ra(l);const h=ny(l),p=F1(h),g=ea(h.getWest())*i.worldSize,v=ea(h.getEast())*i.worldSize,x=Va(h.getNorth())*i.worldSize,S=Va(h.getSouth())*i.worldSize,T=[g,x,0],D=[v,x,0],P=[g,S,0],L=[v,S,0],F=s1([],i.globeMatrix);return nr(T,T,F),nr(D,D,F),nr(P,P,F),nr(L,L,F),p[0]=bl(p[0],P,a),p[1]=bl(p[1],L,a),p[2]=bl(p[2],D,a),p[3]=bl(p[3],T,a),po.fromPoints(p)}function oM(l,i,a,h,p){for(const g of a)nr(g,g,h),As(g,g,p),u1(l,l,g),h1(i,i,g)}function a4(l,i,a){const h=i/l.worldSize,p=Number.MAX_VALUE,g=[-p,-p,-p],v=[p,p,p],x=l.globeMatrix;if(a.z<=1)return oM(v,g,ra(a).getCorners(),x,h),new po(v,g);const S=ny(a),T=F1(S);if(oM(v,g,T,x,h),S.contains(l.center)){g[2]=0;const Be=l.point,Fe=[Be.x*h,Be.y*h,0];return u1(v,v,Fe),h1(g,g,Fe),new po(v,g)}const D=[x[12]*h,x[13]*h,x[14]*h],P=S.getCenter(),L=de(l.center.lat,-85.051129,ta),F=de(P.lat,-85.051129,ta),V=ea(l.center.lng),q=Va(L);let K=V-ea(P.lng);const le=q-Va(F);K>.5?K-=1:K<-.5&&(K+=1);let ge=0;Math.abs(K)>Math.abs(le)?ge=K>=0?1:3:(ge=le>=0?0:2,B_(D,D,[x[4]*h,x[5]*h,x[6]*h],-Math.sin(G(le>=0?S.getSouth():S.getNorth()))*Wa));const ue=T[ge],pe=T[(ge+1)%4],Te=new s4(ue,pe,D),_e=[R1(Te,0)||ue[0],R1(Te,1)||ue[1],R1(Te,2)||ue[2]];return v[2]=Math.min(ue[2],pe[2]),u1(v,v,_e),h1(g,g,_e),new po(v,g)}function ny({x:l,y:i,z:a}){const h=1/(1<<a),p=new Bn(os(l*h),Tr((i+1)*h)),g=new Bn(os((l+1)*h),Tr(i*h));return new Rl(p,g)}function F1(l){const i=G(l.getNorth()),a=G(l.getSouth()),h=Math.cos(i),p=Math.cos(a),g=Math.sin(i),v=Math.sin(a),x=l.getWest(),S=l.getEast();return[Wh(p,v,x),Wh(p,v,S),Wh(h,g,S),Wh(h,g,x)]}function Wh(l,i,a,h=Wa){return a=G(a),[l*Math.sin(a)*h,-i*h,l*Math.cos(a)*h]}function iy(l,i,a){return Wh(Math.cos(G(l)),Math.sin(G(l)),i,a)}function Ap(l,i,a,h){const p=1<<a.z,g=(l/nn+a.x)/p;return iy(Tr((i/nn+a.y)/p),os(g),h)}function ry({min:l,max:i}){return 16383/Math.max(i[0]-l[0],i[1]-l[1],i[2]-l[2])}const sM=new Float64Array(16);function Dp(l){const i=ry(l),a=GT(sM,[i,i,i]);return dp(a,a,((h=[])[0]=-(p=l.min)[0],h[1]=-p[1],h[2]=-p[2],h));var h,p}function B1(l){const i=(h=l.min,(a=sM)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=h[0],a[13]=h[1],a[14]=h[2],a[15]=1,a);var a,h;const p=1/ry(l);return ru(i,i,[p,p,p])}function aM(l,i,a,h,p){const g=function(S){const T=nn/(2*Math.PI);return S/(2*Math.PI)/T}(a),v=[l,i,-a/(2*Math.PI)],x=na(new Float64Array(16));return dp(x,x,v),ru(x,x,[g,g,g]),a1(x,x,G(-p)),F_(x,x,G(-h)),x}function Ip(l){return xe(5,6,l)}function lM(l,i){const a=iy(i.lat,i.lng);return g=(h=c1([],function(F){const V=iy(F._center.lat,F._center.lng);let q=d1([],zh(0,1,0),V);const K=WT([],-F.angle,V);q=nr(q,q,K),WT(K,-F._pitch,q);const le=Wr([],V);return As(le,le,F.cameraToCenterDistance/F.pixelsPerMeter*z1),nr(le,le,K),Fl([],V,le)}(l),a))[0],v=h[1],x=h[2],S=(p=a)[0],T=p[1],D=p[2],L=(P=Math.sqrt(g*g+v*v+x*x)*Math.sqrt(S*S+T*T+D*D))&&ss(h,p)/P,Math.acos(Math.min(Math.max(L,-1),1));var h,p,g,v,x,S,T,D,P,L}const cM=G(85),l4=Math.cos(cM),c4=Math.sin(cM);function uM(l,i){const a=l.fovAboveCenter,h=l.elevation?l.elevation.getMinElevationBelowMSL()*i:0,p=(l._camera.position[2]*l.worldSize-h)/Math.cos(l._pitch),g=Math.sin(a)*p/Math.sin(Math.max(Math.PI/2-l._pitch-a,.01)),v=Math.sin(l._pitch)*g+p;return Math.min(1.01*v,p*(1/l._horizonShift))}function lu(l,i){if(!i.isReprojectedInTileSpace)return{scale:1<<l.z,x:l.x,y:l.y,x2:l.x+1,y2:l.y+1,projection:i};const a=Math.pow(2,-l.z),h=l.x*a,p=(l.x+1)*a,g=l.y*a,v=(l.y+1)*a,x=os(h),S=os(p),T=Tr(g),D=Tr(v),P=i.project(x,T),L=i.project(S,T),F=i.project(S,D),V=i.project(x,D);let q=Math.min(P.x,L.x,F.x,V.x),K=Math.min(P.y,L.y,F.y,V.y),le=Math.max(P.x,L.x,F.x,V.x),ge=Math.max(P.y,L.y,F.y,V.y);const ue=a/16;function pe(_e,Be,Fe,He,dt,Ue){const Xe=(Fe+dt)/2,nt=(He+Ue)/2,Ke=i.project(os(Xe),Tr(nt)),ht=Math.max(0,q-Ke.x,K-Ke.y,Ke.x-le,Ke.y-ge);q=Math.min(q,Ke.x),le=Math.max(le,Ke.x),K=Math.min(K,Ke.y),ge=Math.max(ge,Ke.y),ht>ue&&(pe(_e,Ke,Fe,He,Xe,nt),pe(Ke,Be,Xe,nt,dt,Ue))}pe(P,L,h,g,p,g),pe(L,F,p,g,p,v),pe(F,V,p,v,h,v),pe(V,P,h,v,h,g),q-=ue,K-=ue,le+=ue,ge+=ue;const Te=1/Math.max(le-q,ge-K);return{scale:Te,x:q*Te,y:K*Te,x2:le*Te,y2:ge*Te,projection:i}}const u4=na(new Float32Array(16));class Nl{constructor(i){this.spec=i,this.name=i.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(i,a){return{x:0,y:0,z:0}}unproject(i,a){return new Bn(0,0)}projectTilePoint(i,a,h){return{x:i,y:a,z:0}}locationPoint(i,a,h=!0){return i._coordinatePoint(i.locationCoordinate(a),h)}pixelsPerMeter(i,a){return rs(1,i)*a}pixelSpaceConversion(i,a,h){return 1}farthestPixelDistance(i){return uM(i,i.pixelsPerMeter)}pointCoordinate(i,a,h,p){const g=i.horizonLineFromTop(!1),v=new k(a,Math.max(g,h));return i.rayIntersectionCoordinate(i.pointRayIntersection(v,p))}pointCoordinate3D(i,a,h){const p=new k(a,h);if(i.elevation)return i.elevation.pointCoordinate(p);{const g=this.pointCoordinate(i,p.x,p.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(i,a){if(i.elevation)return!this.pointCoordinate3D(i,a.x,a.y);const h=i.horizonLineFromTop();return a.y<h}createInversionMatrix(i,a){return u4}createTileMatrix(i,a,h){let p,g,v;const x=h.canonical,S=na(new Float64Array(16));if(this.isReprojectedInTileSpace){const T=lu(x,this);p=1,g=T.x+h.wrap*T.scale,v=T.y,ru(S,S,[p/T.scale,p/T.scale,i.pixelsPerMeter/a])}else p=a/i.zoomScale(x.z),g=(x.x+Math.pow(2,x.z)*h.wrap)*p,v=x.y*p;return dp(S,S,[g,v,0]),ru(S,S,[p/nn,p/nn,1]),S}upVector(i,a,h){return[0,0,1]}upVectorScale(i,a,h){return{metersToTile:1}}}class h4 extends Nl{constructor(i){super(i),this.range=[4,7],this.center=i.center||[-96,37.5];const[a,h]=this.parallels=i.parallels||[29.5,45.5],p=Math.sin(G(a));this.n=(p+Math.sin(G(h)))/2,this.c=1+p*(2*this.n-p),this.r0=Math.sqrt(this.c)/this.n}project(i,a){const{n:h,c:p,r0:g}=this,v=G(i-this.center[0]),x=G(a),S=Math.sqrt(p-2*h*Math.sin(x))/h;return{x:S*Math.sin(v*h),y:S*Math.cos(v*h)-g,z:0}}unproject(i,a){const{n:h,c:p,r0:g}=this,v=g+a;let x=Math.atan2(i,Math.abs(v))*Math.sign(v);v*h<0&&(x-=Math.PI*Math.sign(i)*Math.sign(v));const S=G(this.center[0])*h;x=Ce(x,-Math.PI-S,Math.PI-S);const T=B(x/h)+this.center[0],D=Math.asin(de((p-(i*i+v*v)*h*h)/(2*h),-1,1)),P=de(B(D),-85.051129,ta);return new Bn(T,P)}}const Pp=1.340264,Op=-.081106,Lp=893e-6,zp=.003796,oy=Math.sqrt(3)/2;class d4 extends Nl{project(i,a){a=a/180*Math.PI,i=i/180*Math.PI;const h=Math.asin(oy*Math.sin(a)),p=h*h,g=p*p*p;return{x:.5*(i*Math.cos(h)/(oy*(Pp+3*Op*p+g*(7*Lp+9*zp*p)))/Math.PI+.5),y:1-.5*(h*(Pp+Op*p+g*(Lp+zp*p))/Math.PI+1),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI;let h=a=(2*(1-a)-1)*Math.PI,p=h*h,g=p*p*p;for(let D,P,L,F=0;F<12&&(P=h*(Pp+Op*p+g*(Lp+zp*p))-a,L=Pp+3*Op*p+g*(7*Lp+9*zp*p),D=P/L,h=de(h-D,-Math.PI/3,Math.PI/3),p=h*h,g=p*p*p,!(Math.abs(D)<1e-12));++F);const v=oy*i*(Pp+3*Op*p+g*(7*Lp+9*zp*p))/Math.cos(h),x=Math.asin(Math.sin(h)/oy),S=de(180*v/Math.PI,-180,180),T=de(180*x/Math.PI,-85.051129,ta);return new Bn(S,T)}}class f4 extends Nl{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0}project(i,a){return{x:.5+i/360,y:.5-a/360,z:0}}unproject(i,a){const h=360*(i-.5),p=de(360*(.5-a),-85.051129,ta);return new Bn(h,p)}}const Hh=Math.PI/2;function sy(l){return Math.tan((Hh+l)/2)}class p4 extends Nl{constructor(i){super(i),this.center=i.center||[0,30];const[a,h]=this.parallels=i.parallels||[30,30],p=G(a),g=G(h),v=Math.cos(p);this.n=p===g?Math.sin(p):Math.log(v/Math.cos(g))/Math.log(sy(g)/sy(p)),this.f=v*Math.pow(sy(p),this.n)/this.n}project(i,a){a=G(a),i=G(i-this.center[0]);const h=1e-6,{n:p,f:g}=this;g>0?a<-Hh+h&&(a=-Hh+h):a>Hh-h&&(a=Hh-h);const v=g/Math.pow(sy(a),p),x=v*Math.sin(p*i),S=g-v*Math.cos(p*i);return{x:.5*(x/Math.PI+.5),y:1-.5*(S/Math.PI+.5),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI,a=(2*(1-a)-.5)*Math.PI;const{n:h,f:p}=this,g=p-a,v=Math.sign(g),x=Math.sign(h)*Math.sqrt(i*i+g*g);let S=Math.atan2(i,Math.abs(g))*v;g*h<0&&(S-=Math.PI*Math.sign(i)*v);const T=de(B(S/h)+this.center[0],-180,180),D=de(B(2*Math.atan(Math.pow(p/x,1/h))-Hh),-85.051129,ta);return new Bn(T,D)}}class hM extends Nl{constructor(i){super(i),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(i,a){return{x:ea(i),y:Va(a),z:0}}unproject(i,a){const h=os(i),p=Tr(a);return new Bn(h,p)}}const dM=G(ta);class m4 extends Nl{project(i,a){const h=(a=G(a))*a,p=h*h;return{x:.5*((i=G(i))*(.8707-.131979*h+p*(p*(.003971*h-.001529*p)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+h*(.015085+p*(.028874*h-.044475-.005916*p)))/Math.PI+1),z:0}}unproject(i,a){i=(2*i-.5)*Math.PI;let h=a=(2*(1-a)-1)*Math.PI,p=25,g=0,v=h*h;do{v=h*h;const T=v*v;g=(h*(1.007226+v*(.015085+T*(.028874*v-.044475-.005916*T)))-a)/(1.007226+v*(.045255+T*(.259866*v-.311325-.005916*11*T))),h=de(h-g,-dM,dM)}while(Math.abs(g)>1e-6&&--p>0);v=h*h;const x=de(B(i/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),S=B(h);return new Bn(x,S)}}const fM=G(ta);class g4 extends Nl{project(i,a){a=G(a),i=G(i);const h=Math.cos(a),p=2/Math.PI,g=Math.acos(h*Math.cos(i/2)),v=Math.sin(g)/g,x=.5*(i*p+2*h*Math.sin(i/2)/v)||0,S=.5*(a+Math.sin(a)/v)||0;return{x:.5*(x/Math.PI+.5),y:1-.5*(S/Math.PI+1),z:0}}unproject(i,a){let h=i=(2*i-.5)*Math.PI,p=a=(2*(1-a)-1)*Math.PI,g=25;const v=1e-6;let x=0,S=0;do{const T=Math.cos(p),D=Math.sin(p),P=2*D*T,L=D*D,F=T*T,V=Math.cos(h/2),q=Math.sin(h/2),K=2*V*q,le=q*q,ge=1-F*V*V,ue=ge?1/ge:0,pe=ge?Math.acos(T*V)*Math.sqrt(1/ge):0,Te=.5*(2*pe*T*q+2*h/Math.PI)-i,_e=.5*(pe*D+p)-a,Be=.5*ue*(F*le+pe*T*V*L)+1/Math.PI,Fe=ue*(K*P/4-pe*D*q),He=.125*ue*(P*q-pe*D*F*K),dt=.5*ue*(L*V+pe*le*T)+.5,Ue=Fe*He-dt*Be;x=(_e*Fe-Te*dt)/Ue,S=(Te*He-_e*Be)/Ue,h=de(h-x,-Math.PI,Math.PI),p=de(p-S,-fM,fM)}while((Math.abs(x)>v||Math.abs(S)>v)&&--g>0);return new Bn(B(h),B(p))}}class pM extends Nl{constructor(i){super(i),this.center=i.center||[0,0],this.parallels=i.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(G(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(i,a){const{scale:h,cosPhi:p}=this;return{x:G(i)*p*h+.5,y:-Math.sin(G(a))/p*h+.5,z:0}}unproject(i,a){const{scale:h,cosPhi:p}=this,g=-(a-.5)/h,v=de(B((i-.5)/h)/p,-180,180),x=Math.asin(de(g*p,-1,1)),S=de(B(x),-85.051129,ta);return new Bn(v,S)}}class _4 extends hM{constructor(i){super(i),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug","custom"],this.range=[3,5]}projectTilePoint(i,a,h){const p=Ap(i,a,h);return nr(p,p,Dp(ra(h))),{x:p[0],y:p[1],z:p[2]}}locationPoint(i,a){const h=iy(a.lat,a.lng),p=Wr([],h),g=i.elevation?i.elevation.getAtPointOrZero(i.locationCoordinate(a),i._centerAltitude):i._centerAltitude;B_(h,h,p,rs(1,0)*nn*g);const v=na(new Float64Array(16));return Lh(v,i.pixelMatrix,i.globeMatrix),nr(h,h,v),new k(h[0],h[1])}pixelsPerMeter(i,a){return rs(1,0)*a}pixelSpaceConversion(i,a,h){const p=Dn(rs(1,45)*a,rs(1,i)*a,h);return this.pixelsPerMeter(i,a)/p}createTileMatrix(i,a,h){const p=B1(ra(h.canonical));return Lh(new Float64Array(16),i.globeMatrix,p)}createInversionMatrix(i,a){const{center:h}=i,p=Dp(ra(a));return F_(p,p,G(h.lng)),a1(p,p,G(h.lat)),ru(p,p,[i._pixelsPerMercatorPixel,i._pixelsPerMercatorPixel,1]),Float32Array.from(p)}pointCoordinate(i,a,h,p){return iM(i,a,h,!0)||new Ph(0,0)}pointCoordinate3D(i,a,h){const p=this.pointCoordinate(i,a,h,0);return[p.x,p.y,p.z]}isPointAboveHorizon(i,a){return!iM(i,a.x,a.y,!1)}farthestPixelDistance(i){const a=function(p,g){const v=p.cameraToCenterDistance,x=p._centerAltitude*g,S=p._camera,T=p._camera.forward(),D=Fl([],As([],T,-v),[0,0,x]),P=p.worldSize/(2*Math.PI),L=[0,0,-P],F=p.width/p.height,V=Math.tan(p.fovAboveCenter),q=As([],S.up(),V),K=As([],S.right(),V*F),le=Wr([],Fl([],Fl([],T,q),K)),ge=[];let ue;if(new f1(D,le).closestPointOnSphere(L,P,ge)){const pe=Fl([],ge,L),Te=Ds([],pe,D);ue=Math.cos(p.fovAboveCenter)*fp(Te)}else{const pe=Ds([],D,L),Te=Ds([],L,D);Wr(Te,Te);const _e=fp(pe)-P;ue=Math.sqrt(_e*(_e+2*P));const Be=Math.acos(ue/(P+_e))-Math.acos(ss(T,Te));ue*=Math.cos(Be)}return 1.01*ue}(i,this.pixelsPerMeter(i.center.lat,i.worldSize)),h=Ip(i.zoom);if(h>0){const p=uM(i,rs(1,i.center.lat)*i.worldSize),g=i.worldSize/(2*Math.PI),v=Math.max(i.width,i.height)/i.worldSize*Math.PI;return Dn(a,p+g*(1-Math.cos(v)),Math.pow(h,10))}return a}upVector(i,a,h){return Ap(a,h,i,1)}upVectorScale(i){return{metersToTile:z1*ry(ra(i))}}}function mM(l){const i=l.parallels,a=!!i&&Math.abs(i[0]+i[1])<.01;switch(l.name){case"mercator":return new hM(l);case"equirectangular":return new f4(l);case"naturalEarth":return new m4(l);case"equalEarth":return new d4(l);case"winkelTripel":return new g4(l);case"albers":return a?new pM(l):new h4(l);case"lambertConformalConic":return a?new pM(l):new p4(l);case"globe":return new _4(l)}throw new Error(`Invalid projection name: ${l.name}`)}const y4=au.VectorTileFeature.types,v4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ay(l,i,a,h,p,g,v,x,S,T,D,P,L){const F=x?Math.min(Bl,Math.round(x[0])):0,V=x?Math.min(Bl,Math.round(x[1])):0;l.emplaceBack(i,a,Math.round(32*h),Math.round(32*p),g,v,(F<<1)+(S?1:0),V,16*T,16*D,256*P,256*L)}function ly(l,i,a,h,p,g,v){l.emplaceBack(i,a,h,p,g,v)}function cy(l,i,a,h,p){l.emplaceBack(i,a,h,p),l.emplaceBack(i,a,h,p),l.emplaceBack(i,a,h,p),l.emplaceBack(i,a,h,p)}function x4(l){for(const i of l.sections)if(f(i.text))return!0;return!1}class N1{constructor(i){this.layoutVertexArray=new ui,this.indexArray=new yn,this.programConfigurations=i,this.segments=new Xi,this.dynamicLayoutVertexArray=new wn,this.opacityVertexArray=new Hn,this.placedSymbolArray=new mT,this.globeExtVertexArray=new ki}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,a,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wF.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,SF.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,v4,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=i.createVertexBuffer(this.globeExtVertexArray,EF.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}zt(N1,"SymbolBuffers");class V1{constructor(i,a,h){this.layoutVertexArray=new i,this.layoutAttributes=a,this.indexArray=new h,this.segments=new Xi,this.collisionVertexArray=new hi,this.collisionVertexArrayExt=new gi}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,TF.members,!0),this.collisionVertexBufferExt=i.createVertexBuffer(this.collisionVertexArrayExt,CF.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}zt(V1,"CollisionBuffers");class Vl{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(v=>v.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=na([]),this.placementViewportMatrix=na([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=S1(this.zoom,a["text-size"]),this.iconSizeData=S1(this.zoom,a["icon-size"]);const h=this.layers[0].layout,p=h.get("symbol-sort-key"),g=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&p.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(v=>Wo[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=i.sourceID,this.projection=i.projection}createArrays(){this.text=new N1(new tu(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new N1(new tu(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new yT,this.lineVertexArray=new vT,this.symbolInstances=new _T}calculateGlyphDependencies(i,a,h,p,g){for(let v=0;v<i.length;v++)if(a[i.charCodeAt(v)]=!0,p&&g){const x=Sp[i.charAt(v)];x&&(a[x.charCodeAt(0)]=!0)}}populate(i,a,h,p){const g=this.layers[0],v=g.layout,x=this.projection.name==="globe",S=v.get("text-font"),T=v.get("text-field"),D=v.get("icon-image"),P=(T.value.kind!=="constant"||T.value.value instanceof $r&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(S.value.kind!=="constant"||S.value.value.length>0),L=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,F=v.get("symbol-sort-key");if(this.features=[],!P&&!L)return;const V=a.iconDependencies,q=a.glyphDependencies,K=a.availableImages,le=new te(this.zoom);for(const{feature:ge,id:ue,index:pe,sourceLayerIndex:Te}of i){const _e=g._featureFilter.needGeometry,Be=nu(ge,_e);if(!g._featureFilter.filter(le,Be,h))continue;if(_e||(Be.geometry=ja(ge,h,p)),x&&ge.type!==1&&h.z<=5){const Ue=Be.geometry,Xe=.98078528056;for(let nt=0;nt<Ue.length;nt++)Ue[nt]=E5(Ue[nt],Ke=>Ke,(Ke,ht)=>ss(Ap(Ke.x,Ke.y,h,1),Ap(ht.x,ht.y,h,1))<Xe)}let Fe,He;if(P){const Ue=g.getValueAndResolveTokens("text-field",Be,h,K),Xe=$r.factory(Ue);x4(Xe)&&(this.hasRTLText=!0),(!this.hasRTLText||Y()==="unavailable"||this.hasRTLText&&ee.isParsed())&&(Fe=AF(Xe,g,Be))}if(L){const Ue=g.getValueAndResolveTokens("icon-image",Be,h,K);He=Ue instanceof Gr?Ue:Gr.fromString(Ue)}if(!Fe&&!He)continue;const dt=this.sortFeaturesByKey?F.evaluate(Be,{},h):void 0;if(this.features.push({id:ue,text:Fe,icon:He,index:pe,sourceLayerIndex:Te,geometry:Be.geometry,properties:ge.properties,type:y4[ge.type],sortKey:dt}),He&&(V[He.name]=!0),Fe){const Ue=S.evaluate(Be,{},h).join(","),Xe=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wo.vertical)>=0;for(const nt of Fe.sections)if(nt.image)V[nt.image.name]=!0;else{const Ke=Ah(Fe.toString()),ht=nt.fontStack||Ue,it=q[ht]=q[ht]||{};this.calculateGlyphDependencies(nt.text,it,Xe,this.allowVerticalPlacement,Ke)}}}v.get("symbol-placement")==="line"&&(this.features=function(ge){const ue={},pe={},Te=[];let _e=0;function Be(Ue){Te.push(ge[Ue]),_e++}function Fe(Ue,Xe,nt){const Ke=pe[Ue];return delete pe[Ue],pe[Xe]=Ke,Te[Ke].geometry[0].pop(),Te[Ke].geometry[0]=Te[Ke].geometry[0].concat(nt[0]),Ke}function He(Ue,Xe,nt){const Ke=ue[Xe];return delete ue[Xe],ue[Ue]=Ke,Te[Ke].geometry[0].shift(),Te[Ke].geometry[0]=nt[0].concat(Te[Ke].geometry[0]),Ke}function dt(Ue,Xe,nt){const Ke=nt?Xe[0][Xe[0].length-1]:Xe[0][0];return`${Ue}:${Ke.x}:${Ke.y}`}for(let Ue=0;Ue<ge.length;Ue++){const Xe=ge[Ue],nt=Xe.geometry,Ke=Xe.text?Xe.text.toString():null;if(!Ke){Be(Ue);continue}const ht=dt(Ke,nt),it=dt(Ke,nt,!0);if(ht in pe&&it in ue&&pe[ht]!==ue[it]){const Ct=He(ht,it,nt),fn=Fe(ht,it,Te[Ct].geometry);delete ue[ht],delete pe[it],pe[dt(Ke,Te[fn].geometry,!0)]=fn,Te[Ct].geometry=null}else ht in pe?Fe(ht,it,nt):it in ue?He(ht,it,nt):(Be(Ue),ue[ht]=_e-1,pe[it]=_e-1)}return Te.filter(Ue=>Ue.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ge,ue)=>ge.sortKey-ue.sortKey)}update(i,a,h,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,a,this.layers,h,p),this.icon.programConfigurations.updatePaintArrays(i,a,this.layers,h,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=mM(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,a){const h=this.lineVertexArray.length,p=i.segment;if(p!==void 0){let g=i.dist(a[p+1]),v=i.dist(a[p]);const x={};for(let S=p+1;S<a.length;S++)x[S]={x:a[S].x,y:a[S].y,tileUnitDistanceFromAnchor:g},S<a.length-1&&(g+=a[S+1].dist(a[S]));for(let S=p||0;S>=0;S--)x[S]={x:a[S].x,y:a[S].y,tileUnitDistanceFromAnchor:v},S>0&&(v+=a[S-1].dist(a[S]));for(let S=0;S<a.length;S++){const T=x[S];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,a,h,p,g,v,x,S,T,D,P,L,F,V){const q=i.indexArray,K=i.layoutVertexArray,le=i.globeExtVertexArray,ge=i.segments.prepareSegment(4*a.length,K,q,this.canOverlap?v.sortKey:void 0),ue=this.glyphOffsetArray.length,pe=ge.vertexLength,Te=this.allowVerticalPlacement&&x===Wo.vertical?Math.PI/2:0,_e=v.text&&v.text.sections;for(let Fe=0;Fe<a.length;Fe++){const{tl:He,tr:dt,bl:Ue,br:Xe,tex:nt,pixelOffsetTL:Ke,pixelOffsetBR:ht,minFontScaleX:it,minFontScaleY:Ct,glyphOffset:fn,isSDF:mn,sectionIndex:Wt}=a[Fe],vt=ge.vertexLength,En=fn[1];if(ay(K,T.x,T.y,He.x,En+He.y,nt.x,nt.y,h,mn,Ke.x,Ke.y,it,Ct),ay(K,T.x,T.y,dt.x,En+dt.y,nt.x+nt.w,nt.y,h,mn,ht.x,Ke.y,it,Ct),ay(K,T.x,T.y,Ue.x,En+Ue.y,nt.x,nt.y+nt.h,h,mn,Ke.x,ht.y,it,Ct),ay(K,T.x,T.y,Xe.x,En+Xe.y,nt.x+nt.w,nt.y+nt.h,h,mn,ht.x,ht.y,it,Ct),S){const sn=S.anchor,Pt=S.up;ly(le,sn.x,sn.y,sn.z,Pt[0],Pt[1],Pt[2]),ly(le,sn.x,sn.y,sn.z,Pt[0],Pt[1],Pt[2]),ly(le,sn.x,sn.y,sn.z,Pt[0],Pt[1],Pt[2]),ly(le,sn.x,sn.y,sn.z,Pt[0],Pt[1],Pt[2]),cy(i.dynamicLayoutVertexArray,sn.x,sn.y,sn.z,Te)}else cy(i.dynamicLayoutVertexArray,T.x,T.y,T.z,Te);q.emplaceBack(vt,vt+1,vt+2),q.emplaceBack(vt+1,vt+2,vt+3),ge.vertexLength+=4,ge.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(fn[0]),Fe!==a.length-1&&Wt===a[Fe+1].sectionIndex||i.programConfigurations.populatePaintArrays(K.length,v,v.index,{},F,V,_e&&_e[Wt])}const Be=S?S.anchor:T;i.placedSymbolArray.emplaceBack(Be.x,Be.y,Be.z,T.x,T.y,ue,this.glyphOffsetArray.length-ue,pe,D,P,T.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],x,0,!1,0,L,0)}_commitLayoutVertex(i,a,h,p,g,v,x){i.emplaceBack(a,h,p,g,v,Math.round(x.x),Math.round(x.y))}_addCollisionDebugVertices(i,a,h,p,g,v,x){const S=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),T=S.vertexLength,D=x.tileAnchorX,P=x.tileAnchorY;for(let F=0;F<4;F++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(a,-i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(a,i.padding,-i.padding),h.collisionVertexArrayExt.emplaceBack(a,i.padding,i.padding),h.collisionVertexArrayExt.emplaceBack(a,-i.padding,i.padding),this._commitLayoutVertex(h.layoutVertexArray,p,g,v,D,P,new k(i.x1,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,g,v,D,P,new k(i.x2,i.y1)),this._commitLayoutVertex(h.layoutVertexArray,p,g,v,D,P,new k(i.x2,i.y2)),this._commitLayoutVertex(h.layoutVertexArray,p,g,v,D,P,new k(i.x1,i.y2)),S.vertexLength+=4;const L=h.indexArray;L.emplaceBack(T,T+1),L.emplaceBack(T+1,T+2),L.emplaceBack(T+2,T+3),L.emplaceBack(T+3,T),S.primitiveLength+=4}_addTextDebugCollisionBoxes(i,a,h,p,g,v){for(let x=p;x<g;x++){const S=h.get(x),T=this.getSymbolInstanceTextSize(i,v,a,x);this._addCollisionDebugVertices(S,T,this.textCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(i,a,h,p,g,v){for(let x=p;x<g;x++){const S=h.get(x),T=this.getSymbolInstanceIconSize(i,a,x);this._addCollisionDebugVertices(S,T,this.iconCollisionBox,S.projectedAnchorX,S.projectedAnchorY,S.projectedAnchorZ,v)}}generateCollisionDebugBuffers(i,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new V1(Go,kC.members,Lr),this.iconCollisionBox=new V1(Go,kC.members,Lr);const h=Bh(this.iconSizeData,i),p=Bh(this.textSizeData,i);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(p,i,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(p,i,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(h,i,a,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(h,i,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(i,a,h,p){const g=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:p),v=Z_(this.textSizeData,i,g)/Cr;return this.tilePixelRatio*v}getSymbolInstanceIconSize(i,a,h){const p=this.icon.placedSymbolArray.get(h),g=Z_(this.iconSizeData,i,p);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(i,a,h){i.emplaceBack(a,-h,-h),i.emplaceBack(a,h,-h),i.emplaceBack(a,h,h),i.emplaceBack(a,-h,h)}_updateTextDebugCollisionBoxes(i,a,h,p,g,v){for(let x=p;x<g;x++){const S=h.get(x),T=this.getSymbolInstanceTextSize(i,v,a,x);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,T,S.padding)}}_updateIconDebugCollisionBoxes(i,a,h,p,g){for(let v=p;v<g;v++){const x=h.get(v),S=this.getSymbolInstanceIconSize(i,a,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,S,x.padding)}}updateCollisionDebugBuffers(i,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=Bh(this.iconSizeData,i),p=Bh(this.textSizeData,i);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(p,i,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(p,i,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(h,i,a,v.iconBoxStartIndex,v.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(h,i,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(i,a,h,p,g,v,x,S,T){const D={};for(let P=a;P<h;P++){const L=i.get(P);D.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,padding:L.padding,projectedAnchorX:L.projectedAnchorX,projectedAnchorY:L.projectedAnchorY,projectedAnchorZ:L.projectedAnchorZ,tileAnchorX:L.tileAnchorX,tileAnchorY:L.tileAnchorY},D.textFeatureIndex=L.featureIndex;break}for(let P=p;P<g;P++){const L=i.get(P);D.verticalTextBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,padding:L.padding,projectedAnchorX:L.projectedAnchorX,projectedAnchorY:L.projectedAnchorY,projectedAnchorZ:L.projectedAnchorZ,tileAnchorX:L.tileAnchorX,tileAnchorY:L.tileAnchorY},D.verticalTextFeatureIndex=L.featureIndex;break}for(let P=v;P<x;P++){const L=i.get(P);D.iconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,padding:L.padding,projectedAnchorX:L.projectedAnchorX,projectedAnchorY:L.projectedAnchorY,projectedAnchorZ:L.projectedAnchorZ,tileAnchorX:L.tileAnchorX,tileAnchorY:L.tileAnchorY},D.iconFeatureIndex=L.featureIndex;break}for(let P=S;P<T;P++){const L=i.get(P);D.verticalIconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,padding:L.padding,projectedAnchorX:L.projectedAnchorX,projectedAnchorY:L.projectedAnchorY,projectedAnchorZ:L.projectedAnchorZ,tileAnchorX:L.tileAnchorX,tileAnchorY:L.tileAnchorY},D.verticalIconFeatureIndex=L.featureIndex;break}return D}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const h=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,a){const h=i.placedSymbolArray.get(a),p=h.vertexStartIndex+4*h.numGlyphs;for(let g=h.vertexStartIndex;g<p;g+=4)i.indexArray.emplaceBack(g,g+1,g+2),i.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(i),h=Math.cos(i),p=[],g=[],v=[];for(let x=0;x<this.symbolInstances.length;++x){v.push(x);const S=this.symbolInstances.get(x);p.push(0|Math.round(a*S.tileAnchorX+h*S.tileAnchorY)),g.push(S.featureIndex)}return v.sort((x,S)=>p[x]-p[S]||g[S]-g[x]),v}addToSortKeyRanges(i,a){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===a?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const h=this.symbolInstances.get(a);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,g,v)=>{p>=0&&v.indexOf(p)===g&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}zt(Vl,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Vl.MAX_GLYPHS=65535,Vl.addDynamicAttributes=cy;const b4=new Ye({"symbol-placement":new ve(Ge.layout_symbol["symbol-placement"]),"symbol-spacing":new ve(Ge.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ve(Ge.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Me(Ge.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ve(Ge.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ve(Ge.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ve(Ge.layout_symbol["icon-ignore-placement"]),"icon-optional":new ve(Ge.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ve(Ge.layout_symbol["icon-rotation-alignment"]),"icon-size":new Me(Ge.layout_symbol["icon-size"]),"icon-text-fit":new ve(Ge.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ve(Ge.layout_symbol["icon-text-fit-padding"]),"icon-image":new Me(Ge.layout_symbol["icon-image"]),"icon-rotate":new Me(Ge.layout_symbol["icon-rotate"]),"icon-padding":new ve(Ge.layout_symbol["icon-padding"]),"icon-keep-upright":new ve(Ge.layout_symbol["icon-keep-upright"]),"icon-offset":new Me(Ge.layout_symbol["icon-offset"]),"icon-anchor":new Me(Ge.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ve(Ge.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ve(Ge.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ve(Ge.layout_symbol["text-rotation-alignment"]),"text-field":new Me(Ge.layout_symbol["text-field"]),"text-font":new Me(Ge.layout_symbol["text-font"]),"text-size":new Me(Ge.layout_symbol["text-size"]),"text-max-width":new Me(Ge.layout_symbol["text-max-width"]),"text-line-height":new Me(Ge.layout_symbol["text-line-height"]),"text-letter-spacing":new Me(Ge.layout_symbol["text-letter-spacing"]),"text-justify":new Me(Ge.layout_symbol["text-justify"]),"text-radial-offset":new Me(Ge.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ve(Ge.layout_symbol["text-variable-anchor"]),"text-anchor":new Me(Ge.layout_symbol["text-anchor"]),"text-max-angle":new ve(Ge.layout_symbol["text-max-angle"]),"text-writing-mode":new ve(Ge.layout_symbol["text-writing-mode"]),"text-rotate":new Me(Ge.layout_symbol["text-rotate"]),"text-padding":new ve(Ge.layout_symbol["text-padding"]),"text-keep-upright":new ve(Ge.layout_symbol["text-keep-upright"]),"text-transform":new Me(Ge.layout_symbol["text-transform"]),"text-offset":new Me(Ge.layout_symbol["text-offset"]),"text-allow-overlap":new ve(Ge.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ve(Ge.layout_symbol["text-ignore-placement"]),"text-optional":new ve(Ge.layout_symbol["text-optional"])});var j1={paint:new Ye({"icon-opacity":new Me(Ge.paint_symbol["icon-opacity"]),"icon-color":new Me(Ge.paint_symbol["icon-color"]),"icon-halo-color":new Me(Ge.paint_symbol["icon-halo-color"]),"icon-halo-width":new Me(Ge.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Me(Ge.paint_symbol["icon-halo-blur"]),"icon-translate":new ve(Ge.paint_symbol["icon-translate"]),"icon-translate-anchor":new ve(Ge.paint_symbol["icon-translate-anchor"]),"text-opacity":new Me(Ge.paint_symbol["text-opacity"]),"text-color":new Me(Ge.paint_symbol["text-color"],{runtimeType:Vo,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new Me(Ge.paint_symbol["text-halo-color"]),"text-halo-width":new Me(Ge.paint_symbol["text-halo-width"]),"text-halo-blur":new Me(Ge.paint_symbol["text-halo-blur"]),"text-translate":new ve(Ge.paint_symbol["text-translate"]),"text-translate-anchor":new ve(Ge.paint_symbol["text-translate-anchor"])}),layout:b4};class gM{constructor(i){this.type=i.property.overrides?i.property.overrides.runtimeType:_l,this.defaultValue=i}evaluate(i){if(i.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(i.formattedSection))return a.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zt(gM,"FormatSectionOverride",{omit:["defaultValue"]});class uy extends ks{constructor(i){super(i,j1)}recalculate(i,a){super.recalculate(i,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const p=[];for(const g of h)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(i,a,h,p){const g=this.layout.get(i).evaluate(a,{},h,p),v=this._unevaluatedLayout._values[i];return v.isDataDriven()||vh(v.value)||!g?g:function(x,S){return S.replace(/{([^{}]+)}/g,(T,D)=>D in x?String(x[D]):"")}(a.properties,g)}createBucket(i){return new Vl(i)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const i of j1.paint.overridableProperties){if(!uy.hasPaintOverride(this.layout,i))continue;const a=this.paint.get(i),h=new gM(a),p=new Wf(h,a.property.specification);let g=null;g=a.value.kind==="constant"||a.value.kind==="source"?new Hf("source",p):new Uc("composite",p,a.value.zoomStops,a.value._interpolationType),this.paint._values[i]=new me(a.property,g,a.parameters)}}_handleOverridablePaintPropertyUpdate(i,a,h){return!(!this.layout||a.isDataDriven()||h.isDataDriven())&&uy.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,a){const h=i.get("text-field"),p=j1.paint.properties[a];let g=!1;const v=x=>{for(const S of x)if(p.overrides&&p.overrides.hasOverride(S))return void(g=!0)};if(h.value.kind==="constant"&&h.value.value instanceof $r)v(h.value.value.sections);else if(h.value.kind==="source"){const x=T=>{g||(T instanceof Dc&&Ui(T.value)===Cc?v(T.value.sections):T instanceof Pc?v(T.sections):T.eachChild(x))},S=h.value;S._styleExpression&&x(S._styleExpression.expression)}return g}getProgramConfiguration(i){return new zl(this,i)}}var w4={paint:new Ye({"background-color":new ve(Ge.paint_background["background-color"]),"background-pattern":new ut(Ge.paint_background["background-pattern"]),"background-opacity":new ve(Ge.paint_background["background-opacity"])})},E4={paint:new Ye({"raster-opacity":new ve(Ge.paint_raster["raster-opacity"]),"raster-hue-rotate":new ve(Ge.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ve(Ge.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ve(Ge.paint_raster["raster-brightness-max"]),"raster-saturation":new ve(Ge.paint_raster["raster-saturation"]),"raster-contrast":new ve(Ge.paint_raster["raster-contrast"]),"raster-resampling":new ve(Ge.paint_raster["raster-resampling"]),"raster-fade-duration":new ve(Ge.paint_raster["raster-fade-duration"])})};class S4 extends ks{constructor(i){super(i,{}),this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(i){this.implementation.onAdd&&this.implementation.onAdd(i,i.painter.context.gl)}onRemove(i){this.implementation.onRemove&&this.implementation.onRemove(i,i.painter.context.gl)}}var T4={paint:new Ye({"sky-type":new ve(Ge.paint_sky["sky-type"]),"sky-atmosphere-sun":new ve(Ge.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ve(Ge.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ve(Ge.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ve(Ge.paint_sky["sky-gradient-radius"]),"sky-gradient":new Pe(Ge.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ve(Ge.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ve(Ge.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ve(Ge.paint_sky["sky-opacity"])})};function U1(l,i,a){const h=[0,0,1],p=KT([]);return QT(p,p,a?-G(l)+Math.PI:G(l)),JT(p,p,-G(i)),YT(h,h,p),Wr(h,h)}const C4={circle:class extends ks{constructor(l){super(l,D5)}createBucket(l){return new i1(l)}queryRadius(l){const i=l;return Oh("circle-radius",this,i)+Oh("circle-stroke-width",this,i)+z_(this.paint.get("circle-translate"))}queryIntersectsFeature(l,i,a,h,p,g,v,x){const S=UT(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),T=this.paint.get("circle-radius").evaluate(i,a)+this.paint.get("circle-stroke-width").evaluate(i,a);return eC(l,h,g,v,x,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",S,T)}getProgramIds(){return["circle"]}getProgramConfiguration(l){return new zl(this,l)}},heatmap:class extends ks{createBucket(l){return new nC(l)}constructor(l){super(l,F5),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(l){return Oh("heatmap-radius",this,l)}queryIntersectsFeature(l,i,a,h,p,g,v,x){const S=this.paint.get("heatmap-radius").evaluate(i,a);return eC(l,h,g,v,x,!0,!0,new k(0,0),S)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(l){return new zl(this,l)}},hillshade:class extends ks{constructor(l){super(l,B5)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ks{constructor(l){super(l,tF)}getProgramIds(){const l=this.paint.get("fill-pattern"),i=l&&l.constantOr(1),a=[i?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(i&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(l){return new zl(this,l)}recalculate(l,i){super.recalculate(l,i);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new G_(l)}queryRadius(){return z_(this.paint.get("fill-translate"))}queryIntersectsFeature(l,i,a,h,p,g){return!l.queryGeometry.isAboveHorizon&&FT(jT(l.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends ks{constructor(l){super(l,pF)}createBucket(l){return new bp(l)}queryRadius(){return z_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(l){return new zl(this,l)}queryIntersectsFeature(l,i,a,h,p,g,v,x,S){const T=UT(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),D=this.paint.get("fill-extrusion-height").evaluate(i,a),P=this.paint.get("fill-extrusion-base").evaluate(i,a),L=[0,0],F=x&&g.elevation,V=g.elevation?g.elevation.exaggeration():1,q=l.tile.getBucket(this);if(F&&q instanceof bp){const ge=q.centroidVertexArray,ue=S+1;if(ue<ge.length){const pe=ge.get(ue);L[0]=pe.a_centroid_pos0,L[1]=pe.a_centroid_pos1}}if(L[0]===0&&L[1]===1)return!1;g.projection.name==="globe"&&(h=xC([h],[new k(0,0),new k(nn,nn)],l.tileID.canonical).map(ge=>ge.polygon).flat());const K=function(ge,ue,pe,Te,_e,Be,Fe,He,dt,Ue,Xe){return ge.projection.name==="globe"?function(nt,Ke,ht,it,Ct,fn,mn,Wt,vt,En,sn){const Pt=[],ri=[],Kn=nt.projection.upVectorScale(sn,nt.center.lat,nt.worldSize).metersToTile,_i=[0,0,0,1],_n=[0,0,0,1],Pn=(Jn,qn,di,Ei)=>{Jn[0]=qn,Jn[1]=di,Jn[2]=Ei,Jn[3]=1},oi=vC();ht>0&&(ht+=oi),it+=oi;for(const Jn of Ke){const qn=[],di=[];for(const Ei of Jn){const pr=Ei.x+Ct.x,mo=Ei.y+Ct.y,Cn=nt.projection.projectTilePoint(pr,mo,sn),zi=nt.projection.upVector(sn,Ei.x,Ei.y);let Rr=ht,Rn=it;if(mn){const Si=SC(pr,mo,ht,it,mn,Wt,vt,En);Rr+=Si.base,Rn+=Si.top}ht!==0?Pn(_i,Cn.x+zi[0]*Kn*Rr,Cn.y+zi[1]*Kn*Rr,Cn.z+zi[2]*Kn*Rr):Pn(_i,Cn.x,Cn.y,Cn.z),Pn(_n,Cn.x+zi[0]*Kn*Rn,Cn.y+zi[1]*Kn*Rn,Cn.z+zi[2]*Kn*Rn),nr(_i,_i,fn),nr(_n,_n,fn),qn.push(q_(_i)),di.push(q_(_n))}Pt.push(qn),ri.push(di)}return[Pt,ri]}(ge,ue,pe,Te,_e,Be,Fe,He,dt,Ue,Xe):Fe?function(nt,Ke,ht,it,Ct,fn,mn,Wt,vt){const En=[],sn=[],Pt=[0,0,0,1];for(const ri of nt){const Kn=[],_i=[];for(const _n of ri){const Pn=_n.x+it.x,oi=_n.y+it.y,Jn=SC(Pn,oi,Ke,ht,fn,mn,Wt,vt);Pt[0]=Pn,Pt[1]=oi,Pt[2]=Jn.base,Pt[3]=1,ou(Pt,Pt,Ct),Pt[3]=Math.max(Pt[3],1e-5);const qn=q_([Pt[0]/Pt[3],Pt[1]/Pt[3],Pt[2]/Pt[3]]);Pt[0]=Pn,Pt[1]=oi,Pt[2]=Jn.top,Pt[3]=1,ou(Pt,Pt,Ct),Pt[3]=Math.max(Pt[3],1e-5);const di=q_([Pt[0]/Pt[3],Pt[1]/Pt[3],Pt[2]/Pt[3]]);Kn.push(qn),_i.push(di)}En.push(Kn),sn.push(_i)}return[En,sn]}(ue,pe,Te,_e,Be,Fe,He,dt,Ue):function(nt,Ke,ht,it,Ct){const fn=[],mn=[],Wt=Ct[8]*Ke,vt=Ct[9]*Ke,En=Ct[10]*Ke,sn=Ct[11]*Ke,Pt=Ct[8]*ht,ri=Ct[9]*ht,Kn=Ct[10]*ht,_i=Ct[11]*ht;for(const _n of nt){const Pn=[],oi=[];for(const Jn of _n){const qn=Jn.x+it.x,di=Jn.y+it.y,Ei=Ct[0]*qn+Ct[4]*di+Ct[12],pr=Ct[1]*qn+Ct[5]*di+Ct[13],mo=Ct[2]*qn+Ct[6]*di+Ct[14],Cn=Ct[3]*qn+Ct[7]*di+Ct[15],zi=Ei+Wt,Rr=pr+vt,Rn=mo+En,Si=Math.max(Cn+sn,1e-5),qr=Ei+Pt,yi=pr+ri,$i=mo+Kn,mr=Math.max(Cn+_i,1e-5),cr=new k(zi/Si,Rr/Si);cr.z=Rn/Si,Pn.push(cr);const Mr=new k(qr/mr,yi/mr);Mr.z=$i/mr,oi.push(Mr)}fn.push(Pn),mn.push(oi)}return[fn,mn]}(ue,pe,Te,_e,Be)}(g,h,P,D,T,v,F?x:null,L,V,g.center.lat,l.tileID.canonical),le=l.queryGeometry;return function(ge,ue,pe){let Te=1/0;FT(pe,ue)&&(Te=EC(pe,ue[0]));for(let _e=0;_e<ue.length;_e++){const Be=ue[_e],Fe=ge[_e];for(let He=0;He<Be.length-1;He++){const dt=Be[He],Ue=[dt,Be[He+1],Fe[He+1],Fe[He],dt];RT(pe,Ue)&&(Te=Math.min(Te,EC(pe,Ue)))}}return Te!==1/0&&Te}(K[0],K[1],le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends ks{constructor(l){super(l,TC),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){const i=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=i._styleExpression&&i._styleExpression.expression instanceof Tf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,i){super.recalculate(l,i),this.paint._values["line-floorwidth"]=CC.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new Y_(l)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(l){return new zl(this,l)}queryRadius(l){const i=l,a=MC(Oh("line-width",this,i),Oh("line-gap-width",this,i)),h=Oh("line-offset",this,i);return a/2+Math.abs(h)+z_(this.paint.get("line-translate"))}queryIntersectsFeature(l,i,a,h,p,g){if(l.queryGeometry.isAboveHorizon)return!1;const v=jT(l.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,l.pixelToTileUnitsFactor),x=l.pixelToTileUnitsFactor/2*MC(this.paint.get("line-width").evaluate(i,a),this.paint.get("line-gap-width").evaluate(i,a)),S=this.paint.get("line-offset").evaluate(i,a);return S&&(h=function(T,D){const P=[],L=new k(0,0);for(let F=0;F<T.length;F++){const V=T[F],q=[];for(let K=0;K<V.length;K++){const le=V[K-1],ge=V[K],ue=V[K+1],pe=K===0?L:ge.sub(le)._unit()._perp(),Te=K===V.length-1?L:ue.sub(ge)._unit()._perp(),_e=pe._add(Te)._unit();_e._mult(1/(_e.x*Te.x+_e.y*Te.y)),q.push(_e._mult(D)._add(ge))}P.push(q)}return P}(h,S*l.pixelToTileUnitsFactor)),function(T,D,P){for(let L=0;L<D.length;L++){const F=D[L];if(T.length>=3){for(let V=0;V<F.length;V++)if(iu(T,F[V]))return!0}if(C5(T,F,P))return!0}return!1}(v,h,x)}isTileClipped(){return!0}},symbol:uy,background:class extends ks{constructor(l){super(l,w4)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ks{constructor(l){super(l,E4)}getProgramIds(){return["raster"]}},sky:class extends ks{constructor(l){super(l,T4),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="sky-gradient"?this._updateColorRamp():l!=="sky-atmosphere-sun"&&l!=="sky-atmosphere-halo-color"&&l!=="sky-atmosphere-color"&&l!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=_1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(l){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const i=l.style.light.properties.get("position");return this._lightPosition.azimuthal!==i.azimuthal||this._lightPosition.polar!==i.polar}return!1}getCenter(l,i){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),p=!h,g=l.style.light,v=g.properties.get("position");return p&&g.properties.get("anchor")==="viewport"&&at("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),p?U1(v.azimuthal,90-v.polar,i):U1(h[0],90-h[1],i)}const a=this.paint.get("sky-gradient-center");return U1(a[0],90-a[1],i)}is3D(){return!1}isSky(){return!0}markSkyboxValid(l){this._skyboxInvalidated=!1,this._lightPosition=l.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const l=this.paint.get("sky-type");return l==="atmosphere"?["skyboxCapture","skybox"]:l==="gradient"?["skyboxGradient"]:null}}};class Rp{constructor(i,a,h,p){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(a,p)}update(i,a,h){const{width:p,height:g}=i,{context:v}=this,{gl:x}=v,{HTMLImageElement:S,HTMLCanvasElement:T,HTMLVideoElement:D,ImageData:P,ImageBitmap:L}=y;if(x.bindTexture(x.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===x.RGBA&&(!a||a.premultiply!==!1)),h||this.size&&this.size[0]===p&&this.size[1]===g){const{x:F,y:V}=h||{x:0,y:0};i instanceof S||i instanceof T||i instanceof D||i instanceof P||L&&i instanceof L?x.texSubImage2D(x.TEXTURE_2D,0,F,V,x.RGBA,x.UNSIGNED_BYTE,i):x.texSubImage2D(x.TEXTURE_2D,0,F,V,p,g,x.RGBA,x.UNSIGNED_BYTE,i.data)}else this.size=[p,g],i instanceof S||i instanceof T||i instanceof D||i instanceof P||L&&i instanceof L?x.texImage2D(x.TEXTURE_2D,0,this.format,this.format,x.UNSIGNED_BYTE,i):x.texImage2D(x.TEXTURE_2D,0,this.format,p,g,0,this.format,x.UNSIGNED_BYTE,i.data);this.useMipmap=Boolean(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&x.generateMipmap(x.TEXTURE_2D)}bind(i,a){const{context:h}=this,{gl:p}=h;p.bindTexture(p.TEXTURE_2D,this.texture),i!==this.filter&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,i),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,this.useMipmap?i===p.NEAREST?p.NEAREST_MIPMAP_NEAREST:p.LINEAR_MIPMAP_NEAREST:i),this.filter=i),a!==this.wrap&&(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,a),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class $1{constructor(i,a){this.width=i,this.height=a,this.nextRow=0,this.image=new Ua({width:i,height:a}),this.positions={},this.uploaded=!1}getDash(i,a){const h=this.getKey(i,a);return this.positions[h]}trim(){const i=this.width,a=this.height=Ne(this.nextRow);this.image.resize({width:i,height:a})}getKey(i,a){return i.join(",")+a}getDashRanges(i,a,h){const p=[];let g=i.length%2==1?-i[i.length-1]*h:0,v=i[0]*h,x=!0;p.push({left:g,right:v,isDash:x,zeroLength:i[0]===0});let S=i[0];for(let T=1;T<i.length;T++){x=!x;const D=i[T];g=S*h,S+=D,v=S*h,p.push({left:g,right:v,isDash:x,zeroLength:D===0})}return p}addRoundDash(i,a,h){const p=a/2;for(let g=-h;g<=h;g++){const v=this.width*(this.nextRow+h+g);let x=0,S=i[x];for(let T=0;T<this.width;T++){T/S.right>1&&(S=i[++x]);const D=Math.abs(T-S.left),P=Math.abs(T-S.right),L=Math.min(D,P);let F;const V=g/h*(p+1);if(S.isDash){const q=p-Math.abs(V);F=Math.sqrt(L*L+q*q)}else F=p-Math.sqrt(L*L+V*V);this.image.data[v+T]=Math.max(0,Math.min(255,F+128))}}}addRegularDash(i,a){for(let S=i.length-1;S>=0;--S){const T=i[S],D=i[S+1];T.zeroLength?i.splice(S,1):D&&D.isDash===T.isDash&&(D.left=T.left,i.splice(S,1))}const h=i[0],p=i[i.length-1];h.isDash===p.isDash&&(h.left=p.left-this.width,p.right=h.right+this.width);const g=this.width*this.nextRow;let v=0,x=i[v];for(let S=0;S<this.width;S++){S/x.right>1&&(x=i[++v]);const T=Math.abs(S-x.left),D=Math.abs(S-x.right),P=Math.min(T,D);this.image.data[g+S]=Math.max(0,Math.min(255,(x.isDash?P:-P)+a+128))}}addDash(i,a){const h=this.getKey(i,a);if(this.positions[h])return this.positions[h];const p=a==="round",g=p?7:0,v=2*g+1;if(this.nextRow+v>this.height)return at("LineAtlas out of space"),null;i.length===0&&i.push(1);let x=0;for(let D=0;D<i.length;D++)i[D]<0&&(at("Negative value is found in line dasharray, replacing values with 0"),i[D]=0),x+=i[D];if(x!==0){const D=this.width/x,P=this.getDashRanges(i,this.width,D);p?this.addRoundDash(P,D,g):this.addRegularDash(P,a==="square"?.5*D:0)}const S=this.nextRow+g;this.nextRow+=v;const T={tl:[S,g],br:[x,0]};return this.positions[h]=T,T}}zt($1,"LineAtlas");class M4{constructor(i){this._callback=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class k4{constructor(){this.tasks={},this.taskQueue=[],tt(["process"],this),this.invoker=new M4(this.process),this.nextId=0}add(i,a){const h=this.nextId++,p=function({type:g,isSymbolTile:v,zoom:x}){return x=x||0,g==="message"?0:g!=="maybePrepare"||v?g!=="parseTile"||v?g==="parseTile"&&v?300-x:g==="maybePrepare"&&v?400-x:500:200-x:100-x}(a);if(p===0){Gt();try{i()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:i,metadata:a,priority:p,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){Gt();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const i=this.pick();if(i===null)return;const a=this.tasks[i];if(delete this.tasks[i],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let i=null,a=1/0;for(let p=0;p<this.taskQueue.length;p++){const g=this.tasks[this.taskQueue[p]];g.priority<a&&(a=g.priority,i=p)}if(i===null)return null;const h=this.taskQueue[i];return this.taskQueue.splice(i,1),h}remove(){this.invoker.remove()}}class _M{constructor(i){this._stringToNumber={},this._numberToString=[];for(let a=0;a<i.length;a++){const h=i[a];this._stringToNumber[h]=a,this._numberToString[a]=h}}encode(i){return this._stringToNumber[i]}decode(i){return this._numberToString[i]}}const A4=["tile","layer","source","sourceLayer","state"];class yM{constructor(i,a,h,p,g){this.type="Feature",this._vectorTileFeature=i,this._z=a,this._x=h,this._y=p,this.properties=i.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={type:"Feature",geometry:this.geometry,properties:this.properties};this.id!==void 0&&(i.id=this.id);for(const a of A4)this[a]!==void 0&&(i[a]=this[a]);return i}}const as=32,oa=33,jl=new Uint16Array(8184);for(let l=0;l<2046;l++){let i=l+2,a=0,h=0,p=0,g=0,v=0,x=0;for(1&i?p=g=v=as:a=h=x=as;(i>>=1)>1;){const T=a+p>>1,D=h+g>>1;1&i?(p=a,g=h,a=v,h=x):(a=p,h=g,p=v,g=x),v=T,x=D}const S=4*l;jl[S+0]=a,jl[S+1]=h,jl[S+2]=p,jl[S+3]=g}const sa=new Uint16Array(2178),Ul=new Uint8Array(1089),hy=new Uint16Array(1089);function vM(l){return l===0?-.03125:l===32?.03125:0}var xM=Ze([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const bM={type:2,extent:nn,loadGeometry:()=>[[new k(0,0),new k(8193,0),new k(8193,8193),new k(0,8193),new k(0,0)]]};class G1{constructor(i,a,h,p,g){this.tileID=i,this.uid=ot(),this.uses=0,this.tileSize=a,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",p&&p.transform&&(this.projection=p.transform.projection)}registerFadeDuration(i){const a=i+this.timeAdded;a<Fn.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=lu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(i,a,h){if(this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,g){const v={};if(!g)return v;for(const x of p){const S=x.layerIds.map(T=>g.getLayer(T)).filter(Boolean);if(S.length!==0){x.layers=S,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(T=>S.filter(D=>D.id===T)[0]));for(const T of S)v[T.id]=x}}return v}(i.buckets,a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const g=this.buckets[p];if(g instanceof Vl){if(this.hasSymbolBuckets=!0,!h)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const g=this.buckets[p];if(g instanceof Vl&&g.hasRTLText){this.hasRTLText=!0,ee.isLoading()||ee.isLoaded()||Y()!=="deferred"||oe();break}}this.queryPadding=0;for(const p in this.buckets){const g=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(g))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage),i.lineAtlas&&(this.lineAtlas=i.lineAtlas)}else this.collisionBoxArray=new Qs}unloadVectorData(){if(this.hasData()){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(i){return this.buckets[i.id]}upload(i){for(const h in this.buckets){const p=this.buckets[h];p.uploadPending()&&p.upload(i)}const a=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Rp(i,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Rp(i,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Rp(i,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,a,h,p,g,v,x,S){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:p,pixelPosMatrix:x,transform:v,params:g,tileTransform:this.tileTransform},i,a,h):{}}querySourceFeatures(i,a){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const p=h.loadVTLayers(),g=a?a.sourceLayer:"",v=p._geojsonTileLayer||p[g];if(!v)return;const x=Hc(a&&a.filter),{z:S,x:T,y:D}=this.tileID.canonical,P={z:S,x:T,y:D};for(let L=0;L<v.length;L++){const F=v.feature(L);if(x.needGeometry){const K=nu(F,!0);if(!x.filter(new te(this.tileID.overscaledZ),K,this.tileID.canonical))continue}else if(!x.filter(new te(this.tileID.overscaledZ),F))continue;const V=h.getId(F,g),q=new yM(F,S,T,D,V);q.tile=P,i.push(q)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const a=this.expirationTime;if(i.cacheControl){const h=hn(i.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const h=Date.now();let p=!1;if(this.expirationTime>h)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const g=this.expirationTime-a;g?this.expirationTime=h+Math.max(g,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0||!a)return;const h=this.latestFeatureIndex.loadVTLayers(),p=a.style.listImages();for(const g in this.buckets){if(!a.style.hasLayer(g))continue;const v=this.buckets[g],x=v.layers[0].sourceLayer||"_geojsonTileLayer",S=h[x],T=i[x];if(!S||!T||Object.keys(T).length===0)continue;if(v.update(T,S,p,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof Y_||v instanceof G_){const P=a.style._getSourceCache(v.layers[0].source);a._terrain&&a._terrain.enabled&&P&&v.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(P.id,this.tileID)}const D=a&&a.style&&a.style.getLayer(g);D&&(this.queryPadding=Math.max(this.queryPadding,D.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Fn.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=Fn.now()+i}setTexture(i,a){const h=a.context,p=h.gl;this.texture=a.getTileTexture(i.width),this.texture?this.texture.update(i,{useMipmap:!0}):(this.texture=new Rp(h,i,p.RGBA,{useMipmap:!0}),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),h.extTextureFilterAnisotropic&&p.texParameterf(p.TEXTURE_2D,h.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,h.extTextureFilterAnisotropicMax))}setDependencies(i,a){const h={};for(const p of a)h[p]=!0;this.dependencies[i]=h}hasDependency(i,a){for(const h of i){const p=this.dependencies[h];if(p){for(const g of a)if(p[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(i,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const h=ja(bM,this.tileID.canonical,this.tileTransform)[0],p=new bt,g=new La;for(let v=0;v<h.length;v++){const{x,y:S}=h[v];p.emplaceBack(x,S),g.emplaceBack(v)}g.emplaceBack(0),this._tileDebugIndexBuffer=i.createIndexBuffer(g),this._tileDebugBuffer=i.createVertexBuffer(p,kp.members),this._tileDebugSegments=Xi.simpleSegment(0,0,p.length,g.length)}_makeTileBoundsBuffers(i,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const h=ja(bM,this.tileID.canonical,this.tileTransform)[0];let p,g;if(this.isRaster){const v=function(x,S){const T=lu(x,S),D=Math.pow(2,x.z);for(let K=0;K<oa;K++)for(let le=0;le<oa;le++){const ge=os((x.x+(le+vM(le))/as)/D),ue=Tr((x.y+(K+vM(K))/as)/D),pe=S.project(ge,ue),Te=K*oa+le;sa[2*Te+0]=Math.round((pe.x*T.scale-T.x)*nn),sa[2*Te+1]=Math.round((pe.y*T.scale-T.y)*nn)}Ul.fill(0),hy.fill(0);for(let K=2045;K>=0;K--){const le=4*K,ge=jl[le+0],ue=jl[le+1],pe=jl[le+2],Te=jl[le+3],_e=ge+pe>>1,Be=ue+Te>>1,Fe=_e+Be-ue,He=Be+ge-_e,dt=ue*oa+ge,Ue=Te*oa+pe,Xe=Be*oa+_e,nt=Math.hypot((sa[2*dt+0]+sa[2*Ue+0])/2-sa[2*Xe+0],(sa[2*dt+1]+sa[2*Ue+1])/2-sa[2*Xe+1])>=16;if(Ul[Xe]=Ul[Xe]||(nt?1:0),K<1022){const Ke=(ue+He>>1)*oa+(ge+Fe>>1),ht=(Te+He>>1)*oa+(pe+Fe>>1);Ul[Xe]=Ul[Xe]||Ul[Ke]||Ul[ht]}}const P=new qt,L=new yn;let F=0;function V(K,le){const ge=le*oa+K;return hy[ge]===0&&(P.emplaceBack(sa[2*ge+0],sa[2*ge+1],K*nn/as,le*nn/as),hy[ge]=++F),hy[ge]-1}function q(K,le,ge,ue,pe,Te){const _e=K+ge>>1,Be=le+ue>>1;if(Math.abs(K-pe)+Math.abs(le-Te)>1&&Ul[Be*oa+_e])q(pe,Te,K,le,_e,Be),q(ge,ue,pe,Te,_e,Be);else{const Fe=V(K,le),He=V(ge,ue),dt=V(pe,Te);L.emplaceBack(Fe,He,dt)}}return q(0,0,as,as,as,0),q(as,as,0,0,0,as),{vertices:P,indices:L}}(this.tileID.canonical,a);p=v.vertices,g=v.indices}else{p=new qt,g=new yn;for(const{x,y:S}of h)p.emplaceBack(x,S,0,0);const v=N_(p.int16,void 0,4);for(let x=0;x<v.length;x+=3)g.emplaceBack(v[x],v[x+1],v[x+2])}this._tileBoundsBuffer=i.createVertexBuffer(p,xM.members),this._tileBoundsIndexBuffer=i.createIndexBuffer(g),this._tileBoundsSegments=Xi.simpleSegment(0,0,p.length,g.length)}_makeGlobeTileDebugBuffers(i,a){const h=a.projection;if(!h||h.name!=="globe"||a.freezeTileCoverage)return;const p=this.tileID.canonical,g=Dp(rM(p,a)),v=Ip(a.zoom);let x;v>0&&(x=s1(new Float64Array(16),a.globeMatrix));const S=(p.x+.5)/(1<<p.z)-ea(a.center.lng);let T=0;S>.5?T=-1:S<-.5&&(T=1),this._makeGlobeTileDebugBorderBuffer(i,p,a,g,x,v,T),this._makeGlobeTileDebugTextBuffer(i,p,a,g,x,v,T)}_globePoint(i,a,h,p,g,v,x,S){let T=Ap(i,a,h);if(v){const D=1<<h.z,P=[((i/nn+h.x)/D+S)*p,(a/nn+h.y)/D*p,0];nr(P,P,v),T=bl(T,P,x)}return nr(T,T,g)}_makeGlobeTileDebugBorderBuffer(i,a,h,p,g,v,x){const S=new bt,T=new La,D=new Bt,P=(F,V,q,K,le)=>{const ge=(q-F)/(le-1),ue=(K-V)/(le-1),pe=S.length;for(let Te=0;Te<le;Te++){const _e=F+Te*ge,Be=V+Te*ue;S.emplaceBack(_e,Be);const Fe=this._globePoint(_e,Be,a,h.worldSize,p,g,v,x);D.emplaceBack(Fe[0],Fe[1],Fe[2]),T.emplaceBack(pe+Te)}},L=nn;P(0,0,L,0,16),P(L,0,L,L,16),P(L,L,0,L,16),P(0,L,0,0,16),this._tileDebugIndexBuffer=i.createIndexBuffer(T),this._tileDebugBuffer=i.createVertexBuffer(S,kp.members),this._globeTileDebugBorderBuffer=i.createVertexBuffer(D,nM.members),this._tileDebugSegments=Xi.simpleSegment(0,0,S.length,T.length)}_makeGlobeTileDebugTextBuffer(i,a,h,p,g,v,x){const S=new bt,T=new yn,D=new Bt,P=25;T.reserve(32),S.reserve(P),D.reserve(P);const L=(F,V)=>P*F+V;for(let F=0;F<P;F++){const V=2048*F;for(let q=0;q<P;q++){const K=2048*q;S.emplaceBack(K,V);const le=this._globePoint(K,V,a,h.worldSize,p,g,v,x);D.emplaceBack(le[0],le[1],le[2])}}for(let F=0;F<4;F++)for(let V=0;V<4;V++){const q=L(F,V),K=L(F,V+1),le=L(F+1,V),ge=L(F+1,V+1);T.emplaceBack(q,K,le),T.emplaceBack(le,K,ge)}this._tileDebugTextIndexBuffer=i.createIndexBuffer(T),this._tileDebugTextBuffer=i.createVertexBuffer(S,kp.members),this._globeTileDebugTextBuffer=i.createVertexBuffer(D,nM.members),this._tileDebugTextSegments=Xi.simpleSegment(0,0,P,32)}}class D4{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,a,h){const p=String(a);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},pt(this.stateChanges[i][p],h),this.deletedStates[i]===null){this.deletedStates[i]={};for(const g in this.state[i])g!==p&&(this.deletedStates[i][g]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const g in this.state[i][p])h[g]||(this.deletedStates[i][p][g]=null)}else for(const g in h)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][g]===null&&delete this.deletedStates[i][p][g]}removeFeatureState(i,a,h){if(this.deletedStates[i]===null)return;const p=String(a);if(this.deletedStates[i]=this.deletedStates[i]||{},h&&a!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][h]=null);else if(a!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(h in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][h]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,a){const h=String(a),p=pt({},(this.state[i]||{})[h],(this.stateChanges[i]||{})[h]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const g=this.deletedStates[i][a];if(g===null)return{};for(const v in g)delete p[v]}return p}initializeTileState(i,a){i.setFeatureState(this.state,a)}coalesceChanges(i,a){const h={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const g={};for(const v in this.stateChanges[p])this.state[p][v]||(this.state[p][v]={}),pt(this.state[p][v],this.stateChanges[p][v]),g[v]=this.state[p][v];h[p]=g}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const g={};if(this.deletedStates[p]===null)for(const v in this.state[p])g[v]={},this.state[p][v]={};else for(const v in this.deletedStates[p]){if(this.deletedStates[p][v]===null)this.state[p][v]={};else for(const x of Object.keys(this.deletedStates[p][v]))delete this.state[p][v][x];g[v]=this.state[p][v]}h[p]=h[p]||{},pt(h[p],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const p in i)i[p].setFeatureState(h,a)}}class wM{constructor(i){this.size=i,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(i,a){const h=this.toIdx(i,a);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(i,a){return this.leaves[this.toIdx(i,a)]}toIdx(i,a){return a*this.size+i}}function EM(l,i,a,h){let p=0,g=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(h[v])<1e-15){if(a[v]<l[v]||a[v]>i[v])return null}else{const x=1/h[v];let S=(l[v]-a[v])*x,T=(i[v]-a[v])*x;if(S>T){const D=S;S=T,T=D}if(S>p&&(p=S),T<g&&(g=T),p>g)return null}return p}function SM(l,i,a,h,p,g,v,x,S,T,D){const P=h-l,L=p-i,F=g-a,V=v-l,q=x-i,K=S-a,le=D[1]*K-D[2]*q,ge=D[2]*V-D[0]*K,ue=D[0]*q-D[1]*V,pe=P*le+L*ge+F*ue;if(Math.abs(pe)<1e-15)return null;const Te=1/pe,_e=T[0]-l,Be=T[1]-i,Fe=T[2]-a,He=(_e*le+Be*ge+Fe*ue)*Te;if(He<0||He>1)return null;const dt=Be*F-Fe*L,Ue=Fe*P-_e*F,Xe=_e*L-Be*P,nt=(D[0]*dt+D[1]*Ue+D[2]*Xe)*Te;return nt<0||He+nt>1?null:(V*dt+q*Ue+K*Xe)*Te}function TM(l,i,a){return(l-i)/(a-i)}function CM(l,i,a,h,p,g,v,x,S){const T=1<<a,D=g-h,P=v-p,L=(l+1)/T*D+h,F=(i+0)/T*P+p,V=(i+1)/T*P+p;x[0]=(l+0)/T*D+h,x[1]=F,S[0]=L,S[1]=V}class MM{constructor(i){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=i,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(g){const v=Math.ceil(Math.log2(g.dim/8)),x=[];let S=Math.ceil(Math.pow(2,v));const T=1/S,D=(F,V,q,K,le)=>{const ge=K?1:0,ue=(F+1)*q-ge,pe=V*q,Te=(V+1)*q-ge;le[0]=F*q,le[1]=pe,le[2]=ue,le[3]=Te};let P=new wM(S);const L=[];for(let F=0;F<S*S;F++){D(F%S,Math.floor(F/S),T,!1,L);const V=$l(L[0],L[1],g),q=$l(L[2],L[1],g),K=$l(L[2],L[3],g),le=$l(L[0],L[3],g);P.minimums.push(Math.min(V,q,K,le)),P.maximums.push(Math.max(V,q,K,le)),P.leaves.push(1)}for(x.push(P),S/=2;S>=1;S/=2){const F=x[x.length-1];P=new wM(S);for(let V=0;V<S*S;V++){D(V%S,Math.floor(V/S),2,!0,L);const q=F.getElevation(L[0],L[1]),K=F.getElevation(L[2],L[1]),le=F.getElevation(L[2],L[3]),ge=F.getElevation(L[0],L[3]),ue=F.isLeaf(L[0],L[1]),pe=F.isLeaf(L[2],L[1]),Te=F.isLeaf(L[2],L[3]),_e=F.isLeaf(L[0],L[3]),Be=Math.min(q.min,K.min,le.min,ge.min),Fe=Math.max(q.max,K.max,le.max,ge.max),He=ue&&pe&&Te&&_e;P.maximums.push(Fe),P.minimums.push(Be),P.leaves.push(Fe-Be<=5&&He?1:0)}x.push(P)}return x}(this.dem),h=a.length-1,p=a[h];this._addNode(p.minimums[0],p.maximums[0],p.leaves[0]),this._construct(a,0,0,h,0)}raycastRoot(i,a,h,p,g,v,x=1){return EM([i,a,-100],[h,p,this.maximums[0]*x],g,v)}raycast(i,a,h,p,g,v,x=1){if(!this.nodeCount)return null;const S=this.raycastRoot(i,a,h,p,g,v,x);if(S==null)return null;const T=[],D=[],P=[],L=[],F=[{idx:0,t:S,nodex:0,nodey:0,depth:0}];for(;F.length>0;){const{idx:V,t:q,nodex:K,nodey:le,depth:ge}=F.pop();if(this.leaves[V]){CM(K,le,ge,i,a,h,p,P,L);const pe=1<<ge,Te=(K+0)/pe,_e=(K+1)/pe,Be=(le+0)/pe,Fe=(le+1)/pe,He=$l(Te,Be,this.dem)*x,dt=$l(_e,Be,this.dem)*x,Ue=$l(_e,Fe,this.dem)*x,Xe=$l(Te,Fe,this.dem)*x,nt=SM(P[0],P[1],He,L[0],P[1],dt,L[0],L[1],Ue,g,v),Ke=SM(L[0],L[1],Ue,P[0],L[1],Xe,P[0],P[1],He,g,v),ht=Math.min(nt!==null?nt:Number.MAX_VALUE,Ke!==null?Ke:Number.MAX_VALUE);if(ht!==Number.MAX_VALUE)return ht;{const it=B_([],g,v,q);if(kM(He,dt,Xe,Ue,TM(it[0],P[0],L[0]),TM(it[1],P[1],L[1]))>=it[2])return q}continue}let ue=0;for(let pe=0;pe<this._siblingOffset.length;pe++){CM((K<<1)+this._siblingOffset[pe][0],(le<<1)+this._siblingOffset[pe][1],ge+1,i,a,h,p,P,L),P[2]=-100,L[2]=this.maximums[this.childOffsets[V]+pe]*x;const Te=EM(P,L,g,v);if(Te!=null){const _e=Te;T[pe]=_e;let Be=!1;for(let Fe=0;Fe<ue&&!Be;Fe++)_e>=T[D[Fe]]&&(D.splice(Fe,0,pe),Be=!0);Be||(D[ue]=pe),ue++}}for(let pe=0;pe<ue;pe++){const Te=D[pe];F.push({idx:this.childOffsets[V]+Te,t:T[Te],nodex:(K<<1)+this._siblingOffset[Te][0],nodey:(le<<1)+this._siblingOffset[Te][1],depth:ge+1})}}return null}_addNode(i,a,h){return this.minimums.push(i),this.maximums.push(a),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(i,a,h,p,g){if(i[p].isLeaf(a,h)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const v=p-1,x=i[v];let S=0,T=0;for(let D=0;D<this._siblingOffset.length;D++){const P=2*a+this._siblingOffset[D][0],L=2*h+this._siblingOffset[D][1],F=x.getElevation(P,L),V=x.isLeaf(P,L),q=this._addNode(F.min,F.max,V);V&&(S|=1<<D),T||(T=q)}for(let D=0;D<this._siblingOffset.length;D++)S&1<<D||this._construct(i,2*a+this._siblingOffset[D][0],2*h+this._siblingOffset[D][1],v,T+D)}}function kM(l,i,a,h,p,g){return Dn(Dn(l,a,g),Dn(i,h,g),p)}function $l(l,i,a){const h=a.dim,p=de(l*h-.5,0,h-1),g=de(i*h-.5,0,h-1),v=Math.floor(p),x=Math.floor(g),S=Math.min(v+1,h-1),T=Math.min(x+1,h-1);return kM(a.get(v,x),a.get(S,x),a.get(v,T),a.get(S,T),p-v,g-x)}const AM={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class dy{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(i,a,h,p=!1,g=!1){if(this.uid=i,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return at(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const v=this.dim=a.height-2,x=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=h||"mapbox",this.borderReady=p,!p){for(let S=0;S<v;S++)x[this._idx(-1,S)]=x[this._idx(0,S)],x[this._idx(v,S)]=x[this._idx(v-1,S)],x[this._idx(S,-1)]=x[this._idx(S,0)],x[this._idx(S,v)]=x[this._idx(S,v-1)];x[this._idx(-1,-1)]=x[this._idx(0,0)],x[this._idx(v,-1)]=x[this._idx(v-1,0)],x[this._idx(-1,v)]=x[this._idx(0,v-1)],x[this._idx(v,v)]=x[this._idx(v-1,v-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new MM(this)}get(i,a,h=!1){h&&(i=de(i,-1,this.dim),a=de(a,-1,this.dim));const p=4*this._idx(i,a);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(this.pixels[p],this.pixels[p+1],this.pixels[p+2])}static getUnpackVector(i){return AM[i]}get unpackVector(){return AM[this.encoding]}_idx(i,a){if(i<-1||i>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(i+1)}_unpackMapbox(i,a,h){return(256*i*256+256*a+h)/10-1e4}_unpackTerrarium(i,a,h){return 256*i+a+h/256-32768}static pack(i,a){const h=[0,0,0,0],p=dy.getUnpackVector(a);let g=Math.floor((i+p[3])/p[2]);return h[2]=g%256,g=Math.floor(g/256),h[1]=g%256,g=Math.floor(g/256),h[0]=g,h}getPixels(){return new Co({width:this.stride,height:this.stride},this.pixels)}backfillBorder(i,a,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,g=a*this.dim+this.dim,v=h*this.dim,x=h*this.dim+this.dim;switch(a){case-1:p=g-1;break;case 1:g=p+1}switch(h){case-1:v=x-1;break;case 1:x=v+1}const S=-a*this.dim,T=-h*this.dim;for(let D=v;D<x;D++)for(let P=p;P<g;P++){const L=4*this._idx(P,D),F=4*this._idx(P+S,D+T);this.pixels[L+0]=i.pixels[F+0],this.pixels[L+1]=i.pixels[F+1],this.pixels[L+2]=i.pixels[F+2],this.pixels[L+3]=i.pixels[F+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}zt(dy,"DEMData"),zt(MM,"DemMinMaxQuadTree",{omit:["dem"]});class I4{constructor(i,a){this.max=i,this.onRemove=a,this.reset()}reset(){for(const i in this.data)for(const a of this.data[i])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(i,a,h){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const g={value:a,timeout:void 0};if(h!==void 0&&(g.timeout=setTimeout(()=>{this.remove(i,g)},h)),this.data[p].push(g),this.order.push(p),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const a=this.data[i].shift();return a.timeout&&clearTimeout(a.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),a.value}getByKey(i){const a=this.data[i];return a?a[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,a){if(!this.has(i))return this;const h=i.wrapped().key,p=a===void 0?0:this.data[h].indexOf(a),g=this.data[h][p];return this.data[h].splice(p,1),g.timeout&&clearTimeout(g.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(g.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(i){const a=[];for(const h in this.data)for(const p of this.data[h])i(p.value)||a.push(p);for(const h of a)this.remove(h.value.tileID,h)}}class qh{constructor(i,a,h){this.func=i,this.mask=a,this.range=h}}qh.ReadOnly=!1,qh.ReadWrite=!0,qh.disabled=new qh(519,qh.ReadOnly,[0,1]);const W1=7680;class H1{constructor(i,a,h,p,g,v){this.test=i,this.ref=a,this.mask=h,this.fail=p,this.depthFail=g,this.pass=v}}H1.disabled=new H1({func:519,mask:0},0,0,W1,W1,W1);class aa{constructor(i,a,h){this.blendFunction=i,this.blendColor=a,this.mask=h}}aa.Replace=[1,0],aa.disabled=new aa(aa.Replace,Wn.transparent,[!1,!1,!1,!1]),aa.unblended=new aa(aa.Replace,Wn.transparent,[!0,!0,!0,!0]),aa.alphaBlended=new aa([1,771],Wn.transparent,[!0,!0,!0,!0]);const q1=1029,Y1=2305;class Os{constructor(i,a,h){this.enable=i,this.mode=a,this.frontFace=h}}Os.disabled=new Os(!1,q1,Y1),Os.backCCW=new Os(!0,q1,Y1),Os.backCW=new Os(!0,q1,2304),Os.frontCW=new Os(!0,1028,2304),Os.frontCCW=new Os(!0,1028,Y1);class cu extends Kt{constructor(i,a,h){super(),this.id=i,this._onlySymbols=h,a.on("data",p=>{p.dataType==="source"&&p.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&p.dataType==="source"&&p.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new I4(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new D4,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(i){this.map=i,this._minTileCacheSize=this._minTileCacheSize===void 0&&i?i._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&i?i._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const a=this._tiles[i];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(i,a){return i.isSymbolTile=this._onlySymbols,this._source.loadTile(i,a)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){if(this._source.abortTile)return this._source.abortTile(i,()=>{})}serialize(){return this._source.serialize()}prepare(i){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(const a in this._tiles){const h=this._tiles[a];this._source.prepareTile(h)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,h.tileID),h.upload(i),h.prepare(this.map.style.imageManager)}else for(const a in this._tiles){const h=this._tiles[a];h.upload(i),h.prepare(this.map.style.imageManager)}}getIds(){return ze(this._tiles).map(i=>i.tileID).sort(DM).map(i=>i.key)}getRenderableIds(i){const a=[];for(const h in this._tiles)this._isIdRenderable(+h,i)&&a.push(this._tiles[h]);return i?a.sort((h,p)=>{const g=h.tileID,v=p.tileID,x=new k(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),S=new k(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-v.overscaledZ||S.y-x.y||S.x-x.x}).map(h=>h.tileID.key):a.map(h=>h.tileID).sort(DM).map(h=>h.key)}hasRenderableParent(i){const a=this.findLoadedParent(i,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(i,a){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(a||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(+i,"reloading")}}_reloadTile(i,a){const h=this._tiles[i];h&&(h.state!=="loading"&&(h.state=a),this._loadTile(h,this._tileLoaded.bind(this,h,i,a)))}_tileLoaded(i,a,h,p){if(p)if(i.state="errored",p.status!==404)this._source.fire(new $n(p,{tile:i}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else i.timeAdded=Fn.now(),h==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(a,i),this._source.type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),this._source.fire(new Xn("data",{dataType:"source",tile:i,coord:i.tileID,sourceCacheId:this.id}))}_backfillDEM(i){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const g=a[p];if(i.neighboringTiles&&i.neighboringTiles[g]){const v=this.getTileByID(g);h(i,v),h(v,i)}}function h(p,g){if(!p.dem||p.dem.borderReady)return;p.needsHillshadePrepare=!0,p.needsDEMTextureUpload=!0;let v=g.tileID.canonical.x-p.tileID.canonical.x;const x=g.tileID.canonical.y-p.tileID.canonical.y,S=Math.pow(2,p.tileID.canonical.z),T=g.tileID.key;v===0&&x===0||Math.abs(x)>1||(Math.abs(v)>1&&(Math.abs(v+S)===1?v+=S:Math.abs(v-S)===1&&(v-=S)),g.dem&&p.dem&&(p.dem.backfillBorder(g.dem,v,x),p.neighboringTiles&&p.neighboringTiles[T]&&(p.neighboringTiles[T].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,a,h,p){for(const g in this._tiles){let v=this._tiles[g];if(p[g]||!v.hasData()||v.tileID.overscaledZ<=a||v.tileID.overscaledZ>h)continue;let x=v.tileID;for(;v&&v.tileID.overscaledZ>a+1;){const T=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[T.key],v&&v.hasData()&&(x=T)}let S=x;for(;S.overscaledZ>a;)if(S=S.scaledTo(S.overscaledZ-1),i[S.key]){p[x.key]=x;break}}}findLoadedParent(i,a){if(i.key in this._loadedParentTiles){const h=this._loadedParentTiles[i.key];return h&&h.tileID.overscaledZ>=a?h:null}for(let h=i.overscaledZ-1;h>=a;h--){const p=i.scaledTo(h),g=this._getLoadedTile(p);if(g)return g}}_getLoadedTile(i){const a=this._tiles[i.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?i.wrapped().key:i.canonical.key)}updateCacheSize(i,a){a=a||this._source.tileSize;const h=Math.ceil(i.width/a)+1,p=Math.ceil(i.height/a)+1,g=Math.floor(h*p*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,x=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(x)}handleWrapJump(i){const a=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,a){const h={};for(const p in this._tiles){const g=this._tiles[p];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+a),h[g.tileID.key]=g}this._tiles=h;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(+p,this._tiles[p])}}update(i,a,h){if(this.transform=i,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let p;this.updateCacheSize(i,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(x=>new Hr(x.canonical.z,x.wrap,x.canonical.z,x.canonical.x,x.canonical.y)):(p=i.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(p=p.filter(x=>this._source.hasTile(x)))):p=[];const g=this._updateRetainedTiles(p);if(IM(this._source.type)&&p.length!==0){const x={},S={},T=Object.keys(g);for(const P of T){const L=g[P],F=this._tiles[P];if(!F||F.fadeEndTime&&F.fadeEndTime<=Fn.now())continue;const V=this.findLoadedParent(L,Math.max(L.overscaledZ-cu.maxOverzooming,this._source.minzoom));V&&(this._addTile(V.tileID),x[V.tileID.key]=V.tileID),S[P]=L}const D=p[p.length-1].overscaledZ;for(const P in this._tiles){const L=this._tiles[P];if(g[P]||!L.hasData())continue;let F=L.tileID;for(;F.overscaledZ>D;){F=F.scaledTo(F.overscaledZ-1);const V=this._tiles[F.key];if(V&&V.hasData()&&S[F.key]){g[P]=L.tileID;break}}}for(const P in x)g[P]||(this._coveredTiles[P]=!0,g[P]=x[P])}for(const x in g)this._tiles[x].clearFadeHold();const v=function(x,S){const T=[];for(const D in x)D in S||T.push(D);return T}(this._tiles,g);for(const x of v){const S=this._tiles[x];S.hasSymbolBuckets&&!S.holdingForFade()?S.setHoldDuration(this.map._fadeDuration):S.hasSymbolBuckets&&!S.symbolFadeFinished()||this._removeTile(+x)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(+i)}_updateRetainedTiles(i){const a={};if(i.length===0)return a;const h={},p=i.reduce((T,D)=>Math.min(T,D.overscaledZ),1/0),g=i[0].overscaledZ,v=Math.max(g-cu.maxOverzooming,this._source.minzoom),x=Math.max(g+cu.maxUnderzooming,this._source.minzoom),S={};for(const T of i){const D=this._addTile(T);a[T.key]=T,D.hasData()||p<this._source.maxzoom&&(S[T.key]=T)}this._retainLoadedChildren(S,p,x,a);for(const T of i){let D=this._tiles[T.key];if(D.hasData())continue;if(T.canonical.z>=this._source.maxzoom){const L=T.children(this._source.maxzoom)[0],F=this.getTile(L);if(F&&F.hasData()){a[L.key]=L;continue}}else{const L=T.children(this._source.maxzoom);if(a[L[0].key]&&a[L[1].key]&&a[L[2].key]&&a[L[3].key])continue}let P=D.wasRequested();for(let L=T.overscaledZ-1;L>=v;--L){const F=T.scaledTo(L);if(h[F.key]||(h[F.key]=!0,D=this.getTile(F),!D&&P&&(D=this._addTile(F)),D&&(a[F.key]=F,P=D.wasRequested(),D.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const a=[];let h,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){h=this._loadedParentTiles[p.key];break}a.push(p.key);const g=p.scaledTo(p.overscaledZ-1);if(h=this._getLoadedTile(g),h)break;p=g}for(const g of a)this._loadedParentTiles[g]=h}}_addTile(i){let a=this._tiles[i.key];if(a)return this._source.prepareTile&&this._source.prepareTile(a),a;a=this._cache.getAndRemove(i),a&&(this._setTileReloadTimer(i.key,a),a.tileID=i,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,a)));const h=Boolean(a);if(!h){const p=this.map?this.map.painter:null;a=new G1(i,this._source.tileSize*i.overscaleFactor(),this.transform.tileZoom,p,this._isRaster),this._source.prepareTile&&this._source.prepareTile(a)||this._loadTile(a,this._tileLoaded.bind(this,a,i.key,a.state))}return a?(a.uses++,this._tiles[i.key]=a,h||this._source.fire(new Xn("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(i,a){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const h=a.getExpiryTimeout();h&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},h))}_removeTile(i){const a=this._tiles[i];a&&(a.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(+i);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(i,a,h){const p=[],g=this.transform;if(!g)return p;const v=g.projection.name==="globe",x=ea(g.center.lng);for(const S in this._tiles){const T=this._tiles[S];if(h&&T.clearQueryDebugViz(),T.holdingForFade())continue;let D;if(v){const P=T.tileID.canonical;if(P.z===0){const L=[Math.abs(de(x,...Fp(P,-1))-x),Math.abs(de(x,...Fp(P,1))-x)];D=[0,2*L.indexOf(Math.min(...L))-1]}else{const L=[Math.abs(de(x,...Fp(P,-1))-x),Math.abs(de(x,...Fp(P,0))-x),Math.abs(de(x,...Fp(P,1))-x)];D=[L.indexOf(Math.min(...L))-1]}}else D=[0];for(const P of D){const L=i.containsTile(T,g,a,P);L&&p.push(L)}}return p}getVisibleCoordinates(i){const a=this.getRenderableIds(i).map(h=>this._tiles[h].tileID);for(const h of a)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(IM(this._source.type))for(const i in this._tiles){const a=this._tiles[i];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=Fn.now())return!0}return!1}setFeatureState(i,a,h){this._state.updateState(i=i||"_geojsonTileLayer",a,h)}removeFeatureState(i,a,h){this._state.removeFeatureState(i=i||"_geojsonTileLayer",a,h)}getFeatureState(i,a){return this._state.getState(i=i||"_geojsonTileLayer",a)}setDependencies(i,a,h){const p=this._tiles[i];p&&p.setDependencies(a,h)}reloadTilesForDependencies(i,a){for(const h in this._tiles)this._tiles[h].hasDependency(i,a)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(i,a))}_preloadTiles(i,a){const h=new Map,p=Array.isArray(i)?i:[i],g=this.map.painter.terrain,v=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const x of p){const S=x.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const T of S)h.set(T.key,T);this.usedForTerrain&&x.updateElevation(!1)}je(Array.from(h.values()),(x,S)=>{const T=new G1(x,this._source.tileSize*x.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(T,D=>{this._source.type==="raster-dem"&&T.dem&&this._backfillDEM(T),S(D,T)})},a)}}function DM(l,i){const a=Math.abs(2*l.wrap)-+(l.wrap<0),h=Math.abs(2*i.wrap)-+(i.wrap<0);return l.overscaledZ-i.overscaledZ||h-a||i.canonical.y-l.canonical.y||i.canonical.x-l.canonical.x}function IM(l){return l==="raster"||l==="image"||l==="video"}function Fp(l,i){const a=1<<l.z;return[l.x/a+i,(l.x+1)/a+i]}cu.maxOverzooming=10,cu.maxUnderzooming=3;class fy{constructor(i,a,h){this._demTile=i,this._dem=this._demTile.dem,this._scale=a,this._offset=h}static create(i,a,h){const p=h||i.findDEMTileFor(a);if(!p||!p.dem)return;const g=p.dem,v=p.tileID,x=1<<a.canonical.z-v.canonical.z;return new fy(p,p.tileSize/nn/x,[(a.canonical.x/x-v.canonical.x)*g.dim,(a.canonical.y/x-v.canonical.y)*g.dim])}tileCoordToPixel(i,a){const h=a*this._scale+this._offset[1],p=Math.floor(i*this._scale+this._offset[0]),g=Math.floor(h);return new k(p,g)}getElevationAt(i,a,h,p){const g=i*this._scale+this._offset[0],v=a*this._scale+this._offset[1],x=Math.floor(g),S=Math.floor(v),T=this._dem;return p=!!p,h?Dn(Dn(T.get(x,S,p),T.get(x,S+1,p),v-S),Dn(T.get(x+1,S,p),T.get(x+1,S+1,p),v-S),g-x):T.get(x,S,p)}getElevationAtPixel(i,a,h){return this._dem.get(i,a,!!h)}getMeterToDEM(i){return(1<<this._demTile.tileID.canonical.z)*rs(1,i)*this._dem.stride}}class PM{constructor(i,a){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Pl(nn,16,0),this.featureIndexArray=new bT,this.promoteId=a}insert(i,a,h,p,g,v=0){const x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,g,v);const S=this.grid;for(let T=0;T<a.length;T++){const D=a[T],P=[1/0,1/0,-1/0,-1/0];for(let L=0;L<D.length;L++){const F=D[L];P[0]=Math.min(P[0],F.x),P[1]=Math.min(P[1],F.y),P[2]=Math.max(P[2],F.x),P[3]=Math.max(P[3],F.y)}P[0]<nn&&P[1]<nn&&P[2]>=0&&P[3]>=0&&S.insert(x,P[0],P[1],P[2],P[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new au.VectorTile(new Tp(this.rawTileData)).layers,this.sourceLayerCoder=new _M(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const i in this.vtLayers)this.vtFeatures[i]=[]}return this.vtLayers}query(i,a,h,p){this.loadVTLayers();const g=i.params||{},v=Hc(g.filter),x=i.tileResult,S=i.transform,T=x.bufferedTilespaceBounds,D=this.grid.query(T.min.x,T.min.y,T.max.x,T.max.y,(V,q,K,le)=>VT(x.bufferedTilespaceGeometry,V,q,K,le));D.sort(P4);let P=null;S.elevation&&D.length>0&&(P=fy.create(S.elevation,this.tileID));const L={};let F;for(let V=0;V<D.length;V++){const q=D[V];if(q===F)continue;F=q;const K=this.featureIndexArray.get(q);let le=null;this.loadMatchingFeature(L,K,v,g.layers,g.availableImages,a,h,p,(ge,ue,pe,Te=0)=>(le||(le=ja(ge,this.tileID.canonical,i.tileTransform)),ue.queryIntersectsFeature(x,ge,pe,le,this.z,i.transform,i.pixelPosMatrix,P,Te)))}return L}loadMatchingFeature(i,a,h,p,g,v,x,S,T){const{featureIndex:D,bucketIndex:P,sourceLayerIndex:L,layoutVertexArrayOffset:F}=a,V=this.bucketLayerIDs[P];if(p&&!function(ge,ue){for(let pe=0;pe<ge.length;pe++)if(ue.indexOf(ge[pe])>=0)return!0;return!1}(p,V))return;const q=this.sourceLayerCoder.decode(L),K=this.vtLayers[q].feature(D);if(h.needGeometry){const ge=nu(K,!0);if(!h.filter(new te(this.tileID.overscaledZ),ge,this.tileID.canonical))return}else if(!h.filter(new te(this.tileID.overscaledZ),K))return;const le=this.getId(K,q);for(let ge=0;ge<V.length;ge++){const ue=V[ge];if(p&&p.indexOf(ue)<0)continue;const pe=v[ue];if(!pe)continue;let Te={};le!==void 0&&S&&(Te=S.getState(pe.sourceLayer||"_geojsonTileLayer",le));const _e=pt({},x[ue]);_e.paint=OM(_e.paint,pe.paint,K,Te,g),_e.layout=OM(_e.layout,pe.layout,K,Te,g);const Be=!T||T(K,pe,Te,F);if(!Be)continue;const Fe=new yM(K,this.z,this.x,this.y,le);Fe.layer=_e;let He=i[ue];He===void 0&&(He=i[ue]=[]),He.push({featureIndex:D,feature:Fe,intersectionZ:Be})}}lookupSymbolFeatures(i,a,h,p,g,v,x,S){const T={};this.loadVTLayers();const D=Hc(g);for(const P of i)this.loadMatchingFeature(T,{bucketIndex:h,sourceLayerIndex:p,featureIndex:P,layoutVertexArrayOffset:0},D,v,x,S,a);return T}loadFeature(i){const{featureIndex:a,sourceLayerIndex:h}=i;this.loadVTLayers();const p=this.sourceLayerCoder.decode(h),g=this.vtFeatures[p];if(g[a])return g[a];const v=this.vtLayers[p].feature(a);return g[a]=v,v}hasLayer(i){for(const a of this.bucketLayerIDs)for(const h of a)if(i===h)return!0;return!1}getId(i,a){let h=i.id;return this.promoteId&&(h=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof h=="boolean"&&(h=Number(h))),h}}function OM(l,i,a,h,p){return Ot(l,(g,v)=>{const x=i instanceof Ee?i.get(v):null;return x&&x.evaluate?x.evaluate(a,h,p):x})}function P4(l,i){return i-l}zt(PM,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class LM{constructor(i){const a={},h=[];for(const x in i){const S=i[x],T=a[x]={};for(const D in S.glyphs){const P=S.glyphs[+D];if(!P||P.bitmap.width===0||P.bitmap.height===0)continue;const L=P.metrics.localGlyph?2:1,F={x:0,y:0,w:P.bitmap.width+2*L,h:P.bitmap.height+2*L};h.push(F),T[D]=F}}const{w:p,h:g}=C1(h),v=new Ua({width:p||1,height:g||1});for(const x in i){const S=i[x];for(const T in S.glyphs){const D=S.glyphs[+T];if(!D||D.bitmap.width===0||D.bitmap.height===0)continue;const P=a[x][T],L=D.metrics.localGlyph?2:1;Ua.copy(D.bitmap,v,{x:0,y:0},{x:P.x+L,y:P.y+L},D.bitmap)}}this.image=v,this.positions=a}}zt(LM,"GlyphAtlas");class O4{constructor(i){this.tileID=new Hr(i.tileID.overscaledZ,i.tileID.wrap,i.tileID.canonical.z,i.tileID.canonical.x,i.tileID.canonical.y),this.tileZoom=i.tileZoom,this.uid=i.uid,this.zoom=i.zoom,this.canonical=i.tileID.canonical,this.pixelRatio=i.pixelRatio,this.tileSize=i.tileSize,this.source=i.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=i.showCollisionBoxes,this.collectResourceTiming=!!i.collectResourceTiming,this.returnDependencies=!!i.returnDependencies,this.promoteId=i.promoteId,this.enableTerrain=!!i.enableTerrain,this.isSymbolTile=i.isSymbolTile,this.tileTransform=lu(i.tileID.canonical,i.projection),this.projection=i.projection}parse(i,a,h,p,g){this.status="parsing",this.data=i,this.collisionBoxArray=new Qs;const v=new _M(Object.keys(i.layers).sort()),x=new PM(this.tileID,this.promoteId);x.bucketLayerIDs=[];const S={},T=new $1(256,256),D={featureIndex:x,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:T,availableImages:h},P=a.familiesBySource[this.source];for(const Te in P){const _e=i.layers[Te];if(!_e)continue;let Be=!1,Fe=!1;for(const Ue of P[Te])Ue[0].type==="symbol"?Be=!0:Fe=!0;if(this.isSymbolTile===!0&&!Be||this.isSymbolTile===!1&&!Fe)continue;_e.version===1&&at(`Vector tile source "${this.source}" layer "${Te}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const He=v.encode(Te),dt=[];for(let Ue=0;Ue<_e.length;Ue++){const Xe=_e.feature(Ue),nt=x.getId(Xe,Te);dt.push({feature:Xe,id:nt,index:Ue,sourceLayerIndex:He})}for(const Ue of P[Te]){const Xe=Ue[0];this.isSymbolTile!==void 0&&Xe.type==="symbol"!==this.isSymbolTile||Xe.minzoom&&this.zoom<Math.floor(Xe.minzoom)||Xe.maxzoom&&this.zoom>=Xe.maxzoom||Xe.visibility!=="none"&&(Z1(Ue,this.zoom,h),(S[Xe.id]=Xe.createBucket({index:x.bucketLayerIDs.length,layers:Ue,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:He,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate(dt,D,this.tileID.canonical,this.tileTransform),x.bucketLayerIDs.push(Ue.map(nt=>nt.id)))}}let L,F,V,q;T.trim();const K={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},le=Ot(D.glyphDependencies,Te=>Object.keys(Te).map(Number));Object.keys(le).length?p.send("getGlyphs",{uid:this.uid,stacks:le},(Te,_e)=>{L||(L=Te,F=_e,pe.call(this))},void 0,!1,K):F={};const ge=Object.keys(D.iconDependencies);ge.length?p.send("getImages",{icons:ge,source:this.source,tileID:this.tileID,type:"icons"},(Te,_e)=>{L||(L=Te,V=_e,pe.call(this))},void 0,!1,K):V={};const ue=Object.keys(D.patternDependencies);function pe(){if(L)return g(L);if(F&&V&&q){const Te=new LM(F),_e=new zC(V,q);for(const Be in S){const Fe=S[Be];Fe instanceof Vl?(Z1(Fe.layers,this.zoom,h),t4(Fe,F,Te.positions,V,_e.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):Fe.hasPattern&&(Fe instanceof Y_||Fe instanceof G_||Fe instanceof bp)&&(Z1(Fe.layers,this.zoom,h),Fe.addFeatures(D,this.tileID.canonical,_e.patternPositions,h,this.tileTransform))}this.status="done",g(null,{buckets:ze(S).filter(Be=>!Be.isEmpty()),featureIndex:x,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Te.image,lineAtlas:T,imageAtlas:_e,glyphMap:this.returnDependencies?F:null,iconMap:this.returnDependencies?V:null,glyphPositions:this.returnDependencies?Te.positions:null})}}ue.length?p.send("getImages",{icons:ue,source:this.source,tileID:this.tileID,type:"patterns"},(Te,_e)=>{L||(L=Te,q=_e,pe.call(this))},void 0,!1,K):q={},pe.call(this)}}function Z1(l,i,a){const h=new te(i);for(const p of l)p.recalculate(h,a)}class zM{constructor(i){this.entries={},this.scheduler=i}request(i,a,h,p){const g=this.entries[i]=this.entries[i]||{callbacks:[]};if(g.result){const[v,x]=g.result;return this.scheduler?this.scheduler.add(()=>{p(v,x)},a):p(v,x),()=>{}}return g.callbacks.push(p),g.cancel||(g.cancel=h((v,x)=>{g.result=[v,x];for(const S of g.callbacks)this.scheduler?this.scheduler.add(()=>{S(v,x)},a):S(v,x);setTimeout(()=>delete this.entries[i],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(v=>v!==p),g.callbacks.length||(g.cancel(),delete this.entries[i]))}}}function RM(l,i,a){const h=JSON.stringify(l.request);return l.data&&(this.deduped.entries[h]={result:[null,l.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom},p=>{const g=Oe(l.request,(v,x,S,T)=>{v?p(v):x&&p(null,{vectorTile:a?void 0:new au.VectorTile(new Tp(x)),rawData:x,cacheControl:S,expires:T})});return()=>{g.cancel(),p()}},i)}o.ARRAY_TYPE=To,o.AUTH_ERR_MSG=Zn,o.Aabb=po,o.Actor=class{constructor(l,i,a){this.target=l,this.parent=i,this.mapId=a,this.callbacks={},this.cancelCallbacks={},tt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Gt()?l:y,this.scheduler=new k4}send(l,i,a,h,p=!1,g){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=g,this.callbacks[v]=a);const x=ci(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:l,hasCallback:!!a,targetMapId:h,mustQueue:p,sourceMapId:this.mapId,data:Ol(i,x)},x),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(l){const i=l.data,a=i.id;if(a&&(!i.targetMapId||this.mapId===i.targetMapId))if(i.type==="<cancel>"){const h=this.cancelCallbacks[a];delete this.cancelCallbacks[a],h&&h.cancel()}else if(i.mustQueue||Gt()){const h=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,i),h&&h.metadata||{type:"message"})}else this.processTask(a,i)}processTask(l,i){if(i.type==="<response>"){const a=this.callbacks[l];delete this.callbacks[l],a&&(i.error?a(Zc(i.error)):a(null,Zc(i.data)))}else{const a=ci(this.globalScope)?void 0:[],h=i.hasCallback?(g,v)=>{delete this.cancelCallbacks[l],this.target.postMessage({id:l,type:"<response>",sourceMapId:this.mapId,error:g?Ol(g):null,data:Ol(v,a)},a)}:g=>{},p=Zc(i.data);if(this.parent[i.type])this.parent[i.type](i.sourceMapId,p,h);else if(this.parent.getWorkerSource){const g=i.type.split(".");this.parent.getWorkerSource(i.sourceMapId,g[0],p.source)[g[1]](p,h)}else h(new Error(`Could not find function ${i.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=H_,o.Color=Wn,o.ColorMode=aa,o.CullFaceMode=Os,o.DEMData=dy,o.DataConstantProperty=ve,o.DedupedRequest=zM,o.DepthMode=qh,o.EXTENT=nn,o.Elevation=class{isDataAvailableAtPoint(l){const i=this._source();if(!i||l.y<0||l.y>1)return!1;const a=i.getSource().maxzoom,h=1<<a,p=Math.floor(l.x),g=Math.floor((l.x-p)*h),v=Math.floor(l.y*h),x=this.findDEMTileFor(new Hr(a,p,a,g,v));return!(!x||!x.dem)}getAtPointOrZero(l,i=0){return this.getAtPoint(l,i)||0}getAtPoint(l,i,a=!0){i==null&&(i=null);const h=this._source();if(!h||l.y<0||l.y>1)return i;const p=h.getSource().maxzoom,g=1<<p,v=Math.floor(l.x),x=l.x-v,S=new Hr(p,v,p,Math.floor(x*g),Math.floor(l.y*g)),T=this.findDEMTileFor(S);if(!T||!T.dem)return i;const D=T.dem,P=1<<T.tileID.canonical.z,L=(x*P-T.tileID.canonical.x)*D.dim,F=(l.y*P-T.tileID.canonical.y)*D.dim,V=Math.floor(L),q=Math.floor(F);return(a?this.exaggeration():1)*Dn(Dn(D.get(V,q),D.get(V,q+1),F-q),Dn(D.get(V+1,q),D.get(V+1,q+1),F-q),L-V)}getAtTileOffset(l,i,a){const h=1<<l.canonical.z;return this.getAtPointOrZero(new Ph(l.wrap+(l.canonical.x+i/nn)/h,(l.canonical.y+a/nn)/h))}getAtTileOffsetFunc(l,i,a,h){return p=>{const g=this.getAtTileOffset(l,p.x,p.y),v=h.upVector(l.canonical,p.x,p.y);return As(v,v,g*h.upVectorScale(l.canonical,i,a).metersToTile),v}}getForTilePoints(l,i,a,h){const p=fy.create(this,l,h);return!!p&&(i.forEach(g=>{g[2]=this.exaggeration()*p.getElevationAt(g[0],g[1],a)}),!0)}getMinMaxForTile(l){const i=this.findDEMTileFor(l);if(!i||!i.dem)return null;const a=i.dem.tree,h=i.tileID,p=1<<l.canonical.z-h.canonical.z;let g=l.canonical.x/p-h.canonical.x,v=l.canonical.y/p-h.canonical.y,x=0;for(let S=0;S<l.canonical.z-h.canonical.z&&!a.leaves[x];S++){g*=2,v*=2;const T=2*Math.floor(v)+Math.floor(g);x=a.childOffsets[x]+T,g%=1,v%=1}return{min:this.exaggeration()*a.minimums[x],max:this.exaggeration()*a.maximums[x]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(l,i,a){throw new Error("Pure virtual method called.")}pointCoordinate(l){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(l){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=$n,o.EvaluationParameters=te,o.Event=Xn,o.Evented=Kt,o.FillExtrusionBucket=bp,o.Frustum=m1,o.FrustumCorners=p1,o.GLOBE_METERS_TO_ECEF=z1,o.GLOBE_RADIUS=Wa,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(l){this._createGrid(l),this._createPoles(l)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const l of this._poleSegments)l.destroy();for(const l of this._gridSegments)l.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const l of this._wireframeSegments)l.destroy()}}_createGrid(l){const i=new bt,a=new yn,h=65;for(let p=0;p<h;p++)for(let g=0;g<h;g++)i.emplaceBack(g,p);this._gridSegments=[];for(let p=0,g=0;p<Gh.length;p++){const v=Gh[p];for(let S=0;S<v;S++)for(let T=0;T<64;T++){const D=S*h+T;a.emplaceBack(D+1,D,D+h),a.emplaceBack(D+h,D+h+1,D+1)}const x=64*v*2;this._gridSegments.push(Xi.simpleSegment(0,g,(v+1)*h,x)),g+=x}this._gridBuffer=l.createVertexBuffer(i,kp.members),this._gridIndexBuffer=l.createIndexBuffer(a,!0)}_createPoles(l){const i=new yn;for(let p=0;p<=64;p++)i.emplaceBack(0,p+1,p+2);this._poleIndexBuffer=l.createIndexBuffer(i,!0);const a=new Sr,h=new Sr;this._poleSegments=[];for(let p=0,g=0;p<5;p++){const v=360/(1<<p);a.emplaceBack(0,-Wa,0,.5,0),h.emplaceBack(0,-Wa,0,.5,1);for(let x=0;x<=64;x++){const S=x/64,T=Dn(0,v,S),[D,P,L]=Wh(l4,c4,T,Wa);a.emplaceBack(D,P,L,S,0),h.emplaceBack(D,P,L,S,1)}this._poleSegments.push(Xi.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=l.createVertexBuffer(a,tM,!1),this._poleSouthVertexBuffer=l.createVertexBuffer(h,tM,!1)}getGridBuffers(l){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[l]]}getPoleBuffers(l){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[l]]}getWirefameBuffers(l,i){if(!this._wireframeSegments){const a=new Lr,h=64,p=h+1;this._wireframeSegments=[];for(let g=0,v=0;g<Gh.length;g++){const x=Gh[g];for(let T=0;T<x;T++)for(let D=0;D<h;D++){const P=T*p+D;a.emplaceBack(P,P+1),a.emplaceBack(P,P+p),a.emplaceBack(P,P+p+1)}const S=x*h*3;this._wireframeSegments.push(Xi.simpleSegment(0,v,(x+1)*p,S)),v+=S}this._wireframeIndexBuffer=l.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[i]]}},o.GlyphManager=Uh,o.ImagePosition=M1,o.LineAtlas=$1,o.LngLat=Bn,o.LngLatBounds=Rl,o.LocalGlyphMode=I1,o.MAX_MERCATOR_LATITUDE=ta,o.MercatorCoordinate=Ph,o.ONE_EM=Cr,o.OverscaledTileID=Hr,o.Properties=Ye,o.RGBAImage=Co,o.Ray=f1,o.RequestManager=class{constructor(l,i,a){this._transformRequestFn=l,this._customAccessToken=i,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const l=function(){let i="";for(let a=0;a<10;a++)i+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",bi,i].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,i){return this._transformRequestFn&&this._transformRequestFn(l,i)||{url:l}}normalizeStyleURL(l,i){if(!ar(l))return l;const a=tr(l);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeGlyphsURL(l,i){if(!ar(l))return l;const a=tr(l);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||i)}normalizeSourceURL(l,i,a,h){if(!ar(l))return l;const p=tr(l);return p.path=`/v4/${p.authority}.json`,p.params.push("secure"),a&&p.params.push(`language=${a}`),h&&p.params.push(`worldview=${h}`),this._makeAPIURL(p,this._customAccessToken||i)}normalizeSpriteURL(l,i,a,h){const p=tr(l);return ar(l)?(p.path=`/styles/v1${p.path}/sprite${i}${a}`,this._makeAPIURL(p,this._customAccessToken||h)):(p.path+=`${i}${a}`,An(p))}normalizeTileURL(l,i,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!ar(l))return l;const h=tr(l);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${i||a&&h.authority!=="raster"&&a===512?"@2x":""}${Ir.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${dn.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${dn.TILE_URL_VERSION}${h.path}`);const p=this._customAccessToken||function(g){for(const v of g){const x=v.match(/^access_token=(.*)$/);if(x)return x[1]}return null}(h.params)||dn.ACCESS_TOKEN;return dn.REQUIRE_ACCESS_TOKEN&&p&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,p)}canonicalizeTileURL(l,i){const a=tr(l);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return l;let h="mapbox://";a.path.match(/^\/raster\/v1\//)?h+=`raster/${a.path.replace(`/${dn.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${a.path.replace(`/${dn.TILE_URL_VERSION}/`,"")}`;let p=a.params;return i&&(p=p.filter(g=>!g.match(/^access_token=/))),p.length&&(h+=`?${p.join("&")}`),h}canonicalizeTileset(l,i){const a=!!i&&ar(i),h=[];for(const p of l.tiles||[])br(p)?h.push(this.canonicalizeTileURL(p,a)):h.push(p);return h}_makeAPIURL(l,i){const a="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",h=tr(dn.API_URL);if(l.protocol=h.protocol,l.authority=h.authority,l.protocol==="http"){const p=l.params.indexOf("secure");p>=0&&l.params.splice(p,1)}if(h.path!=="/"&&(l.path=`${h.path}${l.path}`),!dn.REQUIRE_ACCESS_TOKEN)return An(l);if(i=i||dn.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(i[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return l.params=l.params.filter(p=>p.indexOf("access_token")===-1),l.params.push(`access_token=${i||""}`),An(l)}},o.ResourceType=ye,o.SegmentVector=Xi,o.SourceCache=cu,o.StencilMode=H1,o.StructArrayLayout1ui2=La,o.StructArrayLayout2f1f2i16=Cs,o.StructArrayLayout2i4=bt,o.StructArrayLayout2ui4=Lr,o.StructArrayLayout3f12=gi,o.StructArrayLayout3ui6=yn,o.StructArrayLayout4i8=qt,o.StructArrayLayout5f20=Sr,o.Texture=Rp,o.Tile=G1,o.Transitionable=ce,o.Uniform1f=I_,o.Uniform1i=class extends Ba{constructor(l){super(l),this.current=0}set(l,i,a){this.fetchUniformLocation(l,i)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},o.Uniform2f=class extends Ba{constructor(l){super(l),this.current=[0,0]}set(l,i,a){this.fetchUniformLocation(l,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},o.Uniform3f=class extends Ba{constructor(l){super(l),this.current=[0,0,0]}set(l,i,a){this.fetchUniformLocation(l,i)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},o.Uniform4f=kT,o.UniformColor=AT,o.UniformMatrix2f=class extends Ba{constructor(l){super(l),this.current=g5}set(l,i,a){if(this.fetchUniformLocation(l,i)){for(let h=0;h<4;h++)if(a[h]!==this.current[h]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},o.UniformMatrix3f=class extends Ba{constructor(l){super(l),this.current=m5}set(l,i,a){if(this.fetchUniformLocation(l,i)){for(let h=0;h<9;h++)if(a[h]!==this.current[h]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},o.UniformMatrix4f=class extends Ba{constructor(l){super(l),this.current=p5}set(l,i,a){if(this.fetchUniformLocation(l,i)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let h=1;h<16;h++)if(a[h]!==this.current[h]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},o.UnwrappedTileID=wC,o.ValidationError=Dt,o.VectorTileWorkerSource=class extends Kt{constructor(l,i,a,h,p){super(),this.actor=l,this.layerIndex=i,this.availableImages=a,this.loadVectorData=p||RM,this.loading={},this.loaded={},this.deduped=new zM(l.scheduler),this.isSpriteLoaded=h,this.scheduler=l.scheduler}loadTile(l,i){const a=l.uid,h=l&&l.request,p=h&&h.collectResourceTiming,g=this.loading[a]=new O4(l);g.abort=this.loadVectorData(l,(v,x)=>{const S=!this.loading[a];if(delete this.loading[a],S||v||!x)return g.status="done",S||(this.loaded[a]=g),i(v);const T=x.rawData,D={};x.expires&&(D.expires=x.expires),x.cacheControl&&(D.cacheControl=x.cacheControl),g.vectorTile=x.vectorTile||new au.VectorTile(new Tp(T));const P=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(L,F)=>{if(L||!F)return i(L);const V={};if(p){const q=qe(h);q.length>0&&(V.resourceTiming=JSON.parse(JSON.stringify(q)))}i(null,pt({rawTileData:T.slice(0)},F,D,V))})};this.isSpriteLoaded?P():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(P,{type:"parseTile",isSymbolTile:l.isSymbolTile,zoom:l.tileZoom}):P()}),this.loaded=this.loaded||{},this.loaded[a]=g})}reloadTile(l,i){const a=this.loaded,h=l.uid,p=this;if(a&&a[h]){const g=a[h];g.showCollisionBoxes=l.showCollisionBoxes,g.enableTerrain=!!l.enableTerrain,g.projection=l.projection,g.tileTransform=lu(l.tileID.canonical,l.projection);const v=(x,S)=>{const T=g.reloadCallback;T&&(delete g.reloadCallback,g.parse(g.vectorTile,p.layerIndex,this.availableImages,p.actor,T)),i(x,S)};g.status==="parsing"?g.reloadCallback=v:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(l,i){const a=l.uid,h=this.loading[a];h&&(h.abort&&h.abort(),delete this.loading[a]),i()}removeTile(l,i){const a=this.loaded,h=l.uid;a&&a[h]&&delete a[h],i()}},o.WritingMode=Wo,o.ZoomHistory=g_,o.add=Fl,o.addDynamicAttributes=cy,o.adjoint=function(l,i){var a=i[0],h=i[1],p=i[2],g=i[3],v=i[4],x=i[5],S=i[6],T=i[7],D=i[8];return l[0]=v*D-x*T,l[1]=p*T-h*D,l[2]=h*x-p*v,l[3]=x*S-g*D,l[4]=a*D-p*S,l[5]=p*g-a*x,l[6]=g*T-v*S,l[7]=h*S-a*T,l[8]=a*v-h*g,l},o.asyncAll=je,o.bezier=re,o.bindAll=tt,o.boundsAttributes=xM,o.bufferConvexPolygon=function(l,i){const a=[];for(let h=0;h<l.length;h++){const p=Ce(h-1,-1,l.length-1),g=Ce(h+1,-1,l.length-1),v=l[h],x=l[g],S=l[p].sub(v).unit(),T=x.sub(v).unit(),D=T.angleWithSep(S.x,S.y),P=S.add(T).unit().mult(-1*i/Math.sin(D/2));a.push(v.add(P))}return a},o.cacheEntryPossiblyAdded=function(l){he++,he>Qe&&(l.getActor().send("enforceCacheSizeLimit",Le),he=0)},o.calculateGlobeLabelMatrix=function(l,i){const{x:a,y:h}=l.point,p=aM(a,h,l.worldSize/l._pixelsPerMercatorPixel,0,0);return Lh(p,p,B1(ra(i)))},o.calculateGlobeMatrix=function(l){const{x:i,y:a}=l.point,{lng:h,lat:p}=l._center;return aM(i,a,l.worldSize,h,p)},o.calculateGlobeMercatorMatrix=function(l){const i=l.pixelsPerMeter,a=i/rs(1,l.center.lat),h=na(new Float64Array(16));return dp(h,h,[l.point.x,l.point.y,0]),ru(h,h,[a,a,i]),Float32Array.from(h)},o.circumferenceAtLatitude=Qx,o.clamp=de,o.clearTileCache=function(l){const i=X(),a=[];for(const h in Et)i&&a.push(i.delete(h)),delete Et[h];l&&Promise.all(a).catch(l).then(()=>l())},o.clipLine=qC,o.clone=function(l){var i=new To(16);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],i},o.clone$1=un,o.collisionCircleLayout=MF,o.config=dn,o.conjugate=function(l,i){return l[0]=-i[0],l[1]=-i[1],l[2]=-i[2],l[3]=i[3],l},o.create=function(){var l=new To(16);return To!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},o.create$1=$T,o.createExpression=Ml,o.createLayout=Ze,o.createStyleLayer=function(l){return l.type==="custom"?new S4(l):new C4[l.type](l)},o.cross=d1,o.degToRad=G,o.distance=function(l,i){return Math.hypot(i[0]-l[0],i[1]-l[1],i[2]-l[2])},o.div=function(l,i,a){return l[0]=i[0]/a[0],l[1]=i[1]/a[1],l[2]=i[2]/a[2],l},o.dot=ss,o.ease=ie,o.easeCubicInOut=Z,o.emitValidationErrors=ep,o.endsWith=ct,o.enforceCacheSizeLimit=function(l){for(const i in Et)N(i),Et[i].then(a=>{a.keys().then(h=>{for(let p=0;p<h.length-l;p++)a.delete(h[p])})})},o.evaluateSizeForFeature=Z_,o.evaluateSizeForZoom=Bh,o.evaluateVariableOffset=JC,o.evented=W,o.exactEquals=function(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]&&l[3]===i[3]},o.exactEquals$1=function(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]},o.exported=Fn,o.exported$1=Ir,o.extend=pt,o.extend$1=uo,o.fillExtrusionHeightLift=vC,o.filterObject=Ut,o.fromMat4=function(l,i){return l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[4],l[4]=i[5],l[5]=i[6],l[6]=i[8],l[7]=i[9],l[8]=i[10],l},o.fromQuat=function(l,i){var a=i[0],h=i[1],p=i[2],g=i[3],v=a+a,x=h+h,S=p+p,T=a*v,D=h*v,P=h*x,L=p*v,F=p*x,V=p*S,q=g*v,K=g*x,le=g*S;return l[0]=1-P-V,l[1]=D+le,l[2]=L-K,l[3]=0,l[4]=D-le,l[5]=1-T-V,l[6]=F+q,l[7]=0,l[8]=L+K,l[9]=F-q,l[10]=1-T-P,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},o.fromRotation=function(l,i){var a=Math.sin(i),h=Math.cos(i);return l[0]=h,l[1]=a,l[2]=0,l[3]=-a,l[4]=h,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},o.fromScaling=GT,o.furthestTileCorner=function(l){const i=Math.round((l+45+360)%360/90)%4;return U[i]},o.getAABBPointSquareDist=function(l,i,a){let h=0;for(let p=0;p<2;++p){const g=a?a[p]:0;l[p]>g&&(h+=(l[p]-g)*(l[p]-g)),i[p]<g&&(h+=(g-i[p])*(g-i[p]))}return h},o.getAnchorAlignment=D1,o.getAnchorJustification=O1,o.getBounds=function(l){let i=1/0,a=1/0,h=-1/0,p=-1/0;for(const g of l)i=Math.min(i,g.x),a=Math.min(a,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return{min:new k(i,a),max:new k(h,p)}},o.getColumn=Ie,o.getGridMatrix=function(l,i,a){const h=i.getNorth(),p=i.getSouth(),g=i.getWest(),v=.015625;return[0,(i.getEast()-g)*v,1<<l.z,(p-h)/Gh[a],0,l.y,h,g,v]},o.getImage=Jt,o.getJSON=function(l,i){return we(pt(l,{type:"json"}),i)},o.getLatitudinalLod=function(l){const i=80.051129;l=de(l,-80.051129,i)/i*90;const a=Math.pow(Math.abs(Math.sin(G(l))),3);return Math.round(a*(Gh.length-1))},o.getMapSessionAPI=Sc,o.getPerformanceMeasurement=qe,o.getProjection=mM,o.getRTLTextPluginStatus=Y,o.getReferrer=De,o.getTilePoint=function(l,{x:i,y:a},h=0){return new k(((i-h)*l.scale-l.x)*nn,(a*l.scale-l.y)*nn)},o.getTileVec3=function(l,i,a=0){return zh(((i.x-a)*l.scale-l.x)*nn,(i.y*l.scale-l.y)*nn,PT(i.z,i.y))},o.getVideo=function(l,i){const a=y.document.createElement("video");a.muted=!0,a.onloadstart=function(){i(null,a)};for(let h=0;h<l.length;h++){const p=y.document.createElement("source");rt(l[h])||(a.crossOrigin="Anonymous"),p.src=l[h],a.appendChild(p)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(l){const i=[0,0,0],a=na(new Float64Array(16));return Lh(a,l.pixelMatrix,l.globeMatrix),nr(i,i,a),new k(i[0],i[1])},o.globeDenormalizeECEF=B1,o.globeECEFOrigin=function(l,i){const a=[0,0,0];return nr(a,a,Dp(ra(i.canonical))),nr(a,a,l),a},o.globeNormalizeECEF=Dp,o.globePixelsToTileUnits=function(l,i){return nn/(512*Math.pow(2,l))*ry(ra(i))},o.globePoleMatrixForTile=function(l,i,a){const h=na(new Float64Array(16)),p=(i/(1<<l)-.5)*Math.PI*2;return F_(h,a.globeMatrix,p),Float32Array.from(h)},o.globeTileBounds=ra,o.globeTiltAtLngLat=lM,o.globeToMercatorTransition=Ip,o.globeUseCustomAntiAliasing=function(l,i,a){const h=Ip(a.zoom),p=l.style.map._antialias,g=!!i.extStandardDerivatives,v=i.extStandardDerivativesForceOff||l.terrain&&l.terrain.exaggeration()>0;return h===0&&!p&&!v&&g},o.identity=na,o.identity$1=KT,o.invert=s1,o.isFullscreen=function(){return!!y.document.fullscreenElement||!!y.document.webkitFullscreenElement},o.isLngLatBehindGlobe=function(l,i){return lM(l,i)>Math.PI/2*1.01},o.isMapAuthenticated=function(l){return se.has(l)},o.isMapboxURL=ar,o.isSafariWithAntialiasingBug=function(l){const i=l.navigator?l.navigator.userAgent:null;return!!ci(l)&&i&&(i.match("Version/15.4")||i.match("Version/15.5")||i.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Tr,o.len=O5,o.length=fp,o.length$1=function(l){return Math.hypot(l[0],l[1],l[2],l[3])},o.loadVectorTile=RM,o.makeRequest=we,o.mapValue=function(l,i,a,h,p){return de((l-i)/(a-i)*(p-h)+h,h,p)},o.mercatorScale=OT,o.mercatorXfromLng=ea,o.mercatorYfromLat=Va,o.mercatorZfromAltitude=rs,o.mul=I5,o.mul$1=P5,o.multiply=Lh,o.multiply$1=function(l,i,a){var h=i[0],p=i[1],g=i[2],v=i[3],x=i[4],S=i[5],T=i[6],D=i[7],P=i[8],L=a[0],F=a[1],V=a[2],q=a[3],K=a[4],le=a[5],ge=a[6],ue=a[7],pe=a[8];return l[0]=L*h+F*v+V*T,l[1]=L*p+F*x+V*D,l[2]=L*g+F*S+V*P,l[3]=q*h+K*v+le*T,l[4]=q*p+K*x+le*D,l[5]=q*g+K*S+le*P,l[6]=ge*h+ue*v+pe*T,l[7]=ge*p+ue*x+pe*D,l[8]=ge*g+ue*S+pe*P,l},o.multiply$2=qT,o.nextPowerOfTwo=Ne,o.normalize=Wr,o.normalize$1=function(l,i){var a=i[0],h=i[1],p=i[2],g=i[3],v=a*a+h*h+p*p+g*g;return v>0&&(v=1/Math.sqrt(v)),l[0]=a*v,l[1]=h*v,l[2]=p*v,l[3]=g*v,l},o.number=Dn,o.ortho=function(l,i,a,h,p,g,v){var x=1/(i-a),S=1/(h-p),T=1/(g-v);return l[0]=-2*x,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*S,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*T,l[11]=0,l[12]=(i+a)*x,l[13]=(p+h)*S,l[14]=(v+g)*T,l[15]=1,l},o.pbf=Tp,o.perspective=function(l,i,a,h,p){var g,v=1/Math.tan(i/2);return l[0]=v/a,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=v,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,p!=null&&p!==1/0?(l[10]=(p+h)*(g=1/(h-p)),l[14]=2*p*h*g):(l[10]=-1,l[14]=-2*h),l},o.pick=function(l,i){const a={};for(let h=0;h<i.length;h++){const p=i[h];p in l&&(a[p]=l[p])}return a},o.plugin=ee,o.pointGeometry=k,o.polygonContainsPoint=iu,o.polygonIntersectsBox=VT,o.polygonIntersectsPolygon=RT,o.polygonizeBounds=function(l,i,a=0,h=!0){const p=new k(a,a),g=l.sub(p),v=i.add(p),x=[g,new k(v.x,g.y),v,new k(g.x,v.y)];return h&&x.push(g.clone()),x},o.posAttributes=kp,o.postMapLoadEvent=Pr,o.postTurnstileEvent=Ur,o.potpack=C1,o.prevPowerOfTwo=function(l){return l<=1?1:Math.pow(2,Math.floor(Math.log(l)/Math.LN2))},o.radToDeg=B,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(l){return l({pluginStatus:A,pluginURL:I}),W.on("pluginStateChange",l),l},o.removeAuthState=function(l){se.delete(l)},o.renderColorRamp=_1,o.resample=LT,o.rotateX=a1,o.rotateX$1=JT,o.rotateY=F_,o.rotateY$1=QT,o.rotateZ=function(l,i,a){var h=Math.sin(a),p=Math.cos(a),g=i[0],v=i[1],x=i[2],S=i[3],T=i[4],D=i[5],P=i[6],L=i[7];return i!==l&&(l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=g*p+T*h,l[1]=v*p+D*h,l[2]=x*p+P*h,l[3]=S*p+L*h,l[4]=T*p-g*h,l[5]=D*p-v*h,l[6]=P*p-x*h,l[7]=L*p-S*h,l},o.rotateZ$1=function(l,i,a){a*=.5;var h=i[0],p=i[1],g=i[2],v=i[3],x=Math.sin(a),S=Math.cos(a);return l[0]=h*S+p*x,l[1]=p*S-h*x,l[2]=g*S+v*x,l[3]=v*S-g*x,l},o.scale=ru,o.scale$1=ZT,o.scale$2=As,o.scaleAndAdd=B_,o.setCacheLimits=function(l,i){Le=l,Qe=i},o.setColumn=function(l,i,a){l[4*i+0]=a[0],l[4*i+1]=a[1],l[4*i+2]=a[2],l[4*i+3]=a[3]},o.setRTLTextPlugin=function(l,i,a=!1){if(A===_||A===b||A===E)throw new Error("setRTLTextPlugin cannot be called multiple times.");I=Fn.resolveURL(l),A=_,C=i,R(),a||oe()},o.smoothstep=xe,o.spec=Ge,o.storeAuthState=function(l,i){i?se.add(l):se.delete(l)},o.sub=Ds,o.subtract=c1,o.symbolSize=kF,o.tileAABB=function(l,i,a,h,p,g,v,x,S){if(S.name==="globe")return a4(l,i,new H_(a,h,p));const T=lu({z:a,x:h,y:p},S);return new po([(g+T.x/T.scale)*i,i*(T.y/T.scale),v],[(g+T.x2/T.scale)*i,i*(T.y2/T.scale),x])},o.tileCornersToBounds=ny,o.tileTransform=lu,o.transformMat3=function(l,i,a){var h=i[0],p=i[1],g=i[2];return l[0]=h*a[0]+p*a[3]+g*a[6],l[1]=h*a[1]+p*a[4]+g*a[7],l[2]=h*a[2]+p*a[5]+g*a[8],l},o.transformMat4=nr,o.transformMat4$1=ou,o.transformQuat=YT,o.transitionTileAABBinECEF=rM,o.translate=dp,o.transpose=function(l,i){if(l===i){var a=i[1],h=i[2],p=i[5];l[1]=i[3],l[2]=i[6],l[3]=a,l[5]=i[7],l[6]=h,l[7]=p}else l[0]=i[0],l[1]=i[3],l[2]=i[6],l[3]=i[1],l[4]=i[4],l[5]=i[7],l[6]=i[2],l[7]=i[5],l[8]=i[8];return l},o.triggerPluginCompletionEvent=z,o.uniqueId=ot,o.updateGlobeVertexNormal=function(l,i,a,h,p){const g=5*i+2;l.float32[g+0]=a,l.float32[g+1]=h,l.float32[g+2]=p},o.validateCustomStyleLayer=function(l){const i=[],a=l.id;return a===void 0&&i.push({message:`layers.${a}: missing required property "id"`}),l.render===void 0&&i.push({message:`layers.${a}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&i.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),i},o.validateFilter=l=>Ts(Dl(l)),o.validateFog=l=>Ts(d_(l)),o.validateLayer=l=>Ts(bh(l)),o.validateLight=l=>Ts(h_(l)),o.validateSource=l=>Ts(u_(l)),o.validateStyle=Sh,o.validateTerrain=l=>Ts(Eh(l)),o.values=ze,o.vectorTile=au,o.version=Lt,o.warnOnce=at,o.window=y,o.wrap=Ce}),u(["./shared"],function(o){function y(X){if(typeof X=="number"||typeof X=="boolean"||typeof X=="string"||X==null)return JSON.stringify(X);if(Array.isArray(X)){let H="[";for(const Q of X)H+=`${y(Q)},`;return`${H}]`}let N="{";for(const H of Object.keys(X).sort())N+=`${H}:${y(X[H])},`;return`${N}}`}function w(X){let N="";for(const H of o.refProperties)N+=`/${y(X[H])}`;return N}class M{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,H){for(const he of N)this._layerConfigs[he.id]=he,(this._layers[he.id]=o.createStyleLayer(he)).compileFilter(),this.keyCache[he.id]&&delete this.keyCache[he.id];for(const he of H)delete this.keyCache[he],delete this._layerConfigs[he],delete this._layers[he];this.familiesBySource={};const Q=function(he,ye){const Ae={};for(let we=0;we<he.length;we++){const Oe=ye&&ye[he[we].id]||w(he[we]);ye&&(ye[he[we].id]=Oe);let Je=Ae[Oe];Je||(Je=Ae[Oe]=[]),Je.push(he[we])}const De=[];for(const we in Ae)De.push(Ae[we]);return De}(o.values(this._layerConfigs),this.keyCache);for(const he of Q){const ye=he.map(wt=>this._layers[wt.id]),Ae=ye[0];if(Ae.visibility==="none")continue;const De=Ae.source||"";let we=this.familiesBySource[De];we||(we=this.familiesBySource[De]={});const Oe=Ae.sourceLayer||"_geojsonTileLayer";let Je=we[Oe];Je||(Je=we[Oe]=[]),Je.push(ye)}}}class k{loadTile(N,H){const{uid:Q,encoding:he,rawImageData:ye,padding:Ae,buildQuadTree:De}=N,we=o.window.ImageBitmap&&ye instanceof o.window.ImageBitmap?this.getImageData(ye,Ae):ye;H(null,new o.DEMData(Q,we,he,Ae<1,De))}getImageData(N,H){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(N.width,N.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=N.width,this.offscreenCanvas.height=N.height,this.offscreenCanvasContext.drawImage(N,0,0,N.width,N.height);const Q=this.offscreenCanvasContext.getImageData(-H,-H,N.width+2*H,N.height+2*H);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Q}}var O=function X(N,H){var Q,he=N&&N.type;if(he==="FeatureCollection")for(Q=0;Q<N.features.length;Q++)X(N.features[Q],H);else if(he==="GeometryCollection")for(Q=0;Q<N.geometries.length;Q++)X(N.geometries[Q],H);else if(he==="Feature")X(N.geometry,H);else if(he==="Polygon")$(N.coordinates,H);else if(he==="MultiPolygon")for(Q=0;Q<N.coordinates.length;Q++)$(N.coordinates[Q],H);return N};function $(X,N){if(X.length!==0){j(X[0],N);for(var H=1;H<X.length;H++)j(X[H],!N)}}function j(X,N){for(var H=0,Q=0,he=0,ye=X.length,Ae=ye-1;he<ye;Ae=he++){var De=(X[he][0]-X[Ae][0])*(X[Ae][1]+X[he][1]),we=H+De;Q+=Math.abs(H)>=Math.abs(De)?H-we+De:De-we+H,H=we}H+Q>=0!=!!N&&X.reverse()}const G=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;class B{constructor(N){this._feature=N,this.extent=o.EXTENT,this.type=N.type,this.properties=N.tags,"id"in N&&!isNaN(N.id)&&(this.id=parseInt(N.id,10))}loadGeometry(){if(this._feature.type===1){const N=[];for(const H of this._feature.geometry)N.push([new o.pointGeometry(H[0],H[1])]);return N}{const N=[];for(const H of this._feature.geometry){const Q=[];for(const he of H)Q.push(new o.pointGeometry(he[0],he[1]));N.push(Q)}return N}}toGeoJSON(N,H,Q){return G.call(this,N,H,Q)}}class U{constructor(N){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=N.length,this._features=N}feature(N){return new B(this._features[N])}}var Z=o.vectorTile.VectorTileFeature,re=ie;function ie(X,N){this.options=N||{},this.features=X,this.length=X.length}function de(X,N){this.id=typeof X.id=="number"?X.id:void 0,this.type=X.type,this.rawGeometry=X.type===1?[X.geometry]:X.geometry,this.properties=X.tags,this.extent=N||4096}ie.prototype.feature=function(X){return new de(this.features[X],this.options.extent)},de.prototype.loadGeometry=function(){var X=this.rawGeometry;this.geometry=[];for(var N=0;N<X.length;N++){for(var H=X[N],Q=[],he=0;he<H.length;he++)Q.push(new o.pointGeometry(H[he][0],H[he][1]));this.geometry.push(Q)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var X=this.geometry,N=1/0,H=-1/0,Q=1/0,he=-1/0,ye=0;ye<X.length;ye++)for(var Ae=X[ye],De=0;De<Ae.length;De++){var we=Ae[De];N=Math.min(N,we.x),H=Math.max(H,we.x),Q=Math.min(Q,we.y),he=Math.max(he,we.y)}return[N,Q,H,he]},de.prototype.toGeoJSON=Z.prototype.toGeoJSON;var xe=je,Ce=re;function je(X){var N=new o.pbf;return function(H,Q){for(var he in H.layers)Q.writeMessage(3,ze,H.layers[he])}(X,N),N.finish()}function ze(X,N){var H;N.writeVarintField(15,X.version||1),N.writeStringField(1,X.name||""),N.writeVarintField(5,X.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(H=0;H<X.length;H++)Q.feature=X.feature(H),N.writeMessage(2,pt,Q);var he=Q.keys;for(H=0;H<he.length;H++)N.writeStringField(3,he[H]);var ye=Q.values;for(H=0;H<ye.length;H++)N.writeMessage(4,Ve,ye[H])}function pt(X,N){var H=X.feature;H.id!==void 0&&N.writeVarintField(1,H.id),N.writeMessage(2,mt,X),N.writeVarintField(3,H.type),N.writeMessage(4,Ne,H)}function mt(X,N){var H=X.feature,Q=X.keys,he=X.values,ye=X.keycache,Ae=X.valuecache;for(var De in H.properties){var we=H.properties[De],Oe=ye[De];if(we!==null){Oe===void 0&&(Q.push(De),ye[De]=Oe=Q.length-1),N.writeVarint(Oe);var Je=typeof we;Je!=="string"&&Je!=="boolean"&&Je!=="number"&&(we=JSON.stringify(we));var wt=Je+":"+we,rt=Ae[wt];rt===void 0&&(he.push(we),Ae[wt]=rt=he.length-1),N.writeVarint(rt)}}}function ot(X,N){return(N<<3)+(7&X)}function kt(X){return X<<1^X>>31}function Ne(X,N){for(var H=X.loadGeometry(),Q=X.type,he=0,ye=0,Ae=H.length,De=0;De<Ae;De++){var we=H[De],Oe=1;Q===1&&(Oe=we.length),N.writeVarint(ot(1,Oe));for(var Je=Q===3?we.length-1:we.length,wt=0;wt<Je;wt++){wt===1&&Q!==1&&N.writeVarint(ot(2,Je-1));var rt=we[wt].x-he,Yt=we[wt].y-ye;N.writeVarint(kt(rt)),N.writeVarint(kt(Yt)),he+=rt,ye+=Yt}Q===3&&N.writeVarint(ot(7,1))}}function Ve(X,N){var H=typeof X;H==="string"?N.writeStringField(1,X):H==="boolean"?N.writeBooleanField(7,X):H==="number"&&(X%1!=0?N.writeDoubleField(3,X):X<0?N.writeSVarintField(6,X):N.writeVarintField(5,X))}function tt(X,N,H,Q,he,ye){if(he-Q<=H)return;const Ae=Q+he>>1;ct(X,N,Ae,Q,he,ye%2),tt(X,N,H,Q,Ae-1,ye+1),tt(X,N,H,Ae+1,he,ye+1)}function ct(X,N,H,Q,he,ye){for(;he>Q;){if(he-Q>600){const Oe=he-Q+1,Je=H-Q+1,wt=Math.log(Oe),rt=.5*Math.exp(2*wt/3),Yt=.5*Math.sqrt(wt*rt*(Oe-rt)/Oe)*(Je-Oe/2<0?-1:1);ct(X,N,H,Math.max(Q,Math.floor(H-Je*rt/Oe+Yt)),Math.min(he,Math.floor(H+(Oe-Je)*rt/Oe+Yt)),ye)}const Ae=N[2*H+ye];let De=Q,we=he;for(Ot(X,N,Q,H),N[2*he+ye]>Ae&&Ot(X,N,Q,he);De<we;){for(Ot(X,N,De,we),De++,we--;N[2*De+ye]<Ae;)De++;for(;N[2*we+ye]>Ae;)we--}N[2*Q+ye]===Ae?Ot(X,N,Q,we):(we++,Ot(X,N,we,he)),we<=H&&(Q=we+1),H<=we&&(he=we-1)}}function Ot(X,N,H,Q){Ut(X,H,Q),Ut(N,2*H,2*Q),Ut(N,2*H+1,2*Q+1)}function Ut(X,N,H){const Q=X[N];X[N]=X[H],X[H]=Q}function un(X,N,H,Q){const he=X-H,ye=N-Q;return he*he+ye*ye}xe.fromVectorTileJs=je,xe.fromGeojsonVt=function(X,N){N=N||{};var H={};for(var Q in X)H[Q]=new re(X[Q].features,N),H[Q].name=Q,H[Q].version=N.version,H[Q].extent=N.extent;return je({layers:H})},xe.GeoJSONWrapper=Ce;const st=X=>X[0],at=X=>X[1];class xt{constructor(N,H=st,Q=at,he=64,ye=Float64Array){this.nodeSize=he,this.points=N;const Ae=N.length<65536?Uint16Array:Uint32Array,De=this.ids=new Ae(N.length),we=this.coords=new ye(2*N.length);for(let Oe=0;Oe<N.length;Oe++)De[Oe]=Oe,we[2*Oe]=H(N[Oe]),we[2*Oe+1]=Q(N[Oe]);tt(De,we,he,0,De.length-1,0)}range(N,H,Q,he){return function(ye,Ae,De,we,Oe,Je,wt){const rt=[0,ye.length-1,0],Yt=[];let Xt,$t;for(;rt.length;){const Jt=rt.pop(),gn=rt.pop(),Un=rt.pop();if(gn-Un<=wt){for(let Kt=Un;Kt<=gn;Kt++)Xt=Ae[2*Kt],$t=Ae[2*Kt+1],Xt>=De&&Xt<=Oe&&$t>=we&&$t<=Je&&Yt.push(ye[Kt]);continue}const Xn=Math.floor((Un+gn)/2);Xt=Ae[2*Xn],$t=Ae[2*Xn+1],Xt>=De&&Xt<=Oe&&$t>=we&&$t<=Je&&Yt.push(ye[Xn]);const $n=(Jt+1)%2;(Jt===0?De<=Xt:we<=$t)&&(rt.push(Un),rt.push(Xn-1),rt.push($n)),(Jt===0?Oe>=Xt:Je>=$t)&&(rt.push(Xn+1),rt.push(gn),rt.push($n))}return Yt}(this.ids,this.coords,N,H,Q,he,this.nodeSize)}within(N,H,Q){return function(he,ye,Ae,De,we,Oe){const Je=[0,he.length-1,0],wt=[],rt=we*we;for(;Je.length;){const Yt=Je.pop(),Xt=Je.pop(),$t=Je.pop();if(Xt-$t<=Oe){for(let $n=$t;$n<=Xt;$n++)un(ye[2*$n],ye[2*$n+1],Ae,De)<=rt&&wt.push(he[$n]);continue}const Jt=Math.floor(($t+Xt)/2),gn=ye[2*Jt],Un=ye[2*Jt+1];un(gn,Un,Ae,De)<=rt&&wt.push(he[Jt]);const Xn=(Yt+1)%2;(Yt===0?Ae-we<=gn:De-we<=Un)&&(Je.push($t),Je.push(Jt-1),Je.push(Xn)),(Yt===0?Ae+we>=gn:De+we>=Un)&&(Je.push(Jt+1),Je.push(Xt),Je.push(Xn))}return wt}(this.ids,this.coords,N,H,Q,this.nodeSize)}}const Vt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:X=>X},Gt=Math.fround||(hn=new Float32Array(1),X=>(hn[0]=+X,hn[0]));var hn;class Tn{constructor(N){this.options=_t(Object.create(Vt),N),this.trees=new Array(this.options.maxZoom+1)}load(N){const{log:H,minZoom:Q,maxZoom:he,nodeSize:ye}=this.options;H&&console.time("total time");const Ae=`prepare ${N.length} points`;H&&console.time(Ae),this.points=N;let De=[];for(let we=0;we<N.length;we++)N[we].geometry&&De.push(Oi(N[we],we));this.trees[he+1]=new xt(De,Ft,Sn,ye,Float32Array),H&&console.timeEnd(Ae);for(let we=he;we>=Q;we--){const Oe=+Date.now();De=this._cluster(De,we),this.trees[we]=new xt(De,Ft,Sn,ye,Float32Array),H&&console.log("z%d: %d clusters in %dms",we,De.length,+Date.now()-Oe)}return H&&console.timeEnd("total time"),this}getClusters(N,H){let Q=((N[0]+180)%360+360)%360-180;const he=Math.max(-90,Math.min(90,N[1]));let ye=N[2]===180?180:((N[2]+180)%360+360)%360-180;const Ae=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)Q=-180,ye=180;else if(Q>ye){const Je=this.getClusters([Q,he,180,Ae],H),wt=this.getClusters([-180,he,ye,Ae],H);return Je.concat(wt)}const De=this.trees[this._limitZoom(H)],we=De.range(qe(Q),Lt(Ae),qe(ye),Lt(he)),Oe=[];for(const Je of we){const wt=De.points[Je];Oe.push(wt.numPoints?Ie(wt):this.points[wt.index])}return Oe}getChildren(N){const H=this._getOriginId(N),Q=this._getOriginZoom(N),he="No cluster with the specified id.",ye=this.trees[Q];if(!ye)throw new Error(he);const Ae=ye.points[H];if(!Ae)throw new Error(he);const De=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),we=ye.within(Ae.x,Ae.y,De),Oe=[];for(const Je of we){const wt=ye.points[Je];wt.parentId===N&&Oe.push(wt.numPoints?Ie(wt):this.points[wt.index])}if(Oe.length===0)throw new Error(he);return Oe}getLeaves(N,H,Q){const he=[];return this._appendLeaves(he,N,H=H||10,Q=Q||0,0),he}getTile(N,H,Q){const he=this.trees[this._limitZoom(N)],ye=Math.pow(2,N),{extent:Ae,radius:De}=this.options,we=De/Ae,Oe=(Q-we)/ye,Je=(Q+1+we)/ye,wt={features:[]};return this._addTileFeatures(he.range((H-we)/ye,Oe,(H+1+we)/ye,Je),he.points,H,Q,ye,wt),H===0&&this._addTileFeatures(he.range(1-we/ye,Oe,1,Je),he.points,ye,Q,ye,wt),H===ye-1&&this._addTileFeatures(he.range(0,Oe,we/ye,Je),he.points,-1,Q,ye,wt),wt.features.length?wt:null}getClusterExpansionZoom(N){let H=this._getOriginZoom(N)-1;for(;H<=this.options.maxZoom;){const Q=this.getChildren(N);if(H++,Q.length!==1)break;N=Q[0].properties.cluster_id}return H}_appendLeaves(N,H,Q,he,ye){const Ae=this.getChildren(H);for(const De of Ae){const we=De.properties;if(we&&we.cluster?ye+we.point_count<=he?ye+=we.point_count:ye=this._appendLeaves(N,we.cluster_id,Q,he,ye):ye<he?ye++:N.push(De),N.length===Q)break}return ye}_addTileFeatures(N,H,Q,he,ye,Ae){for(const De of N){const we=H[De],Oe=we.numPoints;let Je,wt,rt;if(Oe)Je=We(we),wt=we.x,rt=we.y;else{const $t=this.points[we.index];Je=$t.properties,wt=qe($t.geometry.coordinates[0]),rt=Lt($t.geometry.coordinates[1])}const Yt={type:1,geometry:[[Math.round(this.options.extent*(wt*ye-Q)),Math.round(this.options.extent*(rt*ye-he))]],tags:Je};let Xt;Oe?Xt=we.id:this.options.generateId?Xt=we.index:this.points[we.index].id&&(Xt=this.points[we.index].id),Xt!==void 0&&(Yt.id=Xt),Ae.features.push(Yt)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(+N,this.options.maxZoom+1))}_cluster(N,H){const Q=[],{radius:he,extent:ye,reduce:Ae,minPoints:De}=this.options,we=he/(ye*Math.pow(2,H));for(let Oe=0;Oe<N.length;Oe++){const Je=N[Oe];if(Je.zoom<=H)continue;Je.zoom=H;const wt=this.trees[H+1],rt=wt.within(Je.x,Je.y,we),Yt=Je.numPoints||1;let Xt=Yt;for(const $t of rt){const Jt=wt.points[$t];Jt.zoom>H&&(Xt+=Jt.numPoints||1)}if(Xt>Yt&&Xt>=De){let $t=Je.x*Yt,Jt=Je.y*Yt,gn=Ae&&Yt>1?this._map(Je,!0):null;const Un=(Oe<<5)+(H+1)+this.points.length;for(const Xn of rt){const $n=wt.points[Xn];if($n.zoom<=H)continue;$n.zoom=H;const Kt=$n.numPoints||1;$t+=$n.x*Kt,Jt+=$n.y*Kt,$n.parentId=Un,Ae&&(gn||(gn=this._map(Je,!0)),Ae(gn,this._map($n)))}Je.parentId=Un,Q.push(ci($t/Xt,Jt/Xt,Un,Xt,gn))}else if(Q.push(Je),Xt>1)for(const $t of rt){const Jt=wt.points[$t];Jt.zoom<=H||(Jt.zoom=H,Q.push(Jt))}}return Q}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,H){if(N.numPoints)return H?_t({},N.properties):N.properties;const Q=this.points[N.index].properties,he=this.options.map(Q);return H&&he===Q?_t({},he):he}}function ci(X,N,H,Q,he){return{x:Gt(X),y:Gt(N),zoom:1/0,id:H,parentId:-1,numPoints:Q,properties:he}}function Oi(X,N){const[H,Q]=X.geometry.coordinates;return{x:Gt(qe(H)),y:Gt(Lt(Q)),zoom:1/0,index:N,parentId:-1}}function Ie(X){return{type:"Feature",id:X.id,properties:We(X),geometry:{type:"Point",coordinates:[(N=X.x,360*(N-.5)),gt(X.y)]}};var N}function We(X){const N=X.numPoints,H=N>=1e4?`${Math.round(N/1e3)}k`:N>=1e3?Math.round(N/100)/10+"k":N;return _t(_t({},X.properties),{cluster:!0,cluster_id:X.id,point_count:N,point_count_abbreviated:H})}function qe(X){return X/360+.5}function Lt(X){const N=Math.sin(X*Math.PI/180),H=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return H<0?0:H>1?1:H}function gt(X){const N=(180-360*X)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function _t(X,N){for(const H in N)X[H]=N[H];return X}function Ft(X){return X.x}function Sn(X){return X.y}function Fn(X,N,H,Q){for(var he,ye=Q,Ae=H-N>>1,De=H-N,we=X[N],Oe=X[N+1],Je=X[H],wt=X[H+1],rt=N+3;rt<H;rt+=3){var Yt=Li(X[rt],X[rt+1],we,Oe,Je,wt);if(Yt>ye)he=rt,ye=Yt;else if(Yt===ye){var Xt=Math.abs(rt-Ae);Xt<De&&(he=rt,De=Xt)}}ye>Q&&(he-N>3&&Fn(X,N,he,Q),X[he+2]=ye,H-he>3&&Fn(X,he,H,Q))}function Li(X,N,H,Q,he,ye){var Ae=he-H,De=ye-Q;if(Ae!==0||De!==0){var we=((X-H)*Ae+(N-Q)*De)/(Ae*Ae+De*De);we>1?(H=he,Q=ye):we>0&&(H+=Ae*we,Q+=De*we)}return(Ae=X-H)*Ae+(De=N-Q)*De}function dn(X,N,H,Q){var he={id:X===void 0?null:X,type:N,geometry:H,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ye){var Ae=ye.geometry,De=ye.type;if(De==="Point"||De==="MultiPoint"||De==="LineString")Ir(ye,Ae);else if(De==="Polygon"||De==="MultiLineString")for(var we=0;we<Ae.length;we++)Ir(ye,Ae[we]);else if(De==="MultiPolygon")for(we=0;we<Ae.length;we++)for(var Oe=0;Oe<Ae[we].length;Oe++)Ir(ye,Ae[we][Oe])}(he),he}function Ir(X,N){for(var H=0;H<N.length;H+=3)X.minX=Math.min(X.minX,N[H]),X.minY=Math.min(X.minY,N[H+1]),X.maxX=Math.max(X.maxX,N[H]),X.maxY=Math.max(X.maxY,N[H+1])}function sr(X,N,H,Q){if(N.geometry){var he=N.geometry.coordinates,ye=N.geometry.type,Ae=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),De=[],we=N.id;if(H.promoteId?we=N.properties[H.promoteId]:H.generateId&&(we=Q||0),ye==="Point")xr(he,De);else if(ye==="MultiPoint")for(var Oe=0;Oe<he.length;Oe++)xr(he[Oe],De);else if(ye==="LineString")Mt(he,De,Ae,!1);else if(ye==="MultiLineString"){if(H.lineMetrics){for(Oe=0;Oe<he.length;Oe++)Mt(he[Oe],De=[],Ae,!1),X.push(dn(we,"LineString",De,N.properties));return}tn(he,De,Ae,!1)}else if(ye==="Polygon")tn(he,De,Ae,!0);else{if(ye!=="MultiPolygon"){if(ye==="GeometryCollection"){for(Oe=0;Oe<N.geometry.geometries.length;Oe++)sr(X,{id:we,geometry:N.geometry.geometries[Oe],properties:N.properties},H,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Oe=0;Oe<he.length;Oe++){var Je=[];tn(he[Oe],Je,Ae,!0),De.push(Je)}}X.push(dn(we,ye,De,N.properties))}}function xr(X,N){N.push(ti(X[0])),N.push(bi(X[1])),N.push(0)}function Mt(X,N,H,Q){for(var he,ye,Ae=0,De=0;De<X.length;De++){var we=ti(X[De][0]),Oe=bi(X[De][1]);N.push(we),N.push(Oe),N.push(0),De>0&&(Ae+=Q?(he*Oe-we*ye)/2:Math.sqrt(Math.pow(we-he,2)+Math.pow(Oe-ye,2))),he=we,ye=Oe}var Je=N.length-3;N[2]=1,Fn(N,0,Je,H),N[Je+2]=1,N.size=Math.abs(Ae),N.start=0,N.end=N.size}function tn(X,N,H,Q){for(var he=0;he<X.length;he++){var ye=[];Mt(X[he],ye,H,Q),N.push(ye)}}function ti(X){return X/360+.5}function bi(X){var N=Math.sin(X*Math.PI/180),H=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return H<0?0:H>1?1:H}function Zn(X,N,H,Q,he,ye,Ae,De){if(Q/=N,ye>=(H/=N)&&Ae<Q)return X;if(Ae<H||ye>=Q)return null;for(var we=[],Oe=0;Oe<X.length;Oe++){var Je=X[Oe],wt=Je.geometry,rt=Je.type,Yt=he===0?Je.minX:Je.minY,Xt=he===0?Je.maxX:Je.maxY;if(Yt>=H&&Xt<Q)we.push(Je);else if(!(Xt<H||Yt>=Q)){var $t=[];if(rt==="Point"||rt==="MultiPoint")ar(wt,$t,H,Q,he);else if(rt==="LineString")br(wt,$t,H,Q,he,!1,De.lineMetrics);else if(rt==="MultiLineString")tr(wt,$t,H,Q,he,!1);else if(rt==="Polygon")tr(wt,$t,H,Q,he,!0);else if(rt==="MultiPolygon")for(var Jt=0;Jt<wt.length;Jt++){var gn=[];tr(wt[Jt],gn,H,Q,he,!0),gn.length&&$t.push(gn)}if($t.length){if(De.lineMetrics&&rt==="LineString"){for(Jt=0;Jt<$t.length;Jt++)we.push(dn(Je.id,rt,$t[Jt],Je.tags));continue}rt!=="LineString"&&rt!=="MultiLineString"||($t.length===1?(rt="LineString",$t=$t[0]):rt="MultiLineString"),rt!=="Point"&&rt!=="MultiPoint"||(rt=$t.length===3?"Point":"MultiPoint"),we.push(dn(Je.id,rt,$t,Je.tags))}}}return we.length?we:null}function ar(X,N,H,Q,he){for(var ye=0;ye<X.length;ye+=3){var Ae=X[ye+he];Ae>=H&&Ae<=Q&&(N.push(X[ye]),N.push(X[ye+1]),N.push(X[ye+2]))}}function br(X,N,H,Q,he,ye,Ae){for(var De,we,Oe=ns(X),Je=he===0?lo:co,wt=X.start,rt=0;rt<X.length-3;rt+=3){var Yt=X[rt],Xt=X[rt+1],$t=X[rt+2],Jt=X[rt+3],gn=X[rt+4],Un=he===0?Yt:Xt,Xn=he===0?Jt:gn,$n=!1;Ae&&(De=Math.sqrt(Math.pow(Yt-Jt,2)+Math.pow(Xt-gn,2))),Un<H?Xn>H&&(we=Je(Oe,Yt,Xt,Jt,gn,H),Ae&&(Oe.start=wt+De*we)):Un>Q?Xn<Q&&(we=Je(Oe,Yt,Xt,Jt,gn,Q),Ae&&(Oe.start=wt+De*we)):An(Oe,Yt,Xt,$t),Xn<H&&Un>=H&&(we=Je(Oe,Yt,Xt,Jt,gn,H),$n=!0),Xn>Q&&Un<=Q&&(we=Je(Oe,Yt,Xt,Jt,gn,Q),$n=!0),!ye&&$n&&(Ae&&(Oe.end=wt+De*we),N.push(Oe),Oe=ns(X)),Ae&&(wt+=De)}var Kt=X.length-3;Yt=X[Kt],Xt=X[Kt+1],$t=X[Kt+2],(Un=he===0?Yt:Xt)>=H&&Un<=Q&&An(Oe,Yt,Xt,$t),Kt=Oe.length-3,ye&&Kt>=3&&(Oe[Kt]!==Oe[0]||Oe[Kt+1]!==Oe[1])&&An(Oe,Oe[0],Oe[1],Oe[2]),Oe.length&&N.push(Oe)}function ns(X){var N=[];return N.size=X.size,N.start=X.start,N.end=X.end,N}function tr(X,N,H,Q,he,ye){for(var Ae=0;Ae<X.length;Ae++)br(X[Ae],N,H,Q,he,ye,!1)}function An(X,N,H,Q){X.push(N),X.push(H),X.push(Q)}function lo(X,N,H,Q,he,ye){var Ae=(ye-N)/(Q-N);return X.push(ye),X.push(H+(he-H)*Ae),X.push(1),Ae}function co(X,N,H,Q,he,ye){var Ae=(ye-H)/(he-H);return X.push(N+(Q-N)*Ae),X.push(ye),X.push(1),Ae}function Bo(X,N){for(var H=[],Q=0;Q<X.length;Q++){var he,ye=X[Q],Ae=ye.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")he=Ur(ye.geometry,N);else if(Ae==="MultiLineString"||Ae==="Polygon"){he=[];for(var De=0;De<ye.geometry.length;De++)he.push(Ur(ye.geometry[De],N))}else if(Ae==="MultiPolygon")for(he=[],De=0;De<ye.geometry.length;De++){for(var we=[],Oe=0;Oe<ye.geometry[De].length;Oe++)we.push(Ur(ye.geometry[De][Oe],N));he.push(we)}H.push(dn(ye.id,Ae,he,ye.tags))}return H}function Ur(X,N){var H=[];H.size=X.size,X.start!==void 0&&(H.start=X.start,H.end=X.end);for(var Q=0;Q<X.length;Q+=3)H.push(X[Q]+N,X[Q+1],X[Q+2]);return H}function bo(X,N){if(X.transformed)return X;var H,Q,he,ye=1<<X.z,Ae=X.x,De=X.y;for(H=0;H<X.features.length;H++){var we=X.features[H],Oe=we.geometry,Je=we.type;if(we.geometry=[],Je===1)for(Q=0;Q<Oe.length;Q+=2)we.geometry.push(Pr(Oe[Q],Oe[Q+1],N,ye,Ae,De));else for(Q=0;Q<Oe.length;Q++){var wt=[];for(he=0;he<Oe[Q].length;he+=2)wt.push(Pr(Oe[Q][he],Oe[Q][he+1],N,ye,Ae,De));we.geometry.push(wt)}}return X.transformed=!0,X}function Pr(X,N,H,Q,he,ye){return[Math.round(H*(X*Q-he)),Math.round(H*(N*Q-ye))]}function gl(X,N,H,Q,he){for(var ye=N===he.maxZoom?0:he.tolerance/((1<<N)*he.extent),Ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:H,y:Q,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},De=0;De<X.length;De++){Ae.numFeatures++,Sc(Ae,X[De],ye,he);var we=X[De].minX,Oe=X[De].minY,Je=X[De].maxX,wt=X[De].maxY;we<Ae.minX&&(Ae.minX=we),Oe<Ae.minY&&(Ae.minY=Oe),Je>Ae.maxX&&(Ae.maxX=Je),wt>Ae.maxY&&(Ae.maxY=wt)}return Ae}function Sc(X,N,H,Q){var he=N.geometry,ye=N.type,Ae=[];if(ye==="Point"||ye==="MultiPoint")for(var De=0;De<he.length;De+=3)Ae.push(he[De]),Ae.push(he[De+1]),X.numPoints++,X.numSimplified++;else if(ye==="LineString")se(Ae,he,X,H,!1,!1);else if(ye==="MultiLineString"||ye==="Polygon")for(De=0;De<he.length;De++)se(Ae,he[De],X,H,ye==="Polygon",De===0);else if(ye==="MultiPolygon")for(var we=0;we<he.length;we++){var Oe=he[we];for(De=0;De<Oe.length;De++)se(Ae,Oe[De],X,H,!0,De===0)}if(Ae.length){var Je=N.tags||null;if(ye==="LineString"&&Q.lineMetrics){for(var wt in Je={},N.tags)Je[wt]=N.tags[wt];Je.mapbox_clip_start=he.start/he.size,Je.mapbox_clip_end=he.end/he.size}var rt={geometry:Ae,type:ye==="Polygon"||ye==="MultiPolygon"?3:ye==="LineString"||ye==="MultiLineString"?2:1,tags:Je};N.id!==null&&(rt.id=N.id),X.features.push(rt)}}function se(X,N,H,Q,he,ye){var Ae=Q*Q;if(Q>0&&N.size<(he?Ae:Q))H.numPoints+=N.length/3;else{for(var De=[],we=0;we<N.length;we+=3)(Q===0||N[we+2]>Ae)&&(H.numSimplified++,De.push(N[we]),De.push(N[we+1])),H.numPoints++;he&&function(Oe,Je){for(var wt=0,rt=0,Yt=Oe.length,Xt=Yt-2;rt<Yt;Xt=rt,rt+=2)wt+=(Oe[rt]-Oe[Xt])*(Oe[rt+1]+Oe[Xt+1]);if(wt>0===Je)for(rt=0,Yt=Oe.length;rt<Yt/2;rt+=2){var $t=Oe[rt],Jt=Oe[rt+1];Oe[rt]=Oe[Yt-2-rt],Oe[rt+1]=Oe[Yt-1-rt],Oe[Yt-2-rt]=$t,Oe[Yt-1-rt]=Jt}}(De,ye),X.push(De)}}function fe(X,N){var H=(N=this.options=function(he,ye){for(var Ae in ye)he[Ae]=ye[Ae];return he}(Object.create(this.options),N)).debug;if(H&&console.time("preprocess data"),N.maxZoom<0||N.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(N.promoteId&&N.generateId)throw new Error("promoteId and generateId cannot be used together.");var Q=function(he,ye){var Ae=[];if(he.type==="FeatureCollection")for(var De=0;De<he.features.length;De++)sr(Ae,he.features[De],ye,De);else sr(Ae,he.type==="Feature"?he:{geometry:he},ye);return Ae}(X,N);this.tiles={},this.tileCoords=[],H&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",N.indexMaxZoom,N.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Q=function(he,ye){var Ae=ye.buffer/ye.extent,De=he,we=Zn(he,1,-1-Ae,Ae,0,-1,2,ye),Oe=Zn(he,1,1-Ae,2+Ae,0,-1,2,ye);return(we||Oe)&&(De=Zn(he,1,-Ae,1+Ae,0,-1,2,ye)||[],we&&(De=Bo(we,1).concat(De)),Oe&&(De=De.concat(Bo(Oe,-1)))),De}(Q,N)).length&&this.splitTile(Q,0,0,0),H&&(Q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Le(X,N,H){return 32*((1<<X)*H+N)+X}function Qe(X,N){const H=X.tileID.canonical;if(!this._geoJSONIndex)return N(null,null);const Q=this._geoJSONIndex.getTile(H.z,H.x,H.y);if(!Q)return N(null,null);const he=new U(Q.features);let ye=xe(he);ye.byteOffset===0&&ye.byteLength===ye.buffer.byteLength||(ye=new Uint8Array(ye)),N(null,{vectorTile:he,rawData:ye.buffer})}fe.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},fe.prototype.splitTile=function(X,N,H,Q,he,ye,Ae){for(var De=[X,N,H,Q],we=this.options,Oe=we.debug;De.length;){Q=De.pop(),H=De.pop(),N=De.pop(),X=De.pop();var Je=1<<N,wt=Le(N,H,Q),rt=this.tiles[wt];if(!rt&&(Oe>1&&console.time("creation"),rt=this.tiles[wt]=gl(X,N,H,Q,we),this.tileCoords.push({z:N,x:H,y:Q}),Oe)){Oe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",N,H,Q,rt.numFeatures,rt.numPoints,rt.numSimplified),console.timeEnd("creation"));var Yt="z"+N;this.stats[Yt]=(this.stats[Yt]||0)+1,this.total++}if(rt.source=X,he){if(N===we.maxZoom||N===he)continue;var Xt=1<<he-N;if(H!==Math.floor(ye/Xt)||Q!==Math.floor(Ae/Xt))continue}else if(N===we.indexMaxZoom||rt.numPoints<=we.indexMaxPoints)continue;if(rt.source=null,X.length!==0){Oe>1&&console.time("clipping");var $t,Jt,gn,Un,Xn,$n,Kt=.5*we.buffer/we.extent,Ge=.5-Kt,uo=.5+Kt,Mi=1+Kt;$t=Jt=gn=Un=null,Xn=Zn(X,Je,H-Kt,H+uo,0,rt.minX,rt.maxX,we),$n=Zn(X,Je,H+Ge,H+Mi,0,rt.minX,rt.maxX,we),X=null,Xn&&($t=Zn(Xn,Je,Q-Kt,Q+uo,1,rt.minY,rt.maxY,we),Jt=Zn(Xn,Je,Q+Ge,Q+Mi,1,rt.minY,rt.maxY,we),Xn=null),$n&&(gn=Zn($n,Je,Q-Kt,Q+uo,1,rt.minY,rt.maxY,we),Un=Zn($n,Je,Q+Ge,Q+Mi,1,rt.minY,rt.maxY,we),$n=null),Oe>1&&console.timeEnd("clipping"),De.push($t||[],N+1,2*H,2*Q),De.push(Jt||[],N+1,2*H,2*Q+1),De.push(gn||[],N+1,2*H+1,2*Q),De.push(Un||[],N+1,2*H+1,2*Q+1)}}},fe.prototype.getTile=function(X,N,H){var Q=this.options,he=Q.extent,ye=Q.debug;if(X<0||X>24)return null;var Ae=1<<X,De=Le(X,N=(N%Ae+Ae)%Ae,H);if(this.tiles[De])return bo(this.tiles[De],he);ye>1&&console.log("drilling down to z%d-%d-%d",X,N,H);for(var we,Oe=X,Je=N,wt=H;!we&&Oe>0;)Oe--,Je=Math.floor(Je/2),wt=Math.floor(wt/2),we=this.tiles[Le(Oe,Je,wt)];return we&&we.source?(ye>1&&console.log("found parent tile z%d-%d-%d",Oe,Je,wt),ye>1&&console.time("drilling down"),this.splitTile(we.source,Oe,Je,wt,X,N,H),ye>1&&console.timeEnd("drilling down"),this.tiles[De]?bo(this.tiles[De],he):null):null};class Et extends o.VectorTileWorkerSource{constructor(N,H,Q,he,ye){super(N,H,Q,he,Qe),ye&&(this.loadGeoJSON=ye)}loadData(N,H){const Q=N&&N.request,he=Q&&Q.collectResourceTiming;this.loadGeoJSON(N,(ye,Ae)=>{if(ye||!Ae)return H(ye);if(typeof Ae!="object")return H(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`));{O(Ae,!0);try{if(N.filter){const we=o.createExpression(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(we.result==="error")throw new Error(we.value.map(Je=>`${Je.key}: ${Je.message}`).join(", "));const Oe=Ae.features.filter(Je=>we.value.evaluate({zoom:0},Je));Ae={type:"FeatureCollection",features:Oe}}this._geoJSONIndex=N.cluster?new Tn(function({superclusterOptions:we,clusterProperties:Oe}){if(!Oe||!we)return we;const Je={},wt={},rt={accumulated:null,zoom:0},Yt={properties:null},Xt=Object.keys(Oe);for(const $t of Xt){const[Jt,gn]=Oe[$t],Un=o.createExpression(gn),Xn=o.createExpression(typeof Jt=="string"?[Jt,["accumulated"],["get",$t]]:Jt);Je[$t]=Un.value,wt[$t]=Xn.value}return we.map=$t=>{Yt.properties=$t;const Jt={};for(const gn of Xt)Jt[gn]=Je[gn].evaluate(rt,Yt);return Jt},we.reduce=($t,Jt)=>{Yt.properties=Jt;for(const gn of Xt)rt.accumulated=$t[gn],$t[gn]=wt[gn].evaluate(rt,Yt)},we}(N)).load(Ae.features):function(we,Oe){return new fe(we,Oe)}(Ae,N.geojsonVtOptions)}catch(we){return H(we)}this.loaded={};const De={};if(he){const we=o.getPerformanceMeasurement(Q);we&&(De.resourceTiming={},De.resourceTiming[N.source]=JSON.parse(JSON.stringify(we)))}H(null,De)}})}reloadTile(N,H){const Q=this.loaded;return Q&&Q[N.uid]?super.reloadTile(N,H):this.loadTile(N,H)}loadGeoJSON(N,H){if(N.request)o.getJSON(N.request,H);else{if(typeof N.data!="string")return H(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`));try{return H(null,JSON.parse(N.data))}catch{return H(new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(N,H){try{H(null,this._geoJSONIndex.getClusterExpansionZoom(N.clusterId))}catch(Q){H(Q)}}getClusterChildren(N,H){try{H(null,this._geoJSONIndex.getChildren(N.clusterId))}catch(Q){H(Q)}}getClusterLeaves(N,H){try{H(null,this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset))}catch(Q){H(Q)}}}class ft{constructor(N){this.self=N,this.actor=new o.Actor(N,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Et},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(H,Q)=>{if(this.workerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.workerSourceTypes[H]=Q},this.self.registerRTLTextPlugin=H=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=H.applyArabicShaping,o.plugin.processBidirectionalText=H.processBidirectionalText,o.plugin.processStyledBidirectionalText=H.processStyledBidirectionalText}}clearCaches(N,H,Q){delete this.layerIndexes[N],delete this.availableImages[N],delete this.workerSources[N],delete this.demWorkerSources[N],Q()}checkIfReady(N,H,Q){Q()}setReferrer(N,H){this.referrer=H}spriteLoaded(N,H){this.isSpriteLoaded[N]=H;for(const Q in this.workerSources[N]){const he=this.workerSources[N][Q];for(const ye in he)he[ye]instanceof o.VectorTileWorkerSource&&(he[ye].isSpriteLoaded=H,he[ye].fire(new o.Event("isSpriteLoaded")))}}setImages(N,H,Q){this.availableImages[N]=H;for(const he in this.workerSources[N]){const ye=this.workerSources[N][he];for(const Ae in ye)ye[Ae].availableImages=H}Q()}enableTerrain(N,H,Q){this.terrain=H,Q()}setProjection(N,H){this.projections[N]=o.getProjection(H)}setLayers(N,H,Q){this.getLayerIndex(N).replace(H),Q()}updateLayers(N,H,Q){this.getLayerIndex(N).update(H.layers,H.removedIds),Q()}loadTile(N,H,Q){const he=this.enableTerrain?o.extend({enableTerrain:this.terrain},H):H;he.projection=this.projections[N]||this.defaultProjection,this.getWorkerSource(N,H.type,H.source).loadTile(he,Q)}loadDEMTile(N,H,Q){const he=this.enableTerrain?o.extend({buildQuadTree:this.terrain},H):H;this.getDEMWorkerSource(N,H.source).loadTile(he,Q)}reloadTile(N,H,Q){const he=this.enableTerrain?o.extend({enableTerrain:this.terrain},H):H;he.projection=this.projections[N]||this.defaultProjection,this.getWorkerSource(N,H.type,H.source).reloadTile(he,Q)}abortTile(N,H,Q){this.getWorkerSource(N,H.type,H.source).abortTile(H,Q)}removeTile(N,H,Q){this.getWorkerSource(N,H.type,H.source).removeTile(H,Q)}removeSource(N,H,Q){if(!this.workerSources[N]||!this.workerSources[N][H.type]||!this.workerSources[N][H.type][H.source])return;const he=this.workerSources[N][H.type][H.source];delete this.workerSources[N][H.type][H.source],he.removeSource!==void 0?he.removeSource(H,Q):Q()}loadWorkerSource(N,H,Q){try{this.self.importScripts(H.url),Q()}catch(he){Q(he.toString())}}syncRTLPluginState(N,H,Q){try{o.plugin.setState(H);const he=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&he!=null){this.self.importScripts(he);const ye=o.plugin.isParsed();Q(ye?void 0:new Error(`RTL Text Plugin failed to import scripts from ${he}`),ye)}}catch(he){Q(he.toString())}}getAvailableImages(N){let H=this.availableImages[N];return H||(H=[]),H}getLayerIndex(N){let H=this.layerIndexes[N];return H||(H=this.layerIndexes[N]=new M),H}getWorkerSource(N,H,Q){return this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][H]||(this.workerSources[N][H]={}),this.workerSources[N][H][Q]||(this.workerSources[N][H][Q]=new this.workerSourceTypes[H]({send:(he,ye,Ae,De,we,Oe)=>{this.actor.send(he,ye,Ae,N,we,Oe)},scheduler:this.actor.scheduler},this.getLayerIndex(N),this.getAvailableImages(N),this.isSpriteLoaded[N])),this.workerSources[N][H][Q]}getDEMWorkerSource(N,H){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][H]||(this.demWorkerSources[N][H]=new k),this.demWorkerSources[N][H]}enforceCacheSizeLimit(N,H){o.enforceCacheSizeLimit(H)}getWorkerPerformanceMetrics(N,H,Q){Q(void 0,void 0)}}return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope&&(self.worker=new ft(self)),ft}),u(["./shared"],function(o){function y(m,c){if(Array.isArray(m)){if(!Array.isArray(c)||m.length!==c.length)return!1;for(let f=0;f<m.length;f++)if(!y(m[f],c[f]))return!1;return!0}if(typeof m=="object"&&m!==null&&c!==null){if(typeof c!="object"||Object.keys(m).length!==Object.keys(c).length)return!1;for(const f in m)if(!y(m[f],c[f]))return!1;return!0}return m===c}var w=M;function M(m){return!function(c){return typeof window=="undefined"||typeof document=="undefined"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var _,b,E=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(E);try{b=new Worker(C),_=!0}catch{_=!1}return b&&b.terminate(),URL.revokeObjectURL(C),_}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var _=document.createElement("canvas");_.width=_.height=1;var b=_.getContext("2d");if(!b)return!1;var E=b.getImageData(0,0,1,1);return E&&E.width===_.width}()?(k[f=c&&c.failIfMajorPerformanceCaveat]===void 0&&(k[f]=function(_){var b,E=function(C){var A=document.createElement("canvas"),I=Object.create(M.webGLContextAttributes);return I.failIfMajorPerformanceCaveat=C,A.getContext("webgl",I)||A.getContext("experimental-webgl",I)}(_);if(!E)return!1;try{b=E.createShader(E.VERTEX_SHADER)}catch{return!1}return!(!b||E.isContextLost())&&(E.shaderSource(b,"void main() {}"),E.compileShader(b),E.getShaderParameter(b,E.COMPILE_STATUS)===!0)}(f)),k[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(m)}var k={};function O(m,c,f){const _=o.window.document.createElement(m);return c!==void 0&&(_.className=c),f&&f.appendChild(_),_}function $(m,c,f){const _=o.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const b of Object.keys(c))_.setAttributeNS(null,b,c[b]);return f&&f.appendChild(_),_}M.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const j=o.window.document&&o.window.document.documentElement.style,G=j&&j.userSelect!==void 0?"userSelect":"WebkitUserSelect";let B;function U(){j&&G&&(B=j[G],j[G]="none")}function Z(){j&&G&&(j[G]=B)}function re(m){m.preventDefault(),m.stopPropagation(),o.window.removeEventListener("click",re,!0)}function ie(){o.window.addEventListener("click",re,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",re,!0)},0)}function de(m,c){const f=m.getBoundingClientRect();return je(m,f,c)}function xe(m,c){const f=m.getBoundingClientRect(),_=[];for(let b=0;b<c.length;b++)_.push(je(m,f,c[b]));return _}function Ce(m){return o.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function je(m,c,f){const _=m.offsetWidth===c.width?1:m.offsetWidth/c.width;return new o.pointGeometry((f.clientX-c.left)*_,(f.clientY-c.top)*_)}function ze(m,c){var f=c[0],_=c[1],b=c[2],E=c[3],C=f*E-b*_;return C?(m[0]=E*(C=1/C),m[1]=-_*C,m[2]=-b*C,m[3]=f*C,m):null}function pt(m){const{userImage:c}=m;return!!(c&&c.render&&c.render())&&(m.data.replace(new Uint8Array(c.data.buffer)),!0)}class mt extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(c){if(this.loaded!==c&&(this.loaded=c,c)){for(const{ids:f,callback:_}of this.requestors)this._notify(f,_);this.requestors=[]}}hasImage(c){return!!this.getImage(c)}getImage(c){return this.images[c]}addImage(c,f){this._validate(c,f)&&(this.images[c]=f)}_validate(c,f){let _=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchX" value`))),_=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "stretchY" value`))),_=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${c}" has invalid "content" value`))),_=!1),_}_validateStretch(c,f){if(!c)return!0;let _=0;for(const b of c){if(b[0]<_||b[1]<b[0]||f<b[1])return!1;_=b[1]}return!0}_validateContent(c,f){return!(c&&(c.length!==4||c[0]<0||f.data.width<c[0]||c[1]<0||f.data.height<c[1]||c[2]<0||f.data.width<c[2]||c[3]<0||f.data.height<c[3]||c[2]<c[0]||c[3]<c[1]))}updateImage(c,f){f.version=this.images[c].version+1,this.images[c]=f,this.updatedImages[c]=!0}removeImage(c){const f=this.images[c];delete this.images[c],delete this.patterns[c],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(c,f){let _=!0;if(!this.isLoaded())for(const b of c)this.images[b]||(_=!1);this.isLoaded()||_?this._notify(c,f):this.requestors.push({ids:c,callback:f})}_notify(c,f){const _={};for(const b of c){this.images[b]||this.fire(new o.Event("styleimagemissing",{id:b}));const E=this.images[b];E?_[b]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:Boolean(E.userImage&&E.userImage.render)}:o.warnOnce(`Image "${b}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,_)}getPixelSize(){const{width:c,height:f}=this.atlasImage;return{width:c,height:f}}getPattern(c){const f=this.patterns[c],_=this.getImage(c);if(!_)return null;if(f&&f.position.version===_.version)return f.position;if(f)f.position.version=_.version;else{const b={w:_.data.width+2,h:_.data.height+2,x:0,y:0},E=new o.ImagePosition(b,_);this.patterns[c]={bin:b,position:E}}return this._updatePatternAtlas(),this.patterns[c].position}bind(c){const f=c.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(c,this.atlasImage,f.RGBA),this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const c=[];for(const E in this.patterns)c.push(this.patterns[E].bin);const{w:f,h:_}=o.potpack(c),b=this.atlasImage;b.resize({width:f||1,height:_||1});for(const E in this.patterns){const{bin:C}=this.patterns[E],A=C.x+1,I=C.y+1,z=this.images[E].data,R=z.width,W=z.height;o.RGBAImage.copy(z,b,{x:0,y:0},{x:A,y:I},{width:R,height:W}),o.RGBAImage.copy(z,b,{x:0,y:W-1},{x:A,y:I-1},{width:R,height:1}),o.RGBAImage.copy(z,b,{x:0,y:0},{x:A,y:I+W},{width:R,height:1}),o.RGBAImage.copy(z,b,{x:R-1,y:0},{x:A-1,y:I},{width:1,height:W}),o.RGBAImage.copy(z,b,{x:0,y:0},{x:A+R,y:I},{width:1,height:W})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(c){for(const f of c){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const _=this.images[f];pt(_)&&this.updateImage(f,_)}}}const ot=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(m,c){return function([f,_,b]){const E=o.degToRad(_+90),C=o.degToRad(b);return{x:f*Math.cos(E)*Math.sin(C),y:f*Math.sin(E)*Math.sin(C),z:f*Math.cos(C),azimuthal:_,polar:b}}(m.expression.evaluate(c))}interpolate(m,c,f){return{x:o.number(m.x,c.x,f),y:o.number(m.y,c.y,f),z:o.number(m.z,c.z,f),azimuthal:o.number(m.azimuthal,c.azimuthal,f),polar:o.number(m.polar,c.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),kt="-transition";class Ne extends o.Evented{constructor(c){super(),this._transitionable=new o.Transitionable(ot),this.setLight(c),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(c,f={}){if(!this._validate(o.validateLight,c,f))for(const _ in c){const b=c[_];o.endsWith(_,kt)?this._transitionable.setTransition(_.slice(0,-kt.length),b):this._transitionable.setValue(_,b)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Ve=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),tt="-transition";class ct extends o.Evented{constructor(c,f){super(),this._transitionable=new o.Transitionable(Ve),this.set(c),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(c){for(const f in c){const _=c[f];o.endsWith(f,tt)?this._transitionable.setTransition(f.slice(0,-tt.length),_):this._transitionable.setValue(f,_)}}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}}function Ot(m,c,f,_){const b=o.smoothstep(45,65,f),[E,C]=Ut(m,_),A=o.length(c);let I=1-Math.min(1,Math.exp((A-E)/(C-E)*-6));return I*=I*I,I=Math.min(1,1.00747*I),I*b*m.alpha}function Ut(m,c){const f=.5/Math.tan(.5*c);return[m.range[0]+f,m.range[1]+f]}const un=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),st="-transition";class at extends o.Evented{constructor(c,f){super(),this._transitionable=new o.Transitionable(un),this.set(c),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const c=this._transform,f=c.projection.name==="globe",_=o.globeToMercatorTransition(c.zoom),b=this.properties.get("range"),E=[.5,3];return{range:f?[o.number(E[0],b[0],_),o.number(E[1],b[1],_)]:b,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(c,f={}){if(!this._validate(o.validateFog,c,f)){for(const _ of Object.keys(o.spec.fog))c&&c[_]===void 0&&(c[_]=o.spec.fog[_].default);for(const _ in c){const b=c[_];o.endsWith(_,st)?this._transitionable.setTransition(_.slice(0,-st.length),b):this._transitionable.setValue(_,b)}}}getOpacity(c){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,c))*f.a}getOpacityAtLatLng(c,f){return this._transform.projection.supportsFog?function(_,b,E){const C=o.MercatorCoordinate.fromLngLat(b),A=E.elevation?E.elevation.getAtPointOrZero(C):0,I=[C.x,C.y,A];return o.transformMat4(I,I,E.mercatorFogMatrix),Ot(_,I,E.pitch,E._fov)}(this.state,c,f):0}getFovAdjustedRange(c){return this._transform.projection.supportsFog?Ut(this.state,c):[0,1]}updateTransitions(c){this._transitioning=this._transitionable.transitioned(c,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(c){this.properties=this._transitioning.possiblyEvaluate(c)}_validate(c,f,_){return(!_||_.validate!==!1)&&o.emitValidationErrors(this,c.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class xt{constructor(c,f){this.workerPool=c,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const _=this.workerPool.acquire(this.id);for(let b=0;b<_.length;b++){const E=new xt.Actor(_[b],f,this.id);E.name=`Worker ${b}`,this.actors.push(E)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(c,f,_){o.asyncAll(this.actors,(b,E)=>{b.send(c,f,E)},_=_||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(c=>{c.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Vt(m,c,f){return c*(o.EXTENT/(m.tileSize*Math.pow(2,f-m.tileID.overscaledZ)))}xt.Actor=o.Actor;class Gt{constructor(c,f,_,b){this.screenBounds=c,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=_,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,b)}static createFromScreenPoints(c,f){let _,b;if(c instanceof o.pointGeometry||typeof c[0]=="number"){const E=o.pointGeometry.convert(c);_=[o.pointGeometry.convert(c)],b=f.isPointAboveHorizon(E)}else{const E=o.pointGeometry.convert(c[0]),C=o.pointGeometry.convert(c[1]);_=[E,C],b=o.polygonizeBounds(E,C).every(A=>f.isPointAboveHorizon(A))}return new Gt(_,f.getCameraPoint(),b,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(c){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],c)}bufferedCameraGeometry(c){const f=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,_,0,!1);return this.cameraPoint.y>_.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<_.x?b.splice(3,0,this.cameraPoint):this.cameraPoint.x>=_.x?b[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(b[3]=this.cameraPoint)),o.bufferConvexPolygon(b,c)}bufferedCameraGeometryGlobe(c){const f=this.screenBounds[0],_=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],b=o.polygonizeBounds(f,_,c),E=this.cameraPoint.clone();switch(3*((E.y>f.y)+(E.y>_.y))+((E.x>f.x)+(E.x>_.x))){case 0:b[0]=E,b[4]=E.clone();break;case 1:b.splice(1,0,E);break;case 2:b[1]=E;break;case 3:b.splice(4,0,E);break;case 5:b.splice(2,0,E);break;case 6:b[3]=E;break;case 7:b.splice(3,0,E);break;case 8:b[2]=E}return b}containsTile(c,f,_,b=0){const E=c.queryPadding/f._pixelsPerMercatorPixel+1,C=_?this._bufferedCameraMercator(E,f):this._bufferedScreenMercator(E,f);let A=c.tileID.wrap+(C.unwrapped?b:0);const I=C.polygon.map(ne=>o.getTilePoint(c.tileTransform,ne,A));if(!o.polygonIntersectsBox(I,0,0,o.EXTENT,o.EXTENT))return;A=c.tileID.wrap+(this.screenGeometryMercator.unwrapped?b:0);const z=this.screenGeometryMercator.polygon.map(ne=>o.getTileVec3(c.tileTransform,ne,A)),R=z.map(ne=>new o.pointGeometry(ne[0],ne[1])),W=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),Y=o.getTileVec3(c.tileTransform,W,A),oe=z.map(ne=>{const J=o.sub(ne,ne,Y);return o.normalize(J,J),new o.Ray(Y,J)}),ee=Vt(c,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:R,tilespaceRays:oe,bufferedTilespaceGeometry:I,bufferedTilespaceBounds:(te=o.getBounds(I),te.min.x=o.clamp(te.min.x,0,o.EXTENT),te.min.y=o.clamp(te.min.y,0,o.EXTENT),te.max.x=o.clamp(te.max.x,0,o.EXTENT),te.max.y=o.clamp(te.max.y,0,o.EXTENT),te),tile:c,tileID:c.tileID,pixelToTileUnitsFactor:ee};var te}_bufferedScreenMercator(c,f){const _=ci(c);if(this._screenRaycastCache[_])return this._screenRaycastCache[_];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(c),f):{polygon:this.bufferedScreenGeometry(c).map(E=>f.pointCoordinate3D(E)),unwrapped:!0},this._screenRaycastCache[_]=b,b}}_bufferedCameraMercator(c,f){const _=ci(c);if(this._cameraRaycastCache[_])return this._cameraRaycastCache[_];{let b;return b=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(c),f):{polygon:this.bufferedCameraGeometry(c).map(E=>f.pointCoordinate3D(E)),unwrapped:!0},this._cameraRaycastCache[_]=b,b}}_projectAndResample(c,f){const _=function(E,C){const A=o.multiply([],C.pixelMatrix,C.globeMatrix),I=[0,-o.GLOBE_RADIUS,0,1],z=[0,o.GLOBE_RADIUS,0,1],R=[0,0,0,1];o.transformMat4$1(I,I,A),o.transformMat4$1(z,z,A),o.transformMat4$1(R,R,A);const W=new o.pointGeometry(I[0]/I[3],I[1]/I[3]),Y=new o.pointGeometry(z[0]/z[3],z[1]/z[3]),oe=o.polygonContainsPoint(E,W)&&I[3]<R[3],ee=o.polygonContainsPoint(E,Y)&&z[3]<R[3];if(!oe&&!ee)return null;const te=function(Ee,ve,Me){for(let Re=1;Re<Ee.length;Re++){const ut=Tn(ve.pointCoordinate3D(Ee[Re-1]).x),Pe=Tn(ve.pointCoordinate3D(Ee[Re]).x);if(Me<0){if(ut<Pe)return{idx:Re,t:-ut/(Pe-1-ut)}}else if(Pe<ut)return{idx:Re,t:(1-ut)/(Pe+1-ut)}}return null}(E,C,oe?-1:1);if(!te)return null;const{idx:ne,t:J}=te;let ce=ne>1?hn(E.slice(0,ne),C):[],ae=ne<E.length?hn(E.slice(ne),C):[];ce=ce.map(Ee=>new o.pointGeometry(Tn(Ee.x),Ee.y)),ae=ae.map(Ee=>new o.pointGeometry(Tn(Ee.x),Ee.y));const Se=[...ce];Se.length===0&&Se.push(ae[ae.length-1]);const be=o.number(Se[Se.length-1].y,(ae.length===0?ce[0]:ae[0]).y,J);let me;return me=oe?[new o.pointGeometry(0,be),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,be)]:[new o.pointGeometry(1,be),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,be)],Se.push(...me),ae.length===0?Se.push(ce[0]):Se.push(...ae),{polygon:Se.map(Ee=>new o.MercatorCoordinate(Ee.x,Ee.y)),unwrapped:!1}}(c,f);if(_)return _;const b=function(E,C){let A=!1,I=-1/0,z=0;for(let W=0;W<E.length-1;W++)E[W].x>I&&(I=E[W].x,z=W);for(let W=0;W<E.length-1;W++){const Y=(z+W)%(E.length-1),oe=E[Y],ee=E[Y+1];Math.abs(oe.x-ee.x)>.5&&(oe.x<ee.x?(oe.x+=1,Y===0&&(E[E.length-1].x+=1)):(ee.x+=1,Y+1===E.length-1&&(E[0].x+=1)),A=!0)}const R=o.mercatorXfromLng(C.center.lng);return A&&R<Math.abs(R-1)&&E.forEach(W=>{W.x-=1}),{polygon:E,unwrapped:A}}(hn(c,f).map(E=>new o.pointGeometry(Tn(E.x),E.y)),f);return{polygon:b.polygon.map(E=>new o.MercatorCoordinate(E.x,E.y)),unwrapped:b.unwrapped}}}function hn(m,c){return o.resample(m,f=>{const _=c.pointCoordinate3D(f);f.x=_.x,f.y=_.y},1/256)}function Tn(m){return m<0?1+m%1:m%1}function ci(m){return 100*m|0}function Oi(m,c,f,_,b){const E=function(C,A){if(C)return b(C);if(A){const I=o.pick(o.extend(A,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);A.vector_layers&&(I.vectorLayers=A.vector_layers,I.vectorLayerIds=I.vectorLayers.map(z=>z.id)),A.language_options&&(I.languageOptions=A.language_options),A.language&&A.language[A.id]&&(I.language=A.language[A.id]),A.worldview_options&&(I.worldviewOptions=A.worldview_options),A.worldview?I.worldview=A.worldview[A.id]:A.worldview_default&&(I.worldview=A.worldview_default),I.tiles=c.canonicalizeTileset(I,m.url),b(null,I)}};return m.url?o.getJSON(c.transformRequest(c.normalizeSourceURL(m.url,null,f,_),o.ResourceType.Source),E):o.exported.frame(()=>E(null,m))}class Ie{constructor(c,f,_){this.bounds=o.LngLatBounds.convert(this.validateBounds(c)),this.minzoom=f||0,this.maxzoom=_||24}validateBounds(c){return Array.isArray(c)&&c.length===4?[Math.max(-180,c[0]),Math.max(-90,c[1]),Math.min(180,c[2]),Math.min(90,c[3])]:[-180,-90,180,90]}contains(c){const f=Math.pow(2,c.z),_=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),b=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),E=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),C=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return c.x>=_&&c.x<E&&c.y>=b&&c.y<C}}class We{constructor(c,f,_){this.context=c;const b=c.gl;this.buffer=b.createBuffer(),this.dynamicDraw=Boolean(_),this.context.unbindVAO(),c.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,c.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Lt{constructor(c,f,_,b){this.length=f.length,this.attributes=_,this.itemSize=f.bytesPerElement,this.dynamicDraw=b,this.context=c;const E=c.gl;this.buffer=E.createBuffer(),c.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(c){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,c.arrayBuffer)}enableAttributes(c,f){for(let _=0;_<this.attributes.length;_++){const b=f.attributes[this.attributes[_].name];b!==void 0&&c.enableVertexAttribArray(b)}}setVertexAttribPointers(c,f,_){for(let b=0;b<this.attributes.length;b++){const E=this.attributes[b],C=f.attributes[E.name];C!==void 0&&c.vertexAttribPointer(C,E.components,c[qe[E.type]],!1,this.itemSize,E.offset+this.itemSize*(_||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class gt{constructor(c){this.gl=c.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(c){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class _t extends gt{getDefault(){return o.Color.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.clearColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class Ft extends gt{getDefault(){return 1}set(c){(c!==this.current||this.dirty)&&(this.gl.clearDepth(c),this.current=c,this.dirty=!1)}}class Sn extends gt{getDefault(){return 0}set(c){(c!==this.current||this.dirty)&&(this.gl.clearStencil(c),this.current=c,this.dirty=!1)}}class Fn extends gt{getDefault(){return[!0,!0,!0,!0]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.colorMask(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Li extends gt{getDefault(){return!0}set(c){(c!==this.current||this.dirty)&&(this.gl.depthMask(c),this.current=c,this.dirty=!1)}}class dn extends gt{getDefault(){return 255}set(c){(c!==this.current||this.dirty)&&(this.gl.stencilMask(c),this.current=c,this.dirty=!1)}}class Ir extends gt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(c){const f=this.current;(c.func!==f.func||c.ref!==f.ref||c.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(c.func,c.ref,c.mask),this.current=c,this.dirty=!1)}}class sr extends gt{getDefault(){const c=this.gl;return[c.KEEP,c.KEEP,c.KEEP]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(c[0],c[1],c[2]),this.current=c,this.dirty=!1)}}class xr extends gt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=c,this.dirty=!1}}class Mt extends gt{getDefault(){return[0,1]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.depthRange(c[0],c[1]),this.current=c,this.dirty=!1)}}class tn extends gt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=c,this.dirty=!1}}class ti extends gt{getDefault(){return this.gl.LESS}set(c){(c!==this.current||this.dirty)&&(this.gl.depthFunc(c),this.current=c,this.dirty=!1)}}class bi extends gt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.BLEND):f.disable(f.BLEND),this.current=c,this.dirty=!1}}class Zn extends gt{getDefault(){const c=this.gl;return[c.ONE,c.ZERO]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(c[0],c[1]),this.current=c,this.dirty=!1)}}class ar extends gt{getDefault(){return o.Color.transparent}set(c){const f=this.current;(c.r!==f.r||c.g!==f.g||c.b!==f.b||c.a!==f.a||this.dirty)&&(this.gl.blendColor(c.r,c.g,c.b,c.a),this.current=c,this.dirty=!1)}}class br extends gt{getDefault(){return this.gl.FUNC_ADD}set(c){(c!==this.current||this.dirty)&&(this.gl.blendEquation(c),this.current=c,this.dirty=!1)}}class ns extends gt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;c?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=c,this.dirty=!1}}class tr extends gt{getDefault(){return this.gl.BACK}set(c){(c!==this.current||this.dirty)&&(this.gl.cullFace(c),this.current=c,this.dirty=!1)}}class An extends gt{getDefault(){return this.gl.CCW}set(c){(c!==this.current||this.dirty)&&(this.gl.frontFace(c),this.current=c,this.dirty=!1)}}class lo extends gt{getDefault(){return null}set(c){(c!==this.current||this.dirty)&&(this.gl.useProgram(c),this.current=c,this.dirty=!1)}}class co extends gt{getDefault(){return this.gl.TEXTURE0}set(c){(c!==this.current||this.dirty)&&(this.gl.activeTexture(c),this.current=c,this.dirty=!1)}}class Bo extends gt{getDefault(){const c=this.gl;return[0,0,c.drawingBufferWidth,c.drawingBufferHeight]}set(c){const f=this.current;(c[0]!==f[0]||c[1]!==f[1]||c[2]!==f[2]||c[3]!==f[3]||this.dirty)&&(this.gl.viewport(c[0],c[1],c[2],c[3]),this.current=c,this.dirty=!1)}}class Ur extends gt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,c),this.current=c,this.dirty=!1}}class bo extends gt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class Pr extends gt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,c),this.current=c,this.dirty=!1}}class gl extends gt{getDefault(){return null}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class Sc extends gt{getDefault(){return null}set(c){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,c),this.current=c,this.dirty=!1}}class se extends gt{constructor(c){super(c),this.vao=c.extVertexArrayObject}getDefault(){return null}set(c){this.vao&&(c!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(c),this.current=c,this.dirty=!1)}}class fe extends gt{getDefault(){return 4}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,c),this.current=c,this.dirty=!1}}class Le extends gt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),this.current=c,this.dirty=!1}}class Qe extends gt{getDefault(){return!1}set(c){if(c===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,c),this.current=c,this.dirty=!1}}class Et extends gt{constructor(c,f){super(c),this.context=c,this.parent=f}getDefault(){return null}}class ft extends Et{setDirty(){this.dirty=!0}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,c,0),this.current=c,this.dirty=!1}}class X extends Et{attachment(){return this.gl.DEPTH_ATTACHMENT}set(c){if(c===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,c),this.current=c,this.dirty=!1}}class N extends X{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class H{constructor(c,f,_,b){this.context=c,this.width=f,this.height=_;const E=this.framebuffer=c.gl.createFramebuffer();this.colorAttachment=new ft(c,E),b&&(this.depthAttachment=new X(c,E))}destroy(){const c=this.context.gl,f=this.colorAttachment.get();if(f&&c.deleteTexture(f),this.depthAttachment){const _=this.depthAttachment.get();_&&c.deleteRenderbuffer(_)}c.deleteFramebuffer(this.framebuffer)}}class Q{constructor(c){this.gl=c,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new _t(this),this.clearDepth=new Ft(this),this.clearStencil=new Sn(this),this.colorMask=new Fn(this),this.depthMask=new Li(this),this.stencilMask=new dn(this),this.stencilFunc=new Ir(this),this.stencilOp=new sr(this),this.stencilTest=new xr(this),this.depthRange=new Mt(this),this.depthTest=new tn(this),this.depthFunc=new ti(this),this.blend=new bi(this),this.blendFunc=new Zn(this),this.blendColor=new ar(this),this.blendEquation=new br(this),this.cullFace=new ns(this),this.cullFaceSide=new tr(this),this.frontFace=new An(this),this.program=new lo(this),this.activeTexture=new co(this),this.viewport=new Bo(this),this.bindFramebuffer=new Ur(this),this.bindRenderbuffer=new bo(this),this.bindTexture=new Pr(this),this.bindVertexBuffer=new gl(this),this.bindElementBuffer=new Sc(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new se(this),this.pixelStoreUnpack=new fe(this),this.pixelStoreUnpackPremultiplyAlpha=new Le(this),this.pixelStoreUnpackFlipY=new Qe(this),this.extTextureFilterAnisotropic=c.getExtension("EXT_texture_filter_anisotropic")||c.getExtension("MOZ_EXT_texture_filter_anisotropic")||c.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=c.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=c.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(c.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=c.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=c.getExtension("OES_standard_derivatives"),this.extTimerQuery=c.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=c.getParameter(c.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(c,f){return new We(this,c,f)}createVertexBuffer(c,f,_){return new Lt(this,c,f,_)}createRenderbuffer(c,f,_){const b=this.gl,E=b.createRenderbuffer();return this.bindRenderbuffer.set(E),b.renderbufferStorage(b.RENDERBUFFER,c,f,_),this.bindRenderbuffer.set(null),E}createFramebuffer(c,f,_){return new H(this,c,f,_)}clear({color:c,depth:f,stencil:_}){const b=this.gl;let E=0;c&&(E|=b.COLOR_BUFFER_BIT,this.clearColor.set(c),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(E|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),_!==void 0&&(E|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(_),this.stencilMask.set(255)),b.clear(E)}setCullFace(c){c.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(c.mode),this.frontFace.set(c.frontFace))}setDepthMode(c){c.func!==this.gl.ALWAYS||c.mask?(this.depthTest.set(!0),this.depthFunc.set(c.func),this.depthMask.set(c.mask),this.depthRange.set(c.range)):this.depthTest.set(!1)}setStencilMode(c){c.test.func!==this.gl.ALWAYS||c.mask?(this.stencilTest.set(!0),this.stencilMask.set(c.mask),this.stencilOp.set([c.fail,c.depthFail,c.pass]),this.stencilFunc.set({func:c.test.func,ref:c.ref,mask:c.test.mask})):this.stencilTest.set(!1)}setColorMode(c){y(c.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(c.blendFunction),this.blendColor.set(c.blendColor)),this.colorMask.set(c.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class he extends o.Evented{constructor(c,f,_,b){super(),this.id=c,this.dispatcher=_,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Oi(this._options,this.map._requestManager,null,null,(c,f)=>{this._tileJSONRequest=null,this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):f&&(o.extend(this,f),f.bounds&&(this.tileBounds=new Ie(f.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(f.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(c){this.map=c,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(c){return!this.tileBounds||this.tileBounds.contains(c.canonical)}loadTile(c,f){const _=o.exported.devicePixelRatio>=2,b=this.map._requestManager.normalizeTileURL(c.tileID.canonical.url(this.tiles,this.scheme),_,this.tileSize);c.request=o.getImage(this.map._requestManager.transformRequest(b,o.ResourceType.Tile),(E,C,A,I)=>(delete c.request,c.aborted?(c.state="unloaded",f(null)):E?(c.state="errored",f(E)):C?(this.map._refreshExpiredTiles&&c.setExpiryData({cacheControl:A,expires:I}),c.setTexture(C,this.map.painter),c.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(c,f,_){c.setTexture(f,_)}static unloadTileData(c,f){c.texture&&f.saveTileTexture(c.texture)}abortTile(c,f){c.request&&(c.request.cancel(),delete c.request),f()}unloadTile(c,f){c.texture&&this.map.painter.saveTileTexture(c.texture),f()}hasTransition(){return!1}}let ye;function Ae(m,c,f,_,b,E,C,A){const I=[m,f,b,c,_,E,1,1,1],z=[C,A,1],R=o.adjoint([],I),[W,Y,oe]=o.transformMat3(z,z,o.transpose(R,R));return o.multiply$1(I,[W,0,0,0,Y,0,0,0,oe],I)}class De extends o.Evented{constructor(c,f,_,b){super(),this.id=c,this.dispatcher=_,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=f}load(c,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(_,b)=>{if(this._loaded=!0,_)this.fire(new o.ErrorEvent(_));else if(b){const{HTMLImageElement:E}=o.window;this.image=b instanceof E?o.exported.getImageData(b):b,this.width=this.image.width,this.height=this.image.height,c&&(this.coordinates=c),this._finishLoading()}})}loaded(){return this._loaded}updateImage(c){return this.image&&c.url?(this.options.url=c.url,this.load(c.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(c){this.map=c,this.load()}onRemove(){this.texture&&this.texture.destroy()}setCoordinates(c){this.coordinates=c,this._boundsArray=void 0;const f=c.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(_){let b=1/0,E=1/0,C=-1/0,A=-1/0;for(const W of _)b=Math.min(b,W.x),E=Math.min(E,W.y),C=Math.max(C,W.x),A=Math.max(A,W.y);const I=Math.max(C-b,A-E),z=Math.max(0,Math.floor(-Math.log(I)/Math.LN2)),R=Math.pow(2,z);return new o.CanonicalTileID(z,Math.floor((b+C)/2*R),Math.floor((E+A)/2*R))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(c){for(const I in this.tiles){const z=this.tiles[I];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[_,b,E,C]=this.coordinates.map(I=>{const z=f.projection.project(I[0],I[1]);return o.getTilePoint(f,z)._round()});this.perspectiveTransform=function(I,z,R,W,Y,oe,ee,te,ne,J){const ce=Ae(0,0,I,0,0,z,I,z),ae=Ae(R,W,Y,oe,ee,te,ne,J);return o.multiply$1(ae,o.adjoint(ce,ce),ae),[ae[6]/ae[8]*I/o.EXTENT,ae[7]/ae[8]*z/o.EXTENT]}(this.width,this.height,_.x,_.y,b.x,b.y,C.x,C.y,E.x,E.y);const A=this._boundsArray=new o.StructArrayLayout4i8;A.emplaceBack(_.x,_.y,0,0),A.emplaceBack(b.x,b.y,o.EXTENT,0),A.emplaceBack(C.x,C.y,0,o.EXTENT),A.emplaceBack(E.x,E.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=c.createVertexBuffer(A,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const c=this.map.painter.context,f=c.gl;this.texture?this.texture.update(this.image):(this.texture=new o.Texture(c,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._prepareData(c)}loadTile(c,f){this.tileID&&this.tileID.equals(c.tileID.canonical)?(this.tiles[String(c.tileID.wrap)]=c,c.buckets={},f(null)):(c.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const we={vector:class extends o.Evented{constructor(m,c,f,_){if(super(),this.id=m,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(c,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(_),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(m){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const c=this.language||this.map._language,f=this.worldview||this.map._worldview;this._tileJSONRequest=Oi(this._options,this.map._requestManager,c,f,(_,b)=>{this._tileJSONRequest=null,this._loaded=!0,_?(c&&console.warn(`Ensure that your requested language string is a valid BCP-47 code. Found: ${c}`),f&&f.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${f}`),this.fire(new o.ErrorEvent(_))):b&&(o.extend(this,b),b.bounds&&(this.tileBounds=new Ie(b.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(b.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),m&&m(_)})}loaded(){return this._loaded}hasTile(m){return!this.tileBounds||this.tileBounds.contains(m.canonical)}onAdd(m){this.map=m,this.load()}setSourceProperty(m){this._tileJSONRequest&&this._tileJSONRequest.cancel(),m(),this.load(()=>{const c=this.map.style._getSourceCaches(this.id);for(const f of c)f.clearTiles()})}setTiles(m){return this.setSourceProperty(()=>{this._options.tiles=m}),this}setUrl(m){return this.setSourceProperty(()=>{this.url=m,this._options.url=m}),this}_setLanguage(m){return m===this.language||this.setSourceProperty(()=>{this.language=m}),this}_setWorldview(m){return m===this.worldview?this:this.worldviewOptions&&m&&!this.worldviewOptions[m]?(console.warn(`Vector tile source "${this.id}" does not support worldview "${m}".`),this):(this.setSourceProperty(()=>{this.worldview=m}),this)}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}loadTile(m,c){const f=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme)),_={request:this.map._requestManager.transformRequest(f,o.ResourceType.Tile),data:void 0,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,tileSize:this.tileSize*m.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:m.isSymbolTile};if(_.request.collectResourceTiming=this._collectResourceTiming,m.actor&&m.state!=="expired")m.state==="loading"?m.reloadCallback=c:m.request=m.actor.send("reloadTile",_,b.bind(this));else if(m.actor=this._tileWorkers[f]=this._tileWorkers[f]||this.dispatcher.getActor(),this.dispatcher.ready)m.request=m.actor.send("loadTile",_,b.bind(this),void 0,!0);else{const E=o.loadVectorTile.call({deduped:this._deduped},_,(C,A)=>{C||!A?b.call(this,C):(_.data={cacheControl:A.cacheControl,expires:A.expires,rawData:A.rawData.slice(0)},m.actor&&m.actor.send("loadTile",_,b.bind(this),void 0,!0))},!0);m.request={cancel:E}}function b(E,C){return delete m.request,m.aborted?c(null):E&&E.status!==404?c(E):(C&&C.resourceTiming&&(m.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&m.setExpiryData(C),m.loadVectorData(C,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),c(null),void(m.reloadCallback&&(this.loadTile(m,m.reloadCallback),m.reloadCallback=null)))}}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.actor&&m.actor.send("abortTile",{uid:m.uid,type:this.type,source:this.id})}unloadTile(m){m.unloadVectorData(),m.actor&&m.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:he,"raster-dem":class extends he{constructor(m,c,f,_){super(m,c,f,_),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox"}loadTile(m,c){const f=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function _(b,E){b&&(m.state="errored",c(b)),E&&(m.dem=E,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",c(null))}m.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),function(b,E,C,A){if(delete m.request,m.aborted)m.state="unloaded",c(null);else if(b)m.state="errored",c(b);else if(E){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:C,expires:A});const I=o.window.ImageBitmap&&E instanceof o.window.ImageBitmap&&(ye==null&&(ye=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),ye),z=1-(E.width-o.prevPowerOfTwo(E.width))/2;z<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const R=I?E:o.exported.getImageData(E,z),W={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:R,encoding:this.encoding,padding:z};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",W,_.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const c=m.canonical,f=Math.pow(2,c.z),_=(c.x-1+f)%f,b=c.x===0?m.wrap-1:m.wrap,E=(c.x+1+f)%f,C=c.x+1===f?m.wrap+1:m.wrap,A={};return A[new o.OverscaledTileID(m.overscaledZ,b,c.z,_,c.y).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,C,c.z,E,c.y).key]={backfilled:!1},c.y>0&&(A[new o.OverscaledTileID(m.overscaledZ,b,c.z,_,c.y-1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,C,c.z,E,c.y-1).key]={backfilled:!1}),c.y+1<f&&(A[new o.OverscaledTileID(m.overscaledZ,b,c.z,_,c.y+1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,m.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},A[new o.OverscaledTileID(m.overscaledZ,C,c.z,E,c.y+1).key]={backfilled:!1}),A}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends o.Evented{constructor(m,c,f,_){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(_),this._data=c.data,this._options=o.extend({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const b=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*b,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*b,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.EXTENT,radius:(c.clusterRadius!==void 0?c.clusterRadius:50)*b,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,c){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},c),this}getClusterChildren(m,c){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},c),this}getClusterLeaves(m,c,f,_){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:c,offset:f},_),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=o.extend({},this.workerOptions),c=this._data;typeof c=="string"?(m.request=this.map._requestManager.transformRequest(o.exported.resolveURL(c),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(c),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(f,_)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const b={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&_&&_.resourceTiming&&_.resourceTiming[this.id]&&(b.resourceTiming=_.resourceTiming[this.id]),this.fire(new o.Event("data",b)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,c){const f=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(f,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(_,b)=>(delete m.request,m.unloadVectorData(),m.aborted?c(null):_?c(_):(m.loadVectorData(b,this.map.painter,f==="reloadTile"),c(null))),void 0,f==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends De{constructor(m,c,f,_){super(m,c,f,_),this.roundZoom=!0,this.type="video",this.options=c}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const c of m.urls)this.urls.push(this.map._requestManager.transformRequest(c,o.ResourceType.Source).url);o.getVideo(this.urls,(c,f)=>{this._loaded=!0,c?this.fire(new o.ErrorEvent(c)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const c=this.video.seekable;m<c.start(0)||m>c.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,c=m.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(m,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:De,canvas:class extends De{constructor(m,c,f,_){super(m,c,f,_),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(b=>!Array.isArray(b)||b.length!==2||b.some(E=>typeof E!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(c,this.canvas,c.gl.RGBA,{premultiply:!0}),this._prepareData(c)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.Evented{constructor(m,c,f,_){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=c,this.setEventedParent(_),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Ie(this._implementation.bounds,this.minzoom,this.maxzoom)),c.update=this._update.bind(this),c.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(c,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:c,y:f,z:_}=m.canonical;return this._implementation.hasTile({x:c,y:f,z:_})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,c){const{x:f,y:_,z:b}=m.tileID.canonical,E=new o.window.AbortController,C=this._implementation.loadTile({x:f,y:_,z:b},{signal:E.signal});if(!C)return this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null);C.cancel=()=>E.abort(),m.request=C.then(function(A){return delete m.request,m.aborted?(m.state="unloaded",c(null)):A?function(I){return I instanceof o.window.ImageData||I instanceof o.window.ImageBitmap||I instanceof o.window.HTMLCanvasElement}(A)?(this.loadTileData(m,A),m.state="loaded",void c(null)):(m.state="errored",c(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`))):(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",c(null))}.bind(this)).catch(A=>{A.code!==20&&(m.state="errored",c(A))})}loadTileData(m,c){he.loadTileData(m,c,this._map.painter)}unloadTileData(m){he.unloadTileData(m,this._map.painter)}prepareTile(m){if(!this._implementation.prepareTile)return null;const{x:c,y:f,z:_}=m.tileID.canonical,b=this._implementation.prepareTile({x:c,y:f,z:_});return b?(this.loadTileData(m,b),m.state="loaded",b):null}unloadTile(m,c){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:f,y:_,z:b}=m.tileID.canonical;this._implementation.unloadTile({x:f,y:_,z:b})}c()}abortTile(m,c){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),c()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Oe=function(m,c,f,_){const b=new we[c.type](m,c,f,_);if(b.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${b.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],b),b};function Je(m,c){const f=o.identity([]);return o.scale(f,f,[.5*m.width,.5*-m.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,m.calculateProjMatrix(c.toUnwrapped())),Float32Array.from(f)}function wt(m,c,f,_,b,E,C,A=!1){const I=m.tilesIn(_,C,A);I.sort(Yt);const z=[];for(const W of I)z.push({wrappedTileID:W.tile.tileID.wrapped().key,queryResults:W.tile.queryRenderedFeatures(c,f,m._state,W,b,E,Je(m.transform,W.tile.tileID),A)});const R=function(W){const Y={},oe={};for(const ee of W){const te=ee.queryResults,ne=ee.wrappedTileID,J=oe[ne]=oe[ne]||{};for(const ce in te){const ae=te[ce],Se=J[ce]=J[ce]||{},be=Y[ce]=Y[ce]||[];for(const me of ae)Se[me.featureIndex]||(Se[me.featureIndex]=!0,be.push(me))}}return Y}(z);for(const W in R)R[W].forEach(Y=>{const oe=Y.feature,ee=oe.layer;ee&&ee.type!=="background"&&ee.type!=="sky"&&(oe.source=ee.source,ee["source-layer"]&&(oe.sourceLayer=ee["source-layer"]),oe.state=oe.id!==void 0?m.getFeatureState(ee["source-layer"],oe.id):{})});return R}function rt(m,c){const f=m.getRenderableIds().map(E=>m.getTileByID(E)),_=[],b={};for(let E=0;E<f.length;E++){const C=f[E],A=C.tileID.canonical.key;b[A]||(b[A]=!0,C.querySourceFeatures(_,c))}return _}function Yt(m,c){const f=m.tileID,_=c.tileID;return f.overscaledZ-_.overscaledZ||f.canonical.y-_.canonical.y||f.wrap-_.wrap||f.canonical.x-_.canonical.x}function Xt(){return Qc.workerClass!=null?new Qc.workerClass:new o.window.Worker(Qc.workerUrl)}const $t="mapboxgl_preloaded_worker_pool";class Jt{constructor(){this.active={}}acquire(c){if(!this.workers)for(this.workers=[];this.workers.length<Jt.workerCount;)this.workers.push(new Xt);return this.active[c]=!0,this.workers.slice()}release(c){delete this.active[c],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[$t]}numActive(){return Object.keys(this.active).length}}let gn;function Un(){return gn||(gn=new Jt),gn}function Xn(m,c){const f={};for(const _ in m)_!=="ref"&&(f[_]=m[_]);return o.refProperties.forEach(_=>{_ in c&&(f[_]=c[_])}),f}function $n(m){m=m.slice();const c=Object.create(null);for(let f=0;f<m.length;f++)c[m[f].id]=m[f];for(let f=0;f<m.length;f++)"ref"in m[f]&&(m[f]=Xn(m[f],c[m[f].ref]));return m}Jt.workerCount=2;const Kt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ge(m,c,f){f.push({command:Kt.addSource,args:[m,c[m]]})}function uo(m,c,f){c.push({command:Kt.removeSource,args:[m]}),f[m]=!0}function Mi(m,c,f,_){uo(m,f,_),Ge(m,c,f)}function Ws(m,c,f){let _;for(_ in m[f])if(m[f].hasOwnProperty(_)&&_!=="data"&&!y(m[f][_],c[f][_]))return!1;for(_ in c[f])if(c[f].hasOwnProperty(_)&&_!=="data"&&!y(m[f][_],c[f][_]))return!1;return!0}function Ku(m,c,f,_,b,E){let C;for(C in c=c||{},m=m||{})m.hasOwnProperty(C)&&(y(m[C],c[C])||f.push({command:E,args:[_,C,c[C],b]}));for(C in c)c.hasOwnProperty(C)&&!m.hasOwnProperty(C)&&(y(m[C],c[C])||f.push({command:E,args:[_,C,c[C],b]}))}function No(m){return m.id}function Ju(m,c){return m[c.id]=c,m}class Dx{constructor(c,f){this.reset(c,f)}reset(c,f){this.points=c||[],this._distances=[0];for(let _=1;_<this.points.length;_++)this._distances[_]=this._distances[_-1]+this.points[_].dist(this.points[_-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(c){if(this.points.length===1)return this.points[0];c=o.clamp(c,0,1);let f=1,_=this._distances[f];const b=c*this.paddedLength+this.padding;for(;_<b&&f<this._distances.length;)_=this._distances[++f];const E=f-1,C=this._distances[E],A=_-C,I=A>0?(b-C)/A:0;return this.points[E].mult(1-I).add(this.points[f].mult(I))}}class _l{constructor(c,f,_){const b=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(c/_),this.yCellCount=Math.ceil(f/_);for(let C=0;C<this.xCellCount*this.yCellCount;C++)b.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=c,this.height=f,this.xScale=this.xCellCount/c,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(c,f,_,b,E){this._forEachCell(f,_,b,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(c),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(b),this.bboxes.push(E)}insertCircle(c,f,_,b){this._forEachCell(f-b,_-b,f+b,_+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(c),this.circles.push(f),this.circles.push(_),this.circles.push(b)}_insertBoxCell(c,f,_,b,E,C){this.boxCells[E].push(C)}_insertCircleCell(c,f,_,b,E,C){this.circleCells[E].push(C)}_query(c,f,_,b,E,C){if(_<0||c>this.width||b<0||f>this.height)return!E&&[];const A=[];if(c<=0&&f<=0&&this.width<=_&&this.height<=b){if(E)return!0;for(let I=0;I<this.boxKeys.length;I++)A.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(let I=0;I<this.circleKeys.length;I++){const z=this.circles[3*I],R=this.circles[3*I+1],W=this.circles[3*I+2];A.push({key:this.circleKeys[I],x1:z-W,y1:R-W,x2:z+W,y2:R+W})}return C?A.filter(C):A}return this._forEachCell(c,f,_,b,this._queryCell,A,{hitTest:E,seenUids:{box:{},circle:{}}},C),E?A.length>0:A}_queryCircle(c,f,_,b,E){const C=c-_,A=c+_,I=f-_,z=f+_;if(A<0||C>this.width||z<0||I>this.height)return!b&&[];const R=[];return this._forEachCell(C,I,A,z,this._queryCellCircle,R,{hitTest:b,circle:{x:c,y:f,radius:_},seenUids:{box:{},circle:{}}},E),b?R.length>0:R}query(c,f,_,b,E){return this._query(c,f,_,b,!1,E)}hitTest(c,f,_,b,E){return this._query(c,f,_,b,!0,E)}hitTestCircle(c,f,_,b){return this._queryCircle(c,f,_,!0,b)}_queryCell(c,f,_,b,E,C,A,I){const z=A.seenUids,R=this.boxCells[E];if(R!==null){const Y=this.bboxes;for(const oe of R)if(!z.box[oe]){z.box[oe]=!0;const ee=4*oe;if(c<=Y[ee+2]&&f<=Y[ee+3]&&_>=Y[ee+0]&&b>=Y[ee+1]&&(!I||I(this.boxKeys[oe]))){if(A.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[oe],x1:Y[ee],y1:Y[ee+1],x2:Y[ee+2],y2:Y[ee+3]})}}}const W=this.circleCells[E];if(W!==null){const Y=this.circles;for(const oe of W)if(!z.circle[oe]){z.circle[oe]=!0;const ee=3*oe;if(this._circleAndRectCollide(Y[ee],Y[ee+1],Y[ee+2],c,f,_,b)&&(!I||I(this.circleKeys[oe]))){if(A.hitTest)return C.push(!0),!0;{const te=Y[ee],ne=Y[ee+1],J=Y[ee+2];C.push({key:this.circleKeys[oe],x1:te-J,y1:ne-J,x2:te+J,y2:ne+J})}}}}}_queryCellCircle(c,f,_,b,E,C,A,I){const z=A.circle,R=A.seenUids,W=this.boxCells[E];if(W!==null){const oe=this.bboxes;for(const ee of W)if(!R.box[ee]){R.box[ee]=!0;const te=4*ee;if(this._circleAndRectCollide(z.x,z.y,z.radius,oe[te+0],oe[te+1],oe[te+2],oe[te+3])&&(!I||I(this.boxKeys[ee])))return C.push(!0),!0}}const Y=this.circleCells[E];if(Y!==null){const oe=this.circles;for(const ee of Y)if(!R.circle[ee]){R.circle[ee]=!0;const te=3*ee;if(this._circlesCollide(oe[te],oe[te+1],oe[te+2],z.x,z.y,z.radius)&&(!I||I(this.circleKeys[ee])))return C.push(!0),!0}}}_forEachCell(c,f,_,b,E,C,A,I){const z=this._convertToXCellCoord(c),R=this._convertToYCellCoord(f),W=this._convertToXCellCoord(_),Y=this._convertToYCellCoord(b);for(let oe=z;oe<=W;oe++)for(let ee=R;ee<=Y;ee++)if(E.call(this,c,f,_,b,this.xCellCount*ee+oe,C,A,I))return}_convertToXCellCoord(c){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(c*this.xScale)))}_convertToYCellCoord(c){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(c*this.yScale)))}_circlesCollide(c,f,_,b,E,C){const A=b-c,I=E-f,z=_+C;return z*z>A*A+I*I}_circleAndRectCollide(c,f,_,b,E,C,A){const I=(C-b)/2,z=Math.abs(c-(b+I));if(z>I+_)return!1;const R=(A-E)/2,W=Math.abs(f-(E+R));if(W>R+_)return!1;if(z<=I||W<=R)return!0;const Y=z-I,oe=W-R;return Y*Y+oe*oe<=_*_}}const At=Math.tan(85*Math.PI/180);function xn(m,c,f,_,b,E,C){const A=o.create();if(f)if(E.name==="globe"){const I=o.calculateGlobeLabelMatrix(b,c);o.multiply(A,A,I)}else{const I=ze([],C);A[0]=I[0],A[1]=I[1],A[4]=I[2],A[5]=I[3],_||o.rotateZ(A,A,b.angle)}else o.multiply(A,b.labelPlaneMatrix,m);return A}function bn(m,c,f,_,b,E,C){const A=xn(m,c,f,_,b,E,C);return E.name==="globe"&&f||(A[2]=A[6]=A[10]=A[14]=0),A}function Vo(m,c,f,_,b,E,C){if(f){if(E.name==="globe"){const A=xn(m,c,f,_,b,E,C);return o.invert(A,A),o.multiply(A,m,A),A}{const A=o.clone(m),I=o.identity([]);return I[0]=C[0],I[1]=C[1],I[4]=C[2],I[5]=C[3],o.multiply(A,A,I),_||o.rotateZ(A,A,-b.angle),A}}return b.glCoordMatrix}function jo(m,c,f=0){const _=[m.x,m.y,f,1];f?o.transformMat4$1(_,_,c):Or(_,_,c);const b=_[3];return{point:[_[0]/b,_[1]/b,_[2]/b],signedDistanceFromCamera:b}}function pn(m,c){const f=[m[0],m[1],m[2],1];o.transformMat4$1(f,f,c);const _=f[3];return{point:[f[0]/_,f[1]/_,f[2]/_],signedDistanceFromCamera:_}}function Tc(m,c){return Math.min(.5+m/c*.5,1.5)}function Cc(m,c){const f=m[0]/m[3],_=m[1]/m[3];return f>=-c[0]&&f<=c[0]&&_>=-c[1]&&_<=c[1]}function Mc(m,c,f,_,b,E,C,A,I,z){const R=f.transform,W=_?m.textSizeData:m.iconSizeData,Y=o.evaluateSizeForZoom(W,f.transform.zoom),oe=R.projection.name==="globe",ee=[256/f.width*2+1,256/f.height*2+1],te=_?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;te.clear();let ne=null;oe&&(ne=_?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const J=m.lineVertexArray,ce=_?m.text.placedSymbolArray:m.icon.placedSymbolArray,ae=f.transform.width/f.transform.height;let Se=!1;for(let be=0;be<ce.length;be++){const me=ce.get(be);if(me.writingMode!==o.WritingMode.vertical||Se||be!==0&&ce.get(be-1).writingMode===o.WritingMode.horizontal||(Se=!0),(me.hidden||me.writingMode===o.WritingMode.vertical)&&!Se){qs(me.numGlyphs,te);continue}Se=!1;const Ee=new o.pointGeometry(me.tileAnchorX,me.tileAnchorY),ve=I?I(Ee):[0,0,0],Me=R.projection.projectTilePoint(Ee.x,Ee.y,z.canonical),Re=[Me.x+ve[0],Me.y+ve[1],Me.z+ve[2]],ut=[...Re,1];if(o.transformMat4$1(ut,ut,c),!Cc(ut,ee)){qs(me.numGlyphs,te);continue}const Pe=Tc(f.transform.cameraToCenterDistance,ut[3]),Ye=o.evaluateSizeForFeature(W,Y,me),et=C?Ye/Pe:Ye*Pe,yt=jo(new o.pointGeometry(Re[0],Re[1]),b,Re[2]);if(yt.signedDistanceFromCamera<=0){qs(me.numGlyphs,te);continue}let $e={};const lt=C?null:I,Ze=Vg(me,et,!1,A,c,b,E,m.glyphOffsetArray,J,te,ne,yt.point,Ee,$e,ae,lt,R.projection,z,C);Se=Ze.useVertical,lt&&Ze.needsFlipping&&($e={}),(Ze.notEnoughRoom||Se||Ze.needsFlipping&&Vg(me,et,!0,A,c,b,E,m.glyphOffsetArray,J,te,ne,yt.point,Ee,$e,ae,lt,R.projection,z,C).notEnoughRoom)&&qs(me.numGlyphs,te)}_?(m.text.dynamicLayoutVertexBuffer.updateData(te),ne&&m.text.globeExtVertexBuffer.updateData(ne)):(m.icon.dynamicLayoutVertexBuffer.updateData(te),ne&&m.icon.globeExtVertexBuffer.updateData(ne))}function ho(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te){const ne=A.glyphStartIndex+A.numGlyphs,J=A.lineStartIndex,ce=A.lineStartIndex+A.lineLength,ae=c.getoffsetX(A.glyphStartIndex),Se=c.getoffsetX(ne-1),be=Hs(m*ae,f,_,b,E,C,A.segment,J,ce,I,z,R,W,Y,!0,oe,ee,te);if(!be)return null;const me=Hs(m*Se,f,_,b,E,C,A.segment,J,ce,I,z,R,W,Y,!0,oe,ee,te);return me?{first:be,last:me}:null}function wi(m,c,f,_){return m.writingMode===o.WritingMode.horizontal&&Math.abs(f.y-c.y)>Math.abs(f.x-c.x)*_?{useVertical:!0}:m.writingMode===o.WritingMode.vertical?c.y<f.y?{needsFlipping:!0}:null:m.flipState!==0&&function(b,E,C){const A=(E.x-b.x)*C;return A===0||Math.abs((E.y-b.y)/A)>At}(c,f,_)?m.flipState===1?{needsFlipping:!0}:null:c.x>f.x?{needsFlipping:!0}:null}function Vg(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te,ne,J,ce){const ae=c/24,Se=m.lineOffsetX*ae,be=m.lineOffsetY*ae;let me;if(m.numGlyphs>1){const Ee=m.glyphStartIndex+m.numGlyphs,ve=m.lineStartIndex,Me=m.lineStartIndex+m.lineLength,Re=ho(ae,A,Se,be,f,W,Y,m,I,E,oe,te,!1,ne,J,ce);if(!Re)return{notEnoughRoom:!0};const ut=pn(Re.first.point,C).point,Pe=pn(Re.last.point,C).point,Ye=new o.pointGeometry(ut[0],ut[1]),et=new o.pointGeometry(Pe[0],Pe[1]);if(_&&!f){const yt=wi(m,Ye,et,ee);if(m.flipState=yt&&yt.needsFlipping?1:2,yt)return yt}me=[Re.first];for(let yt=m.glyphStartIndex+1;yt<Ee-1;yt++)me.push(Hs(ae*A.getoffsetX(yt),Se,be,f,W,Y,m.segment,ve,Me,I,E,oe,te,!1,!1,ne,J,ce));me.push(Re.last)}else{if(_&&!f){const ve=jo(Y,b).point,Me=m.lineStartIndex+m.segment+1,Re=new o.pointGeometry(I.getx(Me),I.gety(Me)),ut=jo(Re,b),Pe=ut.signedDistanceFromCamera>0?ut.point:Qu(Y,Re,ve,1,b,void 0,ne,J.canonical),Ye=wi(m,new o.pointGeometry(ve[0],ve[1]),new o.pointGeometry(Pe[0],Pe[1]),ee);if(m.flipState=Ye&&Ye.needsFlipping?1:2,Ye)return Ye}const Ee=Hs(ae*A.getoffsetX(m.glyphStartIndex),Se,be,f,W,Y,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,I,E,oe,te,!1,!1,ne,J,ce);if(!Ee)return{notEnoughRoom:!0};me=[Ee]}if(R)for(const Ee of me)o.updateGlobeVertexNormal(R,z.length+0,Ee.up[0],Ee.up[1],Ee.up[2]),o.updateGlobeVertexNormal(R,z.length+1,Ee.up[0],Ee.up[1],Ee.up[2]),o.updateGlobeVertexNormal(R,z.length+2,Ee.up[0],Ee.up[1],Ee.up[2]),o.updateGlobeVertexNormal(R,z.length+3,Ee.up[0],Ee.up[1],Ee.up[2]),o.addDynamicAttributes(z,Ee.point[0],Ee.point[1],Ee.point[2],Ee.angle);else for(const Ee of me)o.addDynamicAttributes(z,Ee.point[0],Ee.point[1],Ee.point[2],Ee.angle);return{}}function yl(m,c,f,_,b){const E=_.projectTilePoint(m.x,m.y,c);if(!b)return jo(E,f,E.z);const C=b(m);return jo(new o.pointGeometry(E.x+C[0],E.y+C[1]),f,E.z+C[2])}function Qu(m,c,f,_,b,E,C,A){const I=yl(m.add(m.sub(c)._unit()),A,b,C,E).point,z=o.sub([],f,I);return o.scaleAndAdd([],f,z,_/o.length(z))}function Hs(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te,ne,J){const ce=_?m-c:m+c;let ae=ce>0?1:-1,Se=0;_&&(ae*=-1,Se=Math.PI),ae<0&&(Se+=Math.PI);let be=ae>0?A+C:A+C+1,me=b,Ee=b,ve=0,Me=0;const Re=Math.abs(ce),ut=[],Pe=[];let Ye=E;const et=()=>{const Nt=be-ae;return ve===0?E:new o.pointGeometry(z.getx(Nt),z.gety(Nt))},yt=()=>Qu(et(),Ye,Ee,Re-ve+1,R,Y,te,ne.canonical);for(;ve+Me<=Re;){if(be+=ae,be<A||be>=I)return null;if(Ee=me,ut.push(me),oe&&Pe.push(Ye||et()),me=W[be],me===void 0){Ye=new o.pointGeometry(z.getx(be),z.gety(be));const Nt=yl(Ye,ne.canonical,R,te,Y);me=Nt.signedDistanceFromCamera>0?W[be]=Nt.point:yt()}else Ye=null;ve+=Me,Me=o.distance(Ee,me)}Ye=Ye||new o.pointGeometry(z.getx(be),z.gety(be));const $e=et();ee&&Y&&(W[be]=me=W[be]===void 0?me:yt(),Me=o.distance(Ee,me));const lt=(Re-ve)/Me,Ze=Ye.sub($e).mult(lt)._add($e),Tt=o.sub([],me,Ee),bt=o.scaleAndAdd([],Ee,Tt,lt);let Bt=[0,0,1],qt=Tt[0],rn=Tt[1];if(J&&(Bt=te.upVector(ne.canonical,Ze.x,Ze.y),Bt[0]!==0||Bt[1]!==0||Bt[2]!==1)){const Nt=[1,0,0],an=[0,1,0];Nt[0]=Bt[2],Nt[1]=0,Nt[2]=-Bt[0],o.cross(an,Bt,Nt),o.normalize(Nt,Nt),o.normalize(an,an),qt=o.dot(Tt,Nt),rn=o.dot(Tt,an)}if(f){const Nt=o.cross([],Bt,Tt);o.normalize(Nt,Nt),o.scaleAndAdd(bt,bt,Nt,f*ae)}const wn=Se+Math.atan2(rn,qt);return ut.push(bt),oe&&Pe.push(Ze),{point:bt,angle:wn,path:ut,tilePath:Pe,up:Bt}}const ff=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function qs(m,c){for(let f=0;f<m;f++){const _=c.length;c.resize(_+4),c.float32.set(ff,4*_)}}function Or(m,c,f){const _=c[0],b=c[1];return m[0]=f[0]*_+f[4]*b+f[12],m[1]=f[1]*_+f[5]*b+f[13],m[3]=f[3]*_+f[7]*b+f[15],m}const Wn=100;class pf{constructor(c,f,_=new _l(c.width+200,c.height+200,25),b=new _l(c.width+200,c.height+200,25)){this.transform=c,this.grid=_,this.ignoredGrid=b,this.pitchfactor=Math.cos(c._pitch)*c.cameraToCenterDistance,this.screenRightBoundary=c.width+Wn,this.screenBottomBoundary=c.height+Wn,this.gridRightBoundary=c.width+200,this.gridBottomBoundary=c.height+200,this.fogState=f}placeCollisionBox(c,f,_,b,E,C,A,I){let z=_.projectedAnchorX,R=_.projectedAnchorY,W=_.projectedAnchorZ;const Y=_.elevation,oe=_.tileID;if(Y&&oe){const be=c.getProjection().upVector(oe.canonical,_.tileAnchorX,_.tileAnchorY),me=c.getProjection().upVectorScale(oe.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;z+=be[0]*Y*me,R+=be[1]*Y*me,W+=be[2]*Y*me}const ee=this.projectAndGetPerspectiveRatio(A,[z,R,W],_.tileID,c.projection.name==="globe"||!!Y||this.transform.pitch>0,c.getProjection()),te=C*ee.perspectiveRatio,ne=(_.x1*f+b.x-_.padding)*te+ee.point.x,J=(_.y1*f+b.y-_.padding)*te+ee.point.y,ce=(_.x2*f+b.x+_.padding)*te+ee.point.x,ae=(_.y2*f+b.y+_.padding)*te+ee.point.y,Se=ee.perspectiveRatio<=.55||ee.occluded;return!this.isInsideGrid(ne,J,ce,ae)||!E&&this.grid.hitTest(ne,J,ce,ae,I)||Se?{box:[],offscreen:!1,occluded:ee.occluded}:{box:[ne,J,ce,ae],offscreen:this.isOffscreen(ne,J,ce,ae),occluded:!1}}placeCollisionCircles(c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te){const ne=[],J=this.transform.elevation,ce=J?J.getAtTileOffsetFunc(te,this.transform.center.lat,this.transform.worldSize,c.getProjection()):$e=>[0,0,0],ae=new o.pointGeometry(_.tileAnchorX,_.tileAnchorY),Se=c.getProjection().projectTilePoint(_.tileAnchorX,_.tileAnchorY,te.canonical),be=ce(ae),me=[Se.x+be[0],Se.y+be[1],Se.z+be[2]],Ee=c.projection.name==="globe",ve=this.projectAndGetPerspectiveRatio(A,[me[0],me[1],me[2]],te,Ee||!!J||this.transform.pitch>0,c.getProjection()),{perspectiveRatio:Me}=ve,Re=(W?C/Me:C*Me)/o.ONE_EM,ut=jo(new o.pointGeometry(me[0],me[1]),I,me[2]).point,Pe=ve.signedDistanceFromCamera>0?ho(Re,E,_.lineOffsetX*Re,_.lineOffsetY*Re,!1,ut,ae,_,b,I,{},J&&!W?ce:null,W&&!!J,c.getProjection(),te,W):null;let Ye=!1,et=!1,yt=!0;if(Pe&&!ve.occluded){const $e=.5*oe*Me+ee,lt=new o.pointGeometry(-100,-100),Ze=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Tt=new Dx,bt=Pe.first,Bt=Pe.last;let qt=[];for(let Nt=bt.path.length-1;Nt>=1;Nt--)qt.push(bt.path[Nt]);for(let Nt=1;Nt<Bt.path.length;Nt++)qt.push(Bt.path[Nt]);const rn=2.5*$e;if(z){const Nt=qt.map(J&&!Ee?(an,In)=>{const ui=ce(In<bt.path.length-1?bt.tilePath[bt.path.length-1-In]:Bt.tilePath[In-bt.path.length+2]);return an[2]=ui[2],pn(an,z)}:an=>pn(an,z));qt=Nt.some(an=>an.signedDistanceFromCamera<=0)?[]:Nt.map(an=>an.point)}let wn=[];if(qt.length>0){const Nt=qt.map(Hn=>new o.pointGeometry(Hn[0],Hn[1]));let an=1/0,In=-1/0,ui=1/0,ki=-1/0;for(let Hn=0;Hn<Nt.length;Hn++)an=Math.min(an,Nt[Hn].x),ui=Math.min(ui,Nt[Hn].y),In=Math.max(In,Nt[Hn].x),ki=Math.max(ki,Nt[Hn].y);wn=an>=lt.x&&In<=Ze.x&&ui>=lt.y&&ki<=Ze.y?[Nt]:In<lt.x||an>Ze.x||ki<lt.y||ui>Ze.y?[]:o.clipLine([Nt],lt.x,lt.y,Ze.x,Ze.y)}for(const Nt of wn){Tt.reset(Nt,.25*$e);let an=0;an=Tt.length<=.5*$e?1:Math.ceil(Tt.paddedLength/rn)+1;for(let In=0;In<an;In++){const ui=In/Math.max(an-1,1),ki=Tt.lerp(ui),Hn=ki.x+Wn,fr=ki.y+Wn;ne.push(Hn,fr,$e,0);const Go=Hn-$e,Cs=fr-$e,hi=Hn+$e,gi=fr+$e;if(yt=yt&&this.isOffscreen(Go,Cs,hi,gi),et=et||this.isInsideGrid(Go,Cs,hi,gi),!f&&this.grid.hitTestCircle(Hn,fr,$e,Y)&&(Ye=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Ye,occluded:!1}}}}return{circles:!R&&Ye||!et?[]:ne,offscreen:yt,collisionDetected:Ye,occluded:ve.occluded}}queryRenderedSymbols(c){if(c.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let _=1/0,b=1/0,E=-1/0,C=-1/0;for(const R of c){const W=new o.pointGeometry(R.x+Wn,R.y+Wn);_=Math.min(_,W.x),b=Math.min(b,W.y),E=Math.max(E,W.x),C=Math.max(C,W.y),f.push(W)}const A=this.grid.query(_,b,E,C).concat(this.ignoredGrid.query(_,b,E,C)),I={},z={};for(const R of A){const W=R.key;if(I[W.bucketInstanceId]===void 0&&(I[W.bucketInstanceId]={}),I[W.bucketInstanceId][W.featureIndex])continue;const Y=[new o.pointGeometry(R.x1,R.y1),new o.pointGeometry(R.x2,R.y1),new o.pointGeometry(R.x2,R.y2),new o.pointGeometry(R.x1,R.y2)];o.polygonIntersectsPolygon(f,Y)&&(I[W.bucketInstanceId][W.featureIndex]=!0,z[W.bucketInstanceId]===void 0&&(z[W.bucketInstanceId]=[]),z[W.bucketInstanceId].push(W.featureIndex))}return z}insertCollisionBox(c,f,_,b,E){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:_,featureIndex:b,collisionGroupID:E},c[0],c[1],c[2],c[3])}insertCollisionCircles(c,f,_,b,E){const C=f?this.ignoredGrid:this.grid,A={bucketInstanceId:_,featureIndex:b,collisionGroupID:E};for(let I=0;I<c.length;I+=4)C.insertCircle(A,c[I],c[I+1],c[I+2])}projectAndGetPerspectiveRatio(c,f,_,b,E){const C=[f[0],f[1],f[2],1];let A=!1;if(f[2]||this.transform.pitch>0){o.transformMat4$1(C,C,c);const I=E.name==="globe";this.fogState&&_&&!I&&(A=function(z,R,W,Y,oe,ee){const te=ee.calculateFogTileMatrix(oe),ne=[R,W,Y];return o.transformMat4(ne,ne,te),Ot(z,ne,ee.pitch,ee._fov)}(this.fogState,f[0],f[1],f[2],_.toUnwrapped(),this.transform)>.9)}else Or(C,C,c);return{point:new o.pointGeometry((C[0]/C[3]+1)/2*this.transform.width+Wn,(-C[1]/C[3]+1)/2*this.transform.height+Wn),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(E)/C[3]*.5,1.5),signedDistanceFromCamera:C[3],occluded:b&&C[2]>C[3]||A}}isOffscreen(c,f,_,b){return _<Wn||c>=this.screenRightBoundary||b<Wn||f>this.screenBottomBoundary}isInsideGrid(c,f,_,b){return _>=0&&c<this.gridRightBoundary&&b>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const c=o.identity([]);return o.translate(c,c,[-100,-100,0]),c}}function kc(m,c,f){const _=c.createTileMatrix(m,m.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),m.projMatrix,_)}function $r(m,c,f){if(c.projection.name===f.projection.name)return m.projMatrix;const _=f.clone();return _.setProjection(c.projection),kc(_,c.getProjection(),m)}function Gr(m,c,f){return c.name===f.projection.name?m.projMatrix:kc(f,c,m)}class mf{constructor(c,f,_,b){this.opacity=c?Math.max(0,Math.min(1,c.opacity+(c.placed?f:-f))):b&&_?1:0,this.placed=_}isHidden(){return this.opacity===0&&!this.placed}}class Ys{constructor(c,f,_,b,E,C=!1){this.text=new mf(c?c.text:null,f,_,E),this.icon=new mf(c?c.icon:null,f,b,E),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ui{constructor(c,f,_,b=!1){this.text=c,this.icon=f,this.skipFade=_,this.clipped=b}}class Ac{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class gf{constructor(c,f,_,b,E){this.bucketInstanceId=c,this.featureIndex=f,this.sourceLayerIndex=_,this.bucketIndex=b,this.tileID=E}}class Dc{constructor(c){this.crossSourceCollisions=c,this.maxGroupID=0,this.collisionGroups={}}get(c){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[c]){const f=++this.maxGroupID;this.collisionGroups[c]={ID:f,predicate:_=>_.collisionGroupID===f}}return this.collisionGroups[c]}}function lr(m,c,f,_,b){const{horizontalAlign:E,verticalAlign:C}=o.getAnchorAlignment(m),A=-(E-.5)*c,I=-(C-.5)*f,z=o.evaluateVariableOffset(m,_);return new o.pointGeometry(A+z[0]*b,I+z[1]*b)}function Ic(m,c,f,_,b){const E=new o.pointGeometry(m,c);return f&&E._rotate(_?b:-b),E}class _f{constructor(c,f,_,b,E){this.transform=c.clone(),this.projection=c.projection.name,this.collisionIndex=new pf(this.transform,E),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new Dc(_),this.collisionCircleArrays={},this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(c,f,_,b){const E=_.getBucket(f),C=_.latestFeatureIndex;if(!E||!C||f.id!==E.layerIds[0])return;const A=E.layers[0].layout,I=_.collisionBoxArray,z=Math.pow(2,this.transform.zoom-_.tileID.overscaledZ),R=_.tileSize/o.EXTENT,W=_.tileID.toUnwrapped();this.transform.setProjection(E.projection);const Y=(oe=_.tileID,ee=E.getProjection(),te=this.transform,ee.name===this.projection?te.calculateProjMatrix(oe.toUnwrapped()):kc(te,ee,oe));var oe,ee,te;const ne=A.get("text-pitch-alignment")==="map",J=A.get("text-rotation-alignment")==="map";f.compileFilter();const ce=f.dynamicFilter(),ae=f.dynamicFilterNeedsFeature(),Se=this.transform.calculatePixelsToTileUnitsMatrix(_),be=bn(Y,_.tileID.canonical,ne,J,this.transform,E.getProjection(),Se);let me=null;if(ne){const Me=Vo(Y,_.tileID.canonical,ne,J,this.transform,E.getProjection(),Se);me=o.multiply([],this.transform.labelPlaneMatrix,Me)}let Ee=null;ce&&_.latestFeatureIndex&&(Ee={unwrappedTileID:W,dynamicFilter:ce,dynamicFilterNeedsFeature:ae,featureIndex:_.latestFeatureIndex}),this.retainedQueryData[E.bucketInstanceId]=new gf(E.bucketInstanceId,C,E.sourceLayerIndex,E.index,_.tileID);const ve={bucket:E,layout:A,posMatrix:Y,textLabelPlaneMatrix:be,labelToScreenMatrix:me,clippingData:Ee,scale:z,textPixelRatio:R,holdingForFade:_.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(E.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(b)for(const Me of E.sortKeyRanges){const{sortKey:Re,symbolInstanceStart:ut,symbolInstanceEnd:Pe}=Me;c.push({sortKey:Re,symbolInstanceStart:ut,symbolInstanceEnd:Pe,parameters:ve})}else c.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:ve})}attemptAnchorPlacement(c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te,ne,J,ce){const ae=[Y.textOffset0,Y.textOffset1],Se=lr(c,_,b,ae,E),be=this.collisionIndex.placeCollisionBox(ee,E,f,Ic(Se.x,Se.y,C,A,this.transform.angle),W,I,z,R.predicate);if((!ne||this.collisionIndex.placeCollisionBox(ee,ee.getSymbolInstanceIconSize(ce,this.transform.zoom,oe),ne,Ic(Se.x,Se.y,C,A,this.transform.angle),W,I,z,R.predicate).box.length!==0)&&be.box.length>0){let me;return this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(me=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),this.variableOffsets[Y.crossTileID]={textOffset:ae,width:_,height:b,anchor:c,textScale:E,prevAnchor:me},this.markUsedJustification(ee,c,Y,te),ee.allowVerticalPlacement&&(this.markUsedOrientation(ee,te,Y),this.placedOrientations[Y.crossTileID]=te),{shift:Se,placedGlyphBoxes:be}}}placeLayerBucketPart(c,f,_,b){const{bucket:E,layout:C,posMatrix:A,textLabelPlaneMatrix:I,labelToScreenMatrix:z,clippingData:R,textPixelRatio:W,holdingForFade:Y,collisionBoxArray:oe,partiallyEvaluatedTextSize:ee,partiallyEvaluatedIconSize:te,collisionGroup:ne}=c.parameters,J=C.get("text-optional"),ce=C.get("icon-optional"),ae=C.get("text-allow-overlap"),Se=C.get("icon-allow-overlap"),be=C.get("text-rotation-alignment")==="map",me=C.get("text-pitch-alignment")==="map",Ee=C.get("icon-text-fit")!=="none",ve=C.get("symbol-z-order")==="viewport-y";this.transform.setProjection(E.projection);let Me=ae&&(Se||!E.hasIconData()||ce),Re=Se&&(ae||!E.hasTextData()||J);!E.collisionArrays&&oe&&E.deserializeCollisionBoxes(oe),_&&b&&E.updateCollisionDebugBuffers(this.transform.zoom,oe);const ut=(Pe,Ye,et)=>{if(R){const hi={zoom:this.transform.zoom,pitch:this.transform.pitch};let gi=null;if(R.dynamicFilterNeedsFeature){const yn=this.retainedQueryData[E.bucketInstanceId];gi=R.featureIndex.loadFeature({featureIndex:Pe.featureIndex,bucketIndex:yn.bucketIndex,sourceLayerIndex:yn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,R.dynamicFilter)(hi,gi,this.retainedQueryData[E.bucketInstanceId].tileID.canonical,new o.pointGeometry(Pe.tileAnchorX,Pe.tileAnchorY),this.transform.calculateDistanceTileData(R.unwrappedTileID)))return this.placements[Pe.crossTileID]=new Ui(!1,!1,!1,!0),void(f[Pe.crossTileID]=!0)}if(f[Pe.crossTileID])return;if(Y)return void(this.placements[Pe.crossTileID]=new Ui(!1,!1,!1));let yt=!1,$e=!1,lt=!0,Ze=!1,Tt=!1,bt=null,Bt={box:null,offscreen:null,occluded:null},qt={box:null,offscreen:null,occluded:null},rn=null,wn=null,Nt=null,an=0,In=0,ui=0;et.textFeatureIndex?an=et.textFeatureIndex:Pe.useRuntimeCollisionCircles&&(an=Pe.featureIndex),et.verticalTextFeatureIndex&&(In=et.verticalTextFeatureIndex);const ki=hi=>{hi.tileID=this.retainedQueryData[E.bucketInstanceId].tileID,(this.transform.elevation||hi.elevation)&&(hi.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[E.bucketInstanceId].tileID,hi.tileAnchorX,hi.tileAnchorY):0)},Hn=et.textBox;if(Hn){ki(Hn);const hi=yn=>{let qi=o.WritingMode.horizontal;if(E.allowVerticalPlacement&&!yn&&this.prevPlacement){const Er=this.prevPlacement.placedOrientations[Pe.crossTileID];Er&&(this.placedOrientations[Pe.crossTileID]=Er,qi=Er,this.markUsedOrientation(E,qi,Pe))}return qi},gi=(yn,qi)=>{if(E.allowVerticalPlacement&&Pe.numVerticalGlyphVertices>0&&et.verticalTextBox){for(const Er of E.writingModes)if(Er===o.WritingMode.vertical?(Bt=qi(),qt=Bt):Bt=yn(),Bt&&Bt.box&&Bt.box.length)break}else Bt=yn()};if(C.get("text-variable-anchor")){let yn=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Pe.crossTileID]){const ni=this.prevPlacement.variableOffsets[Pe.crossTileID];yn.indexOf(ni.anchor)>0&&(yn=yn.filter(Sr=>Sr!==ni.anchor),yn.unshift(ni.anchor))}const qi=(ni,Sr,Oa)=>{const Lr=E.getSymbolInstanceTextSize(ee,Pe,this.transform.zoom,Ye),La=(ni.x2-ni.x1)*Lr+2*ni.padding,za=(ni.y2-ni.y1)*Lr+2*ni.padding,Ra=Ee&&!Se?Sr:null;Ra&&ki(Ra);let zr={box:[],offscreen:!1,occluded:!1};const Fa=ae?2*yn.length:yn.length;for(let Qs=0;Qs<Fa;++Qs){const eu=this.attemptAnchorPlacement(yn[Qs%yn.length],ni,La,za,Lr,be,me,W,A,ne,Qs>=yn.length,Pe,Ye,E,Oa,Ra,ee,te);if(eu&&(zr=eu.placedGlyphBoxes,zr&&zr.box&&zr.box.length)){yt=!0,bt=eu.shift;break}}return zr};gi(()=>qi(Hn,et.iconBox,o.WritingMode.horizontal),()=>{const ni=et.verticalTextBox;return ni&&ki(ni),E.allowVerticalPlacement&&!(Bt&&Bt.box&&Bt.box.length)&&Pe.numVerticalGlyphVertices>0&&ni?qi(ni,et.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Bt&&(yt=Bt.box,lt=Bt.offscreen,Ze=Bt.occluded);const Er=hi(Bt&&Bt.box);if(!yt&&this.prevPlacement){const ni=this.prevPlacement.variableOffsets[Pe.crossTileID];ni&&(this.variableOffsets[Pe.crossTileID]=ni,this.markUsedJustification(E,ni.anchor,Pe,Er))}}else{const yn=(qi,Er)=>{const ni=E.getSymbolInstanceTextSize(ee,Pe,this.transform.zoom,Ye),Sr=this.collisionIndex.placeCollisionBox(E,ni,qi,new o.pointGeometry(0,0),ae,W,A,ne.predicate);return Sr&&Sr.box&&Sr.box.length&&(this.markUsedOrientation(E,Er,Pe),this.placedOrientations[Pe.crossTileID]=Er),Sr};gi(()=>yn(Hn,o.WritingMode.horizontal),()=>{const qi=et.verticalTextBox;return E.allowVerticalPlacement&&Pe.numVerticalGlyphVertices>0&&qi?(ki(qi),yn(qi,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),hi(Bt&&Bt.box&&Bt.box.length)}}if(rn=Bt,yt=rn&&rn.box&&rn.box.length>0,lt=rn&&rn.offscreen,Ze=rn&&rn.occluded,Pe.useRuntimeCollisionCircles){const hi=E.text.placedSymbolArray.get(Pe.centerJustifiedTextSymbolIndex>=0?Pe.centerJustifiedTextSymbolIndex:Pe.verticalPlacedTextSymbolIndex),gi=o.evaluateSizeForFeature(E.textSizeData,ee,hi),yn=C.get("text-padding");wn=this.collisionIndex.placeCollisionCircles(E,ae,hi,E.lineVertexArray,E.glyphOffsetArray,gi,A,I,z,_,me,ne.predicate,Pe.collisionCircleDiameter*gi/o.ONE_EM,yn,this.retainedQueryData[E.bucketInstanceId].tileID),yt=ae||wn.circles.length>0&&!wn.collisionDetected,lt=lt&&wn.offscreen,Ze=wn.occluded}if(et.iconFeatureIndex&&(ui=et.iconFeatureIndex),et.iconBox){const hi=gi=>{ki(gi);const yn=Ee&&bt?Ic(bt.x,bt.y,be,me,this.transform.angle):new o.pointGeometry(0,0),qi=E.getSymbolInstanceIconSize(te,this.transform.zoom,Ye);return this.collisionIndex.placeCollisionBox(E,qi,gi,yn,Se,W,A,ne.predicate)};qt&&qt.box&&qt.box.length&&et.verticalIconBox?(Nt=hi(et.verticalIconBox),$e=Nt.box.length>0):(Nt=hi(et.iconBox),$e=Nt.box.length>0),lt=lt&&Nt.offscreen,Tt=Nt.occluded}const fr=J||Pe.numHorizontalGlyphVertices===0&&Pe.numVerticalGlyphVertices===0,Go=ce||Pe.numIconVertices===0;if(fr||Go?Go?fr||($e=$e&&yt):yt=$e&&yt:$e=yt=$e&&yt,yt&&rn&&rn.box&&this.collisionIndex.insertCollisionBox(rn.box,C.get("text-ignore-placement"),E.bucketInstanceId,qt&&qt.box&&In?In:an,ne.ID),$e&&Nt&&this.collisionIndex.insertCollisionBox(Nt.box,C.get("icon-ignore-placement"),E.bucketInstanceId,ui,ne.ID),wn&&(yt&&this.collisionIndex.insertCollisionCircles(wn.circles,C.get("text-ignore-placement"),E.bucketInstanceId,an,ne.ID),_)){const hi=E.bucketInstanceId;let gi=this.collisionCircleArrays[hi];gi===void 0&&(gi=this.collisionCircleArrays[hi]=new Ac);for(let yn=0;yn<wn.circles.length;yn+=4)gi.circles.push(wn.circles[yn+0]),gi.circles.push(wn.circles[yn+1]),gi.circles.push(wn.circles[yn+2]),gi.circles.push(wn.collisionDetected?1:0)}const Cs=E.projection.name!=="globe";Me=Me&&(Cs||!Ze),Re=Re&&(Cs||!Tt),this.placements[Pe.crossTileID]=new Ui(yt||Me,$e||Re,lt||E.justReloaded),f[Pe.crossTileID]=!0};if(ve){const Pe=E.getSortedSymbolIndexes(this.transform.angle);for(let Ye=Pe.length-1;Ye>=0;--Ye){const et=Pe[Ye];ut(E.symbolInstances.get(et),et,E.collisionArrays[et])}}else for(let Pe=c.symbolInstanceStart;Pe<c.symbolInstanceEnd;Pe++)ut(E.symbolInstances.get(Pe),Pe,E.collisionArrays[Pe]);if(_&&E.bucketInstanceId in this.collisionCircleArrays){const Pe=this.collisionCircleArrays[E.bucketInstanceId];o.invert(Pe.invProjMatrix,A),Pe.viewportMatrix=this.collisionIndex.getViewportMatrix()}E.justReloaded=!1}markUsedJustification(c,f,_,b){let E;E=b===o.WritingMode.vertical?_.verticalPlacedTextSymbolIndex:{left:_.leftJustifiedTextSymbolIndex,center:_.centerJustifiedTextSymbolIndex,right:_.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(f)];const C=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex,_.verticalPlacedTextSymbolIndex];for(const A of C)A>=0&&(c.text.placedSymbolArray.get(A).crossTileID=E>=0&&A!==E?0:_.crossTileID)}markUsedOrientation(c,f,_){const b=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,E=f===o.WritingMode.vertical?f:0,C=[_.leftJustifiedTextSymbolIndex,_.centerJustifiedTextSymbolIndex,_.rightJustifiedTextSymbolIndex];for(const A of C)c.text.placedSymbolArray.get(A).placedOrientation=b;_.verticalPlacedTextSymbolIndex&&(c.text.placedSymbolArray.get(_.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(c){this.commitTime=c,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let _=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const b=f?f.symbolFadeChange(c):1,E=f?f.opacities:{},C=f?f.variableOffsets:{},A=f?f.placedOrientations:{};for(const I in this.placements){const z=this.placements[I],R=E[I];R?(this.opacities[I]=new Ys(R,b,z.text,z.icon,null,z.clipped),_=_||z.text!==R.text.placed||z.icon!==R.icon.placed):(this.opacities[I]=new Ys(null,b,z.text,z.icon,z.skipFade,z.clipped),_=_||z.text||z.icon)}for(const I in E){const z=E[I];if(!this.opacities[I]){const R=new Ys(z,b,!1,!1);R.isHidden()||(this.opacities[I]=R,_=_||z.text.placed||z.icon.placed)}}for(const I in C)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=C[I]);for(const I in A)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=A[I]);_?this.lastPlacementChangeTime=c:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:c)}updateLayerOpacities(c,f){const _={};for(const b of f){const E=b.getBucket(c);E&&b.latestFeatureIndex&&c.id===E.layerIds[0]&&this.updateBucketOpacities(E,_,b.collisionBoxArray)}}updateBucketOpacities(c,f,_){c.hasTextData()&&c.text.opacityVertexArray.clear(),c.hasIconData()&&c.icon.opacityVertexArray.clear(),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexArray.clear(),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexArray.clear();const b=c.layers[0].layout,E=!!c.layers[0].dynamicFilter(),C=new Ys(null,0,!1,!1,!0),A=b.get("text-allow-overlap"),I=b.get("icon-allow-overlap"),z=b.get("text-variable-anchor"),R=b.get("text-rotation-alignment")==="map",W=b.get("text-pitch-alignment")==="map",Y=b.get("icon-text-fit")!=="none",oe=new Ys(null,0,A&&(I||!c.hasIconData()||b.get("icon-optional")),I&&(A||!c.hasTextData()||b.get("text-optional")),!0);!c.collisionArrays&&_&&(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData())&&c.deserializeCollisionBoxes(_);const ee=(ne,J,ce)=>{for(let ae=0;ae<J/4;ae++)ne.opacityVertexArray.emplaceBack(ce)};let te=0;for(let ne=0;ne<c.symbolInstances.length;ne++){const J=c.symbolInstances.get(ne),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:ae,crossTileID:Se}=J;let be=this.opacities[Se];f[Se]?be=C:be||(be=oe,this.opacities[Se]=be),f[Se]=!0;const me=ce>0||ae>0,Ee=J.numIconVertices>0,ve=this.placedOrientations[J.crossTileID],Me=ve===o.WritingMode.vertical,Re=ve===o.WritingMode.horizontal||ve===o.WritingMode.horizontalOnly;if(!me&&!Ee||be.isHidden()||te++,me){const ut=Aa(be.text);ee(c.text,ce,Me?Uo:ut),ee(c.text,ae,Re?Uo:ut);const Pe=be.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(yt=>{yt>=0&&(c.text.placedSymbolArray.get(yt).hidden=Pe||Me?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(c.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=Pe||Re?1:0);const Ye=this.variableOffsets[J.crossTileID];Ye&&this.markUsedJustification(c,Ye.anchor,J,ve);const et=this.placedOrientations[J.crossTileID];et&&(this.markUsedJustification(c,"left",J,et),this.markUsedOrientation(c,et,J))}if(Ee){const ut=Aa(be.icon);J.placedIconSymbolIndex>=0&&(ee(c.icon,J.numIconVertices,Me?Uo:ut),c.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=be.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(ee(c.icon,J.numVerticalIconVertices,Re?Uo:ut),c.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=be.icon.isHidden())}if(c.hasIconCollisionBoxData()||c.hasTextCollisionBoxData()){const ut=c.collisionArrays[ne];if(ut){let Pe=new o.pointGeometry(0,0),Ye=!0;if(ut.textBox||ut.verticalTextBox){if(z){const yt=this.variableOffsets[Se];yt?(Pe=lr(yt.anchor,yt.width,yt.height,yt.textOffset,yt.textScale),R&&Pe._rotate(W?this.transform.angle:-this.transform.angle)):Ye=!1}E&&(Ye=!be.clipped),ut.textBox&&wo(c.textCollisionBox.collisionVertexArray,be.text.placed,!Ye||Me,Pe.x,Pe.y),ut.verticalTextBox&&wo(c.textCollisionBox.collisionVertexArray,be.text.placed,!Ye||Re,Pe.x,Pe.y)}const et=Ye&&Boolean(!Re&&ut.verticalIconBox);ut.iconBox&&wo(c.iconCollisionBox.collisionVertexArray,be.icon.placed,et,Y?Pe.x:0,Y?Pe.y:0),ut.verticalIconBox&&wo(c.iconCollisionBox.collisionVertexArray,be.icon.placed,!et,Y?Pe.x:0,Y?Pe.y:0)}}}if(c.fullyClipped=te===0,c.sortFeatures(this.transform.angle),this.retainedQueryData[c.bucketInstanceId]&&(this.retainedQueryData[c.bucketInstanceId].featureSortOrder=c.featureSortOrder),c.hasTextData()&&c.text.opacityVertexBuffer&&c.text.opacityVertexBuffer.updateData(c.text.opacityVertexArray),c.hasIconData()&&c.icon.opacityVertexBuffer&&c.icon.opacityVertexBuffer.updateData(c.icon.opacityVertexArray),c.hasIconCollisionBoxData()&&c.iconCollisionBox.collisionVertexBuffer&&c.iconCollisionBox.collisionVertexBuffer.updateData(c.iconCollisionBox.collisionVertexArray),c.hasTextCollisionBoxData()&&c.textCollisionBox.collisionVertexBuffer&&c.textCollisionBox.collisionVertexBuffer.updateData(c.textCollisionBox.collisionVertexArray),c.bucketInstanceId in this.collisionCircleArrays){const ne=this.collisionCircleArrays[c.bucketInstanceId];c.placementInvProjMatrix=ne.invProjMatrix,c.placementViewportMatrix=ne.viewportMatrix,c.collisionCircleArray=ne.circles,delete this.collisionCircleArrays[c.bucketInstanceId]}}symbolFadeChange(c){return this.fadeDuration===0?1:(c-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(c){return Math.max(0,(this.transform.zoom-c)/1.5)}hasTransitions(c){return this.stale||c-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(c,f){const _=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*_>c}setStale(){this.stale=!0}}function wo(m,c,f,_,b){m.emplaceBack(c?1:0,f?1:0,_||0,b||0),m.emplaceBack(c?1:0,f?1:0,_||0,b||0),m.emplaceBack(c?1:0,f?1:0,_||0,b||0),m.emplaceBack(c?1:0,f?1:0,_||0,b||0)}const Pc=Math.pow(2,25),eh=Math.pow(2,24),Ix=Math.pow(2,17),yf=Math.pow(2,16),vl=Math.pow(2,9),Px=Math.pow(2,8),jg=Math.pow(2,1);function Aa(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const c=m.placed?1:0,f=Math.floor(127*m.opacity);return f*Pc+c*eh+f*Ix+c*yf+f*vl+c*Px+f*jg+c}const Uo=0;class th{constructor(c){this._sortAcrossTiles=c.layout.get("symbol-z-order")!=="viewport-y"&&c.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(c,f,_,b,E){const C=this._bucketParts;for(;this._currentTileIndex<c.length;)if(f.getBucketParts(C,b,c[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((A,I)=>A.sortKey-I.sortKey));this._currentPartIndex<C.length;){const A=C[this._currentPartIndex];if(f.placeLayerBucketPart(A,this._seenCrossTileIDs,_,A.symbolInstanceStart===0),this._currentPartIndex++,E())return!0}return!1}}class Zs{constructor(c,f,_,b,E,C,A,I){this.placement=new _f(c,E,C,A,I),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=_,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(c,f,_){const b=o.exported.now(),E=()=>{const C=o.exported.now()-b;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=f[c[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=A)&&(!C.maxzoom||C.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new th(C)),this._inProgressLayer.continuePlacement(_[C.source],this.placement,this._showCollisionBoxes,C,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(c){return this.placement.commit(c),this.placement}}const vf=512/o.EXTENT/2;class nh{constructor(c,f,_){this.tileID=c,this.indexedSymbolInstances={},this.bucketInstanceId=_;for(let b=0;b<f.length;b++){const E=f.get(b),C=E.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,c)})}}getScaledCoordinates(c,f){const _=vf/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*o.EXTENT+c.tileAnchorX)*_),y:Math.floor((f.canonical.y*o.EXTENT+c.tileAnchorY)*_)}}findMatches(c,f,_){const b=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let E=0;E<c.length;E++){const C=c.get(E);if(C.crossTileID)continue;const A=this.indexedSymbolInstances[C.key];if(!A)continue;const I=this.getScaledCoordinates(C,f);for(const z of A)if(Math.abs(z.coord.x-I.x)<=b&&Math.abs(z.coord.y-I.y)<=b&&!_[z.crossTileID]){_[z.crossTileID]=!0,C.crossTileID=z.crossTileID;break}}}}class Ox{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lx{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(c){const f=Math.round((c-this.lng)/360);if(f!==0)for(const _ in this.indexes){const b=this.indexes[_],E={};for(const C in b){const A=b[C];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+f),E[A.tileID.key]=A}this.indexes[_]=E}this.lng=c}addBucket(c,f,_){if(this.indexes[c.overscaledZ]&&this.indexes[c.overscaledZ][c.key]){if(this.indexes[c.overscaledZ][c.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(c.overscaledZ,this.indexes[c.overscaledZ][c.key])}for(let E=0;E<f.symbolInstances.length;E++)f.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[c.overscaledZ]||(this.usedCrossTileIDs[c.overscaledZ]={});const b=this.usedCrossTileIDs[c.overscaledZ];for(const E in this.indexes){const C=this.indexes[E];if(Number(E)>c.overscaledZ)for(const A in C){const I=C[A];I.tileID.isChildOf(c)&&I.findMatches(f.symbolInstances,c,b)}else{const A=C[c.scaledTo(Number(E)).key];A&&A.findMatches(f.symbolInstances,c,b)}}for(let E=0;E<f.symbolInstances.length;E++){const C=f.symbolInstances.get(E);C.crossTileID||(C.crossTileID=_.generate(),b[C.crossTileID]=!0)}return this.indexes[c.overscaledZ]===void 0&&(this.indexes[c.overscaledZ]={}),this.indexes[c.overscaledZ][c.key]=new nh(c,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(c,f){for(const _ in f.indexedSymbolInstances)for(const b of f.indexedSymbolInstances[_])delete this.usedCrossTileIDs[c][b.crossTileID]}removeStaleBuckets(c){let f=!1;for(const _ in this.indexes){const b=this.indexes[_];for(const E in b)c[b[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(_,b[E]),delete b[E],f=!0)}return f}}class ih{constructor(){this.layerIndexes={},this.crossTileIDs=new Ox,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(c,f,_,b){let E=this.layerIndexes[c.id];E===void 0&&(E=this.layerIndexes[c.id]=new Lx);let C=!1;const A={};b.name!=="globe"&&E.handleWrapJump(_);for(const I of f){const z=I.getBucket(c);z&&c.id===z.layerIds[0]&&(z.bucketInstanceId||(z.bucketInstanceId=++this.maxBucketInstanceId),E.addBucket(I.tileID,z,this.crossTileIDs)&&(C=!0),A[z.bucketInstanceId]=!0)}return E.removeStaleBuckets(A)&&(C=!0),C}pruneUnusedLayers(c){const f={};c.forEach(_=>{f[_]=!0});for(const _ in this.layerIndexes)f[_]||delete this.layerIndexes[_]}}const rh=(m,c)=>o.emitValidationErrors(m,c&&c.filter(f=>f.identifier!=="source.canvas")),Ug=o.pick(Kt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),zx=o.pick(Kt,["setCenter","setZoom","setBearing","setPitch"]),$g={version:8,layers:[],sources:{}},Rx={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Eo extends o.Evented{constructor(c,f={}){super(),this.map=c,this.dispatcher=new xt(Un(),this),this.imageManager=new mt,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(c._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.lineAtlas=new o.LineAtlas(256,512),this.crossTileSymbolIndex=new ih,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const _=this;this._rtlTextPluginCallback=Eo.registerForPluginStateChange(b=>{_.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:b.pluginStatus,pluginURL:b.pluginURL},(E,C)=>{if(o.triggerPluginCompletionEvent(E),C&&C.every(A=>A))for(const A in _._sourceCaches){const I=_._sourceCaches[A],z=I.getSource().type;z!=="vector"&&z!=="geojson"||I.reload()}})}),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;const E=this.getSource(b.sourceId);if(E&&E.vectorLayerIds)for(const C in this._layers){const A=this._layers[C];A.source===E.id&&this._validateLayer(A)}})}loadURL(c,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const _=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(c);c=this.map._requestManager.normalizeStyleURL(c,f.accessToken);const b=this.map._requestManager.transformRequest(c,o.ResourceType.Style);this._request=o.getJSON(b,(E,C)=>{this._request=null,E?this.fire(new o.ErrorEvent(E)):C&&this._load(C,_)})}loadJSON(c,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(c,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load($g,!1)}_updateLayerCount(c,f){const _=f?1:-1;c.is3D()&&(this._num3DLayers+=_),c.type==="circle"&&(this._numCircleLayers+=_),c.type==="symbol"&&(this._numSymbolLayers+=_)}_load(c,f){if(f&&rh(this,o.validateStyle(c)))return;this._loaded=!0,this.stylesheet=o.clone$1(c),this._updateMapProjection();for(const b in c.sources)this.addSource(b,c.sources[b],{validate:!1});this._changed=!1,c.sprite?this._loadSprite(c.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(c.glyphs);const _=$n(this.stylesheet.layers);this._order=_.map(b=>b.id),this._layers={},this._serializedLayers={};for(let b of _)b=o.createStyleLayer(b),b.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=b,this._serializedLayers[b.id]=b.serialize(),this._updateLayerCount(b,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ne(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(c){c?this.stylesheet.projection=c:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(c){this._spriteRequest=function(f,_,b){let E,C,A;const I=o.exported.devicePixelRatio>1?"@2x":"";let z=o.getJSON(_.transformRequest(_.normalizeSpriteURL(f,I,".json"),o.ResourceType.SpriteJSON),(Y,oe)=>{z=null,A||(A=Y,E=oe,W())}),R=o.getImage(_.transformRequest(_.normalizeSpriteURL(f,I,".png"),o.ResourceType.SpriteImage),(Y,oe)=>{R=null,A||(A=Y,C=oe,W())});function W(){if(A)b(A);else if(E&&C){const Y=o.exported.getImageData(C),oe={};for(const ee in E){const{width:te,height:ne,x:J,y:ce,sdf:ae,pixelRatio:Se,stretchX:be,stretchY:me,content:Ee}=E[ee],ve=new o.RGBAImage({width:te,height:ne});o.RGBAImage.copy(Y,ve,{x:J,y:ce},{x:0,y:0},{width:te,height:ne}),oe[ee]={data:ve,pixelRatio:Se,sdf:ae,stretchX:be,stretchY:me,content:Ee}}b(null,oe)}}return{cancel(){z&&(z.cancel(),z=null),R&&(R.cancel(),R=null)}}}(c,this.map._requestManager,(f,_)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(_)for(const b in _)this.imageManager.addImage(b,_[b]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(c){const f=this.getSource(c.source);if(!f)return;const _=c.sourceLayer;_&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(_)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${_}" does not exist on source "${f.id}" as specified by style layer "${c.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const c in this._sourceCaches)if(!this._sourceCaches[c].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(c){const f=[];for(const _ of c){const b=this._layers[_];b.type!=="custom"&&f.push(b.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const c in this._sourceCaches)if(this._sourceCaches[c].hasTransition())return!0;for(const c in this._layers)if(this._layers[c].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(c){return!!this.terrain&&Rx[c.type]}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(c){if(!this._loaded)return;const f=this._changed;if(this._changed){const b=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(b.length||E.length)&&this._updateWorkerLayers(b,E);for(const C in this._updatedSources){const A=this._updatedSources[C];A==="reload"?this._reloadSource(C):A==="clear"&&this._clearSource(C)}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(c);this.light.updateTransitions(c),this.fog&&this.fog.updateTransitions(c),this._resetUpdates()}const _={};for(const b in this._sourceCaches){const E=this._sourceCaches[b];_[b]=E.used,E.used=!1}for(const b of this._order){const E=this._layers[b];if(E.recalculate(c,this._availableImages),!E.isHidden(c.zoom)){const A=this._getLayerSourceCache(E);A&&(A.used=!0)}const C=this.map.painter;if(C){const A=E.getProgramIds();if(!A)continue;const I=E.getProgramConfiguration(c.zoom);for(const z of A)C.useProgram(z,I)}}for(const b in _){const E=this._sourceCaches[b];_[b]!==E.used&&E.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:E.getSource().id}))}this.light.recalculate(c),this.terrain&&this.terrain.recalculate(c),this.fog&&this.fog.recalculate(c),this.z=c.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const c=Object.keys(this._changedImages);if(c.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],c);this._changedImages={}}}_updateWorkerLayers(c,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(c),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(c){if(this._checkLoaded(),rh(this,o.validateStyle(c)))return!1;(c=o.clone$1(c)).layers=$n(c.layers);const f=function(b,E){if(!b)return[{command:Kt.setStyle,args:[E]}];let C=[];try{if(!y(b.version,E.version))return[{command:Kt.setStyle,args:[E]}];y(b.center,E.center)||C.push({command:Kt.setCenter,args:[E.center]}),y(b.zoom,E.zoom)||C.push({command:Kt.setZoom,args:[E.zoom]}),y(b.bearing,E.bearing)||C.push({command:Kt.setBearing,args:[E.bearing]}),y(b.pitch,E.pitch)||C.push({command:Kt.setPitch,args:[E.pitch]}),y(b.sprite,E.sprite)||C.push({command:Kt.setSprite,args:[E.sprite]}),y(b.glyphs,E.glyphs)||C.push({command:Kt.setGlyphs,args:[E.glyphs]}),y(b.transition,E.transition)||C.push({command:Kt.setTransition,args:[E.transition]}),y(b.light,E.light)||C.push({command:Kt.setLight,args:[E.light]}),y(b.fog,E.fog)||C.push({command:Kt.setFog,args:[E.fog]}),y(b.projection,E.projection)||C.push({command:Kt.setProjection,args:[E.projection]});const A={},I=[];(function(W,Y,oe,ee){let te;for(te in Y=Y||{},W=W||{})W.hasOwnProperty(te)&&(Y.hasOwnProperty(te)||uo(te,oe,ee));for(te in Y)Y.hasOwnProperty(te)&&(W.hasOwnProperty(te)?y(W[te],Y[te])||(W[te].type==="geojson"&&Y[te].type==="geojson"&&Ws(W,Y,te)?oe.push({command:Kt.setGeoJSONSourceData,args:[te,Y[te].data]}):Mi(te,Y,oe,ee)):Ge(te,Y,oe))})(b.sources,E.sources,I,A);const z=[];b.layers&&b.layers.forEach(W=>{W.source&&A[W.source]?C.push({command:Kt.removeLayer,args:[W.id]}):z.push(W)});let R=b.terrain;R&&A[R.source]&&(C.push({command:Kt.setTerrain,args:[void 0]}),R=void 0),C=C.concat(I),y(R,E.terrain)||C.push({command:Kt.setTerrain,args:[E.terrain]}),function(W,Y,oe){Y=Y||[];const ee=(W=W||[]).map(No),te=Y.map(No),ne=W.reduce(Ju,{}),J=Y.reduce(Ju,{}),ce=ee.slice(),ae=Object.create(null);let Se,be,me,Ee,ve,Me,Re;for(Se=0,be=0;Se<ee.length;Se++)me=ee[Se],J.hasOwnProperty(me)?be++:(oe.push({command:Kt.removeLayer,args:[me]}),ce.splice(ce.indexOf(me,be),1));for(Se=0,be=0;Se<te.length;Se++)me=te[te.length-1-Se],ce[ce.length-1-Se]!==me&&(ne.hasOwnProperty(me)?(oe.push({command:Kt.removeLayer,args:[me]}),ce.splice(ce.lastIndexOf(me,ce.length-be),1)):be++,Me=ce[ce.length-Se],oe.push({command:Kt.addLayer,args:[J[me],Me]}),ce.splice(ce.length-Se,0,me),ae[me]=!0);for(Se=0;Se<te.length;Se++)if(me=te[Se],Ee=ne[me],ve=J[me],!ae[me]&&!y(Ee,ve))if(y(Ee.source,ve.source)&&y(Ee["source-layer"],ve["source-layer"])&&y(Ee.type,ve.type)){for(Re in Ku(Ee.layout,ve.layout,oe,me,null,Kt.setLayoutProperty),Ku(Ee.paint,ve.paint,oe,me,null,Kt.setPaintProperty),y(Ee.filter,ve.filter)||oe.push({command:Kt.setFilter,args:[me,ve.filter]}),y(Ee.minzoom,ve.minzoom)&&y(Ee.maxzoom,ve.maxzoom)||oe.push({command:Kt.setLayerZoomRange,args:[me,ve.minzoom,ve.maxzoom]}),Ee)Ee.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Ku(Ee[Re],ve[Re],oe,me,Re.slice(6),Kt.setPaintProperty):y(Ee[Re],ve[Re])||oe.push({command:Kt.setLayerProperty,args:[me,Re,ve[Re]]}));for(Re in ve)ve.hasOwnProperty(Re)&&!Ee.hasOwnProperty(Re)&&Re!=="layout"&&Re!=="paint"&&Re!=="filter"&&Re!=="metadata"&&Re!=="minzoom"&&Re!=="maxzoom"&&(Re.indexOf("paint.")===0?Ku(Ee[Re],ve[Re],oe,me,Re.slice(6),Kt.setPaintProperty):y(Ee[Re],ve[Re])||oe.push({command:Kt.setLayerProperty,args:[me,Re,ve[Re]]}))}else oe.push({command:Kt.removeLayer,args:[me]}),Me=ce[ce.lastIndexOf(me)+1],oe.push({command:Kt.addLayer,args:[ve,Me]})}(z,E.layers,C)}catch(A){console.warn("Unable to compute style diff:",A),C=[{command:Kt.setStyle,args:[E]}]}return C}(this.serialize(),c).filter(b=>!(b.command in zx));if(f.length===0)return!1;const _=f.filter(b=>!(b.command in Ug));if(_.length>0)throw new Error(`Unimplemented: ${_.map(b=>b.command).join(", ")}.`);return f.forEach(b=>{b.command!=="setTransition"&&b.command!=="setProjection"&&this[b.command].apply(this,b.args)}),this.stylesheet=c,this._updateMapProjection(),!0}addImage(c,f){return this.getImage(c)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(c,f),this._afterImageUpdated(c),this)}updateImage(c,f){this.imageManager.updateImage(c,f)}getImage(c){return this.imageManager.getImage(c)}removeImage(c){return this.getImage(c)?(this.imageManager.removeImage(c),this._afterImageUpdated(c),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(c){this._availableImages=this.imageManager.listImages(),this._changedImages[c]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(c,f,_={}){if(this._checkLoaded(),this.getSource(c)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${c}`,f,null,_))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const b=Oe(c,f,this.dispatcher,this);b.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(c),source:b.serialize(),sourceId:c}));const E=C=>{const A=(C?"symbol:":"other:")+c,I=this._sourceCaches[A]=new o.SourceCache(A,b,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[c]=I,I.style=this,I.onAdd(this.map)};E(!1),f.type!=="vector"&&f.type!=="geojson"||E(!0),b.onAdd&&b.onAdd(this.map),this._changed=!0}removeSource(c){this._checkLoaded();const f=this.getSource(c);if(!f)throw new Error("There is no source with this ID");for(const b in this._layers)if(this._layers[b].source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while layer "${b}" is using it.`)));if(this.terrain&&this.terrain.get().source===c)return this.fire(new o.ErrorEvent(new Error(`Source "${c}" cannot be removed while terrain is using it.`)));const _=this._getSourceCaches(c);for(const b of _)delete this._sourceCaches[b.id],delete this._updatedSources[b.id],b.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:b.getSource().id})),b.setEventedParent(null),b.clearTiles();return delete this._otherSourceCaches[c],delete this._symbolSourceCaches[c],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(c,f){this._checkLoaded(),this.getSource(c).setData(f),this._changed=!0}getSource(c){const f=this._getSourceCache(c);return f&&f.getSource()}addLayer(c,f,_={}){this._checkLoaded();const b=c.id;if(this.getLayer(b))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${b}" already exists on this map`)));let E;if(c.type==="custom"){if(rh(this,o.validateCustomStyleLayer(c)))return;E=o.createStyleLayer(c)}else{if(typeof c.source=="object"&&(this.addSource(b,c.source),c=o.clone$1(c),c=o.extend(c,{source:b})),this._validate(o.validateLayer,`layers.${b}`,c,{arrayIndex:-1},_))return;E=o.createStyleLayer(c),this._validateLayer(E),E.setEventedParent(this,{layer:{id:b}}),this._serializedLayers[E.id]=E.serialize(),this._updateLayerCount(E,!0)}const C=f?this._order.indexOf(f):this._order.length;if(f&&C===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(C,0,b),this._layerOrderChanged=!0,this._layers[b]=E;const A=this._getLayerSourceCache(E);if(this._removedLayers[b]&&E.source&&A&&E.type!=="custom"){const I=this._removedLayers[b];delete this._removedLayers[b],I.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",A.pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(c,f){if(this._checkLoaded(),this._changed=!0,!this._layers[c])return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be moved.`)));if(c===f)return;const _=this._order.indexOf(c);this._order.splice(_,1);const b=f?this._order.indexOf(f):this._order.length;f&&b===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(b,0,c),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(c){this._checkLoaded();const f=this._layers[c];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const _=this._order.indexOf(c);this._order.splice(_,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[c]=f,delete this._layers[c],delete this._serializedLayers[c],delete this._updatedLayers[c],delete this._updatedPaintProps[c],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(c){return this._layers[c]}hasLayer(c){return c in this._layers}hasLayerType(c){for(const f in this._layers)if(this._layers[f].type===c)return!0;return!1}setLayerZoomRange(c,f,_){this._checkLoaded();const b=this.getLayer(c);b?b.minzoom===f&&b.maxzoom===_||(f!=null&&(b.minzoom=f),_!=null&&(b.maxzoom=_),this._updateLayer(b)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(c,f,_={}){this._checkLoaded();const b=this.getLayer(c);if(b){if(!y(b.filter,f))return f==null?(b.filter=void 0,void this._updateLayer(b)):void(this._validate(o.validateFilter,`layers.${b.id}.filter`,f,{layerType:b.type},_)||(b.filter=o.clone$1(f),this._updateLayer(b)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be filtered.`)))}getFilter(c){const f=this.getLayer(c);return f&&o.clone$1(f.filter)}setLayoutProperty(c,f,_,b={}){this._checkLoaded();const E=this.getLayer(c);E?y(E.getLayoutProperty(f),_)||(E.setLayoutProperty(f,_,b),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(c,f){const _=this.getLayer(c);if(_)return _.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style.`)))}setPaintProperty(c,f,_,b={}){this._checkLoaded();const E=this.getLayer(c);E?y(E.getPaintProperty(f),_)||(E.setPaintProperty(f,_,b)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[c]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${c}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(c,f){const _=this.getLayer(c);return _&&_.getPaintProperty(f)}setFeatureState(c,f){this._checkLoaded();const _=c.source,b=c.sourceLayer,E=this.getSource(_);if(!E)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const C=E.type;if(C==="geojson"&&b)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!b)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const A=this._getSourceCaches(_);for(const I of A)I.setFeatureState(b,c.id,f)}removeFeatureState(c,f){this._checkLoaded();const _=c.source,b=this.getSource(_);if(!b)return void this.fire(new o.ErrorEvent(new Error(`The source '${_}' does not exist in the map's style.`)));const E=b.type,C=E==="vector"?c.sourceLayer:void 0;if(E==="vector"&&!C)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof c.id!="string"&&typeof c.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const A=this._getSourceCaches(_);for(const I of A)I.removeFeatureState(C,c.id,f)}getFeatureState(c){this._checkLoaded();const f=c.source,_=c.sourceLayer,b=this.getSource(f);if(b){if(b.type!=="vector"||_)return c.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(_,c.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const c={};for(const f in this._sourceCaches){const _=this._sourceCaches[f].getSource();c[_.id]||(c[_.id]=_.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:c,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(c){this._updatedLayers[c.id]=!0;const f=this._getLayerSourceCache(c);c.source&&!this._updatedSources[c.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[c.source]="reload",f.pause()),this._changed=!0,c.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(c){const f=C=>this._layers[C].type==="fill-extrusion",_={},b=[];for(let C=this._order.length-1;C>=0;C--){const A=this._order[C];if(f(A)){_[A]=C;for(const I of c){const z=I[A];if(z)for(const R of z)b.push(R)}}}b.sort((C,A)=>A.intersectionZ-C.intersectionZ);const E=[];for(let C=this._order.length-1;C>=0;C--){const A=this._order[C];if(f(A))for(let I=b.length-1;I>=0;I--){const z=b[I].feature;if(_[z.layer.id]<C)break;E.push(z),b.pop()}else for(const I of c){const z=I[A];if(z)for(const R of z)E.push(R.feature)}}return E}queryRenderedFeatures(c,f,_){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const b={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const I of f.layers){const z=this._layers[I];if(!z)return this.fire(new o.ErrorEvent(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];b[z.source]=!0}}const E=[];f.availableImages=this._availableImages;const C=f&&f.layers?f.layers.some(I=>{const z=this.getLayer(I);return z&&z.is3D()}):this.has3DLayers(),A=Gt.createFromScreenPoints(c,_);for(const I in this._sourceCaches){const z=this._sourceCaches[I].getSource().id;f.layers&&!b[z]||E.push(wt(this._sourceCaches[I],this._layers,this._serializedLayers,A,f,_,C,!!this.map._showQueryGeometry))}return this.placement&&E.push(function(I,z,R,W,Y,oe,ee){const te={},ne=oe.queryRenderedSymbols(W),J=[];for(const ce of Object.keys(ne).map(Number))J.push(ee[ce]);J.sort(Yt);for(const ce of J){const ae=ce.featureIndex.lookupSymbolFeatures(ne[ce.bucketInstanceId],z,ce.bucketIndex,ce.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,I);for(const Se in ae){const be=te[Se]=te[Se]||[],me=ae[Se];me.sort((Ee,ve)=>{const Me=ce.featureSortOrder;if(Me){const Re=Me.indexOf(Ee.featureIndex);return Me.indexOf(ve.featureIndex)-Re}return ve.featureIndex-Ee.featureIndex});for(const Ee of me)be.push(Ee)}}for(const ce in te)te[ce].forEach(ae=>{const Se=ae.feature,be=R(I[ce]).getFeatureState(Se.layer["source-layer"],Se.id);Se.source=Se.layer.source,Se.layer["source-layer"]&&(Se.sourceLayer=Se.layer["source-layer"]),Se.state=be});return te}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),A.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(c,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const _=this._getSourceCaches(c);let b=[];for(const E of _)b=b.concat(rt(E,f));return b}addSourceType(c,f,_){return Eo.getSourceType(c)?_(new Error(`A source type called "${c}" already exists.`)):(Eo.setSourceType(c,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:c,url:f.workerSourceURL},_):_(null,null))}getLight(){return this.light.getLight()}setLight(c,f={}){this._checkLoaded();const _=this.light.getLight();let b=!1;for(const C in c)if(!y(c[C],_[C])){b=!0;break}if(!b)return;const E=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(c,f),this.light.updateTransitions(E)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(c,f=1){if(this._checkLoaded(),!c)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(f===1){if(typeof c.source=="object"){const _="terrain-dem-src";this.addSource(_,c.source),c=o.clone$1(c),c=o.extend(c,{source:_})}if(this._validate(o.validateTerrain,"terrain",c))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode)this._createTerrain(c,f);else{const _=this.terrain,b=_.get();for(const E of Object.keys(o.spec.terrain))!c.hasOwnProperty(E)&&o.spec.terrain[E].default&&(c[E]=o.spec.terrain[E].default);for(const E in c)if(!y(c[E],b[E])){_.set(c),this.stylesheet.terrain=c;const C=this._setTransitionParameters({duration:0});_.updateTransitions(C);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(c){const f=this.fog=new at(c,this.map.transform);this.stylesheet.fog=c;const _=this._setTransitionParameters({duration:0});f.updateTransitions(_)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const c of this.map._markers)c._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(c){if(this._checkLoaded(),!c)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,_=f.get();Object.keys(c).length===0&&f.set(c);for(const b in c)if(!y(c[b],_[b])){f.set(c),this.stylesheet.fog=c;const E=this._setTransitionParameters({duration:0});f.updateTransitions(E);break}}else this._createFog(c);this._markersNeedUpdate=!0}_setTransitionParameters(c){return{now:o.exported.now(),transition:o.extend(c,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const c=this._order.filter(_=>this.isLayerDraped(this._layers[_])),f=this._order.filter(_=>!this.isLayerDraped(this._layers[_]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...c),this._drapedFirstOrder.push(...f)}_createTerrain(c,f){const _=this.terrain=new ct(c,f);this.stylesheet.terrain=c,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const b=this._setTransitionParameters({duration:0});_.updateTransitions(b)}_force3DLayerUpdate(){for(const c in this._layers){const f=this._layers[c];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const c in this._layers){const f=this._layers[c];f.type==="symbol"&&this._updateLayer(f)}}_validate(c,f,_,b,E={}){return(!E||E.validate!==!1)&&rh(this,c.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:_,styleSpec:o.spec},b)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this._sourceCaches)this._sourceCaches[c].clearTiles(),this._sourceCaches[c].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(c){const f=this._getSourceCaches(c);for(const _ of f)_.clearTiles()}_reloadSource(c){const f=this._getSourceCaches(c);for(const _ of f)_.resume(),_.reload()}_updateSources(c){for(const f in this._sourceCaches)this._sourceCaches[f].update(c)}_generateCollisionBoxes(){for(const c in this._sourceCaches){const f=this._sourceCaches[c];f.resume(),f.reload()}}_updatePlacement(c,f,_,b,E=!1){let C=!1,A=!1;const I={};for(const z of this._order){const R=this._layers[z];if(R.type!=="symbol")continue;if(!I[R.source]){const Y=this._getLayerSourceCache(R);if(!Y)continue;I[R.source]=Y.getRenderableIds(!0).map(oe=>Y.getTileByID(oe)).sort((oe,ee)=>ee.tileID.overscaledZ-oe.tileID.overscaledZ||(oe.tileID.isLessThan(ee.tileID)?-1:1))}const W=this.crossTileSymbolIndex.addLayer(R,I[R.source],c.center.lng,c.projection);C=C||W}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),E=E||this._layerOrderChanged||_===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(E||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),c.zoom))&&(this.pauseablePlacement=new Zs(c,this._order,E,f,_,b,this.placement,this.fog&&c.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),A=!0),C&&this.pauseablePlacement.placement.setStale()),A||C)for(const z of this._order){const R=this._layers[z];R.type==="symbol"&&this.placement.updateLayerOpacities(R,I[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const c in this._sourceCaches)this._sourceCaches[c].releaseSymbolFadeTiles()}getImages(c,f,_){this.imageManager.getImages(f.icons,_),this._updateTilesForChangedImages();const b=E=>{E&&E.setDependencies(f.tileID.key,f.type,f.icons)};b(this._otherSourceCaches[f.source]),b(this._symbolSourceCaches[f.source])}getGlyphs(c,f,_){this.glyphManager.getGlyphs(f.stacks,_)}getResource(c,f,_){return o.makeRequest(f,_)}_getSourceCache(c){return this._otherSourceCaches[c]}_getLayerSourceCache(c){return c.type==="symbol"?this._symbolSourceCaches[c.source]:this._otherSourceCaches[c.source]}_getSourceCaches(c){const f=[];return this._otherSourceCaches[c]&&f.push(this._otherSourceCaches[c]),this._symbolSourceCaches[c]&&f.push(this._symbolSourceCaches[c]),f}_isSourceCacheLoaded(c){const f=this._getSourceCaches(c);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${c}'`))),!1):f.every(_=>_.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Eo.getSourceType=function(m){return we[m]},Eo.setSourceType=function(m,c){we[m]=c},Eo.registerForPluginStateChange=o.registerForPluginStateChange;var xf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,bf="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",wf=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,Ef=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,xl=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let oh={},Da={};const Xs=[];Ia(xf,Xs),Ia(wf,Xs),Ia(Ef,Xs),Ia(xl,Xs),oh=Ln("",wf),Da=Ln(xl,Ef);const Oc=Ln(`
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),sh=xf,ah=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var lh={background:Ln(`uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Ln(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Ln(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);
#else 
mat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;
#else
vec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Ln("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ln(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
vec3 pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Ln(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ln("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Ln("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Ln("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Ln(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Ln(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Ln(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Ln(`uniform lowp vec3 u_lightpos;varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
void main() {vec4 color=v_color;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Ln(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);
#else
vec3 p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Ln(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ln(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Ln(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
#ifdef RENDER_LINE_GRADIENT
highp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);
#else
vec4 out_color=color;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash_from
#pragma mapbox: define lowp vec4 dash_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash_from
#pragma mapbox: initialize lowp vec4 dash_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Ln(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Ln(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Ln(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Ln(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
vec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Ln(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
vec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Ln(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=u_skirt_height*u_skirt_height*wireframeOffset;
#endif
vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Ln(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Ln(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bf),skyboxGradient:Ln(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bf),skyboxCapture:Ln(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ln(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
vec4 color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;
#ifdef GLOBE_POLES
vec3 up_vector=normalize(globe_pos)*u_tile_up_scale;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Ln(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);
#ifdef PROJECTION_GLOBE_VIEW
float globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
float horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Ia(m,c){const f=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let _ of f)if(_=_.trim(),_[0]==="#"&&_.includes("if")&&!_.includes("endif")){_=_.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const b=_.split(" ");for(const E of b)c.includes(E)||c.push(E)}}function Ln(m,c){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,_=c.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),b={},E=[...Xs];return Ia(m,E),Ia(c,E),{fragmentSource:m=m.replace(f,(C,A,I,z,R)=>(b[R]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${R}
varying ${I} ${z} ${R};
#else
uniform ${I} ${z} u_${R};
#endif
`:`
#ifdef HAS_UNIFORM_u_${R}
    ${I} ${z} ${R} = u_${R};
#endif
`)),vertexSource:c=c.replace(f,(C,A,I,z,R)=>{const W=z==="float"?"vec2":"vec4",Y=R.match(/color/)?"color":W;return b[R]?A==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${I} ${W} a_${R};
varying ${I} ${z} ${R};
#else
uniform ${I} ${z} u_${R};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = a_${R};
#else
    ${I} ${z} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${R} = unpack_mix_${Y}(a_${R}, u_${R}_t);
#else
    ${I} ${z} ${R} = u_${R};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${R}
uniform lowp float u_${R}_t;
attribute ${I} ${W} a_${R};
#else
uniform ${I} ${z} u_${R};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${R}
    ${I} ${z} ${R} = a_${R};
#else
    ${I} ${z} ${R} = u_${R};
#endif
`:`
#ifndef HAS_UNIFORM_u_${R}
    ${I} ${z} ${R} = unpack_mix_${Y}(a_${R}, u_${R}_t);
#else
    ${I} ${z} ${R} = u_${R};
#endif
`}),staticAttributes:_,usedDefines:E}}class ch{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(c,f,_,b,E,C,A){this.context=c;let I=this.boundPaintVertexBuffers.length!==b.length;for(let R=0;!I&&R<b.length;R++)this.boundPaintVertexBuffers[R]!==b[R]&&(I=!0);let z=this.boundDynamicVertexBuffers.length!==A.length;for(let R=0;!z&&R<A.length;R++)this.boundDynamicVertexBuffers[R]!==A[R]&&(z=!0);if(!c.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==_||I||z||this.boundIndexBuffer!==E||this.boundVertexOffset!==C)this.freshBind(f,_,b,E,C,A);else{c.bindVertexArrayOES.set(this.vao);for(const R of A)R&&R.bind();E&&E.dynamicDraw&&E.bind()}}freshBind(c,f,_,b,E,C){let A;const I=c.numAttributes,z=this.context,R=z.gl;if(z.extVertexArrayObject)this.vao&&this.destroy(),this.vao=z.extVertexArrayObject.createVertexArrayOES(),z.bindVertexArrayOES.set(this.vao),A=0,this.boundProgram=c,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=_,this.boundIndexBuffer=b,this.boundVertexOffset=E,this.boundDynamicVertexBuffers=C;else{A=z.currentNumAttributes||0;for(let W=I;W<A;W++)R.disableVertexAttribArray(W)}f.enableAttributes(R,c),f.bind(),f.setVertexAttribPointers(R,c,E);for(const W of _)W.enableAttributes(R,c),W.bind(),W.setVertexAttribPointers(R,c,E);for(const W of C)W&&(W.enableAttributes(R,c),W.bind(),W.setVertexAttribPointers(R,c,E));b&&b.bind(),z.currentNumAttributes=I}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Sf(m,c){const f=Math.pow(2,c.canonical.z),_=c.canonical.y;return[new o.MercatorCoordinate(0,_/f).toLngLat().lat,new o.MercatorCoordinate(0,(_+1)/f).toLngLat().lat]}function Tf(m,c,f,_,b,E,C){const A=m.context,I=A.gl,z=f.fbo;if(!z)return;m.prepareDrawTile();const R=m.useProgram("hillshade");A.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get());const W=((te,ne,J,ce)=>{const ae=J.paint.get("hillshade-shadow-color"),Se=J.paint.get("hillshade-highlight-color"),be=J.paint.get("hillshade-accent-color");let me=J.paint.get("hillshade-illumination-direction")*(Math.PI/180);J.paint.get("hillshade-illumination-anchor")==="viewport"&&(me-=te.transform.angle);const Ee=!te.options.moving;return{u_matrix:ce||te.transform.calculateProjMatrix(ne.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:Sf(0,ne.tileID),u_light:[J.paint.get("hillshade-exaggeration"),me],u_shadow:ae,u_highlight:Se,u_accent:be}})(m,f,_,m.terrain?c.projMatrix:null);m.prepareDrawProgram(A,R,c.toUnwrapped());const{tileBoundsBuffer:Y,tileBoundsIndexBuffer:oe,tileBoundsSegments:ee}=m.getTileBoundsBuffers(f);R.draw(A,I.TRIANGLES,b,E,C,o.CullFaceMode.disabled,W,_.id,Y,oe,ee)}function Dn(m,c,f){if(!c.needsDEMTextureUpload)return;const _=m.context,b=_.gl;_.pixelStoreUnpackPremultiplyAlpha.set(!1),c.demTexture=c.demTexture||m.getTileTexture(f.stride);const E=f.getPixels();c.demTexture?c.demTexture.update(E,{premultiply:!1}):c.demTexture=new o.Texture(_,E,b.RGBA,{premultiply:!1}),c.needsDEMTextureUpload=!1}function bl(m,c,f,_,b,E){const C=m.context,A=C.gl;if(!c.dem)return;const I=c.dem;if(C.activeTexture.set(A.TEXTURE1),Dn(m,c,I),!c.demTexture)return;c.demTexture.bind(A.NEAREST,A.CLAMP_TO_EDGE);const z=I.dim;C.activeTexture.set(A.TEXTURE0);let R=c.fbo;if(!R){const ee=new o.Texture(C,{width:z,height:z,data:null},A.RGBA);ee.bind(A.LINEAR,A.CLAMP_TO_EDGE),R=c.fbo=C.createFramebuffer(z,z,!0),R.colorAttachment.set(ee.texture)}C.bindFramebuffer.set(R.framebuffer),C.viewport.set([0,0,z,z]);const{tileBoundsBuffer:W,tileBoundsIndexBuffer:Y,tileBoundsSegments:oe}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(C,A.TRIANGLES,_,b,E,o.CullFaceMode.disabled,((ee,te)=>{const ne=te.stride,J=o.create();return o.ortho(J,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(J,J,[0,-o.EXTENT,0]),{u_matrix:J,u_image:1,u_dimension:[ne,ne],u_zoom:ee.overscaledZ,u_unpack:te.unpackVector}})(c.tileID,I),f.id,W,Y,oe),c.needsHillshadePrepare=!1}const Lc=m=>({u_matrix:new o.UniformMatrix4f(m),u_image0:new o.Uniform1i(m),u_skirt_height:new o.Uniform1f(m)}),Cf=(m,c)=>({u_matrix:m,u_image0:0,u_skirt_height:c}),Mf=(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:c,u_normalize_matrix:Float32Array.from(_),u_merc_matrix:f,u_zoom_transition:b,u_merc_center:E,u_image0:0,u_frustum_tl:C,u_frustum_tr:A,u_frustum_br:I,u_frustum_bl:z,u_globe_pos:R,u_globe_radius:W,u_viewport:Y,u_grid_matrix:oe?Float32Array.from(oe):new Float32Array(9)});function kf(m,c){return m!=null&&c!=null&&!(!m.hasData()||!c.hasData())&&m.demTexture!=null&&c.demTexture!=null&&m.tileID.key!==c.tileID.key}const Ks=new class{constructor(){this.operations={}}newMorphing(m,c,f,_,b){if(m in this.operations){const E=this.operations[m];E.to.tileID.key!==f.tileID.key&&(E.queued=f)}else this.operations[m]={startTime:_,phase:0,duration:b,from:c,to:f,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const c=this.operations[m];return{from:c.from,to:c.to,phase:c.phase}}update(m){for(const c in this.operations){const f=this.operations[c];for(f.phase=(m-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,m)){delete this.operations[c];break}}}_nextOp(m,c){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=c,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},zc={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Fx(m,c){const f=1<<m.z;return!c&&(m.x===0||m.x===f-1)||m.y===0||m.y===f-1}const Af=m=>({u_matrix:m});function uh(m,c,f,_,b){if(b>0){const E=o.exported.now(),C=(E-m.timeAdded)/b,A=c?(E-c.timeAdded)/b:-1,I=f.getSource(),z=_.coveringZoomLevel({tileSize:I.tileSize,roundZoom:I.roundZoom}),R=!c||Math.abs(c.tileID.overscaledZ-z)>Math.abs(m.tileID.overscaledZ-z),W=R&&m.refreshedUponExpiration?1:o.clamp(R?C:1-A,0,1);return m.refreshedUponExpiration&&C>=1&&(m.refreshedUponExpiration=!1),c?{opacity:1,mix:1-W}:{opacity:W,mix:0}}return{opacity:1,mix:0}}class Df extends o.SourceCache{constructor(c){const f={type:"raster-dem",maxzoom:c.transform.maxZoom},_=new xt(Un(),null),b=Oe("mock-dem",f,_,c.style);super("mock-dem",b,!1),b.setEventedParent(this),this._sourceLoaded=!0}_loadTile(c,f){c.state="loaded",f(null)}}class If extends o.SourceCache{constructor(c){const f=Oe("proxy",{type:"geojson",maxzoom:c.transform.maxZoom},new xt(Un(),null),c.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=c,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(c,f,_){if(c.freezeTileCoverage)return;this.transform=c;const b=c.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((E,C)=>{if(E[C.key]="",!this._tiles[C.key]){const A=new o.Tile(C,this._source.tileSize*C.overscaleFactor(),c.tileZoom);A.state="loaded",this._tiles[C.key]=A}return E},{});for(const E in this._tiles)E in b||(this.freeFBO(E),this._tiles[E].unloadVectorData(),delete this._tiles[E])}freeFBO(c){const f=this.proxyCachedFBO[c];if(f!==void 0){const _=Object.values(f);this.renderCachePool.push(..._),delete this.proxyCachedFBO[c]}}deallocRenderCache(){this.renderCache.forEach(c=>c.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class hh extends o.OverscaledTileID{constructor(c,f,_){super(c.overscaledZ,c.wrap,c.canonical.z,c.canonical.x,c.canonical.y),this.proxyTileKey=f,this.projMatrix=_}}class Gg extends o.Elevation{constructor(c,f){super(),this.painter=c,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[_,b,E]=function(I){const z=new o.StructArrayLayout4i8,R=new o.StructArrayLayout3ui6,W=131;z.reserve(17161),R.reserve(33800);const Y=o.EXTENT/128,oe=o.EXTENT+Y/2,ee=oe+Y;for(let ne=-Y;ne<ee;ne+=Y)for(let J=-Y;J<ee;J+=Y){const ce=J<0||J>oe||ne<0||ne>oe?24575:0,ae=o.clamp(Math.round(J),0,o.EXTENT),Se=o.clamp(Math.round(ne),0,o.EXTENT);z.emplaceBack(ae+ce,Se,ae,Se)}const te=(ne,J)=>{const ce=J*W+ne;R.emplaceBack(ce+1,ce,ce+W),R.emplaceBack(ce+W,ce+W+1,ce+1)};for(let ne=1;ne<129;ne++)for(let J=1;J<129;J++)te(J,ne);return[0,129].forEach(ne=>{for(let J=0;J<130;J++)te(J,ne),te(ne,J)}),[z,R,32768]}(),C=c.context;this.gridBuffer=C.createVertexBuffer(_,o.boundsAttributes.members),this.gridIndexBuffer=C.createIndexBuffer(b),this.gridSegments=o.SegmentVector.simpleSegment(0,0,_.length,b.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,_.length,E),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new If(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,0,o.EXTENT,0,o.EXTENT,0,1);const A=C.gl;this._overlapStencilMode=new o.StencilMode({func:A.GEQUAL,mask:255},0,255,A.KEEP,A.KEEP,A.REPLACE),this._previousZoom=c.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Df(f.map)}set style(c){c.on("data",this._onStyleDataEvent.bind(this)),c.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=c,this._checkRenderCacheEfficiency()}update(c,f,_){if(c&&c.terrain){this._style!==c&&(this.style=c),this.enabled=!0;const b=c.terrain.properties;this.sourceCache=c.terrain.drapeRenderMode===0?this._mockSourceCache:c._getSourceCache(b.get("source")),this._exaggeration=b.get("exaggeration");const E=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const C=this.getScaledDemTileSize();this.sourceCache.update(f,C,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,E(),this._initializing=!0),E(),f.updateElevation(!_),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(c){this._findCoveringTileCache[c]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const c=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||c.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${c.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${c.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(c){c.coord&&c.dataType==="source"?this._clearRenderCacheForTile(c.sourceCacheId,c.coord):c.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const c in this._style._sourceCaches)this._style._sourceCaches[c].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(c=>c.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const c=2*this.proxySourceCache.getSource().tileSize;return[c,c]}set useVertexMorphing(c){this._useVertexMorphing=c}updateTileBinding(c){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,_=this.painter.transform;this._initializing&&(this._initializing=_._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(_.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const b=this.proxyCoords=f.getIds().map(I=>{const z=f.getTileByID(I).tileID;return z.projMatrix=_.calculateProjMatrix(z.toUnwrapped()),z});(function(I,z){const R=z.transform.pointCoordinate(z.transform.getCameraPoint()),W=new o.pointGeometry(R.x,R.y);I.sort((Y,oe)=>{if(oe.overscaledZ-Y.overscaledZ)return oe.overscaledZ-Y.overscaledZ;const ee=new o.pointGeometry(Y.canonical.x+(1<<Y.canonical.z)*Y.wrap,Y.canonical.y),te=new o.pointGeometry(oe.canonical.x+(1<<oe.canonical.z)*oe.wrap,oe.canonical.y),ne=W.mult(1<<Y.canonical.z);return ne.x-=.5,ne.y-=.5,ne.distSqr(ee)-ne.distSqr(te)})})(b,this.painter),this._previousZoom=_.zoom;const E=this.proxyToSource||{};this.proxyToSource={},b.forEach(I=>{this.proxyToSource[I.key]={}}),this.terrainTileForTile={};const C=this._style._sourceCaches;for(const I in C){const z=C[I];if(!z.used||(z!==this.sourceCache&&this.resetTileLookupCache(z.id),this._setupProxiedCoordsForOrtho(z,c[I],E),z.usedForTerrain))continue;const R=c[I];z.getSource().reparseOverscaled&&this._assignTerrainTiles(R)}this.proxiedCoords[f.id]=b.map(I=>new hh(I,I.key,this.orthoMatrix)),this._assignTerrainTiles(b),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(E),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const A={};this._visibleDemTiles=[];for(const I of this.proxyCoords){const z=this.terrainTileForTile[I.key];if(!z)continue;const R=z.tileID.key;R in A||(this._visibleDemTiles.push(z),A[R]=R)}}_assignTerrainTiles(c){this._initializing||c.forEach(f=>{if(this.terrainTileForTile[f.key])return;const _=this._findTileCoveringTileID(f,this.sourceCache);_&&(this.terrainTileForTile[f.key]=_)})}_prepareDEMTextures(){const c=this.painter.context,f=c.gl;for(const _ in this.terrainTileForTile){const b=this.terrainTileForTile[_],E=b.dem;!E||b.demTexture&&!b.needsDEMTextureUpload||(c.activeTexture.set(f.TEXTURE1),Dn(this.painter,b,E))}}_prepareDemTileUniforms(c,f,_,b){if(!f||f.demTexture==null)return!1;const E=c.tileID.canonical,C=Math.pow(2,f.tileID.canonical.z-E.z),A=b||"";return _[`u_dem_tl${A}`]=[E.x*C%1,E.y*C%1],_[`u_dem_scale${A}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const c=this.painter.context,f=c.gl;if(!this._emptyDepthBufferTexture){const _=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(c,_,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let c=0;const f=this._visibleDemTiles.reduce((_,b)=>{if(!b.dem)return _;const E=b.dem.tree.minimums[0];return E>0&&c++,_+E},0);return c?f/c:0}_updateEmptyDEMTexture(){const c=this.painter.context,f=c.gl;c.activeTexture.set(f.TEXTURE2);const _=this._getLoadedAreaMinimum(),b=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(_,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let E=this._emptyDEMTexture;return E?E.update(b,{premultiply:!1}):E=this._emptyDEMTexture=new o.Texture(c,b,f.RGBA,{premultiply:!1}),E}setupElevationDraw(c,f,_){const b=this.painter.context,E=b.gl,C=(A=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(A),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});var A;C.u_dem_size=this.sourceCache.getSource().tileSize,C.u_exaggeration=this.exaggeration();const I=this.painter.transform,z=I.projection,R=c.tileID.canonical;C.u_tile_tl_up=z.upVector(R,0,0),C.u_tile_tr_up=z.upVector(R,o.EXTENT,0),C.u_tile_br_up=z.upVector(R,o.EXTENT,o.EXTENT),C.u_tile_bl_up=z.upVector(R,0,o.EXTENT),C.u_tile_up_scale=_&&_.useDenormalizedUpVectorScale?o.GLOBE_METERS_TO_ECEF:z.upVectorScale(R,I.center.lat,I.worldSize).metersToTile;let W=null,Y=null,oe=1;if(_&&_.morphing&&this._useVertexMorphing){const ee=_.morphing.srcDemTile,te=_.morphing.dstDemTile;oe=_.morphing.phase,ee&&te&&(this._prepareDemTileUniforms(c,ee,C,"_prev")&&(Y=ee),this._prepareDemTileUniforms(c,te,C)&&(W=te))}if(Y&&W?(b.activeTexture.set(E.TEXTURE2),W.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE,E.NEAREST),b.activeTexture.set(E.TEXTURE4),Y.demTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE,E.NEAREST),C.u_dem_lerp=oe):(W=this.terrainTileForTile[c.tileID.key],b.activeTexture.set(E.TEXTURE2),(this._prepareDemTileUniforms(c,W,C)?W.demTexture:this.emptyDEMTexture).bind(E.NEAREST,E.CLAMP_TO_EDGE)),b.activeTexture.set(E.TEXTURE3),_&&_.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE),this._depthFBO&&(C.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(E.NEAREST,E.CLAMP_TO_EDGE),C.u_depth_size_inv=[1,1]),_&&_.useMeterToDem&&W){const ee=(1<<W.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=ee}_&&_.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=_.labelPlaneMatrixInv),f.setTerrainUniformValues(b,C)}renderToBackBuffer(c){const f=this.painter,_=this.painter.context;c.length!==0&&(_.bindFramebuffer.set(null),_.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(b,E,C,A,I){if(b.transform.projection.name==="globe")(function(z,R,W,Y,oe){const ee=z.context,te=ee.gl;let ne,J;const ce=z.options.showTerrainWireframe?2:0,ae=z.transform,Se=o.globeUseCustomAntiAliasing(z,ee,ae),be=(yt,$e)=>{if(J===yt)return;const lt=[zc[yt],"PROJECTION_GLOBE_VIEW"];Se&&lt.push("CUSTOM_ANTIALIASING"),$e&&lt.push(zc[ce]),ne=z.useProgram("globeRaster",null,lt),J=yt},me=z.colorModeForRenderPass(),Ee=new o.DepthMode(te.LEQUAL,o.DepthMode.ReadWrite,z.depthRangeFor3D);Ks.update(oe);const ve=o.calculateGlobeMercatorMatrix(ae),Me=[o.mercatorXfromLng(ae.center.lng),o.mercatorYfromLat(ae.center.lat)],Re=ce?[!1,!0]:[!1],ut=z.globeSharedBuffers,Pe=[ae.width*o.exported.devicePixelRatio,ae.height*o.exported.devicePixelRatio],Ye=Float32Array.from(ae.globeMatrix),et={useDenormalizedUpVectorScale:!0};if(Re.forEach(yt=>{J=-1;const $e=yt?te.LINES:te.TRIANGLES;for(const lt of Y){const Ze=W.getTile(lt),Tt=o.StencilMode.disabled,bt=R.prevTerrainTileForTile[lt.key],Bt=R.terrainTileForTile[lt.key];kf(bt,Bt)&&Ks.newMorphing(lt.key,bt,Bt,oe,250),ee.activeTexture.set(te.TEXTURE0),Ze.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE);const qt=Ks.getMorphValuesForProxy(lt.key),rn=qt?1:0;qt&&o.extend$1(et,{morphing:{srcDemTile:qt.from,dstDemTile:qt.to,phase:o.easeCubicInOut(qt.phase)}});const wn=o.tileCornersToBounds(lt.canonical),Nt=o.getLatitudinalLod(wn.getCenter().lat),an=o.getGridMatrix(lt.canonical,wn,Nt),In=o.globeNormalizeECEF(o.globeTileBounds(lt.canonical)),ui=Mf(ae.projMatrix,Ye,ve,In,o.globeToMercatorTransition(ae.zoom),Me,ae.frustumCorners.TL,ae.frustumCorners.TR,ae.frustumCorners.BR,ae.frustumCorners.BL,ae.globeCenterInViewSpace,ae.globeRadius,Pe,an);if(be(rn,yt),R.setupElevationDraw(Ze,ne,et),z.prepareDrawProgram(ee,ne,lt.toUnwrapped()),ut){const[ki,Hn,fr]=yt?ut.getWirefameBuffers(z.context,Nt):ut.getGridBuffers(Nt);ne.draw(ee,$e,Ee,Tt,me,o.CullFaceMode.backCCW,ui,"globe_raster",ki,Hn,fr)}}}),ut){const yt=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Se&&yt.push("CUSTOM_ANTIALIASING"),ne=z.useProgram("globeRaster",null,yt);for(const $e of Y){const{x:lt,y:Ze,z:Tt}=$e.canonical,bt=Ze===0,Bt=Ze===(1<<Tt)-1,[qt,rn,wn,Nt]=ut.getPoleBuffers(Tt);if(Nt&&(bt||Bt)){const an=W.getTile($e);ee.activeTexture.set(te.TEXTURE0),an.texture.bind(te.LINEAR,te.CLAMP_TO_EDGE);let In=o.globePoleMatrixForTile(Tt,lt,ae);const ui=o.globeNormalizeECEF(o.globeTileBounds($e.canonical)),ki=(Hn,fr)=>Hn.draw(ee,te.TRIANGLES,Ee,o.StencilMode.disabled,me,o.CullFaceMode.disabled,Mf(ae.projMatrix,In,In,ui,0,Me,ae.frustumCorners.TL,ae.frustumCorners.TR,ae.frustumCorners.BR,ae.frustumCorners.BL,ae.globeCenterInViewSpace,ae.globeRadius,Pe),"globe_pole_raster",fr,wn,Nt);R.setupElevationDraw(an,ne,et),z.prepareDrawProgram(ee,ne,$e.toUnwrapped()),bt&&ki(ne,qt),Bt&&(In=o.scale(o.create(),In,[1,-1,1]),ki(ne,rn))}}}})(b,E,C,A,I);else{const z=b.context,R=z.gl;let W,Y;const oe=b.options.showTerrainWireframe?2:0,ee=(ae,Se)=>{if(Y===ae)return;const be=[zc[ae]];Se&&be.push(zc[oe]),W=b.useProgram("terrainRaster",null,be),Y=ae},te=b.colorModeForRenderPass(),ne=new o.DepthMode(R.LEQUAL,o.DepthMode.ReadWrite,b.depthRangeFor3D);Ks.update(I);const J=b.transform,ce=6*Math.pow(1.5,22-J.zoom)*E.exaggeration();(oe?[!1,!0]:[!1]).forEach(ae=>{Y=-1;const Se=ae?R.LINES:R.TRIANGLES,[be,me]=ae?E.getWirefameBuffer():[E.gridIndexBuffer,E.gridSegments];for(const Ee of A){const ve=C.getTile(Ee),Me=o.StencilMode.disabled,Re=E.prevTerrainTileForTile[Ee.key],ut=E.terrainTileForTile[Ee.key];kf(Re,ut)&&Ks.newMorphing(Ee.key,Re,ut,I,250),z.activeTexture.set(R.TEXTURE0),ve.texture.bind(R.LINEAR,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST);const Pe=Ks.getMorphValuesForProxy(Ee.key),Ye=Pe?1:0;let et;Pe&&(et={morphing:{srcDemTile:Pe.from,dstDemTile:Pe.to,phase:o.easeCubicInOut(Pe.phase)}});const yt=Cf(Ee.projMatrix,Fx(Ee.canonical,J.renderWorldCopies)?ce/10:ce);ee(Ye,ae),E.setupElevationDraw(ve,W,et),b.prepareDrawProgram(z,W,Ee.toUnwrapped()),W.draw(z,Se,ne,Me,te,o.CullFaceMode.backCCW,yt,"terrain_raster",E.gridBuffer,be,me)}})}}(f,this,this.proxySourceCache,c,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),c.splice(0,c.length))}renderBatch(c){if(this._drapedRenderBatches.length===0)return c+1;this.renderingToTexture=!0;const f=this.painter,_=this.painter.context,b=this.proxySourceCache,E=this.proxiedCoords[b.id],C=this._drapedRenderBatches.shift(),A=[],I=f.style.order;let z=0;for(const R of E){const W=b.getTileByID(R.proxyTileKey),Y=b.proxyCachedFBO[R.key]?b.proxyCachedFBO[R.key][c]:void 0,oe=Y!==void 0?b.renderCache[Y]:this.pool[z++],ee=Y!==void 0;if(W.texture=oe.tex,ee&&!oe.dirty){A.push(W.tileID);continue}let te;_.bindFramebuffer.set(oe.fb.framebuffer),this.renderedToTile=!1,oe.dirty&&(_.clear({color:o.Color.transparent,stencil:0}),oe.dirty=!1);for(let ne=C.start;ne<=C.end;++ne){const J=f.style._layers[I[ne]];if(J.isHidden(f.transform.zoom))continue;const ce=f.style._getLayerSourceCache(J),ae=ce?this.proxyToSource[R.key][ce.id]:[R];if(!ae)continue;const Se=ae;_.viewport.set([0,0,oe.fb.width,oe.fb.height]),te!==(ce?ce.id:null)&&(this._setupStencil(oe,ae,J,ce),te=ce?ce.id:null),f.renderLayer(f,ce,J,Se)}this.renderedToTile?(oe.dirty=!0,A.push(W.tileID)):ee||--z,z===5&&(z=0,this.renderToBackBuffer(A))}return this.renderToBackBuffer(A),this.renderingToTexture=!1,_.bindFramebuffer.set(null),_.viewport.set([0,0,f.width,f.height]),C.end+1}postRender(){}renderCacheEfficiency(c){const f=c.order.length;if(f===0)return{efficiency:100};let _,b=0,E=0,C=!1;for(let A=0;A<f;++A){const I=c._layers[c.order[A]];this._style.isLayerDraped(I)?(C&&++b,++E):C||(C=!0,_=I.id)}return E===0?{efficiency:100}:{efficiency:100*(1-b/E),firstUndrapedLayer:_}}getMinElevationBelowMSL(){let c=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{c=Math.min(c,f.dem.tree.minimums[0])}),c===0?c:(c-30)*this._exaggeration}raycast(c,f,_){if(!this._visibleDemTiles)return null;const b=this._visibleDemTiles.filter(E=>E.dem).map(E=>{const C=E.tileID,A=1<<C.overscaledZ,{x:I,y:z}=C.canonical,R=I/A,W=(I+1)/A,Y=z/A,oe=(z+1)/A;return{minx:R,miny:Y,maxx:W,maxy:oe,t:E.dem.tree.raycastRoot(R,Y,W,oe,c,f,_),tile:E}});b.sort((E,C)=>(E.t!==null?E.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const E of b){if(E.t==null)return null;const C=E.tile.dem.tree.raycast(E.minx,E.miny,E.maxx,E.maxy,c,f,_);if(C!=null)return C}return null}_createFBO(){const c=this.painter.context,f=c.gl,_=this.drapeBufferSize;c.activeTexture.set(f.TEXTURE0);const b=new o.Texture(c,{width:_[0],height:_[1],data:null},f.RGBA);b.bind(f.LINEAR,f.CLAMP_TO_EDGE);const E=c.createFramebuffer(_[0],_[1],!1);return E.colorAttachment.set(b.texture),E.depthAttachment=new N(c,E.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=c.createRenderbuffer(c.gl.DEPTH_STENCIL,_[0],_[1]),this._stencilRef=0,E.depthAttachment.set(this._sharedDepthStencil),c.clear({stencil:0})):E.depthAttachment.set(this._sharedDepthStencil),c.extTextureFilterAnisotropic&&!c.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,c.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,c.extTextureFilterAnisotropicMax),{fb:E,tex:b,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const c in this._style._sourceCaches)if(this._style._sourceCaches[c].hasTransition())return!0;return this._style.order.some(c=>{const f=this._style._layers[c],_=f.isHidden(this.painter.transform.zoom),b=f.getCrossfadeParameters(),E=!!b&&b.t!==1,C=f.hasTransition();return f.type!=="custom"&&!_&&(E||C)})}_clearRasterFadeFromRenderCache(){let c=!1;for(const f in this._style._sourceCaches)if(this._style._sourceCaches[f]._source instanceof he){c=!0;break}if(c)for(let f=0;f<this._style.order.length;++f){const _=this._style._layers[this._style.order[f]],b=_.isHidden(this.painter.transform.zoom),E=this._style._getLayerSourceCache(_);if(_.type!=="raster"||b||!E)continue;const C=_.paint.get("raster-fade-duration");for(const A of this.proxyCoords){const I=this.proxyToSource[A.key][E.id];if(I)for(const z of I){const R=uh(E.getTile(z),E.findLoadedParent(z,0),E,this.painter.transform,C);(R.opacity!==1||R.mix!==0)&&this._clearRenderCacheForTile(E.id,z)}}}}_setupDrapedRenderBatches(){const c=this._style.order,f=c.length;if(f===0)return;const _=[];let b,E=0,C=this._style._layers[c[E]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++E<f;)C=this._style._layers[c[E]];for(;E<f;++E){const A=this._style._layers[c[E]];A.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(A)?b===void 0&&(b=E):b!==void 0&&(_.push({start:b,end:E-1}),b=void 0))}b!==void 0&&_.push({start:b,end:E-1}),this._drapedRenderBatches=_}_setupRenderCache(c){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const C=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let A=0;A<C.length;++A){const I=Object.values(C[A]);f.renderCachePool.push(...I)}}return}this._clearRasterFadeFromRenderCache();const _=this.proxyCoords,b=this._tilesDirty;for(let C=_.length-1;C>=0;C--){const A=_[C];if(f.getTileByID(A.key),f.proxyCachedFBO[A.key]!==void 0){const I=c[A.key],z=this.proxyToSource[A.key];let R=0;for(const W in z){const Y=z[W],oe=I[W];if(!oe||oe.length!==Y.length||Y.some((ee,te)=>ee!==oe[te]||b[W]&&b[W].hasOwnProperty(ee.key))){R=-1;break}++R}for(const W in f.proxyCachedFBO[A.key])f.renderCache[f.proxyCachedFBO[A.key][W]].dirty=R<0||R!==Object.values(I).length}}const E=[...this._drapedRenderBatches];E.sort((C,A)=>A.end-A.start-(C.end-C.start));for(const C of E)for(const A of _){if(f.proxyCachedFBO[A.key])continue;let I=f.renderCachePool.pop();I===void 0&&f.renderCache.length<50&&(I=f.renderCache.length,f.renderCache.push(this._createFBO())),I!==void 0&&(f.proxyCachedFBO[A.key]={},f.proxyCachedFBO[A.key][C.start]=I,f.renderCache[I].dirty=!0)}this._tilesDirty={}}_setupStencil(c,f,_,b){if(!b||!this._sourceTilesOverlap[b.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const E=this.painter.context,C=E.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let A;if(_.isTileClipped())A=f.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);A=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+A>255&&(E.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=A,this._overlapStencilMode.ref=this._stencilRef,_.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(c){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[c.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(c,f){const _=this.painter,b=this.painter.context,E=b.gl;_._tileClippingMaskIDs={},b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const C=_.useProgram("clippingMask");for(const A of c){const I=_._tileClippingMaskIDs[A.key]=--f;C.draw(b,E.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:E.ALWAYS,mask:0},I,255,E.KEEP,E.KEEP,E.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Af(A.projMatrix),"$clipping",_.tileExtentBuffer,_.quadTriangleIndexBuffer,_.tileExtentSegments)}}pointCoordinate(c){const f=this.painter.transform;if(c.x<0||c.x>f.width||c.y<0||c.y>f.height)return null;const _=[c.x,c.y,1,1];o.transformMat4$1(_,_,f.pixelMatrixInverse),o.scale$1(_,_,1/_[3]),_[0]/=f.worldSize,_[1]/=f.worldSize;const b=f._camera.position,E=o.mercatorZfromAltitude(1,f.center.lat),C=[b[0],b[1],b[2]/E,0],A=o.subtract([],_.slice(0,3),C);o.normalize(A,A);const I=this.raycast(C,A,this._exaggeration);return I!==null&&I?(o.scaleAndAdd(C,C,A,I),C[3]=C[2],C[2]*=E,C):null}drawDepth(){const c=this.painter,f=c.context,_=this.proxySourceCache,b=Math.ceil(c.width),E=Math.ceil(c.height);if(!this._depthFBO||this._depthFBO.width===b&&this._depthFBO.height===E||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const C=f.gl,A=f.createFramebuffer(b,E,!0);f.activeTexture.set(C.TEXTURE0);const I=new o.Texture(f,{width:b,height:E,data:null},C.RGBA);I.bind(C.NEAREST,C.CLAMP_TO_EDGE),A.colorAttachment.set(I.texture);const z=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,b,E);A.depthAttachment.set(z),this._depthFBO=A,this._depthTexture=I}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,b,E]),function(C,A,I,z){if(C.transform.projection.name==="globe")return;const R=C.context,W=R.gl;R.clear({depth:1});const Y=C.useProgram("terrainDepth"),oe=new o.DepthMode(W.LESS,o.DepthMode.ReadWrite,C.depthRangeFor3D);for(const ee of z){const te=I.getTile(ee),ne=Cf(ee.projMatrix,0);A.setupElevationDraw(te,Y),Y.draw(R,W.TRIANGLES,oe,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,ne,"terrain_depth",A.gridBuffer,A.gridIndexBuffer,A.gridNoSkirtSegments)}}(c,this,_,this.proxyCoords)}_setupProxiedCoordsForOrtho(c,f,_){if(c.getSource()instanceof De)return this._setupProxiedCoordsForImageSource(c,f,_);this._findCoveringTileCache[c.id]=this._findCoveringTileCache[c.id]||{};const b=this.proxiedCoords[c.id]=[],E=this.proxyCoords;for(let A=0;A<E.length;A++){const I=E[A],z=this._findTileCoveringTileID(I,c);if(z){const R=this._createProxiedId(I,z,_[I.key]&&_[I.key][c.id]);b.push(R),this.proxyToSource[I.key][c.id]=[R]}}let C=!1;for(let A=0;A<f.length;A++){const I=c.getTile(f[A]);if(!I||!I.hasData())continue;const z=this._findTileCoveringTileID(I.tileID,this.proxySourceCache);if(z&&z.tileID.canonical.z!==I.tileID.canonical.z){const R=this.proxyToSource[z.tileID.key][c.id],W=this._createProxiedId(z.tileID,I,_[z.tileID.key]&&_[z.tileID.key][c.id]);R?R.splice(R.length-1,0,W):this.proxyToSource[z.tileID.key][c.id]=[W],b.push(W),C=!0}}this._sourceTilesOverlap[c.id]=C}_setupProxiedCoordsForImageSource(c,f,_){if(!c.getSource().loaded())return;const b=this.proxiedCoords[c.id]=[],E=this.proxyCoords,C=c.getSource(),A=new o.pointGeometry(C.tileID.x,C.tileID.y)._div(1<<C.tileID.z),I=C.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((R,W)=>(R.min.x=Math.min(R.min.x,W.x-A.x),R.min.y=Math.min(R.min.y,W.y-A.y),R.max.x=Math.max(R.max.x,W.x-A.x),R.max.y=Math.max(R.max.y,W.y-A.y),R),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),z=(R,W)=>{const Y=R.wrap+R.canonical.x/(1<<R.canonical.z),oe=R.canonical.y/(1<<R.canonical.z),ee=o.EXTENT/(1<<R.canonical.z),te=W.wrap+W.canonical.x/(1<<W.canonical.z),ne=W.canonical.y/(1<<W.canonical.z);return Y+ee<te+I.min.x||Y>te+I.max.x||oe+ee<ne+I.min.y||oe>ne+I.max.y};for(let R=0;R<E.length;R++){const W=E[R];for(let Y=0;Y<f.length;Y++){const oe=c.getTile(f[Y]);if(!oe||!oe.hasData()||z(W,oe.tileID))continue;const ee=this._createProxiedId(W,oe,_[W.key]&&_[W.key][c.id]),te=this.proxyToSource[W.key][c.id];te?te.push(ee):this.proxyToSource[W.key][c.id]=[ee],b.push(ee)}}}_createProxiedId(c,f,_){let b=this.orthoMatrix;if(_){const E=_.find(C=>C.key===f.tileID.key);if(E)return E}if(f.tileID.key!==c.key){const E=c.canonical.z-f.tileID.canonical.z;let C,A,I;b=o.create();const z=f.tileID.wrap-c.wrap<<c.overscaledZ;E>0?(C=o.EXTENT>>E,A=C*((f.tileID.canonical.x<<E)-c.canonical.x+z),I=C*((f.tileID.canonical.y<<E)-c.canonical.y)):(C=o.EXTENT<<-E,A=o.EXTENT*(f.tileID.canonical.x-(c.canonical.x+z<<-E)),I=o.EXTENT*(f.tileID.canonical.y-(c.canonical.y<<-E))),o.ortho(b,0,C,0,C,0,1),o.translate(b,b,[A,I,0])}return new hh(f.tileID,c.key,b)}_findTileCoveringTileID(c,f){let _=f.getTile(c);if(_&&_.hasData())return _;const b=this._findCoveringTileCache[f.id],E=b[c.key];if(_=E?f.getTileByID(E):null,_&&_.hasData()||E===null)return _;let C=_?_.tileID:c,A=C.overscaledZ;const I=f.getSource().minzoom,z=[];if(!E){const W=f.getSource().maxzoom;if(c.canonical.z>=W){const Y=c.canonical.z-W;f.getSource().reparseOverscaled?(A=Math.max(c.canonical.z+2,f.transform.tileZoom),C=new o.OverscaledTileID(A,c.wrap,W,c.canonical.x>>Y,c.canonical.y>>Y)):Y!==0&&(A=W,C=new o.OverscaledTileID(A,c.wrap,W,c.canonical.x>>Y,c.canonical.y>>Y))}C.key!==c.key&&(z.push(C.key),_=f.getTile(C))}const R=W=>{z.forEach(Y=>{b[Y]=W}),z.length=0};for(A-=1;A>=I&&(!_||!_.hasData());A--){_&&R(_.tileID.key);const W=C.calculateScaledKey(A);if(_=f.getTileByID(W),_&&_.hasData())break;const Y=b[W];if(Y===null)break;Y===void 0?z.push(W):_=f.getTileByID(Y)}return R(_?_.tileID.key:null),_&&_.hasData()?_:null}findDEMTileFor(c){return this.enabled?this._findTileCoveringTileID(c,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(c,f){let _=this._tilesDirty[c];_||(_=this._tilesDirty[c]={}),_[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const c=function(f){let _=0;const b=new o.StructArrayLayout2ui4,E=131;for(let C=1;C<129;C++){for(let A=1;A<129;A++)_=C*E+A,b.emplaceBack(_,_+1),b.emplaceBack(_,_+E),b.emplaceBack(_+1,_+E),C===128&&b.emplaceBack(_+E,_+E+1);b.emplaceBack(_+1,_+1+E)}return b}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(c),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,c.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Pf{static cacheKey(c,f,_,b){let E=`${f}${b?b.cacheKey:""}`;for(const C of _)c.usedDefines.includes(C)&&(E+=`/${C}`);return E}constructor(c,f,_,b,E,C){const A=c.gl;this.program=A.createProgram();const I=function(ne){const J=[];for(let ce=0;ce<ne.length;ce++){if(ne[ce]===null)continue;const ae=ne[ce].split(" ");J.push(ae.pop())}return J}(_.staticAttributes),z=b?b.getBinderAttributes():[],R=I.concat(z);let W=b?b.defines():[];W=W.concat(C.map(ne=>`#define ${ne}`));const Y=W.concat(c.extStandardDerivatives?`#extension GL_OES_standard_derivatives : enable
`.concat(ah):ah,ah,sh,Oc.fragmentSource,Da.fragmentSource,_.fragmentSource).join(`
`),oe=W.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,sh,Oc.vertexSource,Da.vertexSource,oh.vertexSource,_.vertexSource).join(`
`),ee=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(ee,Y),A.compileShader(ee),A.attachShader(this.program,ee);const te=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())this.failedToCreate=!0;else{A.shaderSource(te,oe),A.compileShader(te),A.attachShader(this.program,te),this.attributes={},this.numAttributes=R.length;for(let ne=0;ne<this.numAttributes;ne++)R[ne]&&(A.bindAttribLocation(this.program,ne,R[ne]),this.attributes[R[ne]]=ne);A.linkProgram(this.program),A.deleteShader(te),A.deleteShader(ee),this.fixedUniforms=E(c),this.binderUniforms=b?b.getUniforms(c):[],C.indexOf("TERRAIN")!==-1&&(this.terrainUniforms=(ne=>({u_dem:new o.Uniform1i(ne),u_dem_prev:new o.Uniform1i(ne),u_dem_unpack:new o.Uniform4f(ne),u_dem_tl:new o.Uniform2f(ne),u_dem_scale:new o.Uniform1f(ne),u_dem_tl_prev:new o.Uniform2f(ne),u_dem_scale_prev:new o.Uniform1f(ne),u_dem_size:new o.Uniform1f(ne),u_dem_lerp:new o.Uniform1f(ne),u_exaggeration:new o.Uniform1f(ne),u_depth:new o.Uniform1i(ne),u_depth_size_inv:new o.Uniform2f(ne),u_meter_to_dem:new o.Uniform1f(ne),u_label_plane_matrix_inv:new o.UniformMatrix4f(ne),u_tile_tl_up:new o.Uniform3f(ne),u_tile_tr_up:new o.Uniform3f(ne),u_tile_br_up:new o.Uniform3f(ne),u_tile_bl_up:new o.Uniform3f(ne),u_tile_up_scale:new o.Uniform1f(ne)}))(c)),C.indexOf("FOG")!==-1&&(this.fogUniforms=(ne=>({u_fog_matrix:new o.UniformMatrix4f(ne),u_fog_range:new o.Uniform2f(ne),u_fog_color:new o.Uniform4f(ne),u_fog_horizon_blend:new o.Uniform1f(ne),u_fog_temporal_offset:new o.Uniform1f(ne),u_frustum_tl:new o.Uniform3f(ne),u_frustum_tr:new o.Uniform3f(ne),u_frustum_br:new o.Uniform3f(ne),u_frustum_bl:new o.Uniform3f(ne),u_globe_pos:new o.Uniform3f(ne),u_globe_radius:new o.Uniform1f(ne),u_globe_transition:new o.Uniform1f(ne),u_is_globe:new o.Uniform1i(ne),u_viewport:new o.Uniform2f(ne)}))(c))}}setTerrainUniformValues(c,f){if(!this.terrainUniforms)return;const _=this.terrainUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)_[b].set(this.program,b,f[b])}}setFogUniformValues(c,f){if(!this.fogUniforms)return;const _=this.fogUniforms;if(!this.failedToCreate){c.program.set(this.program);for(const b in f)_[b].set(this.program,b,f[b])}}draw(c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te){const ne=c.gl;if(this.failedToCreate)return;c.program.set(this.program),c.setDepthMode(_),c.setStencilMode(b),c.setColorMode(E),c.setCullFace(C);for(const ce of Object.keys(this.fixedUniforms))this.fixedUniforms[ce].set(this.program,ce,A[ce]);ee&&ee.setUniforms(this.program,c,this.binderUniforms,Y,{zoom:oe});const J={[ne.LINES]:2,[ne.TRIANGLES]:3,[ne.LINE_STRIP]:1}[f];for(const ce of W.get()){const ae=ce.vaos||(ce.vaos={});(ae[I]||(ae[I]=new ch)).bind(c,this,z,ee?ee.getPaintVertexBuffers():[],R,ce.vertexOffset,te||[]),ne.drawElements(f,ce.primitiveLength*J,ne.UNSIGNED_SHORT,ce.primitiveOffset*J*2)}}}function Wg(m,c,f){const _=1/Vt(f,1,c.transform.tileZoom),b=Math.pow(2,f.tileID.overscaledZ),E=f.tileSize*Math.pow(2,c.transform.tileZoom)/b,C=E*(f.tileID.canonical.x+f.tileID.wrap*b),A=E*f.tileID.canonical.y;return{u_image:0,u_texsize:f.imageAtlasTexture.size,u_scale:[_,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[C>>16,A>>16],u_pixel_coord_lower:[65535&C,65535&A]}}const Rc=o.create(),wl=(m,c,f,_,b,E,C,A,I,z,R)=>{const W=c.style.light,Y=W.properties.get("position"),oe=[Y.x,Y.y,Y.z],ee=o.create$1();W.properties.get("anchor")==="viewport"&&(o.fromRotation(ee,-c.transform.angle),o.transformMat3(oe,oe,ee));const te=W.properties.get("color"),ne=c.transform,J={u_matrix:m,u_lightpos:oe,u_lightintensity:W.properties.get("intensity"),u_lightcolor:[te.r,te.g,te.b],u_vertical_gradient:+f,u_opacity:_,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Rc,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:b,u_edge_radius:E};return ne.projection.name==="globe"&&(J.u_tile_id=[C.canonical.x,C.canonical.y,1<<C.canonical.z],J.u_zoom_transition=I,J.u_inv_rot_matrix=R,J.u_merc_center=z,J.u_up_dir=ne.projection.upVector(new o.CanonicalTileID(0,0,0),z[0]*o.EXTENT,z[1]*o.EXTENT),J.u_height_lift=A),J},Hg=(m,c,f,_,b,E,C,A,I,z,R,W,Y)=>{const oe=wl(m,c,f,_,b,E,C,z,R,W,Y),ee={u_height_factor:-Math.pow(2,C.overscaledZ)/I.tileSize/8};return o.extend(oe,Wg(A,c,I),ee)},Fc=m=>({u_matrix:m}),dh=(m,c,f,_)=>o.extend(Fc(m),Wg(f,c,_)),is=(m,c)=>({u_matrix:m,u_world:c}),Of=(m,c,f,_,b)=>o.extend(dh(m,c,f,_),{u_world:b}),qg=o.create(),Lf=(m,c,f,_,b,E)=>{const C=m.transform,A=C.projection.name==="globe";let I;if(E.paint.get("circle-pitch-alignment")==="map")if(A){const R=o.globePixelsToTileUnits(C.zoom,c.canonical)*C._pixelsPerMercatorPixel;I=Float32Array.from([R,0,0,R])}else I=C.calculatePixelsToTileUnitsMatrix(f);else I=new Float32Array([C.pixelsToGLUnits[0],0,0,C.pixelsToGLUnits[1]]);const z={u_camera_to_center_distance:C.cameraToCenterDistance,u_matrix:m.translatePosMatrix(c.projMatrix,f,E.paint.get("circle-translate"),E.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:I,u_inv_rot_matrix:qg,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(A){z.u_inv_rot_matrix=_,z.u_merc_center=b,z.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],z.u_zoom_transition=o.globeToMercatorTransition(C.zoom);const R=b[0]*o.EXTENT,W=b[1]*o.EXTENT;z.u_up_dir=C.projection.upVector(new o.CanonicalTileID(0,0,0),R,W)}return z},Yg=m=>{const c=[];return m.paint.get("circle-pitch-alignment")==="map"&&c.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&c.push("SCALE_WITH_MAP"),c},zf=(m,c,f,_)=>{const b=o.EXTENT/f.tileSize;return{u_matrix:m,u_camera_to_center_distance:c.getCameraToCenterDistance(_),u_extrude_scale:[c.pixelsToGLUnits[0]/b,c.pixelsToGLUnits[1]/b]}},Zg=(m,c,f=1)=>({u_matrix:m,u_color:c,u_overlay:0,u_overlay_scale:f}),Rf=o.create(),Bx=(m,c,f,_,b,E,C)=>{const A=m.transform,I=A.projection.name==="globe",z=I?o.globePixelsToTileUnits(A.zoom,c.canonical)*A._pixelsPerMercatorPixel:Vt(f,1,E),R={u_matrix:c.projMatrix,u_extrude_scale:z,u_intensity:C,u_inv_rot_matrix:Rf,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){R.u_inv_rot_matrix=_,R.u_merc_center=b,R.u_tile_id=[c.canonical.x,c.canonical.y,1<<c.canonical.z],R.u_zoom_transition=o.globeToMercatorTransition(A.zoom);const W=b[0]*o.EXTENT,Y=b[1]*o.EXTENT;R.u_up_dir=A.projection.upVector(new o.CanonicalTileID(0,0,0),W,Y)}return R},fh=(m,c,f,_,b,E,C,A)=>{const I=m.transform,z=I.calculatePixelsToTileUnitsMatrix(c),R={u_matrix:Xg(m,c,f,b),u_pixels_to_tile_units:z,u_device_pixel_ratio:C,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:E,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:A};if(mh(f)){const W=ph(c,m.transform);R.u_texsize=c.lineAtlasTexture.size,R.u_scale=[W,_.fromScale,_.toScale],R.u_mix=_.t}return R},Nx=(m,c,f,_,b,E)=>{const C=m.transform,A=ph(c,C);return{u_matrix:Xg(m,c,f,b),u_texsize:c.imageAtlasTexture.size,u_pixels_to_tile_units:C.calculatePixelsToTileUnitsMatrix(c),u_device_pixel_ratio:E,u_image:0,u_scale:[A,_.fromScale,_.toScale],u_fade:_.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ph(m,c){return 1/Vt(m,1,c.tileZoom)}function Xg(m,c,f,_){return m.translatePosMatrix(_||c.tileID.projMatrix,c,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function mh(m){const c=m.paint.get("line-dasharray").value;return c.value||c.kind!=="constant"}const Vx=(m,c,f,_,b,E)=>{return{u_matrix:m,u_tl_parent:c,u_scale_parent:f,u_fade_t:_.mix,u_opacity:_.opacity*b.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:b.paint.get("raster-brightness-min"),u_brightness_high:b.paint.get("raster-brightness-max"),u_saturation_factor:(A=b.paint.get("raster-saturation"),A>0?1-1/(1.001-A):-A),u_contrast_factor:(C=b.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:gh(b.paint.get("raster-hue-rotate")),u_perspective_transform:E};var C,A};function gh(m){m*=Math.PI/180;const c=Math.sin(m),f=Math.cos(m);return[(2*f+1)/3,(-Math.sqrt(3)*c-f+1)/3,(Math.sqrt(3)*c-f+1)/3]}const Kg=o.create(),Ff=(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te)=>{const ne=b.transform,J={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:c?c.uSizeT:0,u_size:c?c.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:ne.width/ne.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:C,u_coord_matrix:A,u_is_text:+I,u_pitch_with_map:+_,u_texsize:z,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Kg,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Kg,u_up_vector:[0,-1,0]};return te.name==="globe"&&(J.u_tile_id=[R.canonical.x,R.canonical.y,1<<R.canonical.z],J.u_zoom_transition=W,J.u_inv_rot_matrix=oe,J.u_merc_center=Y,J.u_camera_forward=ne._camera.forward(),J.u_ecef_origin=o.globeECEFOrigin(ne.globeMatrix,R.toUnwrapped()),J.u_tile_matrix=Float32Array.from(ne.globeMatrix),J.u_up_vector=ee),J},Bf=(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te,ne)=>o.extend(Ff(m,c,f,_,b,E,C,A,I,z,W,Y,oe,ee,te,ne),{u_gamma_scale:_?b.transform.cameraToCenterDistance*Math.cos(b.terrain?0:b.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+R}),El=(m,c,f,_,b,E,C,A,I,z,R,W,Y,oe,ee,te)=>o.extend(Bf(m,c,f,_,b,E,C,A,!0,I,!0,R,W,Y,oe,ee,te),{u_texsize_icon:z,u_texture_icon:1}),jx=(m,c,f)=>({u_matrix:m,u_opacity:c,u_color:f}),Ux=(m,c,f,_,b,E)=>o.extend(function(C,A,I,z){const R=I.imageManager.getPattern(C.from.toString()),W=I.imageManager.getPattern(C.to.toString()),{width:Y,height:oe}=I.imageManager.getPixelSize(),ee=Math.pow(2,z.tileID.overscaledZ),te=z.tileSize*Math.pow(2,I.transform.tileZoom)/ee,ne=te*(z.tileID.canonical.x+z.tileID.wrap*ee),J=te*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:W.tl,u_pattern_br_b:W.br,u_texsize:[Y,oe],u_mix:A.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:W.displaySize,u_scale_a:A.fromScale,u_scale_b:A.toScale,u_tile_units_to_pixels:1/Vt(z,1,I.transform.tileZoom),u_pixel_coord_upper:[ne>>16,J>>16],u_pixel_coord_lower:[65535&ne,65535&J]}}(_,E,f,b),{u_matrix:m,u_opacity:c}),$x={fillExtrusion:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_height_factor:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_scale:new o.Uniform3f(m),u_fade:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m)}),fill:m=>({u_matrix:new o.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_scale:new o.Uniform3f(m),u_fade:new o.Uniform1f(m)}),fillOutline:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_scale:new o.Uniform3f(m),u_fade:new o.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),collisionBox:m=>({u_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new o.UniformMatrix4f(m),u_inv_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_viewport_size:new o.Uniform2f(m)}),debug:m=>({u_color:new o.UniformColor(m),u_matrix:new o.UniformMatrix4f(m),u_overlay:new o.Uniform1i(m),u_overlay_scale:new o.Uniform1f(m)}),clippingMask:m=>({u_matrix:new o.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new o.Uniform1f(m),u_intensity:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),heatmapTexture:m=>({u_image:new o.Uniform1i(m),u_color_ramp:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m)}),hillshade:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_latrange:new o.Uniform2f(m),u_light:new o.Uniform2f(m),u_shadow:new o.UniformColor(m),u_highlight:new o.UniformColor(m),u_accent:new o.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_dimension:new o.Uniform2f(m),u_zoom:new o.Uniform1f(m),u_unpack:new o.Uniform4f(m)}),line:m=>({u_matrix:new o.UniformMatrix4f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_units_to_pixels:new o.Uniform2f(m),u_dash_image:new o.Uniform1i(m),u_gradient_image:new o.Uniform1i(m),u_image_height:new o.Uniform1f(m),u_texsize:new o.Uniform2f(m),u_scale:new o.Uniform3f(m),u_mix:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m),u_trim_offset:new o.Uniform2f(m)}),linePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_texsize:new o.Uniform2f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_units_to_pixels:new o.Uniform2f(m),u_scale:new o.Uniform3f(m),u_fade:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m)}),raster:m=>({u_matrix:new o.UniformMatrix4f(m),u_tl_parent:new o.Uniform2f(m),u_scale_parent:new o.Uniform1f(m),u_fade_t:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_image0:new o.Uniform1i(m),u_image1:new o.Uniform1i(m),u_brightness_low:new o.Uniform1f(m),u_brightness_high:new o.Uniform1f(m),u_saturation_factor:new o.Uniform1f(m),u_contrast_factor:new o.Uniform1f(m),u_spin_weights:new o.Uniform3f(m),u_perspective_transform:new o.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_texture:new o.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_is_halo:new o.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texsize_icon:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_texture_icon:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_is_halo:new o.Uniform1i(m)}),background:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_color:new o.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_pattern_tl_a:new o.Uniform2f(m),u_pattern_br_a:new o.Uniform2f(m),u_pattern_tl_b:new o.Uniform2f(m),u_pattern_br_b:new o.Uniform2f(m),u_texsize:new o.Uniform2f(m),u_mix:new o.Uniform1f(m),u_pattern_size_a:new o.Uniform2f(m),u_pattern_size_b:new o.Uniform2f(m),u_scale_a:new o.Uniform1f(m),u_scale_b:new o.Uniform1f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),terrainRaster:Lc,terrainDepth:Lc,skybox:m=>({u_matrix:new o.UniformMatrix4f(m),u_sun_direction:new o.Uniform3f(m),u_cubemap:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new o.UniformMatrix4f(m),u_color_ramp:new o.Uniform1i(m),u_center_direction:new o.Uniform3f(m),u_radius:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new o.UniformMatrix3f(m),u_sun_direction:new o.Uniform3f(m),u_sun_intensity:new o.Uniform1f(m),u_color_tint_r:new o.Uniform4f(m),u_color_tint_m:new o.Uniform4f(m),u_luminance:new o.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new o.UniformMatrix4f(m),u_globe_matrix:new o.UniformMatrix4f(m),u_normalize_matrix:new o.UniformMatrix4f(m),u_merc_matrix:new o.UniformMatrix4f(m),u_zoom_transition:new o.Uniform1f(m),u_merc_center:new o.Uniform2f(m),u_image0:new o.Uniform1i(m),u_grid_matrix:new o.UniformMatrix3f(m),u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_globe_pos:new o.Uniform3f(m),u_globe_radius:new o.Uniform1f(m),u_viewport:new o.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_horizon:new o.Uniform1f(m),u_transition:new o.Uniform1f(m),u_fadeout_range:new o.Uniform1f(m),u_color:new o.Uniform4f(m),u_high_color:new o.Uniform4f(m),u_space_color:new o.Uniform4f(m),u_star_intensity:new o.Uniform1f(m),u_star_density:new o.Uniform1f(m),u_star_size:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m),u_horizon_angle:new o.Uniform1f(m),u_rotation_matrix:new o.UniformMatrix4f(m)})};let _h;function Jg(m,c,f,_,b,E,C){const A=m.context,I=A.gl,z=m.transform,R=m.useProgram("collisionBox"),W=[];let Y=0,oe=0;for(let Se=0;Se<_.length;Se++){const be=_[Se],me=c.getTile(be),Ee=me.getBucket(f);if(!Ee)continue;const ve=$r(be,Ee,z);let Me=ve;b[0]===0&&b[1]===0||(Me=m.translatePosMatrix(ve,me,b,E));const Re=C?Ee.textCollisionBox:Ee.iconCollisionBox,ut=Ee.collisionCircleArray;if(ut.length>0){const Pe=o.create(),Ye=Me;o.mul(Pe,Ee.placementInvProjMatrix,z.glCoordMatrix),o.mul(Pe,Pe,Ee.placementViewportMatrix),W.push({circleArray:ut,circleOffset:oe,transform:Ye,invTransform:Pe,projection:Ee.getProjection()}),Y+=ut.length/4,oe=Y}Re&&(m.terrain&&m.terrain.setupElevationDraw(me,R),R.draw(A,I.LINES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,zf(Me,z,me,Ee.getProjection()),f.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,null,z.zoom,null,[Re.collisionVertexBuffer,Re.collisionVertexBufferExt]))}if(!C||!W.length)return;const ee=m.useProgram("collisionCircle"),te=new o.StructArrayLayout2f1f2i16;te.resize(4*Y),te._trim();let ne=0;for(const Se of W)for(let be=0;be<Se.circleArray.length/4;be++){const me=4*be,Ee=Se.circleArray[me+0],ve=Se.circleArray[me+1],Me=Se.circleArray[me+2],Re=Se.circleArray[me+3];te.emplace(ne++,Ee,ve,Me,Re,0),te.emplace(ne++,Ee,ve,Me,Re,1),te.emplace(ne++,Ee,ve,Me,Re,2),te.emplace(ne++,Ee,ve,Me,Re,3)}(!_h||_h.length<2*Y)&&(_h=function(Se){const be=2*Se,me=new o.StructArrayLayout3ui6;me.resize(be),me._trim();for(let Ee=0;Ee<be;Ee++){const ve=6*Ee;me.uint16[ve+0]=4*Ee+0,me.uint16[ve+1]=4*Ee+1,me.uint16[ve+2]=4*Ee+2,me.uint16[ve+3]=4*Ee+2,me.uint16[ve+4]=4*Ee+3,me.uint16[ve+5]=4*Ee+0}return me}(Y));const J=A.createIndexBuffer(_h,!0),ce=A.createVertexBuffer(te,o.collisionCircleLayout.members,!0);for(const Se of W){const be={u_matrix:Se.transform,u_inv_matrix:Se.invTransform,u_camera_to_center_distance:(ae=z).getCameraToCenterDistance(Se.projection),u_viewport_size:[ae.width,ae.height]};ee.draw(A,I.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,be,f.id,ce,J,o.SegmentVector.simpleSegment(0,2*Se.circleOffset,Se.circleArray.length,Se.circleArray.length/2),null,z.zoom)}var ae;ce.destroy(),J.destroy()}const Qg=o.create();function Nf(m,c,f,_,b,E){const{horizontalAlign:C,verticalAlign:A}=o.getAnchorAlignment(m),I=-(C-.5)*c,z=-(A-.5)*f,R=o.evaluateVariableOffset(m,_);return new o.pointGeometry((I/b+R[0])*E,(z/b+R[1])*E)}function Vf(m,c,f,_,b,E,C,A,I,z,R){const W=m.text.placedSymbolArray,Y=m.text.dynamicLayoutVertexArray,oe=m.icon.dynamicLayoutVertexArray,ee={},te=Gr(A,m.getProjection(),E),ne=E.elevation,J=m.getProjection().upVectorScale(A.canonical,E.center.lat,E.worldSize);Y.clear();for(let ce=0;ce<W.length;ce++){const ae=W.get(ce),Se=m.allowVerticalPlacement&&!ae.placedOrientation,be=ae.hidden||!ae.crossTileID||Se?null:_[ae.crossTileID];if(be){const me=new o.pointGeometry(ae.tileAnchorX,ae.tileAnchorY),Ee=m.getProjection().upVector(A.canonical,me.x,me.y),ve=ne?ne.getAtTileOffset(A,me.x,me.y):0,Me=pn([ae.projectedAnchorX+ve*Ee[0]*J.metersToTile,ae.projectedAnchorY+ve*Ee[1]*J.metersToTile,ae.projectedAnchorZ+ve*Ee[2]*J.metersToTile],f?te:C),Re=Tc(E.getCameraToCenterDistance(m.getProjection()),Me.signedDistanceFromCamera);let ut=b.evaluateSizeForFeature(m.textSizeData,z,ae)*Re/o.ONE_EM;f&&(ut*=m.tilePixelRatio/I);const{width:Pe,height:Ye,anchor:et,textOffset:yt,textScale:$e}=be,lt=Nf(et,Pe,Ye,yt,$e,ut);let Ze;if(f){const bt=me.add(lt),{x:Bt,y:qt,z:rn}=m.getProjection().projectTilePoint(bt.x,bt.y,A.canonical);Ze=pn([Bt+ve*Ee[0]*J.metersToTile,qt+ve*Ee[1]*J.metersToTile,rn+ve*Ee[2]*J.metersToTile],C).point}else{const bt=c?lt.rotate(-E.angle):lt;Ze=[Me.point[0]+bt.x,Me.point[1]+bt.y,0]}const Tt=m.allowVerticalPlacement&&ae.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let bt=0;bt<ae.numGlyphs;bt++)o.addDynamicAttributes(Y,Ze[0],Ze[1],Ze[2],Tt);R&&ae.associatedIconIndex>=0&&(ee[ae.associatedIconIndex]={shiftedAnchor:Ze,angle:Tt})}else qs(ae.numGlyphs,Y)}if(R){oe.clear();const ce=m.icon.placedSymbolArray;for(let ae=0;ae<ce.length;ae++){const Se=ce.get(ae);if(Se.hidden)qs(Se.numGlyphs,oe);else{const be=ee[ae];if(be)for(let me=0;me<Se.numGlyphs;me++)o.addDynamicAttributes(oe,be.shiftedAnchor[0],be.shiftedAnchor[1],be.shiftedAnchor[2],be.angle);else qs(Se.numGlyphs,oe)}}m.icon.dynamicLayoutVertexBuffer.updateData(oe)}m.text.dynamicLayoutVertexBuffer.updateData(Y)}function e_(m,c,f){return f.iconsInText&&c?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function jf(m,c,f,_,b,E,C,A,I,z,R,W){const Y=m.context,oe=Y.gl,ee=m.transform,te=A==="map",ne=I==="map",J=te&&f.layout.get("symbol-placement")!=="point",ce=te&&!ne&&!J,ae=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Se=!1;const be=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),me=[o.mercatorXfromLng(ee.center.lng),o.mercatorYfromLat(ee.center.lat)],Ee=f.layout.get("text-variable-anchor"),ve=ee.projection.name==="globe",Me=[],Re=[0,-1,0];let ut=Re;!ve&&!ee.mercatorFromTransition||te||(ut=function(Pe){const Ye=Pe._camera.getWorldToCamera(Pe.worldSize,1),et=o.multiply([],Ye,Pe.globeMatrix);o.invert(et,et);const yt=[0,0,0],$e=[0,1,0,0];return o.transformMat4$1($e,$e,et),yt[0]=$e[0],yt[1]=$e[1],yt[2]=$e[2],o.normalize(yt,yt),yt}(ee));for(const Pe of _){const Ye=c.getTile(Pe),et=Ye.getBucket(f);if(!et||et.projection.name==="mercator"&&ve)continue;const yt=b?et.text:et.icon;if(!yt||et.fullyClipped||!yt.segments.get().length)continue;const $e=yt.programConfigurations.get(f.id),lt=b||et.sdfIcons,Ze=b?et.textSizeData:et.iconSizeData,Tt=ne||ee.pitch!==0,bt=o.evaluateSizeForZoom(Ze,ee.zoom);let Bt,qt,rn,wn,Nt=[0,0],an=null;if(b){if(qt=Ye.glyphAtlasTexture,rn=oe.LINEAR,Bt=Ye.glyphAtlasTexture.size,et.iconsInText){Nt=Ye.imageAtlasTexture.size,an=Ye.imageAtlasTexture;const zr=Ze.kind==="composite"||Ze.kind==="camera";wn=Tt||m.options.rotating||m.options.zooming||zr?oe.LINEAR:oe.NEAREST}}else{const zr=f.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;qt=Ye.imageAtlasTexture,rn=lt||m.options.rotating||m.options.zooming||zr||Tt?oe.LINEAR:oe.NEAREST,Bt=Ye.imageAtlasTexture.size}const In=et.projection.name==="globe",ui=In?ut:Re,ki=In?o.globeToMercatorTransition(ee.zoom):0,Hn=Gr(Pe,et.getProjection(),ee),fr=ee.calculatePixelsToTileUnitsMatrix(Ye),Go=xn(Hn,Ye.tileID.canonical,ne,te,ee,et.getProjection(),fr),Cs=m.terrain&&ne&&J?o.invert(o.create(),Go):Qg,hi=Vo(Hn,Ye.tileID.canonical,ne,te,ee,et.getProjection(),fr),gi=Ee&&et.hasTextData(),yn=f.layout.get("icon-text-fit")!=="none"&&gi&&et.hasIconData();if(J){const zr=ee.elevation,Fa=zr?zr.getAtTileOffsetFunc(Pe,ee.center.lat,ee.worldSize,et.getProjection()):eu=>[0,0,0],Qs=bn(Hn,Ye.tileID.canonical,ne,te,ee,et.getProjection(),fr);Mc(et,Hn,m,b,Qs,hi,ne,z,Fa,Pe)}const qi=J||b&&Ee||yn,Er=m.translatePosMatrix(Hn,Ye,E,C),ni=qi?Qg:Go,Sr=m.translatePosMatrix(hi,Ye,E,C,!0),Oa=et.getProjection().createInversionMatrix(ee,Pe.canonical),Lr=[];m.terrain&&ne&&Lr.push("PITCH_WITH_MAP_TERRAIN"),In&&Lr.push("PROJECTION_GLOBE_VIEW"),qi&&Lr.push("PROJECTED_POS_ON_VIEWPORT");const La=lt&&f.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let za;za=lt?et.iconsInText?El(Ze.kind,bt,ce,ne,m,Er,ni,Sr,Bt,Nt,Pe,ki,me,Oa,ui,et.getProjection()):Bf(Ze.kind,bt,ce,ne,m,Er,ni,Sr,b,Bt,!0,Pe,ki,me,Oa,ui,et.getProjection()):Ff(Ze.kind,bt,ce,ne,m,Er,ni,Sr,b,Bt,Pe,ki,me,Oa,ui,et.getProjection());const Ra={program:m.useProgram(e_(lt,b,et),$e,Lr),buffers:yt,uniformValues:za,atlasTexture:qt,atlasTextureIcon:an,atlasInterpolation:rn,atlasInterpolationIcon:wn,isSDF:lt,hasHalo:La,tile:Ye,labelPlaneMatrixInv:Cs};if(ae&&et.canOverlap){Se=!0;const zr=yt.segments.get();for(const Fa of zr)Me.push({segments:new o.SegmentVector([Fa]),sortKey:Fa.sortKey,state:Ra})}else Me.push({segments:yt.segments,sortKey:0,state:Ra})}Se&&Me.sort((Pe,Ye)=>Pe.sortKey-Ye.sortKey);for(const Pe of Me){const Ye=Pe.state;if(m.terrain&&m.terrain.setupElevationDraw(Ye.tile,Ye.program,{useDepthForOcclusion:!ve,labelPlaneMatrixInv:Ye.labelPlaneMatrixInv}),Y.activeTexture.set(oe.TEXTURE0),Ye.atlasTexture.bind(Ye.atlasInterpolation,oe.CLAMP_TO_EDGE),Ye.atlasTextureIcon&&(Y.activeTexture.set(oe.TEXTURE1),Ye.atlasTextureIcon&&Ye.atlasTextureIcon.bind(Ye.atlasInterpolationIcon,oe.CLAMP_TO_EDGE)),Ye.isSDF){const et=Ye.uniformValues;Ye.hasHalo&&(et.u_is_halo=1,Uf(Ye.buffers,Pe.segments,f,m,Ye.program,be,R,W,et)),et.u_is_halo=0}Uf(Ye.buffers,Pe.segments,f,m,Ye.program,be,R,W,Ye.uniformValues)}}function Uf(m,c,f,_,b,E,C,A,I){const z=_.context,R=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];b.draw(z,z.gl.TRIANGLES,E,C,A,o.CullFaceMode.disabled,I,f.id,m.layoutVertexBuffer,m.indexBuffer,c,f.paint,_.transform.zoom,m.programConfigurations.get(f.id),R)}function yh(m,c,f,_,b,E,C){const A=m.context.gl,I=f.paint.get("fill-pattern"),z=I&&I.constantOr(1),R=f.getCrossfadeParameters();let W,Y,oe,ee,te;C?(Y=z&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",W=A.LINES):(Y=z?"fillPattern":"fill",W=A.TRIANGLES);for(const ne of _){const J=c.getTile(ne);if(z&&!J.patternsLoaded())continue;const ce=J.getBucket(f);if(!ce)continue;m.prepareDrawTile();const ae=ce.programConfigurations.get(f.id),Se=m.useProgram(Y,ae);z&&(m.context.activeTexture.set(A.TEXTURE0),J.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),ae.updatePaintBuffers(R));const be=I.constantOr(null);if(be&&J.imageAtlas){const Ee=J.imageAtlas,ve=Ee.patternPositions[be.to.toString()],Me=Ee.patternPositions[be.from.toString()];ve&&Me&&ae.setConstantPatternPositions(ve,Me)}const me=m.translatePosMatrix(ne.projMatrix,J,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(C){ee=ce.indexBuffer2,te=ce.segments2;const Ee=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[A.drawingBufferWidth,A.drawingBufferHeight];oe=Y==="fillOutlinePattern"&&z?Of(me,m,R,J,Ee):is(me,Ee)}else ee=ce.indexBuffer,te=ce.segments,oe=z?dh(me,m,R,J):Fc(me);m.prepareDrawProgram(m.context,Se,ne.toUnwrapped()),Se.draw(m.context,W,b,m.stencilModeForClipping(ne),E,o.CullFaceMode.disabled,oe,f.id,ce.layoutVertexBuffer,ee,te,f.paint,m.transform.zoom,ae)}}function Es(m,c,f,_,b,E,C){const A=m.context,I=A.gl,z=m.transform,R=f.paint.get("fill-extrusion-pattern"),W=R.constantOr(1),Y=f.getCrossfadeParameters(),oe=f.paint.get("fill-extrusion-opacity"),ee=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],te=f.layout.get("fill-extrusion-edge-radius"),ne=z.projection.name==="globe"?o.fillExtrusionHeightLift():0,J=z.projection.name==="globe",ce=J?o.globeToMercatorTransition(z.zoom):0,ae=[o.mercatorXfromLng(z.center.lng),o.mercatorYfromLat(z.center.lat)],Se=[];J&&(Se.push("PROJECTION_GLOBE_VIEW"),m.style.terrainSetForDrapingOnly()&&Se.push("TERRAIN")),ee[0]>0&&Se.push("FAUX_AO");for(const be of _){const me=c.getTile(be),Ee=me.getBucket(f);if(!Ee||Ee.projection.name!==z.projection.name)continue;const ve=Ee.programConfigurations.get(f.id),Me=m.useProgram(W?"fillExtrusionPattern":"fillExtrusion",ve,Se);if(m.terrain){const $e=m.terrain;if(m.style.terrainSetForDrapingOnly())$e.setupElevationDraw(me,Me,{useMeterToDem:!0});else{if(!Ee.enableTerrain)continue;if($e.setupElevationDraw(me,Me,{useMeterToDem:!0}),Bc(A,c,be,Ee,f,$e),!Ee.centroidVertexBuffer){const lt=Me.attributes.a_centroid_pos;lt!==void 0&&I.vertexAttrib2f(lt,0,0)}}}W&&(m.context.activeTexture.set(I.TEXTURE0),me.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),ve.updatePaintBuffers(Y));const Re=R.constantOr(null);if(Re&&me.imageAtlas){const $e=me.imageAtlas,lt=$e.patternPositions[Re.to.toString()],Ze=$e.patternPositions[Re.from.toString()];lt&&Ze&&ve.setConstantPatternPositions(lt,Ze)}const ut=m.translatePosMatrix(be.projMatrix,me,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),Pe=z.projection.createInversionMatrix(z,be.canonical),Ye=f.paint.get("fill-extrusion-vertical-gradient"),et=W?Hg(ut,m,Ye,oe,ee,te,be,Y,me,ne,ce,ae,Pe):wl(ut,m,Ye,oe,ee,te,be,ne,ce,ae,Pe);m.prepareDrawProgram(A,Me,be.toUnwrapped());const yt=[];m.terrain&&yt.push(Ee.centroidVertexBuffer),J&&yt.push(Ee.layoutVertexExtBuffer),Me.draw(A,A.gl.TRIANGLES,b,E,C,o.CullFaceMode.backCCW,et,f.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,f.paint,m.transform.zoom,ve,yt)}}function Bc(m,c,f,_,b,E){const C=[J=>{let ce=J.canonical.x-1,ae=J.wrap;return ce<0&&(ce=(1<<J.canonical.z)-1,ae--),new o.OverscaledTileID(J.overscaledZ,ae,J.canonical.z,ce,J.canonical.y)},J=>{let ce=J.canonical.x+1,ae=J.wrap;return ce===1<<J.canonical.z&&(ce=0,ae++),new o.OverscaledTileID(J.overscaledZ,ae,J.canonical.z,ce,J.canonical.y)},J=>new o.OverscaledTileID(J.overscaledZ,J.wrap,J.canonical.z,J.canonical.x,(J.canonical.y===0?1<<J.canonical.z:J.canonical.y)-1),J=>new o.OverscaledTileID(J.overscaledZ,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y===(1<<J.canonical.z)-1?0:J.canonical.y+1)],A=J=>{const ce=c.getSource().minzoom,ae=be=>{const me=c.getTileByID(be);if(me&&me.hasData())return me.getBucket(b)},Se=[0,-1,1];for(const be of Se){if(J.overscaledZ+be<ce)continue;const me=ae(J.calculateScaledKey(J.overscaledZ+be));if(me)return me}},I=[0,0,0],z=(J,ce)=>(I[0]=Math.min(J.min.y,ce.min.y),I[1]=Math.max(J.max.y,ce.max.y),I[2]=o.EXTENT-ce.min.x>J.max.x?ce.min.x-o.EXTENT:J.max.x,I),R=(J,ce)=>(I[0]=Math.min(J.min.x,ce.min.x),I[1]=Math.max(J.max.x,ce.max.x),I[2]=o.EXTENT-ce.min.y>J.max.y?ce.min.y-o.EXTENT:J.max.y,I),W=[(J,ce)=>z(J,ce),(J,ce)=>z(ce,J),(J,ce)=>R(J,ce),(J,ce)=>R(ce,J)],Y=new o.pointGeometry(0,0);let oe,ee,te;const ne=(J,ce,ae,Se,be)=>{const me=[[Se?ae:J,Se?J:ae,0],[Se?ae:ce,Se?ce:ae,0]],Ee=be<0?o.EXTENT+be:be,ve=[Se?Ee:(J+ce)/2,Se?(J+ce)/2:Ee,0];return ae===0&&be<0||ae!==0&&be>0?E.getForTilePoints(te,[ve],!0,ee):me.push(ve),E.getForTilePoints(f,me,!0,oe),Math.max(me[0][2],me[1][2],ve[2])/E.exaggeration()};for(let J=0;J<4;J++){const ce=(J<2?1:5)-J,ae=_.borders[J];if(ae.length===0)continue;const Se=te=C[J](f),be=A(Se);if(!(be&&be instanceof o.FillExtrusionBucket&&be.enableTerrain)||_.borderDoneWithNeighborZ[J]===be.canonical.z&&be.borderDoneWithNeighborZ[ce]===_.canonical.z||(ee=E.findDEMTileFor(Se),!ee||!ee.dem))continue;if(!oe){const Me=E.findDEMTileFor(f);if(!Me||!Me.dem)return;oe=Me}const me=be.borders[ce];let Ee=0;const ve=be.borderDoneWithNeighborZ[ce]!==_.canonical.z;if(_.canonical.z===be.canonical.z){for(let Me=0;Me<ae.length;Me++){const Re=_.featuresOnBorder[ae[Me]],ut=Re.borders[J];let Pe;for(;Ee<me.length&&(Pe=be.featuresOnBorder[me[Ee]],!(Pe.borders[ce][1]>ut[0]+3));)ve&&be.encodeCentroid(void 0,Pe,!1),Ee++;if(Pe&&Ee<me.length){const Ye=Ee;let et=0;for(;!(Pe.borders[ce][0]>ut[1]-3)&&(et++,++Ee!==me.length);)Pe=be.featuresOnBorder[me[Ee]];if(Pe=be.featuresOnBorder[me[Ye]],Re.intersectsCount()>1||Pe.intersectsCount()>1||et!==1){et!==1&&(Ee=Ye),_.encodeCentroid(void 0,Re,!1),ve&&be.encodeCentroid(void 0,Pe,!1);continue}const yt=W[J](Re,Pe),$e=J%2?o.EXTENT-1:0;Y.x=ne(yt[0],Math.min(o.EXTENT-1,yt[1]),$e,J<2,yt[2]),Y.y=0,_.encodeCentroid(Y,Re,!1),ve&&be.encodeCentroid(Y,Pe,!1)}else _.encodeCentroid(void 0,Re,!1)}_.borderDoneWithNeighborZ[J]=be.canonical.z,_.needsCentroidUpdate=!0,ve&&(be.borderDoneWithNeighborZ[ce]=_.canonical.z,be.needsCentroidUpdate=!0)}else{for(const Me of ae)_.encodeCentroid(void 0,_.featuresOnBorder[Me],!1);if(ve){for(const Me of me)be.encodeCentroid(void 0,be.featuresOnBorder[Me],!1);be.borderDoneWithNeighborZ[ce]=_.canonical.z,be.needsCentroidUpdate=!0}_.borderDoneWithNeighborZ[J]=be.canonical.z,_.needsCentroidUpdate=!0}}(_.needsCentroidUpdate||!_.centroidVertexBuffer&&_.centroidVertexArray.length!==0)&&_.uploadCentroid(m)}const t_=new o.Color(1,0,0,1),Sl=new o.Color(0,1,0,1),Tl=new o.Color(0,0,1,1),n_=new o.Color(1,0,1,1),$f=new o.Color(0,1,1,1);function zn(m,c,f){const _=m.context,b=m.transform,E=_.gl,C=b.projection.name==="globe",A=C?["PROJECTION_GLOBE_VIEW"]:null;let I=f.projMatrix;if(C&&o.globeToMercatorTransition(b.zoom)>0){const Re=o.transitionTileAABBinECEF(f.canonical,b),ut=o.globeDenormalizeECEF(Re);I=o.multiply(new Float32Array(16),b.globeMatrix,ut),o.multiply(I,b.projMatrix,I)}const z=m.useProgram("debug",null,A),R=c.getTileByID(f.key);m.terrain&&m.terrain.setupElevationDraw(R,z);const W=o.DepthMode.disabled,Y=o.StencilMode.disabled,oe=m.colorModeForRenderPass(),ee="$debug";_.activeTexture.set(E.TEXTURE0),m.emptyTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),C?R._makeGlobeTileDebugBuffers(m.context,b):R._makeDebugTileBoundsBuffers(m.context,b.projection);const te=R._tileDebugBuffer||m.debugBuffer,ne=R._tileDebugIndexBuffer||m.debugIndexBuffer,J=R._tileDebugSegments||m.debugSegments;z.draw(_,E.LINE_STRIP,W,Y,oe,o.CullFaceMode.disabled,Zg(I,o.Color.red),ee,te,ne,J,null,null,null,[R._globeTileDebugBorderBuffer]);const ce=R.latestRawTileData,ae=Math.floor((ce&&ce.byteLength||0)/1024),Se=c.getTile(f).tileSize,be=512/Math.min(Se,512)*(f.overscaledZ/b.zoom)*.5;let me=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(me+=` => ${f.overscaledZ}`),me+=` ${ae}kb`,function(Re,ut){Re.initDebugOverlayCanvas();const Pe=Re.debugOverlayCanvas,Ye=Re.context.gl,et=Re.debugOverlayCanvas.getContext("2d");et.clearRect(0,0,Pe.width,Pe.height),et.shadowColor="white",et.shadowBlur=2,et.lineWidth=1.5,et.strokeStyle="white",et.textBaseline="top",et.font="bold 36px Open Sans, sans-serif",et.fillText(ut,5,5),et.strokeText(ut,5,5),Re.debugOverlayTexture.update(Pe),Re.debugOverlayTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE)}(m,me);const Ee=R._tileDebugTextBuffer||m.debugBuffer,ve=R._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Me=R._tileDebugTextSegments||m.debugSegments;z.draw(_,E.TRIANGLES,W,Y,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,Zg(I,o.Color.transparent,be),ee,Ee,ve,Me,null,null,null,[R._globeTileDebugTextBuffer])}function Nc(m,c,f,_){Vc(m,0,c+f/2,m.transform.width,f,_)}function i_(m,c,f,_){Vc(m,c-f/2,0,f,m.transform.height,_)}function Vc(m,c,f,_,b,E){const C=m.context,A=C.gl;A.enable(A.SCISSOR_TEST),A.scissor(c*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,_*o.exported.devicePixelRatio,b*o.exported.devicePixelRatio),C.clear({color:E}),A.disable(A.SCISSOR_TEST)}const jc=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Gx}=jc;function Js(m,c,f,_){m.emplaceBack(c,f,_)}class Gf{constructor(c){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,Js(this.vertexArray,-1,-1,1),Js(this.vertexArray,1,-1,1),Js(this.vertexArray,-1,1,1),Js(this.vertexArray,1,1,1),Js(this.vertexArray,-1,-1,-1),Js(this.vertexArray,1,-1,-1),Js(this.vertexArray,-1,1,-1),Js(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=c.createVertexBuffer(this.vertexArray,Gx),this.indexBuffer=c.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function Cl(m,c,f,_,b,E){const C=m.gl,A=c.paint.get("sky-atmosphere-color"),I=c.paint.get("sky-atmosphere-halo-color"),z=c.paint.get("sky-atmosphere-sun-intensity"),R=((W,Y,oe,ee,te)=>({u_matrix_3f:W,u_sun_direction:Y,u_sun_intensity:oe,u_color_tint_r:[ee.r,ee.g,ee.b,ee.a],u_color_tint_m:[te.r,te.g,te.b,te.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),_),b,z,A,I);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+E,c.skyboxTexture,0),f.draw(m,C.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,R,"skyboxCapture",c.skyboxGeometry.vertexBuffer,c.skyboxGeometry.indexBuffer,c.skyboxGeometry.segment)}const Wf=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class vh{constructor(c){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const _=new o.StructArrayLayout3ui6;_.emplaceBack(0,1,2),_.emplaceBack(2,3,0),this.vertexBuffer=c.createVertexBuffer(f,Wf.members),this.indexBuffer=c.createIndexBuffer(_),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ml={symbol:function(m,c,f,_,b){if(m.renderPass!=="translucent")return;const E=o.StencilMode.disabled,C=m.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(A,I,z,R,W,Y,oe){const ee=I.transform,te=W==="map",ne=Y==="map";for(const J of A){const ce=R.getTile(J),ae=ce.getBucket(z);if(!ae||!ae.text||!ae.text.segments.get().length)continue;const Se=o.evaluateSizeForZoom(ae.textSizeData,ee.zoom),be=Gr(J,ae.getProjection(),ee),me=ee.calculatePixelsToTileUnitsMatrix(ce),Ee=xn(be,ce.tileID.canonical,ne,te,ee,ae.getProjection(),me),ve=z.layout.get("icon-text-fit")!=="none"&&ae.hasIconData();if(Se){const Me=Math.pow(2,ee.zoom-ce.tileID.overscaledZ);Vf(ae,te,ne,oe,o.symbolSize,ee,Ee,J,Me,Se,ve)}}}(_,m,f,c,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),b),f.paint.get("icon-opacity").constantOr(1)!==0&&jf(m,c,f,_,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),E,C),f.paint.get("text-opacity").constantOr(1)!==0&&jf(m,c,f,_,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),E,C),c.map.showCollisionBoxes&&(Jg(m,c,f,_,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),Jg(m,c,f,_,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(m,c,f,_){if(m.renderPass!=="translucent")return;const b=f.paint.get("circle-opacity"),E=f.paint.get("circle-stroke-width"),C=f.paint.get("circle-stroke-opacity"),A=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(b.constantOr(1)===0&&(E.constantOr(1)===0||C.constantOr(1)===0))return;const I=m.context,z=I.gl,R=m.transform,W=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),Y=o.StencilMode.disabled,oe=m.colorModeForRenderPass(),ee=R.projection.name==="globe",te=[o.mercatorXfromLng(R.center.lng),o.mercatorYfromLat(R.center.lat)],ne=[];for(let ce=0;ce<_.length;ce++){const ae=_[ce],Se=c.getTile(ae),be=Se.getBucket(f);if(!be||be.projection.name!==R.projection.name)continue;const me=be.programConfigurations.get(f.id),Ee=Yg(f);ee&&Ee.push("PROJECTION_GLOBE_VIEW");const ve=m.useProgram("circle",me,Ee),Me=be.layoutVertexBuffer,Re=be.globeExtVertexBuffer,ut=be.indexBuffer,Pe=R.projection.createInversionMatrix(R,ae.canonical),Ye={programConfiguration:me,program:ve,layoutVertexBuffer:Me,globeExtVertexBuffer:Re,indexBuffer:ut,uniformValues:Lf(m,ae,Se,Pe,te,f),tile:Se};if(A){const et=be.segments.get();for(const yt of et)ne.push({segments:new o.SegmentVector([yt]),sortKey:yt.sortKey,state:Ye})}else ne.push({segments:be.segments,sortKey:0,state:Ye})}A&&ne.sort((ce,ae)=>ce.sortKey-ae.sortKey);const J={useDepthForOcclusion:!ee};for(const ce of ne){const{programConfiguration:ae,program:Se,layoutVertexBuffer:be,globeExtVertexBuffer:me,indexBuffer:Ee,uniformValues:ve,tile:Me}=ce.state,Re=ce.segments;m.terrain&&m.terrain.setupElevationDraw(Me,Se,J),m.prepareDrawProgram(I,Se,Me.tileID.toUnwrapped()),Se.draw(I,z.TRIANGLES,W,Y,oe,o.CullFaceMode.disabled,ve,f.id,be,Ee,Re,f.paint,R.zoom,ae,[me])}},heatmap:function(m,c,f,_){if(f.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const b=m.context,E=b.gl,C=o.StencilMode.disabled,A=new o.ColorMode([E.ONE,E.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(oe,ee,te,ne){const J=oe.gl,ce=ee.width*ne,ae=ee.height*ne;oe.activeTexture.set(J.TEXTURE1),oe.viewport.set([0,0,ce,ae]);let Se=te.heatmapFbo;if(!Se||Se&&(Se.width!==ce||Se.height!==ae)){Se&&Se.destroy();const be=J.createTexture();J.bindTexture(J.TEXTURE_2D,be),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),Se=te.heatmapFbo=oe.createFramebuffer(ce,ae,!1),function(me,Ee,ve,Me,Re,ut){const Pe=me.gl;Pe.texImage2D(Pe.TEXTURE_2D,0,Pe.RGBA,Re,ut,0,Pe.RGBA,me.extRenderToTextureHalfFloat?me.extTextureHalfFloat.HALF_FLOAT_OES:Pe.UNSIGNED_BYTE,null),Me.colorAttachment.set(ve)}(oe,0,be,Se,ce,ae)}else J.bindTexture(J.TEXTURE_2D,Se.colorAttachment.get()),oe.bindFramebuffer.set(Se.framebuffer)})(b,m,f,m.transform.projection.name==="globe"?.5:.25),b.clear({color:o.Color.transparent});const I=m.transform,z=I.projection.name==="globe",R=z?["PROJECTION_GLOBE_VIEW"]:null,W=z?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,Y=[o.mercatorXfromLng(I.center.lng),o.mercatorYfromLat(I.center.lat)];for(let oe=0;oe<_.length;oe++){const ee=_[oe];if(c.hasRenderableParent(ee))continue;const te=c.getTile(ee),ne=te.getBucket(f);if(!ne||ne.projection.name!==I.projection.name)continue;const J=ne.programConfigurations.get(f.id),ce=m.useProgram("heatmap",J,R),{zoom:ae}=m.transform;m.terrain&&m.terrain.setupElevationDraw(te,ce),m.prepareDrawProgram(b,ce,ee.toUnwrapped());const Se=I.projection.createInversionMatrix(I,ee.canonical);ce.draw(b,E.TRIANGLES,o.DepthMode.disabled,C,A,W,Bx(m,ee,te,Se,Y,ae,f.paint.get("heatmap-intensity")),f.id,ne.layoutVertexBuffer,ne.indexBuffer,ne.segments,f.paint,m.transform.zoom,J,z?[ne.globeExtVertexBuffer]:null)}b.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(b,E){const C=b.context,A=C.gl,I=E.heatmapFbo;if(!I)return;C.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,I.colorAttachment.get()),C.activeTexture.set(A.TEXTURE1);let z=E.colorRampTexture;z||(z=E.colorRampTexture=new o.Texture(C,E.colorRamp,A.RGBA)),z.bind(A.LINEAR,A.CLAMP_TO_EDGE),b.useProgram("heatmapTexture").draw(C,A.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,b.colorModeForRenderPass(),o.CullFaceMode.disabled,((R,W,Y,oe)=>({u_image:0,u_color_ramp:1,u_opacity:W.paint.get("heatmap-opacity")}))(0,E),E.id,b.viewportBuffer,b.quadTriangleIndexBuffer,b.viewportSegments,E.paint,b.transform.zoom)}(m,f))},line:function(m,c,f,_){if(m.renderPass!=="translucent")return;const b=f.paint.get("line-opacity"),E=f.paint.get("line-width");if(b.constantOr(1)===0||E.constantOr(1)===0)return;const C=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),A=m.colorModeForRenderPass(),I=m.terrain&&m.terrain.renderingToTexture?1:o.exported.devicePixelRatio,z=f.paint.get("line-dasharray"),R=z.constantOr(1),W=f.layout.get("line-cap"),Y=f.paint.get("line-pattern"),oe=Y.constantOr(1),ee=f.paint.get("line-gradient"),te=f.getCrossfadeParameters(),ne=oe?"linePattern":"line",J=m.context,ce=J.gl,ae=(be=>{const me=[];mh(be)&&me.push("RENDER_LINE_DASH"),be.paint.get("line-gradient")&&me.push("RENDER_LINE_GRADIENT");const Ee=be.paint.get("line-trim-offset");Ee[0]===0&&Ee[1]===0||me.push("RENDER_LINE_TRIM_OFFSET");const ve=be.paint.get("line-pattern").constantOr(1),Me=be.paint.get("line-opacity").constantOr(1)!==1;return!ve&&Me&&me.push("RENDER_LINE_ALPHA_DISCARD"),me})(f);let Se=ae.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(Se=!1);for(const be of _){const me=c.getTile(be);if(oe&&!me.patternsLoaded())continue;const Ee=me.getBucket(f);if(!Ee)continue;m.prepareDrawTile();const ve=Ee.programConfigurations.get(f.id),Me=m.useProgram(ne,ve,ae),Re=Y.constantOr(null);if(Re&&me.imageAtlas){const Ze=me.imageAtlas,Tt=Ze.patternPositions[Re.to.toString()],bt=Ze.patternPositions[Re.from.toString()];Tt&&bt&&ve.setConstantPatternPositions(Tt,bt)}const ut=z.constantOr(null),Pe=W.constantOr(null);if(!oe&&ut&&Pe&&me.lineAtlas){const Ze=me.lineAtlas,Tt=Ze.getDash(ut.to,Pe),bt=Ze.getDash(ut.from,Pe);Tt&&bt&&ve.setConstantPatternPositions(Tt,bt)}let[Ye,et]=f.paint.get("line-trim-offset");if(Pe==="round"||Pe==="square"){const Ze=1;Ye!==et&&(Ye===0&&(Ye-=Ze),et===1&&(et+=Ze))}const yt=m.terrain?be.projMatrix:null,$e=oe?Nx(m,me,f,te,yt,I):fh(m,me,f,te,yt,Ee.lineClipsArray.length,I,[Ye,et]);if(ee){const Ze=Ee.gradients[f.id];let Tt=Ze.texture;if(f.gradientVersion!==Ze.version){let bt=256;if(f.stepInterpolant){const Bt=c.getSource().maxzoom,qt=be.canonical.z===Bt?Math.ceil(1<<m.transform.maxZoom-be.canonical.z):1;bt=o.clamp(o.nextPowerOfTwo(Ee.maxLineLength/o.EXTENT*1024*qt),256,J.maxTextureSize)}Ze.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:bt,image:Ze.gradient||void 0,clips:Ee.lineClipsArray}),Ze.texture?Ze.texture.update(Ze.gradient):Ze.texture=new o.Texture(J,Ze.gradient,ce.RGBA),Ze.version=f.gradientVersion,Tt=Ze.texture}J.activeTexture.set(ce.TEXTURE1),Tt.bind(f.stepInterpolant?ce.NEAREST:ce.LINEAR,ce.CLAMP_TO_EDGE)}R&&(J.activeTexture.set(ce.TEXTURE0),me.lineAtlasTexture.bind(ce.LINEAR,ce.REPEAT),ve.updatePaintBuffers(te)),oe&&(J.activeTexture.set(ce.TEXTURE0),me.imageAtlasTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE),ve.updatePaintBuffers(te)),m.prepareDrawProgram(J,Me,be.toUnwrapped());const lt=Ze=>{Me.draw(J,ce.TRIANGLES,C,Ze,A,o.CullFaceMode.disabled,$e,f.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,f.paint,m.transform.zoom,ve,[Ee.layoutVertexBuffer2])};if(Se){const Ze=m.stencilModeForClipping(be).ref;Ze===0&&m.terrain&&J.clear({stencil:0});const Tt={func:ce.EQUAL,mask:255};$e.u_alpha_discard_threshold=.8,lt(new o.StencilMode(Tt,Ze,255,ce.KEEP,ce.KEEP,ce.INVERT)),$e.u_alpha_discard_threshold=0,lt(new o.StencilMode(Tt,Ze,255,ce.KEEP,ce.KEEP,ce.KEEP))}else lt(m.stencilModeForClipping(be))}Se&&(m.resetStencilClippingMasks(),m.terrain&&J.clear({stencil:0}))},fill:function(m,c,f,_){const b=f.paint.get("fill-color"),E=f.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const C=m.colorModeForRenderPass(),A=f.paint.get("fill-pattern"),I=m.opaquePassEnabledForLayer()&&!A.constantOr(1)&&b.constantOr(o.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===I){const z=m.depthModeForSublayer(1,m.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);yh(m,c,f,_,z,C,!1)}if(m.renderPass==="translucent"&&f.paint.get("fill-antialias")){const z=m.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);yh(m,c,f,_,z,C,!0)}},"fill-extrusion":function(m,c,f,_){const b=f.paint.get("fill-extrusion-opacity");if(b!==0&&m.renderPass==="translucent"){const E=new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D);if(b!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Es(m,c,f,_,E,o.StencilMode.disabled,o.ColorMode.disabled),Es(m,c,f,_,E,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const C=m.colorModeForRenderPass();Es(m,c,f,_,E,o.StencilMode.disabled,C)}}},hillshade:function(m,c,f,_){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const b=m.context,E=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),C=m.colorModeForRenderPass(),A=m.terrain&&m.terrain.renderingToTexture,[I,z]=m.renderPass!=="translucent"||A?[{},_]:m.stencilConfigForOverlap(_);for(const R of z){const W=c.getTile(R);if(W.needsHillshadePrepare&&m.renderPass==="offscreen")bl(m,W,f,E,o.StencilMode.disabled,C);else if(m.renderPass==="translucent"){const Y=A&&m.terrain?m.terrain.stencilModeForRTTOverlap(R):I[R.overscaledZ];Tf(m,R,W,f,E,Y,C)}}b.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,c,f,_,b,E){if(m.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!_.length)return;const C=m.context,A=C.gl,I=c.getSource(),z=m.useProgram("raster"),R=m.colorModeForRenderPass(),W=m.terrain&&m.terrain.renderingToTexture,[Y,oe]=I instanceof De||W?[{},_]:m.stencilConfigForOverlap(_),ee=oe[oe.length-1].overscaledZ,te=!m.options.moving;for(const ne of oe){const J=W?o.DepthMode.disabled:m.depthModeForSublayer(ne.overscaledZ-ee,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,A.LESS),ce=ne.toUnwrapped(),ae=c.getTile(ne);if(W&&(!ae||!ae.hasData()))continue;const Se=W?ne.projMatrix:m.transform.calculateProjMatrix(ce,te),be=m.terrain&&W?m.terrain.stencilModeForRTTOverlap(ne):Y[ne.overscaledZ],me=E?0:f.paint.get("raster-fade-duration");ae.registerFadeDuration(me);const Ee=c.findLoadedParent(ne,0),ve=uh(ae,Ee,c,m.transform,me);let Me,Re;m.terrain&&m.terrain.prepareDrawTile();const ut=f.paint.get("raster-resampling")==="nearest"?A.NEAREST:A.LINEAR;C.activeTexture.set(A.TEXTURE0),ae.texture.bind(ut,A.CLAMP_TO_EDGE),C.activeTexture.set(A.TEXTURE1),Ee?(Ee.texture.bind(ut,A.CLAMP_TO_EDGE),Me=Math.pow(2,Ee.tileID.overscaledZ-ae.tileID.overscaledZ),Re=[ae.tileID.canonical.x*Me%1,ae.tileID.canonical.y*Me%1]):ae.texture.bind(ut,A.CLAMP_TO_EDGE);const Pe=Vx(Se,Re||[0,0],Me||1,ve,f,I instanceof De?I.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(C,z,ce),I instanceof De)I.boundsBuffer&&I.boundsSegments&&z.draw(C,A.TRIANGLES,J,o.StencilMode.disabled,R,o.CullFaceMode.disabled,Pe,f.id,I.boundsBuffer,m.quadTriangleIndexBuffer,I.boundsSegments);else{const{tileBoundsBuffer:Ye,tileBoundsIndexBuffer:et,tileBoundsSegments:yt}=m.getTileBoundsBuffers(ae);z.draw(C,A.TRIANGLES,J,be,R,o.CullFaceMode.disabled,Pe,f.id,Ye,et,yt)}}m.resetStencilClippingMasks()},background:function(m,c,f,_){const b=f.paint.get("background-color"),E=f.paint.get("background-opacity");if(E===0)return;const C=m.context,A=C.gl,I=m.transform,z=I.tileSize,R=f.paint.get("background-pattern");if(m.isPatternMissing(R))return;const W=!R&&b.a===1&&E===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==W)return;const Y=o.StencilMode.disabled,oe=m.depthModeForSublayer(0,W==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),ee=m.colorModeForRenderPass(),te=m.useProgram(R?"backgroundPattern":"background");let ne,J=_;J||(ne=m.getBackgroundTiles(),J=Object.values(ne).map(ae=>ae.tileID)),R&&(C.activeTexture.set(A.TEXTURE0),m.imageManager.bind(m.context));const ce=f.getCrossfadeParameters();for(const ae of J){const Se=ae.toUnwrapped(),be=_?ae.projMatrix:m.transform.calculateProjMatrix(Se);m.prepareDrawTile();const me=c?c.getTile(ae):ne?ne[ae.key]:new o.Tile(ae,z,I.zoom,m),Ee=R?Ux(be,E,m,R,{tileID:ae,tileSize:z},ce):jx(be,E,b);m.prepareDrawProgram(C,te,Se);const{tileBoundsBuffer:ve,tileBoundsIndexBuffer:Me,tileBoundsSegments:Re}=m.getTileBoundsBuffers(me);te.draw(C,A.TRIANGLES,oe,Y,ee,o.CullFaceMode.disabled,Ee,f.id,ve,Me,Re)}},sky:function(m,c,f){const _=m.transform,b=_.projection.name==="mercator"||_.projection.name==="globe"?1:o.smoothstep(7,8,_.zoom),E=f.paint.get("sky-opacity")*b;if(E===0)return;const C=m.context,A=f.paint.get("sky-type"),I=new o.DepthMode(C.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),z=m.frameCounter/1e3%1;A==="atmosphere"?m.renderPass==="offscreen"?f.needsSkyboxCapture(m)&&(function(R,W,Y,oe){const ee=R.context,te=ee.gl;let ne=W.skyboxFbo;if(!ne){ne=W.skyboxFbo=ee.createFramebuffer(32,32,!1),W.skyboxGeometry=new Gf(ee),W.skyboxTexture=ee.gl.createTexture(),te.bindTexture(te.TEXTURE_CUBE_MAP,W.skyboxTexture),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_S,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_WRAP_T,te.CLAMP_TO_EDGE),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MIN_FILTER,te.LINEAR),te.texParameteri(te.TEXTURE_CUBE_MAP,te.TEXTURE_MAG_FILTER,te.LINEAR);for(let Se=0;Se<6;++Se)te.texImage2D(te.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,te.RGBA,32,32,0,te.RGBA,te.UNSIGNED_BYTE,null)}ee.bindFramebuffer.set(ne.framebuffer),ee.viewport.set([0,0,32,32]);const J=W.getCenter(R,!0),ce=R.useProgram("skyboxCapture"),ae=new Float64Array(16);o.identity(ae),o.rotateY(ae,ae,.5*-Math.PI),Cl(ee,W,ce,ae,J,0),o.identity(ae),o.rotateY(ae,ae,.5*Math.PI),Cl(ee,W,ce,ae,J,1),o.identity(ae),o.rotateX(ae,ae,.5*-Math.PI),Cl(ee,W,ce,ae,J,2),o.identity(ae),o.rotateX(ae,ae,.5*Math.PI),Cl(ee,W,ce,ae,J,3),o.identity(ae),Cl(ee,W,ce,ae,J,4),o.identity(ae),o.rotateY(ae,ae,Math.PI),Cl(ee,W,ce,ae,J,5),ee.viewport.set([0,0,R.width,R.height])}(m,f),f.markSkyboxValid(m)):m.renderPass==="sky"&&function(R,W,Y,oe,ee){const te=R.context,ne=te.gl,J=R.transform,ce=R.useProgram("skybox");te.activeTexture.set(ne.TEXTURE0),ne.bindTexture(ne.TEXTURE_CUBE_MAP,W.skyboxTexture);const ae=((Se,be,me,Ee,ve)=>({u_matrix:Se,u_sun_direction:be,u_cubemap:0,u_opacity:Ee,u_temporal_offset:ve}))(J.skyboxMatrix,W.getCenter(R,!1),0,oe,ee);R.prepareDrawProgram(te,ce),ce.draw(te,ne.TRIANGLES,Y,o.StencilMode.disabled,R.colorModeForRenderPass(),o.CullFaceMode.backCW,ae,"skybox",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(m,f,I,E,z):A==="gradient"&&m.renderPass==="sky"&&function(R,W,Y,oe,ee){const te=R.context,ne=te.gl,J=R.transform,ce=R.useProgram("skyboxGradient");W.skyboxGeometry||(W.skyboxGeometry=new Gf(te)),te.activeTexture.set(ne.TEXTURE0);let ae=W.colorRampTexture;ae||(ae=W.colorRampTexture=new o.Texture(te,W.colorRamp,ne.RGBA)),ae.bind(ne.LINEAR,ne.CLAMP_TO_EDGE);const Se=((be,me,Ee,ve,Me)=>({u_matrix:be,u_color_ramp:0,u_center_direction:me,u_radius:o.degToRad(Ee),u_opacity:ve,u_temporal_offset:Me}))(J.skyboxMatrix,W.getCenter(R,!1),W.paint.get("sky-gradient-radius"),oe,ee);R.prepareDrawProgram(te,ce),ce.draw(te,ne.TRIANGLES,Y,o.StencilMode.disabled,R.colorModeForRenderPass(),o.CullFaceMode.backCW,Se,"skyboxGradient",W.skyboxGeometry.vertexBuffer,W.skyboxGeometry.indexBuffer,W.skyboxGeometry.segment)}(m,f,I,E,z)},debug:function(m,c,f){for(let _=0;_<f.length;_++)zn(m,c,f[_])},custom:function(m,c,f){const _=m.context,b=f.implementation;if(m.transform.projection.unsupportedLayers&&m.transform.projection.unsupportedLayers.includes("custom"))o.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if(m.renderPass==="offscreen"){const E=b.prerender;E&&(m.setCustomLayerDefaults(),_.setColorMode(m.colorModeForRenderPass()),E.call(b,_.gl,m.transform.customLayerMatrix()),_.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),_.setColorMode(m.colorModeForRenderPass()),_.setStencilMode(o.StencilMode.disabled);const E=b.renderingMode==="3d"?new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,o.DepthMode.ReadOnly);_.setDepthMode(E),b.render(_.gl,m.transform.customLayerMatrix()),_.setDirty(),m.setBaseState(),_.bindFramebuffer.set(null)}}};class Hf{constructor(c,f){this.context=new Q(c),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ih,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(c,f){const _=!!c&&!!c.terrain&&this.transform.projection.supportsTerrain;if(!(_||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Gg(this,c));const b=this._terrain;this.transform.elevation=_?b:null,b.update(c,this.transform,f)}_updateFog(c){const f=c.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[_,b]=f.getFovAdjustedRange(this.transform._fov);if(_>b)return void(this.transform.fogCullDistSq=null);const E=_+.78*(b-_);this.transform.fogCullDistSq=E*E}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(c,f){if(this.width=c*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const _ of this.style.order)this.style._layers[_].resize()}setup(){const c=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=c.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const _=new o.StructArrayLayout2i4;_.emplaceBack(0,0),_.emplaceBack(o.EXTENT,0),_.emplaceBack(0,o.EXTENT),_.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=c.createVertexBuffer(_,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const b=new o.StructArrayLayout2i4;b.emplaceBack(-1,-1),b.emplaceBack(1,-1),b.emplaceBack(-1,1),b.emplaceBack(1,1),this.viewportBuffer=c.createVertexBuffer(b,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const E=new o.StructArrayLayout4i8;E.emplaceBack(0,0,0,0),E.emplaceBack(o.EXTENT,0,o.EXTENT,0),E.emplaceBack(0,o.EXTENT,0,o.EXTENT),E.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=c.createVertexBuffer(E,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const C=new o.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=c.createIndexBuffer(C);const A=new o.StructArrayLayout1ui2;for(const z of[0,1,3,2,0])A.emplaceBack(z);this.debugIndexBuffer=c.createIndexBuffer(A),this.emptyTexture=new o.Texture(c,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),c.gl.RGBA),this.identityMat=o.create();const I=this.context.gl;this.stencilClearMode=new o.StencilMode({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new vh(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(c){return c._makeTileBoundsBuffers(this.context,this.transform.projection),c._tileBoundsBuffer?{tileBoundsBuffer:c._tileBoundsBuffer,tileBoundsIndexBuffer:c._tileBoundsIndexBuffer,tileBoundsSegments:c._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const c=this.context,f=c.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(c,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Af(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(c,f,_){if(!f||this.currentStencilSource===f.id||!c.isTileClipped()||!_||_.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let A=!1;for(const I of _)if(this._tileClippingMaskIDs[I.key]===void 0){A=!0;break}if(!A)return}this.currentStencilSource=f.id;const b=this.context,E=b.gl;this.nextStencilID+_.length>256&&this.clearStencil(),b.setColorMode(o.ColorMode.disabled),b.setDepthMode(o.DepthMode.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const A of _){const I=f.getTile(A),z=this._tileClippingMaskIDs[A.key]=this.nextStencilID++,{tileBoundsBuffer:R,tileBoundsIndexBuffer:W,tileBoundsSegments:Y}=this.getTileBoundsBuffers(I);C.draw(b,E.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:E.ALWAYS,mask:0},z,255,E.KEEP,E.KEEP,E.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Af(A.projMatrix),"$clipping",R,W,Y)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const c=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},c,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(c){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(c);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[c.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(c){const f=this.context.gl,_=c.sort((C,A)=>A.overscaledZ-C.overscaledZ),b=_[_.length-1].overscaledZ,E=_[0].overscaledZ-b+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const C={};for(let A=0;A<E;A++)C[A+b]=new o.StencilMode({func:f.GEQUAL,mask:255},A+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=E,[C,_]}return[{[b]:o.StencilMode.disabled},_]}colorModeForRenderPass(){const c=this.context.gl;if(this._showOverdrawInspector){const f=1/8;return new o.ColorMode([c.CONSTANT_COLOR,c.ONE],new o.Color(f,f,f,0),[!0,!0,!0,!0])}return this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(c,f,_){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+c)*this.depthEpsilon;return new o.DepthMode(_||this.context.gl.LEQUAL,f,[b,b])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(c,f){this.style=c,this.options=f,this.lineAtlas=c.lineAtlas,this.imageManager=c.imageManager,this.glyphManager=c.glyphManager,this.symbolFadeChange=c.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const _=this.style.order,b=this.style._sourceCaches;for(const I in b){const z=b[I];z.used&&z.prepare(this.context)}const E={},C={},A={};for(const I in b){const z=b[I];E[I]=z.getVisibleCoordinates(),C[I]=E[I].slice().reverse(),A[I]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<_.length;I++)if(this.style._layers[_[I]].is3D()){this.opaquePassCutoff=I;break}if(this.terrain&&(this.terrain.updateTileBinding(A),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),o.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const I of _){const z=this.style._layers[I],R=c._getLayerSourceCache(z);if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const W=R?C[R.id]:void 0;(z.type==="custom"||z.isSky()||W&&W.length)&&this.renderLayer(this,R,z,W)}if(this.depthRangeFor3D=[0,1-(c.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[_[this.currentLayer]],z=c._getLayerSourceCache(I);if(I.isSky())continue;const R=z?C[z.id]:void 0;this._renderTileClippingMasks(I,z,R),this.renderLayer(this,z,I,R)}if(this.style.fog&&this.transform.projection.supportsFog&&function(I,z){const R=I.context,W=R.gl,Y=I.transform,oe=new o.DepthMode(W.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ee=I.useProgram("globeAtmosphere",null,Y.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),te=o.globeToMercatorTransition(Y.zoom),ne=z.properties.get("color").toArray01(),J=z.properties.get("high-color").toArray01(),ce=z.properties.get("space-color").toArray01PremultipliedAlpha(),ae=o.identity$1([]);o.rotateY$1(ae,ae,-o.degToRad(Y._center.lng)),o.rotateX$1(ae,ae,o.degToRad(Y._center.lat)),o.rotateZ$1(ae,ae,Y.angle),o.rotateX$1(ae,ae,-Y._pitch);const Se=o.fromQuat(new Float32Array(16),ae),be=o.mapValue(z.properties.get("star-intensity"),0,1,0,.25),me=5e-4,Ee=o.mapValue(z.properties.get("horizon-blend"),0,1,me,.25),ve=o.globeUseCustomAntiAliasing(I,R,Y)&&Ee===me?Y.worldSize/(2*Math.PI*1.025)-1:Y.globeRadius,Me=I.frameCounter/1e3%1,Re=o.length(Y.globeCenterInViewSpace),ut=Math.sqrt(Math.pow(Re,2)-Math.pow(ve,2)),Pe=Math.acos(ut/Re),Ye=((yt,$e,lt,Ze,Tt,bt,Bt,qt,rn,wn,Nt,an,In,ui)=>({u_frustum_tl:yt,u_frustum_tr:$e,u_frustum_br:lt,u_frustum_bl:Ze,u_horizon:Tt,u_transition:bt,u_fadeout_range:Bt,u_color:qt,u_high_color:rn,u_space_color:wn,u_star_intensity:Nt,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:an,u_horizon_angle:In,u_rotation_matrix:ui}))(Y.frustumCorners.TL,Y.frustumCorners.TR,Y.frustumCorners.BR,Y.frustumCorners.BL,Y.frustumCorners.horizon,te,Ee,ne,J,ce,be,Me,Pe,Se);I.prepareDrawProgram(R,ee);const et=I.atmosphereBuffer;et&&ee.draw(R,W.TRIANGLES,oe,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,Ye,"skybox",et.vertexBuffer,et.indexBuffer,et.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const I=this.style._layers[_[this.currentLayer]],z=c._getLayerSourceCache(I);I.isSky()&&this.renderLayer(this,z,I,z?C[z.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<_.length;){const I=this.style._layers[_[this.currentLayer]],z=c._getLayerSourceCache(I);if(I.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(I)){if(I.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const R=z?(I.type==="symbol"?A:C)[z.id]:void 0;this._renderTileClippingMasks(I,z,z?E[z.id]:void 0),this.renderLayer(this,z,I,R),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){let I=null;o.values(this.style._layers).forEach(z=>{const R=c._getLayerSourceCache(z);R&&!z.isHidden(this.transform.zoom)&&(!I||I.getSource().maxzoom<R.getSource().maxzoom)&&(I=R)}),I&&this.options.showTileBoundaries&&Ml.debug(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const z=I.transform.padding;Nc(I,I.transform.height-(z.top||0),3,t_),Nc(I,z.bottom||0,3,Sl),i_(I,z.left||0,3,Tl),i_(I,I.transform.width-(z.right||0),3,n_);const R=I.transform.centerPoint;(function(W,Y,oe,ee){Vc(W,Y-1,oe-10,2,20,ee),Vc(W,Y-10,oe-1,20,2,ee)})(I,R.x,I.transform.height-R.y,$f)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}}renderLayer(c,f,_,b){_.isHidden(this.transform.zoom)||(_.type==="background"||_.type==="sky"||_.type==="custom"||b&&b.length)&&(this.id=_.id,this.gpuTimingStart(_),c.transform.projection.unsupportedLayers&&c.transform.projection.unsupportedLayers.includes(_.type)||Ml[_.type](c,f,_,b,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(c){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let _=this.gpuTimers[c.id];_||(_=this.gpuTimers[c.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),_.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,_.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const c=this.context.extTimerQuery,f=c.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),c.beginQueryEXT(c.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const c=this.context.extTimerQuery;c.endQueryEXT(c.TIME_ELAPSED_EXT)}collectGpuTimers(){const c=this.gpuTimers;return this.gpuTimers={},c}collectDeferredRenderGpuQueries(){const c=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],c}queryGpuTimers(c){const f={};for(const _ in c){const b=c[_],E=this.context.extTimerQuery,C=E.getQueryObjectEXT(b.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(b.query),f[_]=C}return f}queryGpuTimeDeferredRender(c){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let _=0;for(const b of c)_+=f.getQueryObjectEXT(b,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(b);return _}translatePosMatrix(c,f,_,b,E){if(!_[0]&&!_[1])return c;const C=E?b==="map"?this.transform.angle:0:b==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),R=Math.cos(C);_=[_[0]*R-_[1]*z,_[0]*z+_[1]*R]}const A=[E?_[0]:Vt(f,_[0],this.transform.zoom),E?_[1]:Vt(f,_[1],this.transform.zoom),0],I=new Float32Array(16);return o.translate(I,c,A),I}saveTileTexture(c){const f=this._tileTextures[c.size[0]];f?f.push(c):this._tileTextures[c.size[0]]=[c]}getTileTexture(c){const f=this._tileTextures[c];return f&&f.length>0?f.pop():null}isPatternMissing(c){if(!c)return!1;if(!c.from||!c.to)return!0;const f=this.imageManager.getPattern(c.from.toString()),_=this.imageManager.getPattern(c.to.toString());return!f||!_}currentGlobalDefines(){const c=this.terrain&&this.terrain.renderingToTexture,f=this.style&&this.style.fog,_=[];return this.terrain&&!this.terrain.renderingToTexture&&_.push("TERRAIN"),f&&!c&&f.getOpacity(this.transform.pitch)!==0&&_.push("FOG"),c&&_.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&_.push("OVERDRAW_INSPECTOR"),_}useProgram(c,f,_){this.cache=this.cache||{};const b=_||[],E=this.currentGlobalDefines().concat(b),C=Pf.cacheKey(lh[c],c,E,f);return this.cache[C]||(this.cache[C]=new Pf(this.context,c,lh[c],f,$x[c],E)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const c=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(c.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(c,f,_){if(this.terrain&&this.terrain.renderingToTexture)return;const b=this.style.fog;if(b){const E=b.getOpacity(this.transform.pitch),C=((A,I,z,R,W,Y,oe,ee,te,ne,J)=>{const ce=A.transform,ae=I.properties.get("color").toArray01();ae[3]=R;const Se=A.frameCounter/1e3%1;return{u_fog_matrix:z?ce.calculateFogTileMatrix(z):A.identityMat,u_fog_range:I.getFovAdjustedRange(ce._fov),u_fog_color:ae,u_fog_horizon_blend:I.properties.get("horizon-blend"),u_fog_temporal_offset:Se,u_frustum_tl:W,u_frustum_tr:Y,u_frustum_br:oe,u_frustum_bl:ee,u_globe_pos:te,u_globe_radius:ne,u_viewport:J,u_globe_transition:o.globeToMercatorTransition(ce.zoom),u_is_globe:+(ce.projection.name==="globe")}})(this,b,_,E,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(c,C)}}setTileLoadedFlag(c){this.tileLoaded=c}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const c=this.context.gl,f=c.createTexture();return c.bindTexture(c.TEXTURE_2D,f),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,0,0,c.drawingBufferWidth,c.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const c=this.style&&this.style.fog;return!!c&&c.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const c=this._backgroundTiles,f=this._backgroundTiles={},_=this.transform.coveringTiles({tileSize:512});for(const b of _)f[b.key]=c[b.key]||new o.Tile(b,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class Uc{constructor(c=0,f=0,_=0,b=0){if(isNaN(c)||c<0||isNaN(f)||f<0||isNaN(_)||_<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=c,this.bottom=f,this.left=_,this.right=b}interpolate(c,f,_){return f.top!=null&&c.top!=null&&(this.top=o.number(c.top,f.top,_)),f.bottom!=null&&c.bottom!=null&&(this.bottom=o.number(c.bottom,f.bottom,_)),f.left!=null&&c.left!=null&&(this.left=o.number(c.left,f.left,_)),f.right!=null&&c.right!=null&&(this.right=o.number(c.right,f.right,_)),this}getCenter(c,f){const _=o.clamp((this.left+c-this.right)/2,0,c),b=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.pointGeometry(_,b)}equals(c){return this.top===c.top&&this.bottom===c.bottom&&this.left===c.left&&this.right===c.right}clone(){return new Uc(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function qf(m,c){const f=o.getColumn(m,3);o.fromQuat(m,c),o.setColumn(m,3,f)}function kl(m,c){const f=o.identity$1([]);return o.rotateZ$1(f,f,-c),o.rotateX$1(f,f,-m),f}function Al(m,c){const f=[m[0],m[1],0],_=[c[0],c[1],0];if(o.length(f)>=1e-15){const C=o.normalize([],f);o.scale$2(_,C,o.dot(_,C)),c[0]=_[0],c[1]=_[1]}const b=o.cross([],c,m);if(o.len(b)<1e-15)return null;const E=Math.atan2(-b[1],b[0]);return kl(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),E)}class Dt{constructor(c,f){this.position=c,this.orientation=f}get position(){return this._position}set position(c){if(c){const f=c instanceof o.MercatorCoordinate?c:new o.MercatorCoordinate(c[0],c[1],c[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(c,f){if(this.orientation=null,!this.position)return;const _=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(c)):0,b=this.position,E=o.MercatorCoordinate.fromLngLat(c,_),C=[E.x-b.x,E.y-b.y,E.z-b.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=Al(C,f)}setPitchBearing(c,f){this.orientation=kl(o.degToRad(c),o.degToRad(-f))}}class fo{constructor(c,f){this._transform=o.identity([]),this.orientation=f,this.position=c}get mercatorPosition(){const c=this.position;return new o.MercatorCoordinate(c[0],c[1],c[2])}get position(){const c=o.getColumn(this._transform,3);return[c[0],c[1],c[2]]}set position(c){var f;c&&o.setColumn(this._transform,3,[(f=c)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(c){this._orientation=c||o.identity$1([]),c&&qf(this._transform,this._orientation)}getPitchBearing(){const c=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(c[0]*c[0]+c[1]*c[1]),-c[2])}}setPitchBearing(c,f){this._orientation=kl(c,f),qf(this._transform,this._orientation)}forward(){const c=o.getColumn(this._transform,2);return[-c[0],-c[1],-c[2]]}up(){const c=o.getColumn(this._transform,1);return[-c[0],-c[1],-c[2]]}right(){const c=o.getColumn(this._transform,0);return[c[0],c[1],c[2]]}getCameraToWorld(c,f){const _=new Float64Array(16);return o.invert(_,this.getWorldToCamera(c,f)),_}getWorldToCameraPosition(c,f,_){const b=this.position;o.scale$2(b,b,-c);const E=new Float64Array(16);return o.fromScaling(E,[_,_,_]),o.translate(E,E,b),E[10]*=f,E}getWorldToCamera(c,f){const _=new Float64Array(16),b=new Float64Array(4),E=this.position;return o.conjugate(b,this._orientation),o.scale$2(E,E,-c),o.fromQuat(_,b),o.translate(_,_,E),_[1]*=-1,_[5]*=-1,_[9]*=-1,_[13]*=-1,_[8]*=f,_[9]*=f,_[10]*=f,_[11]*=f,_}getCameraToClipPerspective(c,f,_,b){const E=new Float64Array(16);return o.perspective(E,c,f,_,b),E}getDistanceToElevation(c){const f=c===0?0:o.mercatorZfromAltitude(c,this.position[1]),_=this.forward();return(f-this.position[2])/_[2]}clone(){return new fo([...this.position],[...this.orientation])}}function Yf(m,c){const f=$c(m.projection,m.zoom,m.width,m.height),_=function(E,C,A,I,z){const R=new o.LngLat(A.lng-180*$o,A.lat),W=new o.LngLat(A.lng+180*$o,A.lat),Y=E.project(R.lng,R.lat),oe=E.project(W.lng,W.lat),ee=-Math.atan2(oe.y-Y.y,oe.x-Y.x),te=o.MercatorCoordinate.fromLngLat(A);te.y=o.clamp(te.y,-.999975,.999975);const ne=te.toLngLat(),J=E.project(ne.lng,ne.lat),ce=o.MercatorCoordinate.fromLngLat(ne);ce.x+=$o;const ae=ce.toLngLat(),Se=E.project(ae.lng,ae.lat),be=Gc(Se.x-J.x,Se.y-J.y,ee),me=o.MercatorCoordinate.fromLngLat(ne);me.y+=$o;const Ee=me.toLngLat(),ve=E.project(Ee.lng,Ee.lat),Me=Gc(ve.x-J.x,ve.y-J.y,ee),Re=Math.abs(be.x)/Math.abs(Me.y),ut=o.identity([]);o.rotateZ(ut,ut,-ee*(1-(z?0:I)));const Pe=o.identity([]);return o.scale(Pe,Pe,[1,1-(1-Re)*I,1]),Pe[4]=-Me.x/Me.y*I,o.rotateZ(Pe,Pe,ee),o.multiply(Pe,ut,Pe),Pe}(m.projection,0,m.center,f,c),b=Zf(m);return o.scale(_,_,[b,b,1]),_}function Zf(m){const c=m.projection,f=$c(m.projection,m.zoom,m.width,m.height),_=Xf(c,m.center),b=Xf(c,o.LngLat.convert(c.center));return Math.pow(2,_*f+(1-f)*b)}function $c(m,c,f,_,b=1/0){const E=m.range;if(!E)return 0;const C=Math.min(b,Math.max(f,_)),A=Math.log(C/1024)/Math.LN2;return o.smoothstep(E[0]+A,E[1]+A,c)}const $o=1/4e4;function Xf(m,c){const f=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=new o.LngLat(c.lng-180*$o,f),b=new o.LngLat(c.lng+180*$o,f),E=m.project(_.lng,f),C=m.project(b.lng,f),A=o.MercatorCoordinate.fromLngLat(_),I=o.MercatorCoordinate.fromLngLat(b),z=C.x-E.x,R=C.y-E.y,W=I.x-A.x,Y=I.y-A.y,oe=Math.sqrt((W*W+Y*Y)/(z*z+R*R));return Math.log(oe)/Math.LN2}function Gc(m,c,f){const _=Math.cos(f),b=Math.sin(f);return{x:m*_-c*b,y:m*b+c*_}}class Wc{constructor(c,f,_,b,E,C,A){this.tileSize=512,this._renderWorldCopies=E===void 0||E,this._minZoom=c||0,this._maxZoom=f||22,this._minPitch=_==null?0:_,this._maxPitch=b==null?60:b,this.setProjection(C),this.setMaxBounds(A),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Uc,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new fo,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const c=new Wc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return c._elevation=this._elevation,c._centerAltitude=this._centerAltitude,c._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,c.tileSize=this.tileSize,c.width=this.width,c.height=this.height,c.cameraElevationReference=this.cameraElevationReference,c._center=this._center,c._setZoom(this.zoom),c._seaLevelZoom=this._seaLevelZoom,c.angle=this.angle,c._fov=this._fov,c._pitch=this._pitch,c._nearZ=this._nearZ,c._farZ=this._farZ,c._averageElevation=this._averageElevation,c._unmodified=this._unmodified,c._edgeInsets=this._edgeInsets.clone(),c._camera=this._camera.clone(),c._calcMatrices(),c.freezeTileCoverage=this.freezeTileCoverage,c.frustumCorners=this.frustumCorners,c}get elevation(){return this._elevation}set elevation(c){this._elevation!==c&&(this._elevation=c,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(c){const f=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||f)&&this._updateCameraOnTerrain(),(c||f)&&this._constrainCameraAltitude(),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(c){this.projectionOptions=c||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const _=!y(f,this.getProjection());return _&&this._calcMatrices(),this.mercatorFromTransition=!1,_}setMercatorFromTransition(){const c=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=c!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(c){this._minZoom!==c&&(this._minZoom=c,this.zoom=Math.max(this.zoom,c))}get maxZoom(){return this._maxZoom}set maxZoom(c){this._maxZoom!==c&&(this._maxZoom=c,this.zoom=Math.min(this.zoom,c))}get minPitch(){return this._minPitch}set minPitch(c){this._minPitch!==c&&(this._minPitch=c,this.pitch=Math.max(this.pitch,c))}get maxPitch(){return this._maxPitch}set maxPitch(c){this._maxPitch!==c&&(this._maxPitch=c,this.pitch=Math.min(this.pitch,c))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(c){c===void 0?c=!0:c===null&&(c=!1),this._renderWorldCopies=c}get worldSize(){return this.tileSize*this.scale}get cameraWorldSize(){const c=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(c))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(c){this.rotation=c}get rotation(){return-this.angle/Math.PI*180}set rotation(c){const f=-c*Math.PI/180;var _;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(_=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(_[1]=0,_[2]=0),_[0]=1,_[3]=1,_),function(b,E,C){var A=E[0],I=E[1],z=E[2],R=E[3],W=Math.sin(C),Y=Math.cos(C);b[0]=A*Y+z*W,b[1]=I*Y+R*W,b[2]=A*-W+z*Y,b[3]=I*-W+R*Y}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(c){const f=o.clamp(c,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(c){c=Math.max(.01,Math.min(60,c)),this._fov!==c&&(this._unmodified=!1,this._fov=c/180*Math.PI,this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(c){this._averageElevation=c,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(c){const f=Math.min(Math.max(c,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(c){this._zoom=c,this.scale=this.zoomScale(c),this.tileZoom=Math.floor(c),this.zoomFraction=c-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const c=this._elevation;this._centerAltitude=c.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=c.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const c=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],_=this.horizonLineFromTop();let b=0,E=0;for(let C=0;C<f.length;C++){const A=new o.pointGeometry(f[C][0]*this.width,_+f[C][1]*(this.height-_)),I=c.pointCoordinate(A);if(!I)continue;const z=1/Math.hypot(I[0]-this._camera.position[0],I[1]-this._camera.position[1]);b+=I[3]*z,E+=z}return E===0?NaN:b/E}get center(){return this._center}set center(c){c.lat===this._center.lat&&c.lng===this._center.lng||(this._unmodified=!1,this._center=c,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const c=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),_=this.pixelsPerMeter/this.worldSize*f,b=this._mercatorZfromZoom(c),E=this._mercatorZfromZoom(this._maxZoom),C=Math.max(b-_,E);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(c){this._edgeInsets.equals(c)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,c,1),this._calcMatrices())}computeZoomRelativeTo(c){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,c.toAltitude()));let _;_=c.z<this._camera.position[2]?[f.x,f.y,f.z]:[c.x,c.y,c.z];const b=o.length(o.sub([],this._camera.position,_));return o.clamp(this._zoomFromMercatorZ(b),this._minZoom,this._maxZoom)}setFreeCameraOptions(c){if(!this.height||!c.position&&!c.orientation)return;this._updateCameraState();let f=!1;if(c.orientation&&!o.exactEquals(c.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(c.orientation)),c.position){const _=[c.position.x,c.position.y,c.position.z];o.exactEquals$1(_,this._camera.position)||(this._setCameraPosition(_),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const c=this._camera.position,f=new Dt;return f.position=new o.MercatorCoordinate(c[0],c[1],c[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(c){if(!o.length$1(c))return!1;o.normalize$1(c,c);const f=o.transformQuat([],[0,0,-1],c),_=o.transformQuat([],[0,-1,0],c);if(_[2]<0)return!1;const b=Al(f,_);return!!b&&(this._camera.orientation=b,!0)}_setCameraPosition(c){const f=this.zoomScale(this.minZoom)*this.tileSize,_=this.zoomScale(this.maxZoom)*this.tileSize,b=this.cameraToCenterDistance;c[2]=o.clamp(c[2],b/_,b/f),this._camera.position=c}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(c){return this._edgeInsets.equals(c)}interpolatePadding(c,f,_){this._unmodified=!1,this._edgeInsets.interpolate(c,f,_),this._constrain(),this._calcMatrices()}coveringZoomLevel(c){const f=(c.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/c.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(c){const f=[new o.UnwrappedTileID(0,c)];if(this.renderWorldCopies){const _=this.pointCoordinate(new o.pointGeometry(0,0)),b=this.pointCoordinate(new o.pointGeometry(this.width,0)),E=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),C=this.pointCoordinate(new o.pointGeometry(0,this.height)),A=Math.floor(Math.min(_.x,b.x,E.x,C.x)),I=Math.floor(Math.max(_.x,b.x,E.x,C.x)),z=1;for(let R=A-z;R<=I+z;R++)R!==0&&f.push(new o.UnwrappedTileID(R,c))}return f}coveringTiles(c){let f=this.coveringZoomLevel(c);const _=f,b=this.elevation&&!c.isTerrainDEM,E=this.projection.name==="mercator";if(c.minzoom!==void 0&&f<c.minzoom)return[];c.maxzoom!==void 0&&f>c.maxzoom&&(f=c.maxzoom);const C=this.locationCoordinate(this.center),A=this.center.lat,I=1<<f,z=[I*C.x,I*C.y,0],R=this.projection.name==="globe",W=!R,Y=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,W),oe=R?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),ee=I*o.mercatorZfromAltitude(1,this.center.lat),te=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),ne=[I*oe.x,I*oe.y,te*(W?1:ee)],J=this.cameraToCenterDistance/c.tileSize*(c.roundZoom?1:.502),ce=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,ae=c.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Se=c.isTerrainDEM?-ae:this._elevation?this._elevation.getMinElevationBelowMSL():0,be=this.projection.isReprojectedInTileSpace?Zf(this):1,me=$e=>{const lt=1/4e4,Ze=new o.MercatorCoordinate($e.x+lt,$e.y,$e.z),Tt=new o.MercatorCoordinate($e.x,$e.y+lt,$e.z),bt=$e.toLngLat(),Bt=Ze.toLngLat(),qt=Tt.toLngLat(),rn=this.locationCoordinate(bt),wn=this.locationCoordinate(Bt),Nt=this.locationCoordinate(qt),an=Math.hypot(wn.x-rn.x,wn.y-rn.y),In=Math.hypot(Nt.x-rn.x,Nt.y-rn.y);return Math.sqrt(an*In)*be/lt},Ee=$e=>{const lt=ae,Ze=Se;return{aabb:o.tileAABB(this,I,0,0,0,$e,Ze,lt,this.projection),zoom:0,x:0,y:0,minZ:Ze,maxZ:lt,wrap:$e,fullyVisible:!1}},ve=[];let Me=[];const Re=f,ut=c.reparseOverscaled?_:f,Pe=$e=>$e*$e,Ye=Pe((te-this._centerAltitude)*ee),et=$e=>{if(!this._elevation||!$e.tileID||!E)return;const lt=this._elevation.getMinMaxForTile($e.tileID),Ze=$e.aabb;lt?(Ze.min[2]=lt.min,Ze.max[2]=lt.max,Ze.center[2]=(Ze.min[2]+Ze.max[2])/2):($e.shouldSplit=yt($e),$e.shouldSplit||(Ze.min[2]=Ze.max[2]=Ze.center[2]=this._centerAltitude))},yt=$e=>{if($e.zoom<ce)return!0;if($e.zoom===Re)return!1;if($e.shouldSplit!=null)return $e.shouldSplit;const lt=$e.aabb.distanceX(ne),Ze=$e.aabb.distanceY(ne);let Tt=Ye,bt=1;if(R){Tt=Pe($e.aabb.distanceZ(ne));const qt=Math.pow(2,$e.zoom),rn=o.latFromMercatorY(($e.y+1)/qt),wn=o.latFromMercatorY($e.y/qt),Nt=Math.min(Math.max(A,rn),wn),an=o.circumferenceAtLatitude(Nt)/o.circumferenceAtLatitude(A);if(bt=Nt===A?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,an/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&$e.zoom===Re-1&&an>=.9)return!0}else if(b&&(Tt=Pe($e.aabb.distanceZ(ne)*ee)),this.projection.isReprojectedInTileSpace&&_<=5){const qt=Math.pow(2,$e.zoom),rn=me(new o.MercatorCoordinate(($e.x+.5)/qt,($e.y+.5)/qt));bt=rn>.85?1:rn}const Bt=lt*lt+Ze*Ze+Tt;return Bt<Pe((1<<Re-$e.zoom)*J*bt*((qt,rn)=>{if(rn*Pe(.707)<qt)return 1;const wn=Math.sqrt(rn/qt);return wn/(1.4144271570014144+(Math.pow(1.1,wn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(Tt,Ye),Bt))};if(this.renderWorldCopies)for(let $e=1;$e<=3;$e++)ve.push(Ee(-$e)),ve.push(Ee($e));for(ve.push(Ee(0));ve.length>0;){const $e=ve.pop(),lt=$e.x,Ze=$e.y;let Tt=$e.fullyVisible;if(!Tt){const bt=$e.aabb.intersects(Y);if(bt===0)continue;Tt=bt===2}if($e.zoom!==Re&&yt($e))for(let bt=0;bt<4;bt++){const Bt=(lt<<1)+bt%2,qt=(Ze<<1)+(bt>>1),rn={aabb:E?$e.aabb.quadrant(bt):o.tileAABB(this,I,$e.zoom+1,Bt,qt,$e.wrap,$e.minZ,$e.maxZ,this.projection),zoom:$e.zoom+1,x:Bt,y:qt,wrap:$e.wrap,fullyVisible:Tt,tileID:void 0,shouldSplit:void 0,minZ:$e.minZ,maxZ:$e.maxZ};b&&!R&&(rn.tileID=new o.OverscaledTileID($e.zoom+1===Re?ut:$e.zoom+1,$e.wrap,$e.zoom+1,Bt,qt),et(rn)),ve.push(rn)}else{const bt=$e.zoom===Re?ut:$e.zoom;if(c.minzoom&&c.minzoom>bt)continue;const Bt=z[0]-(.5+lt+($e.wrap<<$e.zoom))*(1<<f-$e.zoom),qt=z[1]-.5-Ze,rn=$e.tileID?$e.tileID:new o.OverscaledTileID(bt,$e.wrap,$e.zoom,lt,Ze);Me.push({tileID:rn,distanceSq:Bt*Bt+qt*qt})}}if(this.fogCullDistSq){const $e=this.fogCullDistSq,lt=this.horizonLineFromTop();Me=Me.filter(Ze=>{const Tt=[0,0,0,1],bt=[o.EXTENT,o.EXTENT,0,1],Bt=this.calculateFogTileMatrix(Ze.tileID.toUnwrapped());o.transformMat4$1(Tt,Tt,Bt),o.transformMat4$1(bt,bt,Bt);const qt=o.getAABBPointSquareDist(Tt,bt);if(qt===0)return!0;let rn=!1;const wn=this._elevation;if(wn&&qt>$e&&lt!==0){const Nt=this.calculateProjMatrix(Ze.tileID.toUnwrapped());let an;c.isTerrainDEM||(an=wn.getMinMaxForTile(Ze.tileID)),an||(an={min:Se,max:ae});const In=o.furthestTileCorner(this.rotation),ui=[In[0]*o.EXTENT,In[1]*o.EXTENT,an.max];o.transformMat4(ui,ui,Nt),rn=(1-ui[1])*this.height*.5<lt}return qt<$e||rn})}return Me.sort(($e,lt)=>$e.distanceSq-lt.distanceSq).map($e=>$e.tileID)}resize(c,f){this.width=c,this.height=f,this.pixelsToGLUnits=[2/c,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(c){return Math.pow(2,c)}scaleZoom(c){return Math.log(c)/Math.LN2}project(c){const f=o.clamp(c.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),_=this.projection.project(c.lng,f);return new o.pointGeometry(_.x*this.worldSize,_.y*this.worldSize)}unproject(c){return this.projection.unproject(c.x/this.worldSize,c.y/this.worldSize)}get point(){return this.project(this.center)}setLocationAtPoint(c,f){let _,b;const E=this.centerPoint;if(this.projection.name==="globe"){const A=this.worldSize;_=(f.x-E.x)/A,b=(f.y-E.y)/A}else{const A=this.pointCoordinate(f),I=this.pointCoordinate(E);_=A.x-I.x,b=A.y-I.y}const C=this.locationCoordinate(c);this.setLocation(new o.MercatorCoordinate(C.x-_,C.y-b))}setLocation(c){this.center=this.coordinateLocation(c),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(c){return this.projection.locationPoint(this,c)}locationPoint3D(c){return this.projection.locationPoint(this,c,!0)}pointLocation(c){return this.coordinateLocation(this.pointCoordinate(c))}pointLocation3D(c){return this.coordinateLocation(this.pointCoordinate3D(c))}locationCoordinate(c,f){const _=f?o.mercatorZfromAltitude(f,c.lat):void 0,b=this.projection.project(c.lng,c.lat);return new o.MercatorCoordinate(b.x,b.y,_)}coordinateLocation(c){return this.projection.unproject(c.x,c.y)}pointRayIntersection(c,f){const _=f!=null?f:this._centerAltitude,b=[c.x,c.y,0,1],E=[c.x,c.y,1,1];o.transformMat4$1(b,b,this.pixelMatrixInverse),o.transformMat4$1(E,E,this.pixelMatrixInverse);const C=E[3];o.scale$1(b,b,1/b[3]),o.scale$1(E,E,1/C);const A=b[2],I=E[2];return{p0:b,p1:E,t:A===I?0:(_-A)/(I-A)}}screenPointToMercatorRay(c){const f=[c.x,c.y,0,1],_=[c.x,c.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(_,_,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(_,_,1/_[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,_[2]=o.mercatorZfromAltitude(_[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(_,_,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],_,f)))}rayIntersectionCoordinate(c){const{p0:f,p1:_,t:b}=c,E=o.mercatorZfromAltitude(f[2],this._center.lat),C=o.mercatorZfromAltitude(_[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],_[0],b)/this.worldSize,o.number(f[1],_[1],b)/this.worldSize,o.number(E,C,b))}pointCoordinate(c,f=this._centerAltitude){return this.projection.pointCoordinate(this,c.x,c.y,f)}pointCoordinate3D(c){if(!this.elevation)return this.pointCoordinate(c);let f=this.projection.pointCoordinate3D(this,c.x,c.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let _=0,b=this.horizonLineFromTop();if(c.y>b)return this.pointCoordinate(c);const E=.02*b,C=c.clone();for(let A=0;A<10&&b-_>E;A++){C.y=o.number(_,b,.66);const I=this.projection.pointCoordinate3D(this,C.x,C.y);I?(b=C.y,f=I):_=C.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(c)}isPointAboveHorizon(c){return this.projection.isPointAboveHorizon(this,c)}_coordinatePoint(c,f){const _=f&&this.elevation?this.elevation.getAtPointOrZero(c,this._centerAltitude):this._centerAltitude,b=[c.x*this.worldSize,c.y*this.worldSize,_+c.toAltitude(),1];return o.transformMat4$1(b,b,this.pixelMatrix),b[3]>0?new o.pointGeometry(b[0]/b[3],b[1]/b[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBounds(c,f){const _=new o.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),b=new o.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),E=new o.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),C=new o.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom);let A=this.pointCoordinate(_,c),I=this.pointCoordinate(b,c);const z=this.pointCoordinate(E,f),R=this.pointCoordinate(C,f),W=(Y,oe)=>(oe.y-Y.y)/(oe.x-Y.x);return A.y>1&&I.y>=0?A=new o.MercatorCoordinate((1-R.y)/W(R,A)+R.x,1):A.y<0&&I.y<=1&&(A=new o.MercatorCoordinate(-R.y/W(R,A)+R.x,0)),I.y>1&&A.y>=0?I=new o.MercatorCoordinate((1-z.y)/W(z,I)+z.x,1):I.y<0&&A.y<=1&&(I=new o.MercatorCoordinate(-z.y/W(z,I)+z.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(A)).extend(this.coordinateLocation(I)).extend(this.coordinateLocation(R)).extend(this.coordinateLocation(z))}_getBounds3D(){const c=this.elevation;if(!c.visibleDemTiles.length)return this._getBounds(0,0);const f=c.visibleDemTiles.reduce((_,b)=>{if(b.dem){const E=b.dem.tree;_.min=Math.min(_.min,E.minimums[0]),_.max=Math.max(_.max,E.maximums[0])}return _},{min:Number.MAX_VALUE,max:0});return this._getBounds(f.min*c.exaggeration(),f.max*c.exaggeration())}getBounds(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}horizonLineFromTop(c=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,_=this.height/2-f*(1-this._horizonShift);return c?Math.max(0,_):_}getMaxBounds(){return this.maxBounds}setMaxBounds(c){this.maxBounds=c,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,c&&(this.minLat=c.getSouth(),this.maxLat=c.getNorth(),this.minLng=c.getWest(),this.maxLng=c.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(c,f){return this.projection.createTileMatrix(this,f,c)}calculateDistanceTileData(c){const f=c.key,_=this._distanceTileDataCache;if(_[f])return _[f];const b=c.canonical,E=1/this.height,C=this.cameraWorldSize/this.zoomScale(b.z),A=(b.x+Math.pow(2,b.z)*c.wrap)*C,I=b.y*C,z=this.point,R=this.angle,W=Math.sin(-R),Y=-Math.cos(-R);return _[f]={bearing:[W,Y],center:[(z.x-A)*E,(z.y-I)*E],scale:C/o.EXTENT*E},_[f]}calculateFogTileMatrix(c){const f=c.key,_=this._fogTileMatrixCache;if(_[f])return _[f];const b=this.projection.createTileMatrix(this,this.cameraWorldSize,c);return o.multiply(b,this.worldToFogMatrix,b),_[f]=new Float32Array(b),_[f]}calculateProjMatrix(c,f=!1){const _=c.key,b=f?this._alignedProjMatrixCache:this._projMatrixCache;if(b[_])return b[_];const E=this.calculatePosMatrix(c,this.worldSize);return o.multiply(E,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,E),b[_]=new Float32Array(E),b[_]}calculatePixelsToTileUnitsMatrix(c){const f=c.tileID.key,_=this._pixelsToTileUnitsCache;if(_[f])return _[f];const b=function(E,C){const{scale:A}=E.tileTransform,I=A*o.EXTENT/(E.tileSize*Math.pow(2,C.zoom-E.tileID.overscaledZ+E.tileID.canonical.z));return z=new Float32Array(4),Y=(R=C.inverseAdjustmentMatrix)[1],oe=R[2],ee=R[3],ne=(W=[I,I])[1],z[0]=R[0]*(te=W[0]),z[1]=Y*te,z[2]=oe*ne,z[3]=ee*ne,z;var z,R,W,Y,oe,ee,te,ne}(c,this);return _[f]=b,_[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const c=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(f),b=this._camera.forward(),E=o.mercatorZfromAltitude(1,this._center.lat);_[2]/=E,b[2]/=E,o.normalize(b,b);const C=c.raycast(_,b,c.exaggeration());if(C){const A=o.scaleAndAdd([],_,b,C),I=new o.MercatorCoordinate(A[0],A[1],o.mercatorZfromAltitude(A[2],o.latFromMercatorY(A[1]))),z=(I.z+o.length([I.x-_[0],I.y-_[1],I.z-_[2]*E]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(z),this._centerAltitude=I.toAltitude(),this._center=this.coordinateLocation(I),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const c=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,_=this._computeCameraPosition(f),b=c.getAtPointOrZero(new o.MercatorCoordinate(..._)),E=this._minimumHeightOverTerrain()*Math.cos(o.degToRad(this._maxPitch)),C=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*b;if(C<E){const A=this.locationCoordinate(this._center,this._centerAltitude),I=[A.x-_[0],A.y-_[1],A.z-_[2]],z=o.length(I);I[2]-=(E-C)/this._pixelsPerMercatorPixel;const R=o.length(I);if(R===0)return;o.scale$2(I,I,z/R*this._pixelsPerMercatorPixel),this._camera.position=[A.x-I[0],A.y-I[1],A.z*this._pixelsPerMercatorPixel-I[2]],this._camera.orientation=Al(I,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const c=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||c){const Y=this.center;return Y.lat=o.clamp(Y.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!c)&&(Y.lng=o.clamp(Y.lng,this.minLng,this.maxLng)),this.center=Y,void(this._constraining=!1)}const f=this._unmodified,{x:_,y:b}=this.point;let E=0,C=_,A=b;const I=this.width/2,z=this.height/2,R=this.worldMinY*this.scale,W=this.worldMaxY*this.scale;if(b-z<R&&(A=R+z),b+z>W&&(A=W-z),W-R<this.height&&(E=Math.max(E,this.height/(W-R)),A=(W+R)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const Y=this.worldMinX*this.scale,oe=this.worldMaxX*this.scale,ee=this.worldSize/2-(Y+oe)/2;C=(_+ee+this.worldSize)%this.worldSize-ee,C-I<Y&&(C=Y+I),C+I>oe&&(C=oe-I),oe-Y<this.width&&(E=Math.max(E,this.width/(oe-Y)),C=(oe+Y)/2)}C===_&&A===b||(this.center=this.unproject(new o.pointGeometry(C,A))),E&&(this.zoom+=this.scaleZoom(E)),this._constrainCameraAltitude(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let c=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(c=Math.max(c,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),c}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const c=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const _=$c(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,_),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const b=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?f:1),E=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);E[8]=2*-c.x/this.width,E[9]=2*c.y/this.height;let C=o.mul([],E,b);if(this.projection.isReprojectedInTileSpace){const be=this.locationCoordinate(this.center),me=o.identity([]);o.translate(me,me,[be.x*this.worldSize,be.y*this.worldSize,0]),o.multiply(me,me,Yf(this)),o.translate(me,me,[-be.x*this.worldSize,-be.y*this.worldSize,0]),o.multiply(C,C,me),this.inverseAdjustmentMatrix=function(Ee){const ve=Yf(Ee,!0);return ze([],[ve[0],ve[1],ve[4],ve[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],C,[this.worldSize,this.worldSize,this.worldSize/f,1]),this.projMatrix=C,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const A=o.invert([],E);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(A,this.horizonLineFromTop(),this.height);const I=new Float32Array(16);o.identity(I),o.scale(I,I,[1,-1,1]),o.rotateX(I,I,this._pitch),o.rotateZ(I,I,this.angle);const z=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),R=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;z[8]=2*-c.x/this.width,z[9]=2*(c.y+R)/this.height,this.skyboxMatrix=o.multiply(I,z,I);const W=this.point,Y=W.x,oe=W.y,ee=this.width%2/2,te=this.height%2/2,ne=Math.cos(this.angle),J=Math.sin(this.angle),ce=Y-Math.round(Y)+ne*ee+J*te,ae=oe-Math.round(oe)+ne*te+J*ee,Se=new Float64Array(C);if(o.translate(Se,Se,[ce>.5?ce-1:ce,ae>.5?ae-1:ae,0]),this.alignedProjMatrix=Se,C=o.create(),o.scale(C,C,[this.width/2,-this.height/2,1]),o.translate(C,C,[1,-1,0]),this.labelPlaneMatrix=C,C=o.create(),o.scale(C,C,[1,-1,1]),o.translate(C,C,[-1,-1,0]),o.scale(C,C,[2/this.width,2/this.height,1]),this.glCoordMatrix=C,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},C=o.invert(new Float64Array(16),this.pixelMatrix),!C)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=C,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const be=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(be,be,b),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=C;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const c=this.cameraWorldSize,f=this.cameraPixelsPerMeter,_=this._camera.position,b=1/this.height/this._pixelsPerMercatorPixel,E=[c,c,f];o.scale$2(E,E,b),o.scale$2(_,_,-1),o.multiply$2(_,_,E);const C=o.create();o.translate(C,C,_),o.scale(C,C,E),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(c,f,b)}_computeCameraPosition(c){const f=(c=c||this.pixelsPerMeter)/this.pixelsPerMeter,_=this._camera.forward(),b=this.point,E=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-c/this.worldSize*this._centerAltitude;return[b.x/this.worldSize-_[0]*E,b.y/this.worldSize-_[1]*E,c/this.worldSize*this._centerAltitude-_[2]*E]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(c){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),_=c[2];let b=1;_>0&&(b=Math.min((f-this._camera.position[2])/_,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,c,b),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}_updateStateFromCamera(){const c=this._camera.position,f=this._camera.forward(),{pitch:_,bearing:b}=this._camera.getPitchBearing(),E=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),A=Math.max((c[2]-E)/Math.cos(_),C),I=this._zoomFromMercatorZ(A);o.scaleAndAdd(c,c,f,A),this._pitch=o.clamp(_,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(b,-Math.PI,Math.PI),this._setZoom(o.clamp(I,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(c[0],c[1],c[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(c){return Math.pow(2,c)*this.tileSize}_mercatorZfromZoom(c){return this.cameraToCenterDistance/this._worldSizeFromZoom(c)}_minimumHeightOverTerrain(){const c=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(c)}_zoomFromMercatorZ(c){return this.scaleZoom(this.cameraToCenterDistance/(c*this.tileSize))}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(c,f){const _=Math.min(c.x,f.x),b=Math.max(c.x,f.x),E=Math.min(c.y,f.y),C=Math.max(c.y,f.y);if(E<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const A=[new o.pointGeometry(_,E),new o.pointGeometry(b,C),new o.pointGeometry(_,C),new o.pointGeometry(b,E)],I=this.renderWorldCopies?-3:0,z=this.renderWorldCopies?4:1;for(const R of A){const W=this.pointRayIntersection(R);if(W.t<0)return!0;const Y=this.rayIntersectionCoordinate(W);if(Y.x<I||Y.y<0||Y.x>z||Y.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(c,f){const _=o.length(o.sub([],this._camera.position,c)),b=this._zoomFromMercatorZ(_)+f;return _-this._mercatorZfromZoom(b)}getCameraPoint(){if(this.projection.name==="globe"){const c=function(f,_){const b=[f[0],f[1],f[2],1];o.transformMat4$1(b,b,_);const E=Math.max(b[3],1e-6);return[b[0]/E,b[1]/E,b[2]/E,E]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(c[0],c[1])}{const c=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,c))}}getCameraToCenterDistance(c){const f=$c(c,this.zoom,this.width,this.height,1024),_=c.pixelSpaceConversion(this.center.lat,this.worldSize,f);return .5/Math.tan(.5*this._fov)*this.height*_}}function Hc(m,c){let f=!1,_=null;const b=()=>{_=null,f&&(m(),_=setTimeout(b,c),f=!1)};return()=>(f=!0,_||b(),_)}class r_{constructor(c){this._hashName=c&&encodeURIComponent(c),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Hc(this._updateHashUnthrottled.bind(this),300)}addTo(c){return this._map=c,o.window.addEventListener("hashchange",this._onHashChange,!1),c.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const c=this._map;if(!c)return"";const f=Kf(c);if(this._hashName){const _=this._hashName;let b=!1;const E=o.window.location.hash.slice(1).split("&").map(C=>{const A=C.split("=")[0];return A===_?(b=!0,`${A}=${f}`):C}).filter(C=>C);return b||E.push(`${_}=${f}`),`#${E.join("&")}`}return`#${f}`}_getCurrentHash(){const c=o.window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(_=>_.split("=")).forEach(_=>{_[0]===this._hashName&&(f=_)}),(f&&f[1]||"").split("/")}return c.split("/")}_onHashChange(){const c=this._map;if(!c)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(_=>isNaN(_))){const _=c.dragRotate.isEnabled()&&c.touchZoomRotate.isEnabled()?+(f[3]||0):c.getBearing();return c.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:_,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const c=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,c)}}function Kf(m,c){const f=m.getCenter(),_=Math.round(100*m.getZoom())/100,b=Math.ceil((_*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,b),C=Math.round(f.lng*E)/E,A=Math.round(f.lat*E)/E,I=m.getBearing(),z=m.getPitch();let R=c?`/${C}/${A}/${_}`:`${_}/${A}/${C}`;return(I||z)&&(R+="/"+Math.round(10*I)/10),z&&(R+=`/${Math.round(z)}`),R}const Ss={linearity:.3,easing:o.bezier(0,0,.3,1)},Wx=o.extend({deceleration:2500,maxSpeed:1400},Ss),Hx=o.extend({deceleration:20,maxSpeed:1400},Ss),o_=o.extend({deceleration:1e3,maxSpeed:360},Ss),xh=o.extend({deceleration:1e3,maxSpeed:90},Ss);class Jf{constructor(c){this._map=c,this.clear()}clear(){this._inertiaBuffer=[]}record(c){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:c})}_drainInertiaBuffer(){const c=this._inertiaBuffer,f=o.exported.now();for(;c.length>0&&f-c[0].time>160;)c.shift()}_onMoveEnd(c){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const f={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)f.zoom+=E.zoomDelta||0,f.bearing+=E.bearingDelta||0,f.pitch+=E.pitchDelta||0,E.panDelta&&f.pan._add(E.panDelta),E.around&&(f.around=E.around),E.pinchAround&&(f.pinchAround=E.pinchAround);const _=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(f.pan.mag()){const E=Yc(f.pan.mag(),_,o.extend({},Wx,c||{}));b.offset=f.pan.mult(E.amount/f.pan.mag()),b.center=this._map.transform.center,qc(b,E)}if(f.zoom){const E=Yc(f.zoom,_,Hx);b.zoom=this._map.transform.zoom+E.amount,qc(b,E)}if(f.bearing){const E=Yc(f.bearing,_,o_);b.bearing=this._map.transform.bearing+o.clamp(E.amount,-179,179),qc(b,E)}if(f.pitch){const E=Yc(f.pitch,_,xh);b.pitch=this._map.transform.pitch+E.amount,qc(b,E)}if(b.zoom||b.bearing){const E=f.pinchAround===void 0?f.around:f.pinchAround;b.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),b.noMoveStart=!0,b}}function qc(m,c){(!m.duration||m.duration<c.duration)&&(m.duration=c.duration,m.easing=c.easing)}function Yc(m,c,f){const{maxSpeed:_,linearity:b,deceleration:E}=f,C=o.clamp(m*b/(c/1e3),-_,_),A=Math.abs(C)/(E*b);return{easing:f.easing,duration:1e3*A,amount:C*(A/2)}}class wr extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,_,b={}){const E=de(f.getCanvasContainer(),_),C=f.unproject(E);super(c,o.extend({point:E,lngLat:C,originalEvent:_},b)),this._defaultPrevented=!1,this.target=f}}class Dl extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,_){const b=c==="touchend"?_.changedTouches:_.touches,E=xe(f.getCanvasContainer(),b),C=E.map(I=>f.unproject(I)),A=E.reduce((I,z,R,W)=>I.add(z.div(W.length)),new o.pointGeometry(0,0));super(c,{points:E,point:A,lngLats:C,lngLat:f.unproject(A),originalEvent:_}),this._defaultPrevented=!1}}class s_ extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(c,f,_){super(c,{originalEvent:_}),this._defaultPrevented=!1}}class a_{constructor(c,f){this._map=c,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(c){return this._firePreventable(new s_(c.type,this._map,c))}mousedown(c,f){return this._mousedownPos=f,this._firePreventable(new wr(c.type,this._map,c))}mouseup(c){this._map.fire(new wr(c.type,this._map,c))}preclick(c){const f=o.extend({},c);f.type="preclick",this._map.fire(new wr(f.type,this._map,f))}click(c,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(c),this._map.fire(new wr(c.type,this._map,c)))}dblclick(c){return this._firePreventable(new wr(c.type,this._map,c))}mouseover(c){this._map.fire(new wr(c.type,this._map,c))}mouseout(c){this._map.fire(new wr(c.type,this._map,c))}touchstart(c){return this._firePreventable(new Dl(c.type,this._map,c))}touchmove(c){this._map.fire(new Dl(c.type,this._map,c))}touchend(c){this._map.fire(new Dl(c.type,this._map,c))}touchcancel(c){this._map.fire(new Dl(c.type,this._map,c))}_firePreventable(c){if(this._map.fire(c),c.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class l_{constructor(c){this._map=c}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(c){this._map.fire(new wr(c.type,this._map,c))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new wr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(c){this._delayContextMenu?this._contextMenuEvent=c:this._map.fire(new wr(c.type,this._map,c)),this._map.listens("contextmenu")&&c.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class c_{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._container=c.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(c,f){this.isEnabled()&&c.shiftKey&&c.button===0&&(U(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(c,f){if(!this._active)return;const _=f;if(this._lastPos.equals(_)||!this._box&&_.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=_,this._box||(this._box=O("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",c));const E=Math.min(b.x,_.x),C=Math.max(b.x,_.x),A=Math.min(b.y,_.y),I=Math.max(b.y,_.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${E}px,${A}px)`,this._box.style.width=C-E+"px",this._box.style.height=I-A+"px")})}mouseupWindow(c,f){if(!this._active||c.button!==0)return;const _=this._startPos,b=f;if(this.reset(),ie(),_.x!==b.x||_.y!==b.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:c})),{cameraAnimation:E=>E.fitScreenCoordinates(_,b,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",c)}keydown(c){this._active&&c.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",c))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),Z(),delete this._startPos,delete this._lastPos}_fireEvent(c,f){return this._map.fire(new o.Event(c,{originalEvent:f}))}}function bh(m,c){const f={};for(let _=0;_<m.length;_++)f[m[_].identifier]=c[_];return f}class Il{constructor(c){this.reset(),this.numTouches=c.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(c,f,_){(this.centroid||_.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=c.timeStamp),_.length===this.numTouches&&(this.centroid=function(b){const E=new o.pointGeometry(0,0);for(const C of b)E._add(C);return E.div(b.length)}(f),this.touches=bh(_,f)))}touchmove(c,f,_){if(this.aborted||!this.centroid)return;const b=bh(_,f);for(const E in this.touches){const C=this.touches[E],A=b[E];(!A||A.dist(C)>30)&&(this.aborted=!0)}}touchend(c,f,_){if((!this.centroid||c.timeStamp-this.startTime>500)&&(this.aborted=!0),_.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class wh{constructor(c){this.singleTap=new Il(c),this.numTaps=c.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(c,f,_){this.singleTap.touchstart(c,f,_)}touchmove(c,f,_){this.singleTap.touchmove(c,f,_)}touchend(c,f,_){const b=this.singleTap.touchend(c,f,_);if(b){const E=c.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(b)<30;if(E&&C||this.reset(),this.count++,this.lastTime=c.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class u_{constructor(){this._zoomIn=new wh({numTouches:1,numTaps:2}),this._zoomOut=new wh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(c,f,_){this._zoomIn.touchstart(c,f,_),this._zoomOut.touchstart(c,f,_)}touchmove(c,f,_){this._zoomIn.touchmove(c,f,_),this._zoomOut.touchmove(c,f,_)}touchend(c,f,_){const b=this._zoomIn.touchend(c,f,_),E=this._zoomOut.touchend(c,f,_);return b?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(b)},{originalEvent:c})}):E?(this._active=!0,c.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(E)},{originalEvent:c})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const h_={0:1,2:2};class Eh{constructor(c){this.reset(),this._clickTolerance=c.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(c,f){return!1}_move(c,f){return{}}mousedown(c,f){if(this._lastPoint)return;const _=Ce(c);this._correctButton(c,_)&&(this._lastPoint=f,this._eventButton=_)}mousemoveWindow(c,f){const _=this._lastPoint;if(_){if(c.preventDefault(),this._eventButton!=null&&function(b,E){const C=h_[E];return b.buttons===void 0||(b.buttons&C)!==C}(c,this._eventButton))this.reset();else if(this._moved||!(f.dist(_)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(_,f)}}mouseupWindow(c){this._lastPoint&&Ce(c)===this._eventButton&&(this._moved&&ie(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class d_ extends Eh{mousedown(c,f){super.mousedown(c,f),this._lastPoint&&(this._active=!0)}_correctButton(c,f){return f===0&&!c.ctrlKey}_move(c,f){return{around:f,panDelta:f.sub(c)}}}class Qf extends Eh{_correctButton(c,f){return f===0&&c.ctrlKey||f===2}_move(c,f){const _=.8*(f.x-c.x);if(_)return this._active=!0,{bearingDelta:_}}contextmenu(c){c.preventDefault()}}class dr extends Eh{_correctButton(c,f){return f===0&&c.ctrlKey||f===2}_move(c,f){const _=-.5*(f.y-c.y);if(_)return this._active=!0,{pitchDelta:_}}contextmenu(c){c.preventDefault()}}class qx{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(c,f,_){return this._calculateTransform(c,f,_)}touchmove(c,f,_){if(this._active&&!(_.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(_.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return c.cancelable&&c.preventDefault(),this._calculateTransform(c,f,_)}}touchend(c,f,_){this._calculateTransform(c,f,_),this._active&&_.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(c,f,_){_.length>0&&(this._active=!0);const b=bh(_,f),E=new o.pointGeometry(0,0),C=new o.pointGeometry(0,0);let A=0;for(const z in b){const R=b[z],W=this._touches[z];W&&(E._add(R),C._add(R.sub(W)),A++,b[z]=R)}if(this._touches=b,A<this._minTouches||!C.mag())return;const I=C.div(A);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(A),panDelta:I}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=O("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Sh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(c){}_move(c,f,_){return{}}touchstart(c,f,_){this._firstTwoTouches||_.length<2||(this._firstTwoTouches=[_[0].identifier,_[1].identifier],this._start([f[0],f[1]]))}touchmove(c,f,_){const b=this._firstTwoTouches;if(!b)return;c.preventDefault();const[E,C]=b,A=Th(_,f,E),I=Th(_,f,C);if(!A||!I)return;const z=this._aroundCenter?null:A.add(I).div(2);return this._move([A,I],z,c)}touchend(c,f,_){if(!this._firstTwoTouches)return;const[b,E]=this._firstTwoTouches,C=Th(_,f,b),A=Th(_,f,E);C&&A||(this._active&&ie(),this.reset())}touchcancel(){this.reset()}enable(c){this._enabled=!0,this._aroundCenter=!!c&&c.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Th(m,c,f){for(let _=0;_<m.length;_++)if(m[_].identifier===f)return c[_]}function f_(m,c){return Math.log(m/c)/Math.LN2}class Ts extends Sh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(c){this._startDistance=this._distance=c[0].dist(c[1])}_move(c,f){const _=this._distance;if(this._distance=c[0].dist(c[1]),this._active||!(Math.abs(f_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:f_(this._distance,_),pinchAround:f}}}function ep(m,c){return 180*m.angleWith(c)/Math.PI}class Pl extends Sh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(c){this._startVector=this._vector=c[0].sub(c[1]),this._minDiameter=c[0].dist(c[1])}_move(c,f){const _=this._vector;if(this._vector=c[0].sub(c[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ep(this._vector,_),pinchAround:f}}_isBelowThreshold(c){this._minDiameter=Math.min(this._minDiameter,c.mag());const f=25/(Math.PI*this._minDiameter)*360,_=ep(c,this._startVector);return Math.abs(_)<f}}function So(m){return Math.abs(m.y)>Math.abs(m.x)}class Ch extends Sh{constructor(c){super(),this._map=c}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(c){this._lastPoints=c,So(c[0].sub(c[1]))&&(this._valid=!1)}_move(c,f,_){const b=this._lastPoints;if(!b)return;const E=c[0].sub(b[0]),C=c[1].sub(b[1]);return this._map._cooperativeGestures&&_.touches.length<3||(this._valid=this.gestureBeginsVertically(E,C,_.timeStamp),!this._valid)?void 0:(this._lastPoints=c,this._active=!0,{pitchDelta:(E.y+C.y)/2*-.5})}gestureBeginsVertically(c,f,_){if(this._valid!==void 0)return this._valid;const b=c.mag()>=2,E=f.mag()>=2;if(!b&&!E)return;if(!b||!E)return this._firstMove==null&&(this._firstMove=_),_-this._firstMove<100&&void 0;const C=c.y>0==f.y>0;return So(c)&&So(f)&&C}}const zt={panStep:100,bearingStep:15,pitchStep:10};class p_{constructor(){const c=zt;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(c){if(c.altKey||c.ctrlKey||c.metaKey)return;let f=0,_=0,b=0,E=0,C=0;switch(c.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:c.shiftKey?_=-1:(c.preventDefault(),E=-1);break;case 39:c.shiftKey?_=1:(c.preventDefault(),E=1);break;case 38:c.shiftKey?b=1:(c.preventDefault(),C=-1);break;case 40:c.shiftKey?b=-1:(c.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(_=0,b=0),{cameraAnimation:A=>{const I=A.getZoom();A.easeTo({duration:300,easeId:"keyboardHandler",easing:m_,zoom:f?Math.round(I)+f*(c.shiftKey?2:1):I,bearing:A.getBearing()+_*this._bearingStep,pitch:A.getPitch()+b*this._pitchStep,offset:[-E*this._panStep,-C*this._panStep],center:A.getCenter()},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function m_(m){return m*(2-m)}const Ol=4.000244140625;class Zc{constructor(c,f){this._map=c,this._el=c.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(c){this._defaultZoomRate=c}setWheelZoomRate(c){this._wheelZoomRate=c}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(c){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!c&&c.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(c){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(c.ctrlKey||c.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=c.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*c.deltaY:c.deltaY;const _=o.exported.now(),b=_-(this._lastWheelEventTime||0);this._lastWheelEventTime=_,f!==0&&f%Ol==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,c)):this._type||(this._type=Math.abs(b*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),c.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=c,this._delta-=f,this._active||this._start(c)),c.preventDefault()}_onTimeout(c){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)}_start(c){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=de(this._el,c);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const c=this._map.transform,f=()=>c._terrainEnabled()&&this._aroundCoord?c.computeZoomRelativeTo(this._aroundCoord):c.zoom;if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>Ol?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&z!==0&&(z=1/z);const R=f(),W=Math.pow(2,R),Y=typeof this._targetZoom=="number"?c.zoomScale(this._targetZoom):W;this._targetZoom=Math.min(c.maxZoom,Math.max(c.minZoom,c.scaleZoom(Y*z))),this._type==="wheel"&&(this._startZoom=R,this._easing=this._smoothOutEasing(200)),this._delta=0}const _=typeof this._targetZoom=="number"?this._targetZoom:f(),b=this._startZoom,E=this._easing;let C,A=!1;if(this._type==="wheel"&&b&&E){const I=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),z=E(I);C=o.number(b,_,z),I<1?this._frameId||(this._frameId=!0):A=!0}else C=_,A=!0;return this._active=!0,A&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!A,zoomDelta:C-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(c){let f=o.ease;if(this._prevEase){const _=this._prevEase,b=(o.exported.now()-_.start)/_.duration,E=_.easing(b+.01)-_.easing(b),C=.27/Math.sqrt(E*E+1e-4)*.01,A=Math.sqrt(.0729-C*C);f=o.bezier(C,A,.25,1)}return this._prevEase={start:o.exported.now(),duration:c,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=O("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class g_{constructor(c,f){this._clickZoom=c,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class __{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(c,f){return c.preventDefault(),{cameraAnimation:_=>{_.easeTo({duration:300,zoom:_.getZoom()+(c.shiftKey?-1:1),around:_.unproject(f)},{originalEvent:c})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class y_{constructor(){this._tap=new wh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(c,f,_){this._swipePoint||(this._tapTime&&c.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?_.length>0&&(this._swipePoint=f[0],this._swipeTouch=_[0].identifier):this._tap.touchstart(c,f,_))}touchmove(c,f,_){if(this._tapTime){if(this._swipePoint){if(_[0].identifier!==this._swipeTouch)return;const b=f[0],E=b.y-this._swipePoint.y;return this._swipePoint=b,c.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(c,f,_)}touchend(c,f,_){this._tapTime?this._swipePoint&&_.length===0&&this.reset():this._tap.touchend(c,f,_)&&(this._tapTime=c.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class v_{constructor(c,f,_){this._el=c,this._mousePan=f,this._touchPan=_}enable(c){this._inertiaOptions=c||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class x_{constructor(c,f,_){this._pitchWithRotate=c.pitchWithRotate,this._mouseRotate=f,this._mousePitch=_}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class b_{constructor(c,f,_,b){this._el=c,this._touchZoom=f,this._touchRotate=_,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(c){this._touchZoom.enable(c),this._rotationDisabled||this._touchRotate.enable(c),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Xc=m=>m.zoom||m.drag||m.pitch||m.rotate;class Mh extends o.Event{}class tp{constructor(){this.constants=[1,1,.01],this.radius=0}setup(c,f){const _=o.sub([],f,c);this.radius=o.length(_[2]<0?o.div([],_,this.constants):[_[0],_[1],0])}projectRay(c){o.div(c,c,this.constants),o.normalize(c,c),o.mul$1(c,c,this.constants);const f=o.scale$2([],c,this.radius);if(f[2]>0){const _=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),b=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),E=o.add([],f,o.scale$2([],o.sub([],o.add([],b,_),f),2));f[0]=E[0],f[1]=E[1]}return f}}function Pa(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class w_{constructor(c,f){this._map=c,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Jf(c),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new tp,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const _=this._el;this._listeners=[[_,"touchstart",{passive:!0}],[_,"touchmove",{passive:!1}],[_,"touchend",void 0],[_,"touchcancel",void 0],[_,"mousedown",void 0],[_,"mousemove",void 0],[_,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[_,"mouseover",void 0],[_,"mouseout",void 0],[_,"dblclick",void 0],[_,"click",void 0],[_,"keydown",{capture:!1}],[_,"keyup",void 0],[_,"wheel",{passive:!1}],[_,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[b,E,C]of this._listeners)b.addEventListener(E,b===o.window.document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[c,f,_]of this._listeners)c.removeEventListener(f,c===o.window.document?this.handleWindowEvent:this.handleEvent,_)}_addDefaultHandlers(c){const f=this._map,_=f.getCanvasContainer();this._add("mapEvent",new a_(f,c));const b=f.boxZoom=new c_(f,c);this._add("boxZoom",b);const E=new u_,C=new __;f.doubleClickZoom=new g_(C,E),this._add("tapZoom",E),this._add("clickZoom",C);const A=new y_;this._add("tapDragZoom",A);const I=f.touchPitch=new Ch(f);this._add("touchPitch",I);const z=new Qf(c),R=new dr(c);f.dragRotate=new x_(c,z,R),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]);const W=new d_(c),Y=new qx(f,c);f.dragPan=new v_(_,W,Y),this._add("mousePan",W),this._add("touchPan",Y,["touchZoom","touchRotate"]);const oe=new Pl,ee=new Ts;f.touchZoomRotate=new b_(_,ee,oe,A),this._add("touchRotate",oe,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),this._add("blockableMapEvent",new l_(f));const te=f.scrollZoom=new Zc(f,this);this._add("scrollZoom",te,["mousePan"]);const ne=f.keyboard=new p_;this._add("keyboard",ne);for(const J of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])c.interactive&&c[J]&&f[J].enable(c[J])}_add(c,f,_){this._handlers.push({handlerName:c,handler:f,allowed:_}),this._handlersById[c]=f}stop(c){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},c),this._changes=[]}}isActive(){for(const{handler:c}of this._handlers)if(c.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Xc(this._eventsInProgress)||this.isZooming()}_blockedByActive(c,f,_){for(const b in c)if(b!==_&&(!f||f.indexOf(b)<0))return!0;return!1}handleWindowEvent(c){this.handleEvent(c,`${c.type}Window`)}_getMapTouches(c){const f=[];for(const _ of c)this._el.contains(_.target)&&f.push(_);return f}handleEvent(c,f){this._updatingCamera=!0;const _=c.type==="renderFrame",b=_?void 0:c,E={needsRenderFrame:!1},C={},A={},I=c.touches?this._getMapTouches(c.touches):void 0,z=I?xe(this._el,I):_?void 0:de(this._el,c);for(const{handlerName:Y,handler:oe,allowed:ee}of this._handlers){if(!oe.isEnabled())continue;let te;this._blockedByActive(A,ee,Y)?oe.reset():oe[f||c.type]&&(te=oe[f||c.type](c,z,I),this.mergeHandlerResult(E,C,te,Y,b),te&&te.needsRenderFrame&&this._triggerRenderFrame()),(te||oe.isActive())&&(A[Y]=oe)}const R={};for(const Y in this._previousActiveHandlers)A[Y]||(R[Y]=b);this._previousActiveHandlers=A,(Object.keys(R).length||Pa(E))&&(this._changes.push([E,C,R]),this._triggerRenderFrame()),(Object.keys(A).length||Pa(E))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:W}=E;W&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],W(this._map))}mergeHandlerResult(c,f,_,b,E){if(!_)return;o.extend(c,_);const C={handlerName:b,originalEvent:_.originalEvent||E};_.zoomDelta!==void 0&&(f.zoom=C),_.panDelta!==void 0&&(f.drag=C),_.pitchDelta!==void 0&&(f.pitch=C),_.bearingDelta!==void 0&&(f.rotate=C)}_applyChanges(){const c={},f={},_={};for(const[b,E,C]of this._changes)b.panDelta&&(c.panDelta=(c.panDelta||new o.pointGeometry(0,0))._add(b.panDelta)),b.zoomDelta&&(c.zoomDelta=(c.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(c.bearingDelta=(c.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(c.pitchDelta=(c.pitchDelta||0)+b.pitchDelta),b.around!==void 0&&(c.around=b.around),b.aroundCoord!==void 0&&(c.aroundCoord=b.aroundCoord),b.pinchAround!==void 0&&(c.pinchAround=b.pinchAround),b.noInertia&&(c.noInertia=b.noInertia),o.extend(f,E),o.extend(_,C);this._updateMapTransform(c,f,_),this._changes=[]}_updateMapTransform(c,f,_){const b=this._map,E=b.transform,C=ce=>[ce.x,ce.y,ce.z];if((ce=>{const ae=this._eventsInProgress.drag;return ae&&!this._handlersById[ae.handlerName].isActive()})()&&!Pa(c)){const ce=E.zoom;E.cameraElevationReference="sea",E.recenterOnTerrain(),E.cameraElevationReference="ground",ce!==E.zoom&&this._map._update(!0)}if(!Pa(c))return void this._fireEvents(f,_,!0);let{panDelta:A,zoomDelta:I,bearingDelta:z,pitchDelta:R,around:W,aroundCoord:Y,pinchAround:oe}=c;oe!==void 0&&(W=oe),(ce=>f.drag&&!this._eventsInProgress.drag)()&&W&&(this._dragOrigin=C(E.pointCoordinate3D(W)),this._trackingEllipsoid.setup(E._camera.position,this._dragOrigin)),E.cameraElevationReference="sea",b._stop(!0),W=W||b.transform.centerPoint,z&&(E.bearing+=z),R&&(E.pitch+=R),E._updateCameraState();const ee=[0,0,0];if(A)if(E.projection.name==="mercator"){const ce=this._trackingEllipsoid.projectRay(E.screenPointToMercatorRay(W).dir),ae=this._trackingEllipsoid.projectRay(E.screenPointToMercatorRay(W.sub(A)).dir);ee[0]=ae[0]-ce[0],ee[1]=ae[1]-ce[1]}else{const ce=E.pointCoordinate(W);if(E.projection.name==="globe"){A=A.rotate(-E.angle);const ae=E._pixelsPerMercatorPixel/E.worldSize;ee[0]=-A.x*o.mercatorScale(o.latFromMercatorY(ce.y))*ae,ee[1]=-A.y*o.mercatorScale(E.center.lat)*ae}else{const ae=E.pointCoordinate(W.sub(A));ce&&ae&&(ee[0]=ae.x-ce.x,ee[1]=ae.y-ce.y)}}const te=E.zoom,ne=[0,0,0];if(I){const ce=C(Y||E.pointCoordinate3D(W)),ae={dir:o.normalize([],o.sub([],ce,E._camera.position))};if(ae.dir[2]<0){const Se=E.zoomDeltaToMovement(ce,I);o.scale$2(ne,ae.dir,Se)}}const J=o.add(ee,ee,ne);E._translateCameraConstrained(J),I&&Math.abs(E.zoom-te)>1e-4&&E.recenterOnTerrain(),E.cameraElevationReference="ground",this._map._update(),c.noInertia||this._inertia.record(c),this._fireEvents(f,_,!0)}_fireEvents(c,f,_){const b=Xc(this._eventsInProgress),E=Xc(c),C={};for(const R in c){const{originalEvent:W}=c[R];this._eventsInProgress[R]||(C[`${R}start`]=W),this._eventsInProgress[R]=c[R]}!b&&E&&this._fireEvent("movestart",E.originalEvent);for(const R in C)this._fireEvent(R,C[R]);E&&this._fireEvent("move",E.originalEvent);for(const R in c){const{originalEvent:W}=c[R];this._fireEvent(R,W)}const A={};let I;for(const R in this._eventsInProgress){const{handlerName:W,originalEvent:Y}=this._eventsInProgress[R];this._handlersById[W].isActive()||(delete this._eventsInProgress[R],I=f[W]||Y,A[`${R}end`]=I)}for(const R in A)this._fireEvent(R,A[R]);const z=Xc(this._eventsInProgress);if(_&&(b||E)&&!z){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),W=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;R?(W(R.bearing||this._map.getBearing())&&(R.bearing=0),this._map.easeTo(R,{originalEvent:I})):(this._map.fire(new o.Event("moveend",{originalEvent:I})),W(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(c,f){this._map.fire(new o.Event(c,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(c=>{this._frameId=void 0,this.handleEvent(new Mh("renderFrame",{timeStamp:c})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const np="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class E_ extends o.Evented{constructor(c,f){super(),this._moving=!1,this._zooming=!1,this.transform=c,this._bearingSnap=f.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(c,f){return this.jumpTo({center:c},f)}panBy(c,f,_){return c=o.pointGeometry.convert(c).mult(-1),this.panTo(this.transform.center,o.extend({offset:c},f),_)}panTo(c,f,_){return this.easeTo(o.extend({center:c},f),_)}getZoom(){return this.transform.zoom}setZoom(c,f){return this.jumpTo({zoom:c},f),this}zoomTo(c,f,_){return this.easeTo(o.extend({zoom:c},f),_)}zoomIn(c,f){return this.zoomTo(this.getZoom()+1,c,f),this}zoomOut(c,f){return this.zoomTo(this.getZoom()-1,c,f),this}getBearing(){return this.transform.bearing}setBearing(c,f){return this.jumpTo({bearing:c},f),this}getPadding(){return this.transform.padding}setPadding(c,f){return this.jumpTo({padding:c},f),this}rotateTo(c,f,_){return this.easeTo(o.extend({bearing:c},f),_)}resetNorth(c,f){return this.rotateTo(0,o.extend({duration:1e3},c),f),this}resetNorthPitch(c,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},c),f),this}snapToNorth(c,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(c,f):this}getPitch(){return this.transform.pitch}setPitch(c,f){return this.jumpTo({pitch:c},f),this}cameraForBounds(c,f){this.transform.projection.name==="globe"&&o.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),c=o.LngLatBounds.convert(c);const _=f&&f.bearing||0;return this._cameraForBoxAndBearing(c.getNorthWest(),c.getSouthEast(),_,f)}_extendCameraOptions(c){const f={top:0,bottom:0,right:0,left:0};if(typeof(c=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},c)).padding=="number"){const _=c.padding;c.padding={top:_,bottom:_,right:_,left:_}}return c.padding=o.extend(f,c.padding),c}_cameraForBoxAndBearing(c,f,_,b){const E=this._extendCameraOptions(b),C=this.transform,A=C.padding,I=C.project(o.LngLat.convert(c)),z=C.project(o.LngLat.convert(f)),R=new o.pointGeometry(I.x,z.y),W=new o.pointGeometry(z.x,I.y),Y=-o.degToRad(_),oe=I.rotate(Y),ee=z.rotate(Y),te=R.rotate(Y),ne=W.rotate(Y),J=new o.pointGeometry(Math.max(oe.x,ee.x,te.x,ne.x),Math.max(oe.y,ee.y,te.y,ne.y)),ce=new o.pointGeometry(Math.min(oe.x,ee.x,te.x,ne.x),Math.min(oe.y,ee.y,te.y,ne.y)),ae=J.sub(ce),Se=(C.width-((A.left||0)+(A.right||0)+E.padding.left+E.padding.right))/ae.x,be=(C.height-((A.top||0)+(A.bottom||0)+E.padding.top+E.padding.bottom))/ae.y;if(be<0||Se<0)return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const me=Math.min(C.scaleZoom(C.scale*Math.min(Se,be)),E.maxZoom),Ee=typeof E.offset.x=="number"&&typeof E.offset.y=="number"?new o.pointGeometry(E.offset.x,E.offset.y):o.pointGeometry.convert(E.offset),ve=new o.pointGeometry((E.padding.left-E.padding.right)/2,(E.padding.top-E.padding.bottom)/2).rotate(_*Math.PI/180),Me=Ee.add(ve).mult(C.scale/C.zoomScale(me));return{center:C.unproject(I.add(z).div(2).sub(Me)),zoom:me,bearing:_}}_cameraForBox(c,f,_,b,E){const C=this._extendCameraOptions(E);_=_||0,b=b||0,c=o.LngLat.convert(c),f=o.LngLat.convert(f);const A=this.transform.clone();A.padding=C.padding;const I=this.getFreeCameraOptions(),z=new o.LngLat(.5*(c.lng+f.lng),.5*(c.lat+f.lat)),R=.5*(_+b);if(A._camera.position[2]<o.mercatorZfromAltitude(R,z.lat))return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");I.lookAtPoint(z),A.setFreeCameraOptions(I);const W=o.MercatorCoordinate.fromLngLat(c),Y=o.MercatorCoordinate.fromLngLat(f),oe=A.pointRayIntersection(A.centerPoint,R),ee=[(te=A.rayIntersectionCoordinate(oe)).x,te.y,te.z];var te;const ne=A.screenPointToMercatorRay(A.centerPoint),J=A.projection.name!=="globe";let ce,ae=0;do{const Se=Math.floor(A.zoom),be=1<<Se,me=Math.min(be*W.x,be*Y.x),Ee=Math.min(be*W.y,be*Y.y),ve=Math.max(be*W.x,be*Y.x),Me=Math.max(be*W.y,be*Y.y),Re=new o.Aabb([me,Ee,_],[ve,Me,b]),ut=o.Frustum.fromInvProjectionMatrix(A.invProjMatrix,A.worldSize,Se,J);if(Re.intersects(ut)!==2){ce&&(A._camera.position=o.scaleAndAdd([],A._camera.position,ne.dir,-ce),A._updateStateFromCamera());break}const Pe=o.sub([],A._camera.position,ee);ce=.5*o.length(Pe),A._camera.position=o.scaleAndAdd([],A._camera.position,ne.dir,ce);try{A._updateStateFromCamera()}catch{return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++ae<10);return{center:A.center,zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}}fitBounds(c,f,_){return this.transform.projection.name==="globe"&&o.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(c,f),f,_)}_raycastElevationBox(c,f){const _=this.transform.elevation;if(!_)return;const b=new o.pointGeometry(c.x,f.y),E=new o.pointGeometry(f.x,c.y),C=_.pointCoordinate(c);if(!C)return;const A=_.pointCoordinate(f);if(!A)return;const I=_.pointCoordinate(b);if(!I)return;const z=_.pointCoordinate(E);if(!z)return;const R=new o.MercatorCoordinate(C[0],C[1]).toLngLat(),W=new o.MercatorCoordinate(A[0],A[1]).toLngLat(),Y=new o.MercatorCoordinate(I[0],I[1]).toLngLat(),oe=new o.MercatorCoordinate(z[0],z[1]).toLngLat(),ee=Math.min(R.lng,Math.min(W.lng,Math.min(Y.lng,oe.lng))),te=Math.min(R.lat,Math.min(W.lat,Math.min(Y.lat,oe.lat))),ne=Math.max(R.lng,Math.max(W.lng,Math.max(Y.lng,oe.lng))),J=Math.max(R.lat,Math.max(W.lat,Math.max(Y.lat,oe.lat))),ce=Math.min(C[3],Math.min(A[3],Math.min(I[3],z[3]))),ae=Math.max(C[3],Math.max(A[3],Math.max(I[3],z[3])));return{minLngLat:new o.LngLat(ee,te),maxLngLat:new o.LngLat(ne,J),minAltitude:ce,maxAltitude:ae}}fitScreenCoordinates(c,f,_,b,E){let C,A,I,z;this.transform.projection.name==="globe"&&o.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");const R=o.pointGeometry.convert(c),W=o.pointGeometry.convert(f),Y=this._raycastElevationBox(R,W);if(Y)C=Y.minLngLat,A=Y.maxLngLat,I=Y.minAltitude,z=Y.maxAltitude;else{if(this.transform.anyCornerOffEdge(R,W))return this;C=this.transform.pointLocation(R),A=this.transform.pointLocation(W)}return this._fitInternal(this.transform.pitch===0?this._cameraForBoxAndBearing(this.transform.pointLocation(o.pointGeometry.convert(c)),this.transform.pointLocation(o.pointGeometry.convert(f)),_,b):this._cameraForBox(C,A,I,z,b),b,E)}_fitInternal(c,f,_){return c?(delete(f=o.extend(c,f)).padding,f.linear?this.easeTo(f,_):this.flyTo(f,_)):this}jumpTo(c,f){this.stop();const _=c.preloadOnly?this.transform.clone():this.transform;let b=!1,E=!1,C=!1;return"zoom"in c&&_.zoom!==+c.zoom&&(b=!0,_.zoom=+c.zoom),c.center!==void 0&&(_.center=o.LngLat.convert(c.center)),"bearing"in c&&_.bearing!==+c.bearing&&(E=!0,_.bearing=+c.bearing),"pitch"in c&&_.pitch!==+c.pitch&&(C=!0,_.pitch=+c.pitch),c.padding==null||_.isPaddingEqual(c.padding)||(_.padding=c.padding),c.preloadOnly?(this._preloadTiles(_),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),b&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),E&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),C&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(np),this.transform.getFreeCameraOptions()}setFreeCameraOptions(c,f){const _=this.transform;if(!_.projection.supportsFreeCamera)return o.warnOnce(np),this;this.stop();const b=_.zoom,E=_.pitch,C=_.bearing;_.setFreeCameraOptions(c);const A=b!==_.zoom,I=E!==_.pitch,z=C!==_.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),A&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),z&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),I&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(c,f){this._stop(!1,c.easeId),((c=o.extend({offset:[0,0],duration:500,easing:o.ease},c)).animate===!1||!c.essential&&o.exported.prefersReducedMotion)&&(c.duration=0);const _=this.transform,b=this.getZoom(),E=this.getBearing(),C=this.getPitch(),A=this.getPadding(),I="zoom"in c?+c.zoom:b,z="bearing"in c?this._normalizeBearing(c.bearing,E):E,R="pitch"in c?+c.pitch:C,W="padding"in c?c.padding:_.padding,Y=o.pointGeometry.convert(c.offset);let oe,ee,te;if(_.projection.name==="globe"){const Me=o.MercatorCoordinate.fromLngLat(_.center),Re=Y.rotate(-_.angle);Me.x+=Re.x/_.worldSize,Me.y+=Re.y/_.worldSize;const ut=Me.toLngLat(),Pe=o.LngLat.convert(c.center||ut);this._normalizeCenter(Pe),oe=_.centerPoint.add(Re),ee=new o.pointGeometry(Me.x,Me.y).mult(_.worldSize),te=new o.pointGeometry(o.mercatorXfromLng(Pe.lng),o.mercatorYfromLat(Pe.lat)).mult(_.worldSize).sub(ee)}else{oe=_.centerPoint.add(Y);const Me=_.pointLocation(oe),Re=o.LngLat.convert(c.center||Me);this._normalizeCenter(Re),ee=_.project(Me),te=_.project(Re).sub(ee)}const ne=_.zoomScale(I-b);let J,ce;c.around&&(J=o.LngLat.convert(c.around),ce=_.locationPoint(J));const ae=this._zooming||I!==b,Se=this._rotating||E!==z,be=this._pitching||R!==C,me=!_.isPaddingEqual(W),Ee=Me=>Re=>{if(ae&&(Me.zoom=o.number(b,I,Re)),Se&&(Me.bearing=o.number(E,z,Re)),be&&(Me.pitch=o.number(C,R,Re)),me&&(Me.interpolatePadding(A,W,Re),oe=Me.centerPoint.add(Y)),J)Me.setLocationAtPoint(J,ce);else{const ut=Me.zoomScale(Me.zoom-b),Pe=I>b?Math.min(2,ne):Math.max(.5,ne),Ye=Math.pow(Pe,1-Re),et=Me.unproject(ee.add(te.mult(Re*Ye)).mult(ut));Me.setLocationAtPoint(Me.renderWorldCopies?et.wrap():et,oe)}return c.preloadOnly||this._fireMoveEvents(f),Me};if(c.preloadOnly){const Me=this._emulate(Ee,c.duration,_);return this._preloadTiles(Me),this}const ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=ae,this._rotating=Se,this._pitching=be,this._padding=me,this._easeId=c.easeId,this._prepareEase(f,c.noMoveStart,ve),this._ease(Ee(_),Me=>{_.recenterOnTerrain(),this._afterEase(f,Me)},c),this}_prepareEase(c,f,_={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||_.moving||this.fire(new o.Event("movestart",c)),this._zooming&&!_.zooming&&this.fire(new o.Event("zoomstart",c)),this._rotating&&!_.rotating&&this.fire(new o.Event("rotatestart",c)),this._pitching&&!_.pitching&&this.fire(new o.Event("pitchstart",c))}_fireMoveEvents(c){this.fire(new o.Event("move",c)),this._zooming&&this.fire(new o.Event("zoom",c)),this._rotating&&this.fire(new o.Event("rotate",c)),this._pitching&&this.fire(new o.Event("pitch",c))}_afterEase(c,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const _=this._zooming,b=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,_&&this.fire(new o.Event("zoomend",c)),b&&this.fire(new o.Event("rotateend",c)),E&&this.fire(new o.Event("pitchend",c)),this.fire(new o.Event("moveend",c))}flyTo(c,f){if(!c.essential&&o.exported.prefersReducedMotion){const Tt=o.pick(c,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Tt,f)}this.stop(),c=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},c);const _=this.transform,b=this.getZoom(),E=this.getBearing(),C=this.getPitch(),A=this.getPadding(),I="zoom"in c?o.clamp(+c.zoom,_.minZoom,_.maxZoom):b,z="bearing"in c?this._normalizeBearing(c.bearing,E):E,R="pitch"in c?+c.pitch:C,W="padding"in c?c.padding:_.padding,Y=_.zoomScale(I-b),oe=o.pointGeometry.convert(c.offset);let ee=_.centerPoint.add(oe);const te=_.pointLocation(ee),ne=o.LngLat.convert(c.center||te);this._normalizeCenter(ne);const J=_.project(te),ce=_.project(ne).sub(J);let ae=c.curve;const Se=Math.max(_.width,_.height),be=Se/Y,me=ce.mag();if("minZoom"in c){const Tt=o.clamp(Math.min(c.minZoom,b,I),_.minZoom,_.maxZoom),bt=Se/_.zoomScale(Tt-b);ae=Math.sqrt(bt/me*2)}const Ee=ae*ae;function ve(Tt){const bt=(be*be-Se*Se+(Tt?-1:1)*Ee*Ee*me*me)/(2*(Tt?be:Se)*Ee*me);return Math.log(Math.sqrt(bt*bt+1)-bt)}function Me(Tt){return(Math.exp(Tt)-Math.exp(-Tt))/2}function Re(Tt){return(Math.exp(Tt)+Math.exp(-Tt))/2}const ut=ve(0);let Pe=function(Tt){return Re(ut)/Re(ut+ae*Tt)},Ye=function(Tt){return Se*((Re(ut)*(Me(bt=ut+ae*Tt)/Re(bt))-Me(ut))/Ee)/me;var bt},et=(ve(1)-ut)/ae;if(Math.abs(me)<1e-6||!isFinite(et)){if(Math.abs(Se-be)<1e-6)return this.easeTo(c,f);const Tt=be<Se?-1:1;et=Math.abs(Math.log(be/Se))/ae,Ye=function(){return 0},Pe=function(bt){return Math.exp(Tt*ae*bt)}}c.duration="duration"in c?+c.duration:1e3*et/("screenSpeed"in c?+c.screenSpeed/ae:+c.speed),c.maxDuration&&c.duration>c.maxDuration&&(c.duration=0);const yt=E!==z,$e=R!==C,lt=!_.isPaddingEqual(W),Ze=Tt=>bt=>{const Bt=bt*et,qt=1/Pe(Bt);Tt.zoom=bt===1?I:b+Tt.scaleZoom(qt),yt&&(Tt.bearing=o.number(E,z,bt)),$e&&(Tt.pitch=o.number(C,R,bt)),lt&&(Tt.interpolatePadding(A,W,bt),ee=Tt.centerPoint.add(oe));const rn=bt===1?ne:Tt.unproject(J.add(ce.mult(Ye(Bt))).mult(qt));return Tt.setLocationAtPoint(Tt.renderWorldCopies?rn.wrap():rn,ee),Tt._updateCameraOnTerrain(),c.preloadOnly||this._fireMoveEvents(f),Tt};if(c.preloadOnly){const Tt=this._emulate(Ze,c.duration,_);return this._preloadTiles(Tt),this}return this._zooming=!0,this._rotating=yt,this._pitching=$e,this._padding=lt,this._prepareEase(f,!1),this._ease(Ze(_),()=>this._afterEase(f),c),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(c,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const _=this._onEaseEnd;this._onEaseEnd=void 0,_.call(this,f)}if(!c){const _=this.handlers;_&&_.stop(!1)}return this}_ease(c,f,_){_.animate===!1||_.duration===0?(c(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=_,this._onEaseFrame=c,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const c=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(c)),c<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(c,f){c=o.wrap(c,-180,180);const _=Math.abs(c-f);return Math.abs(c-360-f)<_&&(c-=360),Math.abs(c+360-f)<_&&(c+=360),c}_normalizeCenter(c){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const _=c.lng-f.center.lng;c.lng+=_>180?-360:_<-180?360:0}_emulate(c,f,_){const b=Math.ceil(15*f/1e3),E=[],C=c(_.clone());for(let A=0;A<=b;A++){const I=C(A/b);E.push(I.clone())}return E}}class ip{constructor(c={}){this.options=c,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(c){const f=this.options&&this.options.compact;return this._map=c,this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=O("button","mapboxgl-ctrl-attrib-button",this._container),O("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(c,f){const _=this._map._getUIString(`AttributionControl.${f}`);c.setAttribute("aria-label",_),c.removeAttribute("title"),c.firstElementChild&&c.firstElementChild.setAttribute("title",_)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let c=this._editLink;c||(c=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(c){const _=f.reduce((b,E,C)=>(E.value&&(b+=`${E.key}=${E.value}${C<f.length-1?"&":""}`),b),"?");c.href=`${o.config.FEEDBACK_URL}/${_}#${Kf(this._map,!0)}`,c.rel="noopener nofollow",this._setElementTitle(c,"MapFeedback")}}_updateData(c){!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let c=[];if(this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const f=this._map.style._sourceCaches;for(const b in f){const E=f[b];if(E.used){const C=E.getSource();C.attribution&&c.indexOf(C.attribution)<0&&c.push(C.attribution)}}c.sort((b,E)=>b.length-E.length),c=c.filter((b,E)=>{for(let C=E+1;C<c.length;C++)if(c[C].indexOf(b)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?c=[...this.options.customAttribution,...c]:c.unshift(this.options.customAttribution));const _=c.join(" | ");_!==this._attribHTML&&(this._attribHTML=_,c.length?(this._innerContainer.innerHTML=_,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class rp{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(c){this._map=c,this._container=O("div","mapboxgl-ctrl");const f=O("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(c){c&&c.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const c=this._map.style._sourceCaches;if(Object.entries(c).length===0)return!0;for(const f in c){const _=c[f].getSource();if(_.hasOwnProperty("mapbox_logo")&&!_.mapbox_logo)return!1}return!0}_updateCompact(){const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class op{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(c){const f=++this._id;return this._queue.push({callback:c,id:f,cancelled:!1}),f}remove(c){const f=this._currentlyRunning,_=f?this._queue.concat(f):this._queue;for(const b of _)if(b.id===c)return void(b.cancelled=!0)}run(c=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const _ of f)if(!_.cancelled&&(_.callback(c),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function sp(m,c,f){if(m=new o.LngLat(m.lng,m.lat),c){const _=new o.LngLat(m.lng-360,m.lat),b=new o.LngLat(m.lng+360,m.lat),E=360*Math.ceil(Math.abs(m.lng-f.center.lng)/360),C=f.locationPoint(m).distSqr(c),A=c.x<0||c.y<0||c.x>f.width||c.y>f.height;f.locationPoint(_).distSqr(c)<C&&(A||Math.abs(_.lng-f.center.lng)<E)?m=_:f.locationPoint(b).distSqr(c)<C&&(A||Math.abs(b.lng-f.center.lng)<E)&&(m=b)}for(;Math.abs(m.lng-f.center.lng)>180;){const _=f.locationPoint(m);if(_.x>=0&&_.y>=0&&_.x<=f.width&&_.y<=f.height)break;m.lng>f.center.lng?m.lng-=360:m.lng+=360}return m}const Kc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class kh extends o.Evented{constructor(c,f){if(super(),(c instanceof o.window.HTMLElement||f)&&(c=o.extend({element:c},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=c&&c.anchor||"center",this._color=c&&c.color||"#3FB1CE",this._scale=c&&c.scale||1,this._draggable=c&&c.draggable||!1,this._clickTolerance=c&&c.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=c&&c.rotation||0,this._rotationAlignment=c&&c.rotationAlignment||"auto",this._pitchAlignment=c&&c.pitchAlignment&&c.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),c&&c.element)this._element=c.element,this._offset=o.pointGeometry.convert(c&&c.offset||[0,0]);else{this._defaultMarker=!0,this._element=O("div");const b=41,E=27,C=$("svg",{display:"block",height:b*this._scale+"px",width:E*this._scale+"px",viewBox:`0 0 ${E} ${b}`},this._element),A=$("radialGradient",{id:"shadowGradient"},$("defs",{},C));$("stop",{offset:"10%","stop-opacity":.4},A),$("stop",{offset:"100%","stop-opacity":.05},A),$("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},C),$("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},C),$("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},C),$("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},C),this._offset=o.pointGeometry.convert(c&&c.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",b=>{b.preventDefault()}),this._element.addEventListener("mousedown",b=>{b.preventDefault()});const _=this._element.classList;for(const b in Kc)_.remove(`mapboxgl-marker-anchor-${b}`);_.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(c){return c===this._map||(this.remove(),this._map=c,c.getCanvasContainer().appendChild(this._element),c.on("move",this._updateMoving),c.on("moveend",this._update),c.on("remove",this._clearFadeTimer),c._addMarker(this),this.setDraggable(this._draggable),this._update(),c.on("click",this._onMapClick)),this}remove(){const c=this._map;return c&&(c.off("click",this._onMapClick),c.off("move",this._updateMoving),c.off("moveend",this._update),c.off("mousedown",this._addDragHandler),c.off("touchstart",this._addDragHandler),c.off("mouseup",this._onUp),c.off("touchend",this._onUp),c.off("mousemove",this._onMove),c.off("touchmove",this._onMove),c.off("remove",this._clearFadeTimer),c._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(c){return this._lngLat=o.LngLat.convert(c),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(c){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),c){if(!("offset"in c.options)){const f=38.1,_=13.5,b=Math.sqrt(Math.pow(_,2)/2);c.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-f],"bottom-left":[b,-1*(f-_+b)],"bottom-right":[-b,-1*(f-_+b)],left:[_,-1*(f-_)],right:[-_,-1*(f-_)]}:this._offset}this._popup=c,c._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(c){const f=c.code,_=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&_!==32&&_!==13||this.togglePopup()}_onMapClick(c){const f=c.originalEvent.target,_=this._element;this._popup&&(f===_||_.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const c=this._popup;return c?(c.isOpen()?(c.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(c.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const c=this._map;if(!c)return!1;const f=c.unproject(this._pos),_=c.getFreeCameraOptions();if(!_.position)return!1;const b=_.position.toLngLat();return b.distanceTo(f)<.9*b.distanceTo(this._lngLat)}_evaluateOpacity(){const c=this._map;if(!c)return;const f=this._pos;if(!f||f.x<0||f.x>c.transform.width||f.y<0||f.y>c.transform.height)return void this._clearFadeTimer();const _=c.unproject(f);let b;c._showingGlobe()&&o.isLngLatBehindGlobe(c.transform,this._lngLat)?b=0:(b=1-c._queryFogOpacity(_),c.transform._terrainEnabled()&&c.getTerrain()&&this._behindTerrain()&&(b*=.2)),this._element.style.opacity=`${b}`,this._element.style.pointerEvents=b>0?"auto":"none",this._popup&&this._popup._setOpacity(b),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const c=this._pos;if(!c||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${c.x}px,${c.y}px)
            ${Kc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const c=this._pos,f=this._map,_=this.getPitchAlignment();if(!f||!c||_!=="map")return"";if(!f._showingGlobe()){const I=f.getPitch();return I?`rotateX(${I}deg)`:""}const b=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),E=c.sub(o.globeCenterToScreenPoint(f.transform)),C=Math.abs(E.x)+Math.abs(E.y);if(C===0)return"";const A=b/C;return`rotateX(${-E.y*A}deg) rotateY(${E.x*A}deg)`}_calculateZTransform(){const c=this._pos,f=this._map;if(!f||!c)return"";let _=0;const b=this.getRotationAlignment();if(b==="map")if(f._showingGlobe()){const E=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),C=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(E);_=o.radToDeg(Math.atan2(C.y,C.x))-90}else _=-f.getBearing();else if(b==="horizon"){const E=o.smoothstep(4,6,f.getZoom()),C=o.globeCenterToScreenPoint(f.transform);C.y+=E*f.transform.height;const A=c.sub(C),I=o.radToDeg(Math.atan2(A.y,A.x));_=(I>90?I-270:I+90)*(1-E)}return _+=this._rotation,_?`rotateZ(${_}deg)`:""}_update(c){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=sp(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),c===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(c){return this._offset=o.pointGeometry.convert(c),this._update(),this}_onMove(c){const f=this._map;if(f){if(!this._isDragging){const _=this._clickTolerance||f._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=_}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const c=this._map;c&&(c.off("mousemove",this._onMove),c.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(c){const f=this._map;f&&this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos),this._pointerdownPos=c.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(c){this._draggable=!!c;const f=this._map;return f&&(c?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(c){return this._rotation=c||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(c){return this._rotationAlignment=c||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(c){return this._pitchAlignment=c||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}}class S_{constructor(c){this.jumpTo(c)}getValue(c){if(c<=this._startTime)return this._start;if(c>=this._endTime)return this._end;const f=o.easeCubicInOut((c-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(c){return c>=this._startTime&&c<=this._endTime}jumpTo(c){this._startTime=-1/0,this._endTime=-1/0,this._start=c,this._end=c}easeTo(c,f,_){this._start=this.getValue(f),this._end=c,this._startTime=f,this._endTime=f+_}}const T_={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},C_={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function Jc(m){m.parentNode&&m.parentNode.removeChild(m)}const M_={showCompass:!0,showZoom:!0,visualizePitch:!1};class ap{constructor(c,f,_=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new Qf({clickTolerance:c.dragRotate._mouseRotate._clickTolerance}),this.map=c,_&&(this.mousePitch=new dr({clickTolerance:c.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(c,f){this.mouseRotate.mousedown(c,f),this.mousePitch&&this.mousePitch.mousedown(c,f),U()}move(c,f){const _=this.map,b=this.mouseRotate.mousemoveWindow(c,f),E=b&&b.bearingDelta;if(E&&_.setBearing(_.getBearing()+E),this.mousePitch){const C=this.mousePitch.mousemoveWindow(c,f),A=C&&C.pitchDelta;A&&_.setPitch(_.getPitch()+A)}}off(){const c=this.element;c.removeEventListener("mousedown",this.mousedown),c.removeEventListener("touchstart",this.touchstart,{passive:!1}),c.removeEventListener("touchmove",this.touchmove),c.removeEventListener("touchend",this.touchend),c.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){Z(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(c){this.down(o.extend({},c,{ctrlKey:!0,preventDefault:()=>c.preventDefault()}),de(this.element,c)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(c){this.move(c,de(this.element,c))}mouseup(c){this.mouseRotate.mouseupWindow(c),this.mousePitch&&this.mousePitch.mouseupWindow(c),this.offTemp()}touchstart(c){c.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=xe(this.element,c.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>c.preventDefault()},this._startPos))}touchmove(c){c.targetTouches.length!==1?this.reset():(this._lastPos=xe(this.element,c.targetTouches)[0],this.move({preventDefault:()=>c.preventDefault()},this._lastPos))}touchend(c){c.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const k_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},lp={maxWidth:100,unit:"metric"};function cp(m,c,f){const _=Ah(c),b=_/c,E={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=m*b+"px",this._container.innerHTML=`${_}&nbsp;${E}`})}function Ah(m){const c=Math.pow(10,`${Math.floor(m)}`.length-1);let f=m/c;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(_){const b=Math.pow(10,Math.ceil(-Math.log(_)/Math.LN10));return Math.round(_*b)/b}(f),c*f}const Yx={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Zx=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Dh(m=new o.pointGeometry(0,0),c="bottom"){if(typeof m=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(c){case"top":return new o.pointGeometry(0,m);case"top-left":return new o.pointGeometry(f,f);case"top-right":return new o.pointGeometry(-f,f);case"bottom":return new o.pointGeometry(0,-m);case"bottom-left":return new o.pointGeometry(f,-f);case"bottom-right":return new o.pointGeometry(-f,-f);case"left":return new o.pointGeometry(m,0);case"right":return new o.pointGeometry(-m,0)}return new o.pointGeometry(0,0)}return m instanceof o.pointGeometry||Array.isArray(m)?o.pointGeometry.convert(m):o.pointGeometry.convert(m[c]||[0,0])}const Qc={version:o.version,supported:w,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends E_{constructor(m){if((m=o.extend({},C_,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(m.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Wc(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=m.language==="auto"?o.window.navigator.language:m.language,this._worldview=m.worldview,this._renderTaskQueue=new op,this._domRenderTaskQueue=new op,this._controls=[],this._markers=[],this._mapId=o.uniqueId(),this._locale=o.extend({},T_,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new S_(0),this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1)),this.handlers=new w_(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new r_(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new ip({customAttribution:m.customAttribution})),this._logoControl=new rp,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.Event(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.Event(`${c.dataType}dataloading`,c))})}_getMapId(){return this._mapId}addControl(m,c){if(c===void 0&&(c=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=m.onAdd(this);this._controls.push(m);const _=this._controlPositions[c];return c.indexOf("bottom")!==-1?_.insertBefore(f,_.firstChild):_.appendChild(f),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const c=this._controls.indexOf(m);return c>-1&&this._controls.splice(c,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const c=!this._moving;return c&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),c&&this.fire(new o.Event("moveend",m)),this}getBounds(){return this.transform.projection.name==="globe"&&o.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m==null?-2:m)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m==null?22:m)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m==null?0:m)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m==null?85:m)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}getLanguage(){return this._language}setLanguage(m){if(this._language=m==="auto"?o.window.navigator.language:m,this.style)for(const c in this.style._sourceCaches){const f=this.style._sourceCaches[c]._source;f._setLanguage&&f._setLanguage(this._language)}for(const c of this._controls)c._setLanguage&&c._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){if(this._worldview=m,this.style)for(const c in this.style._sourceCaches){const f=this.style._sourceCaches[c]._source;f._setWorldview&&f._setWorldview(m)}return this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,c=m.projection.name;let f;c==="globe"&&m.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),f=!0):c==="mercator"&&m.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,c){return this._updateProjection(m||c||{name:"mercator"})}_updateProjection(m){let c;if(c=m.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),c){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0)}return this}project(m){return this.transform.locationPoint3D(o.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(o.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_createDelegatedListener(m,c,f){if(m==="mouseenter"||m==="mouseover"){let _=!1;const b=C=>{const A=c.filter(z=>this.getLayer(z)),I=A.length?this.queryRenderedFeatures(C.point,{layers:A}):[];I.length?_||(_=!0,f.call(this,new wr(m,this,C.originalEvent,{features:I}))):_=!1},E=()=>{_=!1};return{layers:new Set(c),listener:f,delegates:{mousemove:b,mouseout:E}}}if(m==="mouseleave"||m==="mouseout"){let _=!1;const b=C=>{const A=c.filter(I=>this.getLayer(I));(A.length?this.queryRenderedFeatures(C.point,{layers:A}):[]).length?_=!0:_&&(_=!1,f.call(this,new wr(m,this,C.originalEvent)))},E=C=>{_&&(_=!1,f.call(this,new wr(m,this,C.originalEvent)))};return{layers:new Set(c),listener:f,delegates:{mousemove:b,mouseout:E}}}{const _=b=>{const E=c.filter(A=>this.getLayer(A)),C=E.length?this.queryRenderedFeatures(b.point,{layers:E}):[];C.length&&(b.features=C,f.call(this,b),delete b.features)};return{layers:new Set(c),listener:f,delegates:{[m]:_}}}}on(m,c,f){if(f===void 0)return super.on(m,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(m,c,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(_);for(const b in _.delegates)this.on(b,_.delegates[b]);return this}once(m,c,f){if(f===void 0)return super.once(m,c);Array.isArray(c)||(c=[c]);const _=this._createDelegatedListener(m,c,f);for(const b in _.delegates)this.once(b,_.delegates[b]);return this}off(m,c,f){if(f===void 0)return super.off(m,c);c=new Set(Array.isArray(c)?c:[c]);const _=(E,C)=>{if(E.size!==C.size)return!1;for(const A of E)if(!C.has(A))return!1;return!0},b=this._delegatedListeners?this._delegatedListeners[m]:void 0;return b&&(E=>{for(let C=0;C<E.length;C++){const A=E[C];if(A.listener===f&&_(A.layers,c)){for(const I in A.delegates)this.off(I,A.delegates[I]);return E.splice(C,1),this}}})(b),this}queryRenderedFeatures(m,c){return this.style?(c!==void 0||m===void 0||m instanceof o.pointGeometry||Array.isArray(m)||(c=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],c=c||{},this.transform)):[]}querySourceFeatures(m,c){return this.style.querySourceFeatures(m,c)}queryTerrainElevation(m,c){const f=this.transform.elevation;return f?(c=o.extend({},{exaggerated:!0},c),f.getAtPoint(o.MercatorCoordinate.fromLngLat(m),null,c.exaggerated)):null}setStyle(m,c){return(c=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},c)).diff!==!1&&c.localIdeographFontFamily===this._localIdeographFontFamily&&c.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,c),this):(this._localIdeographFontFamily=c.localIdeographFontFamily,this._localFontFamily=c.localFontFamily,this._updateStyle(m,c))}_getUIString(m){const c=this._locale[m];if(c==null)throw new Error(`Missing UI string '${m}'`);return c}_updateStyle(m,c){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new Eo(this,c||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Eo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,c){if(typeof m=="string"){const f=this._requestManager.normalizeStyleURL(m),_=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(_,(b,E)=>{b?this.fire(new o.ErrorEvent(b)):E&&this._updateDiff(E,c)})}else typeof m=="object"&&this._updateDiff(m,c)}_updateDiff(m,c){try{this.style.setState(m)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(m,c)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(m,c){return this._lazyInitEmptyStyle(),this.style.addSource(m,c),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const c in m){const f=m[c]._tiles;for(const _ in f){const b=f[_];if(b.state!=="loaded"&&b.state!=="errored")return!1}}return!0}addSourceType(m,c,f){this._lazyInitEmptyStyle(),this.style.addSourceType(m,c,f)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,c,{pixelRatio:f=1,sdf:_=!1,stretchX:b,stretchY:E,content:C}={}){if(this._lazyInitEmptyStyle(),c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap){const{width:A,height:I,data:z}=o.exported.getImageData(c);this.style.addImage(m,{data:new o.RGBAImage({width:A,height:I},z),pixelRatio:f,stretchX:b,stretchY:E,content:C,sdf:_,version:0})}else if(c.width===void 0||c.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:A,height:I}=c,z=c;this.style.addImage(m,{data:new o.RGBAImage({width:A,height:I},new Uint8Array(z.data)),pixelRatio:f,stretchX:b,stretchY:E,content:C,sdf:_,version:0,userImage:z}),z.onAdd&&z.onAdd(this,m)}}updateImage(m,c){const f=this.style.getImage(m);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const _=c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap?o.exported.getImageData(c):c,{width:b,height:E}=_;b!==void 0&&E!==void 0?b===f.data.width&&E===f.data.height?(f.data.replace(_.data,!(c instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&c instanceof o.window.ImageBitmap)),this.style.updateImage(m,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${b}, ${E})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,c){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),(f,_)=>{c(f,_ instanceof o.window.HTMLImageElement?o.exported.getImageData(_):_)})}listImages(){return this.style.listImages()}addLayer(m,c){return this._lazyInitEmptyStyle(),this.style.addLayer(m,c),this._update(!0)}moveLayer(m,c){return this.style.moveLayer(m,c),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,c,f){return this.style.setLayerZoomRange(m,c,f),this._update(!0)}setFilter(m,c,f={}){return this.style.setFilter(m,c,f),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,c,f,_={}){return this.style.setPaintProperty(m,c,f,_),this._update(!0)}getPaintProperty(m,c){return this.style.getPaintProperty(m,c)}setLayoutProperty(m,c,f,_={}){return this.style.setLayoutProperty(m,c,f,_),this._update(!0)}getLayoutProperty(m,c){return this.style.getLayoutProperty(m,c)}setLight(m,c={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,c),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(m),this.transform):0}setFeatureState(m,c){return this.style.setFeatureState(m,c),this._update()}removeFeatureState(m,c){return this.style.removeFeatureState(m,c),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,c=this._container.getBoundingClientRect().height||300;let f,_,b,E=this._container;for(;E&&(!_||!b);){const C=o.window.getComputedStyle(E).transform;C&&C!=="none"&&(f=C.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(_=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(b=f[3])),E=E.parentElement}this._containerWidth=_?Math.abs(m/_):m,this._containerHeight=b?Math.abs(c/b):c}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=O("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const c=this._canvasContainer=O("div","mapboxgl-canvas-container",m);this._interactive&&c.classList.add("mapboxgl-interactive"),this._canvas=O("canvas","mapboxgl-canvas",c),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=O("div","mapboxgl-control-container",m),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{_[b]=O("div",`mapboxgl-ctrl-${b}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,c){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(m),this._canvas.height=f*Math.ceil(c),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${c}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const c=this._markers.indexOf(m);c!==-1&&this._markers.splice(c,1)}_setupPainter(){const m=o.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),c=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);c?(o.storeAuthState(c,!0),this.painter=new Hf(c,this.transform),this.on("data",f=>{f.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(c)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let c;const f=this.painter.context.extTimerQuery,_=o.exported.now();if(this.listens("gpu-timing-frame")&&(c=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,c)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();let b=!1;const E=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,z=this.transform.pitch,R=o.exported.now();this.style.zoomHistory.update(I,R);const W=new o.EvaluationParameters(I,{now:R,fadeDuration:E,pitch:z,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Y=W.crossFadingFactor();Y===1&&Y===this._crossFadingFactor||(b=!0,this._crossFadingFactor=Y),this.style.update(W)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let C=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),C=this._updateAverageElevation(_),this.style._updateSources(this.transform),this._forceMarkerUpdate()):C=this._updateAverageElevation(_),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,E,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||b)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),c){const I=o.exported.now()-_;f.endQueryEXT(f.TIME_ELAPSED_EXT,c),setTimeout(()=>{const z=f.getQueryObjectEXT(c,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(c),this.fire(new o.Event("gpu-timing-frame",{cpuTime:I,gpuTime:z})),o.window.performance.mark("frame-gpu",{startTime:_,detail:{gpuTime:z}})},50)}if(this.listens("gpu-timing-layer")){const I=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(I);this.fire(new o.Event("gpu-timing-layer",{layerTimes:z}))},50)}if(this.listens("gpu-timing-deferred-render")){const I=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const z=this.painter.queryGpuTimeDeferredRender(I);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:z}))},50)}const A=this._sourcesDirty||this._styleDirty||this._placementDirty||C;if(A||this._repaint)this.triggerRepaint();else{const I=!this.isMoving()&&this.loaded();if(I&&(C=this._updateAverageElevation(_,!0)),C)this.triggerRepaint();else if(this._triggerFrame(!1),I&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const z=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||A||(this._fullyLoaded=!0,this._authenticate())}_forceMarkerUpdate(){for(const m of this._markers)m._update()}_updateAverageElevation(m,c=!1){const f=_=>(this.transform.averageElevation=_,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((c||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const _=this.transform.averageElevation;let b=this.transform.sampleAverageElevation(),E=!1;this.transform.elevation&&(E=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(b)?b=0:this._averageElevationLastSampledAt=m;const C=Math.abs(_-b);if(C>1){if(this._isInitialLoad||E)return this._averageElevation.jumpTo(b),f(b);this._averageElevation.easeTo(b,m,300)}else if(C>1e-4)return this._averageElevation.jumpTo(b),f(b)}return!!this._averageElevation.isEasing(m)&&f(this._averageElevation.getValue(m))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===o.AUTH_ERR_MSG||m.status===401)){const c=this.painter.context.gl;o.storeAuthState(c,!1),this._logoControl instanceof rp&&this._logoControl._updateLogo(),c&&c.clear(c.DEPTH_BUFFER_BIT|c.COLOR_BUFFER_BIT|c.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),c=this.painter.getCanvasCopiesAndTimestamps();c.timeStamps.push(performance.now());const f=this.painter.context.gl,_=f.createFramebuffer();function b(E){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,E,0);const C=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,C),C}return f.bindFramebuffer(f.FRAMEBUFFER,_),this._canvasPixelComparison(b(m),c.canvasCopies.map(b),c.timeStamps)}_canvasPixelComparison(m,c,f){let _=f[1]-f[0];const b=m.length/4;for(let E=0;E<c.length;E++){const C=c[E];let A=0;for(let I=0;I<C.length;I+=4)C[I]===m[I]&&C[I+1]===m[I+1]&&C[I+2]===m[I+2]&&C[I+3]===m[I+3]&&(A+=1);_+=(f[E+2]-f[E+1])*(1-A/b)}return _}remove(){this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),Jc(this._canvasContainer),Jc(this._controlContainer),Jc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.exported.frame(c=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(c)}))}_preloadTiles(m){const c=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(c,(f,_)=>f._preloadTiles(m,_),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,c){o.setCacheLimits(m,c)}get version(){return o.version}},NavigationControl:class{constructor(m){this.options=o.extend({},M_,m),this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",c=>c.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",c=>{this._map&&this._map.zoomIn({},{originalEvent:c})}),O("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",c=>{this._map&&this._map.zoomOut({},{originalEvent:c})}),O("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",c=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:c}):f.resetNorth({},{originalEvent:c}))}),this._compassIcon=O("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const c=m.getZoom(),f=c===m.getMaxZoom(),_=c===m.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=_,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",_.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const c=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=c)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ap(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,c){const f=O("button",m,this._container);return f.type="button",f.addEventListener("click",c),f}_setButtonTitle(m,c){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${c}`);m.setAttribute("aria-label",f),m.firstElementChild&&m.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(m){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},k_,m),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Hc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){this._supportsGeolocation!==void 0?m(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(c=>{this._supportsGeolocation=c.state!=="denied",m(this._supportsGeolocation)}):(this._supportsGeolocation=!!this.options.geolocation,m(this._supportsGeolocation))}_isOutOfMapMaxBounds(m){const c=this._map.getMaxBounds(),f=m.coords;return!!c&&(f.longitude<c.getWest()||f.longitude>c.getEast()||f.latitude<c.getSouth()||f.latitude>c.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",m)),this._finish()}}_updateCamera(m){const c=new o.LngLat(m.coords.longitude,m.coords.latitude),f=m.coords.accuracy,_=this._map.getBearing(),b=o.extend({bearing:_},this.options.fitBoundsOptions);this._map.fitBounds(c.toBounds(f),b,{geolocateSource:!0})}_updateMarker(m){if(m){const c=new o.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,c=o.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,f=Math.ceil(2*this._accuracy*c);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",c=>c.preventDefault()),this._geolocateButton=O("button","mapboxgl-ctrl-geolocate",this._container),O("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",c),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O("div","mapboxgl-user-location"),this._dotElement.appendChild(O("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(O("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new kh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=O("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(c=>{c==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:ip,ScaleControl:class{constructor(m){this.options=o.extend({},lp,m),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=cp.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,c=this._map,f=c._containerHeight/2,_=c._containerWidth/2-m/2,b=c.unproject([_,f]),E=c.unproject([_+m,f]),C=b.distanceTo(E);if(this.options.unit==="imperial"){const A=3.2808*C;A>5280?this._setScale(m,A/5280,"mile"):this._setScale(m,A,"foot")}else this.options.unit==="nautical"?this._setScale(m,C/1852,"nautical-mile"):C>=1e3?this._setScale(m,C/1e3,"kilometer"):this._setScale(m,C,"meter")}_setScale(m,c,f){const _=Ah(c),b=_/c;this._map._requestDomTask(()=>{this._container.style.width=m*b+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(_):`${_}&nbsp;nm`})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=O("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof o.window.HTMLElement?this._container=m.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=O("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=O("button","mapboxgl-ctrl-fullscreen",this._controlContainer);O("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(m){super(),this.options=o.extend(Object.create(Yx),m),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const c=this._map;return c&&(c.on("move",this._update),c.off("mousemove",this._onMouseEvent),c._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(o.window.document.createTextNode(m))}setHTML(m){const c=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let _;for(f.innerHTML=m;_=f.firstChild,_;)c.appendChild(_);return this.setDOMContent(c)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let c=this._content;if(c)for(;c.hasChildNodes();)c.firstChild&&c.removeChild(c.firstChild);else c=this._content=O("div","mapboxgl-popup-content",this._container||void 0);if(c.appendChild(m),this.options.closeButton){const f=this._closeButton=O("button","mapboxgl-popup-close-button",c);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let c;return this._classList.delete(m)?c=!1:(this._classList.add(m),c=!0),this._updateClassList(),c}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const c=this._map,f=this._container,_=this._pos;if(!c||!f||!_)return"bottom";const b=f.offsetWidth,E=f.offsetHeight,C=_.x<b/2,A=_.x>c.transform.width-b/2;if(_.y+m<E)return C?"top-left":A?"top-right":"top";if(_.y>c.transform.height-E){if(C)return"bottom-left";if(A)return"bottom-right"}return C?"left":A?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const c=[...this._classList];c.push("mapboxgl-popup"),this._anchor&&c.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&c.push("mapboxgl-popup-track-pointer"),m.className=c.join(" ")}_update(m){const c=this._map,f=this._content;if(!c||!this._lngLat&&!this._trackPointer||!f)return;let _=this._container;if(_||(_=this._container=O("div","mapboxgl-popup",c.getContainer()),this._tip=O("div","mapboxgl-popup-tip",_),_.appendChild(f)),this.options.maxWidth&&_.style.maxWidth!==this.options.maxWidth&&(_.style.maxWidth=this.options.maxWidth),c.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=sp(this._lngLat,this._pos,c.transform)),!this._trackPointer||m){const b=this._pos=this._trackPointer&&m?m:c.project(this._lngLat),E=Dh(this.options.offset),C=this._anchor=this._getAnchor(E.y),A=Dh(this.options.offset,C),I=b.add(A).round();c._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${Kc[C]} translate(${I.x}px,${I.y}px)`)})}if(!this._marker&&c._showingGlobe()){const b=o.isLngLatBehindGlobe(c.transform,this._lngLat)?0:1;this._setOpacity(b)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(Zx);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:kh,Style:Eo,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Dt,Evented:o.Evented,config:o.config,prewarm:function(){Un().acquire($t)},clearPrewarmedResources:function(){const m=gn;m&&(m.isPreloaded()&&m.numActive()===1?(m.release($t),gn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(m){o.config.ACCESS_TOKEN=m},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(m){o.config.API_URL=m},get workerCount(){return Jt.workerCount},set workerCount(m){Jt.workerCount=m},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Qc});var d=s;return d})})(lT);var AQ=lT.exports,DQ=Object.freeze(WM({__proto__:null,[Symbol.toStringTag]:"Module",default:AQ},[lT.exports])),s5={};const cT=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],hf={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:e=>typeof console!="undefined"&&console.warn(e),getWeek:e=>{const t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Bg={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:e=>{const t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Fo=(e,t=2)=>`000${e}`.slice(t*-1),ws=e=>e===!0?1:0;function a5(e,t){let n;return function(){clearTimeout(n),n=setTimeout(()=>e.apply(this,arguments),t)}}const uT=e=>e instanceof Array?e:[e];function xo(e,t,n){if(n===!0)return e.classList.add(t);e.classList.remove(t)}function ai(e,t,n){const r=window.document.createElement(e);return t=t||"",n=n||"",r.className=t,n!==void 0&&(r.textContent=n),r}function Mx(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function l5(e,t){if(t(e))return e;if(e.parentNode)return l5(e.parentNode,t)}function kx(e,t){const n=ai("div","numInputWrapper"),r=ai("input","numInput "+e),s=ai("span","arrowUp"),u=ai("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),t!==void 0)for(const d in t)r.setAttribute(d,t[d]);return n.appendChild(r),n.appendChild(s),n.appendChild(u),n}function es(e){try{return typeof e.composedPath=="function"?e.composedPath()[0]:e.target}catch{return e.target}}const hT=()=>{},Ax=(e,t,n)=>n.months[t?"shorthand":"longhand"][e],IQ={D:hT,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:(e,t)=>{e.setHours(parseFloat(t))},H:(e,t)=>{e.setHours(parseFloat(t))},J:(e,t)=>{e.setDate(parseFloat(t))},K:(e,t,n)=>{e.setHours(e.getHours()%12+12*ws(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:(e,t)=>{e.setSeconds(parseFloat(t))},U:(e,t)=>new Date(parseFloat(t)*1e3),W:function(e,t,n){const r=parseInt(t),s=new Date(e.getFullYear(),0,2+(r-1)*7,0,0,0,0);return s.setDate(s.getDate()-s.getDay()+n.firstDayOfWeek),s},Y:(e,t)=>{e.setFullYear(parseFloat(t))},Z:(e,t)=>new Date(t),d:(e,t)=>{e.setDate(parseFloat(t))},h:(e,t)=>{e.setHours(parseFloat(t))},i:(e,t)=>{e.setMinutes(parseFloat(t))},j:(e,t)=>{e.setDate(parseFloat(t))},l:hT,m:(e,t)=>{e.setMonth(parseFloat(t)-1)},n:(e,t)=>{e.setMonth(parseFloat(t)-1)},s:(e,t)=>{e.setSeconds(parseFloat(t))},u:(e,t)=>new Date(parseFloat(t)),w:hT,y:(e,t)=>{e.setFullYear(2e3+parseFloat(t))}},dT={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ng={Z:e=>e.toISOString(),D:function(e,t,n){return t.weekdays.shorthand[Ng.w(e,t,n)]},F:function(e,t,n){return Ax(Ng.n(e,t,n)-1,!1,t)},G:function(e,t,n){return Fo(Ng.h(e,t,n))},H:e=>Fo(e.getHours()),J:function(e,t){return t.ordinal!==void 0?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:(e,t)=>t.amPM[ws(e.getHours()>11)],M:function(e,t){return Ax(e.getMonth(),!0,t)},S:e=>Fo(e.getSeconds()),U:e=>e.getTime()/1e3,W:function(e,t,n){return n.getWeek(e)},Y:e=>Fo(e.getFullYear(),4),d:e=>Fo(e.getDate()),h:e=>e.getHours()%12?e.getHours()%12:12,i:e=>Fo(e.getMinutes()),j:e=>e.getDate(),l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:e=>Fo(e.getMonth()+1),n:e=>e.getMonth()+1,s:e=>e.getSeconds(),u:e=>e.getTime(),w:e=>e.getDay(),y:e=>String(e.getFullYear()).substring(2)},c5=({config:e=hf,l10n:t=Bg,isMobile:n=!1})=>(r,s,u)=>{const d=u||t;return e.formatDate!==void 0&&!n?e.formatDate(r,s,d):s.split("").map((o,y,w)=>Ng[o]&&w[y-1]!=="\\"?Ng[o](r,d,e):o!=="\\"?o:"").join("")},fT=({config:e=hf,l10n:t=Bg})=>(n,r,s,u)=>{if(n!==0&&!n)return;const d=u||t;let o;const y=n;if(n instanceof Date)o=new Date(n.getTime());else if(typeof n!="string"&&n.toFixed!==void 0)o=new Date(n);else if(typeof n=="string"){const w=r||(e||hf).dateFormat,M=String(n).trim();if(M==="today")o=new Date,s=!0;else if(/Z$/.test(M)||/GMT$/.test(M))o=new Date(n);else if(e&&e.parseDate)o=e.parseDate(n,w);else{o=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0));let k,O=[];for(let $=0,j=0,G="";$<w.length;$++){const B=w[$],U=B==="\\",Z=w[$-1]==="\\"||U;if(dT[B]&&!Z){G+=dT[B];const re=new RegExp(G).exec(n);re&&(k=!0)&&O[B!=="Y"?"push":"unshift"]({fn:IQ[B],val:re[++j]})}else U||(G+=".");O.forEach(({fn:re,val:ie})=>o=re(o,ie,d)||o)}o=k?o:void 0}}if(!(o instanceof Date&&!isNaN(o.getTime()))){e.errorHandler(new Error(`Invalid date provided: ${y}`));return}return s===!0&&o.setHours(0,0,0,0),o};function ts(e,t,n=!0){return n!==!1?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}const PQ=(e,t,n)=>e>Math.min(t,n)&&e<Math.max(t,n),OQ={DAY:864e5};function pT(e){let t=e.defaultHour,n=e.defaultMinute,r=e.defaultSeconds;if(e.minDate!==void 0){const s=e.minDate.getHours(),u=e.minDate.getMinutes(),d=e.minDate.getSeconds();t<s&&(t=s),t===s&&n<u&&(n=u),t===s&&n===u&&r<d&&(r=e.minDate.getSeconds())}if(e.maxDate!==void 0){const s=e.maxDate.getHours(),u=e.maxDate.getMinutes();t=Math.min(t,s),t===s&&(n=Math.min(u,n)),t===s&&n===u&&(r=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(e,...t){if(!e)throw TypeError("Cannot convert undefined or null to object");for(const n of t)n&&Object.keys(n).forEach(r=>e[r]=n[r]);return e});const LQ=300;function zQ(e,t){const n={config:Object.assign(Object.assign({},hf),hr.defaultConfig),l10n:Bg};n.parseDate=fT({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=j,n._setHoursFromDate=k,n._positionCalendar=Fn,n.changeMonth=un,n.changeYear=hn,n.clear=st,n.close=at,n._createElement=ai,n.destroy=xt,n.isEnabled=Tn,n.jumpToDate=U,n.open=Lt,n.redraw=Ir,n.set=tn,n.setDate=bi,n.toggle=tr;function r(){n.utils={getDaysInMonth(se=n.currentMonth,fe=n.currentYear){return se===1&&(fe%4==0&&fe%100!=0||fe%400==0)?29:n.l10n.daysInMonth[se]}}}function s(){n.element=n.input=e,n.isOpen=!1,_t(),Sn(),br(),ar(),r(),n.isMobile||ie(),B(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&k(n.config.noCalendar?n.latestSelectedDateObj:void 0),Pr(!1)),d();const se=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&se&&Fn(),An("onReady")}function u(se){return se.bind(n)}function d(){const se=n.config;se.weekNumbers===!1&&se.showMonths===1||se.noCalendar!==!0&&window.requestAnimationFrame(function(){if(n.calendarContainer!==void 0&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),n.daysContainer!==void 0){const fe=(n.days.offsetWidth+1)*se.showMonths;n.daysContainer.style.width=fe+"px",n.calendarContainer.style.width=fe+(n.weekWrapper!==void 0?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}})}function o(se){if(n.selectedDates.length===0){const Le=n.config.minDate===void 0||ts(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),Qe=pT(n.config);Le.setHours(Qe.hours,Qe.minutes,Qe.seconds,Le.getMilliseconds()),n.selectedDates=[Le],n.latestSelectedDateObj=Le}se!==void 0&&se.type!=="blur"&&Sc(se);const fe=n._input.value;M(),Pr(),n._input.value!==fe&&n._debouncedChange()}function y(se,fe){return se%12+12*ws(fe===n.l10n.amPM[1])}function w(se){switch(se%24){case 0:case 12:return 12;default:return se%12}}function M(){if(n.hourElement===void 0||n.minuteElement===void 0)return;let se=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,fe=(parseInt(n.minuteElement.value,10)||0)%60,Le=n.secondElement!==void 0?(parseInt(n.secondElement.value,10)||0)%60:0;n.amPM!==void 0&&(se=y(se,n.amPM.textContent));const Qe=n.config.minTime!==void 0||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&ts(n.latestSelectedDateObj,n.config.minDate,!0)===0;if(n.config.maxTime!==void 0||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&ts(n.latestSelectedDateObj,n.config.maxDate,!0)===0){const ft=n.config.maxTime!==void 0?n.config.maxTime:n.config.maxDate;se=Math.min(se,ft.getHours()),se===ft.getHours()&&(fe=Math.min(fe,ft.getMinutes())),fe===ft.getMinutes()&&(Le=Math.min(Le,ft.getSeconds()))}if(Qe){const ft=n.config.minTime!==void 0?n.config.minTime:n.config.minDate;se=Math.max(se,ft.getHours()),se===ft.getHours()&&fe<ft.getMinutes()&&(fe=ft.getMinutes()),fe===ft.getMinutes()&&(Le=Math.max(Le,ft.getSeconds()))}O(se,fe,Le)}function k(se){const fe=se||n.latestSelectedDateObj;fe&&O(fe.getHours(),fe.getMinutes(),fe.getSeconds())}function O(se,fe,Le){n.latestSelectedDateObj!==void 0&&n.latestSelectedDateObj.setHours(se%24,fe,Le||0,0),!(!n.hourElement||!n.minuteElement||n.isMobile)&&(n.hourElement.value=Fo(n.config.time_24hr?se:(12+se)%12+12*ws(se%12==0)),n.minuteElement.value=Fo(fe),n.amPM!==void 0&&(n.amPM.textContent=n.l10n.amPM[ws(se>=12)]),n.secondElement!==void 0&&(n.secondElement.value=Fo(Le)))}function $(se){const fe=es(se),Le=parseInt(fe.value)+(se.delta||0);(Le/1e3>1||se.key==="Enter"&&!/[^\d]/.test(Le.toString()))&&hn(Le)}function j(se,fe,Le,Qe){if(fe instanceof Array)return fe.forEach(Et=>j(se,Et,Le,Qe));if(se instanceof Array)return se.forEach(Et=>j(Et,fe,Le,Qe));se.addEventListener(fe,Le,Qe),n._handlers.push({remove:()=>se.removeEventListener(fe,Le)})}function G(){An("onChange")}function B(){if(n.config.wrap&&["open","close","toggle","clear"].forEach(fe=>{Array.prototype.forEach.call(n.element.querySelectorAll(`[data-${fe}]`),Le=>j(Le,"click",n[fe]))}),n.isMobile){ns();return}const se=a5(qe,50);if(n._debouncedChange=a5(G,LQ),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&j(n.daysContainer,"mouseover",fe=>{n.config.mode==="range"&&We(es(fe))}),j(window.document.body,"keydown",Ie),!n.config.inline&&!n.config.static&&j(window,"resize",se),window.ontouchstart!==void 0?j(window.document,"touchstart",Gt):j(window.document,"mousedown",Gt),j(window.document,"focus",Gt,{capture:!0}),n.config.clickOpens===!0&&(j(n._input,"focus",n.open),j(n._input,"click",n.open)),n.daysContainer!==void 0&&(j(n.monthNav,"click",gl),j(n.monthNav,["keyup","increment"],$),j(n.daysContainer,"click",xr)),n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0){const fe=Le=>es(Le).select();j(n.timeContainer,["increment"],o),j(n.timeContainer,"blur",o,{capture:!0}),j(n.timeContainer,"click",Z),j([n.hourElement,n.minuteElement],["focus","click"],fe),n.secondElement!==void 0&&j(n.secondElement,"focus",()=>n.secondElement&&n.secondElement.select()),n.amPM!==void 0&&j(n.amPM,"click",Le=>{o(Le),G()})}n.config.allowInput&&j(n._input,"blur",Oi)}function U(se,fe){const Le=se!==void 0?n.parseDate(se):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),Qe=n.currentYear,Et=n.currentMonth;try{Le!==void 0&&(n.currentYear=Le.getFullYear(),n.currentMonth=Le.getMonth())}catch(ft){ft.message="Invalid date supplied: "+Le,n.config.errorHandler(ft)}fe&&n.currentYear!==Qe&&(An("onYearChange"),ot()),fe&&(n.currentYear!==Qe||n.currentMonth!==Et)&&An("onMonthChange"),n.redraw()}function Z(se){const fe=es(se);~fe.className.indexOf("arrow")&&re(se,fe.classList.contains("arrowUp")?1:-1)}function re(se,fe,Le){const Qe=se&&es(se),Et=Le||Qe&&Qe.parentNode&&Qe.parentNode.firstChild,ft=lo("increment");ft.delta=fe,Et&&Et.dispatchEvent(ft)}function ie(){const se=window.document.createDocumentFragment();if(n.calendarContainer=ai("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(se.appendChild(Ve()),n.innerContainer=ai("div","flatpickr-innerContainer"),n.config.weekNumbers){const{weekWrapper:Le,weekNumbers:Qe}=Ut();n.innerContainer.appendChild(Le),n.weekNumbers=Qe,n.weekWrapper=Le}n.rContainer=ai("div","flatpickr-rContainer"),n.rContainer.appendChild(ct()),n.daysContainer||(n.daysContainer=ai("div","flatpickr-days"),n.daysContainer.tabIndex=-1),mt(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),se.appendChild(n.innerContainer)}n.config.enableTime&&se.appendChild(tt()),xo(n.calendarContainer,"rangeMode",n.config.mode==="range"),xo(n.calendarContainer,"animate",n.config.animate===!0),xo(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(se);const fe=n.config.appendTo!==void 0&&n.config.appendTo.nodeType!==void 0;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!fe&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):n.config.appendTo!==void 0&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){const Le=ai("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(Le,n.element),Le.appendChild(n.element),n.altInput&&Le.appendChild(n.altInput),Le.appendChild(n.calendarContainer)}!n.config.static&&!n.config.inline&&(n.config.appendTo!==void 0?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function de(se,fe,Le,Qe){const Et=Tn(fe,!0),ft=ai("span","flatpickr-day "+se,fe.getDate().toString());return ft.dateObj=fe,ft.$i=Qe,ft.setAttribute("aria-label",n.formatDate(fe,n.config.ariaDateFormat)),se.indexOf("hidden")===-1&&ts(fe,n.now)===0&&(n.todayDateElem=ft,ft.classList.add("today"),ft.setAttribute("aria-current","date")),Et?(ft.tabIndex=-1,co(fe)&&(ft.classList.add("selected"),n.selectedDateElem=ft,n.config.mode==="range"&&(xo(ft,"startRange",n.selectedDates[0]&&ts(fe,n.selectedDates[0],!0)===0),xo(ft,"endRange",n.selectedDates[1]&&ts(fe,n.selectedDates[1],!0)===0),se==="nextMonthDay"&&ft.classList.add("inRange")))):ft.classList.add("flatpickr-disabled"),n.config.mode==="range"&&Bo(fe)&&!co(fe)&&ft.classList.add("inRange"),n.weekNumbers&&n.config.showMonths===1&&se!=="prevMonthDay"&&Le%7==1&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(fe)+"</span>"),An("onDayCreate",ft),ft}function xe(se){se.focus(),n.config.mode==="range"&&We(se)}function Ce(se){const fe=se>0?0:n.config.showMonths-1,Le=se>0?n.config.showMonths:-1;for(let Qe=fe;Qe!=Le;Qe+=se){const Et=n.daysContainer.children[Qe],ft=se>0?0:Et.children.length-1,X=se>0?Et.children.length:-1;for(let N=ft;N!=X;N+=se){const H=Et.children[N];if(H.className.indexOf("hidden")===-1&&Tn(H.dateObj))return H}}}function je(se,fe){const Le=se.className.indexOf("Month")===-1?se.dateObj.getMonth():n.currentMonth,Qe=fe>0?n.config.showMonths:-1,Et=fe>0?1:-1;for(let ft=Le-n.currentMonth;ft!=Qe;ft+=Et){const X=n.daysContainer.children[ft],N=Le-n.currentMonth===ft?se.$i+fe:fe<0?X.children.length-1:0,H=X.children.length;for(let Q=N;Q>=0&&Q<H&&Q!=(fe>0?H:-1);Q+=Et){const he=X.children[Q];if(he.className.indexOf("hidden")===-1&&Tn(he.dateObj)&&Math.abs(se.$i-Q)>=Math.abs(fe))return xe(he)}}n.changeMonth(Et),ze(Ce(Et),0)}function ze(se,fe){const Le=ci(document.activeElement||document.body),Qe=se!==void 0?se:Le?document.activeElement:n.selectedDateElem!==void 0&&ci(n.selectedDateElem)?n.selectedDateElem:n.todayDateElem!==void 0&&ci(n.todayDateElem)?n.todayDateElem:Ce(fe>0?1:-1);Qe===void 0?n._input.focus():Le?je(Qe,fe):xe(Qe)}function pt(se,fe){const Le=(new Date(se,fe,1).getDay()-n.l10n.firstDayOfWeek+7)%7,Qe=n.utils.getDaysInMonth((fe-1+12)%12,se),Et=n.utils.getDaysInMonth(fe,se),ft=window.document.createDocumentFragment(),X=n.config.showMonths>1,N=X?"prevMonthDay hidden":"prevMonthDay",H=X?"nextMonthDay hidden":"nextMonthDay";let Q=Qe+1-Le,he=0;for(;Q<=Qe;Q++,he++)ft.appendChild(de(N,new Date(se,fe-1,Q),Q,he));for(Q=1;Q<=Et;Q++,he++)ft.appendChild(de("",new Date(se,fe,Q),Q,he));for(let Ae=Et+1;Ae<=42-Le&&(n.config.showMonths===1||he%7!=0);Ae++,he++)ft.appendChild(de(H,new Date(se,fe+1,Ae%Et),Ae,he));const ye=ai("div","dayContainer");return ye.appendChild(ft),ye}function mt(){if(n.daysContainer===void 0)return;Mx(n.daysContainer),n.weekNumbers&&Mx(n.weekNumbers);const se=document.createDocumentFragment();for(let fe=0;fe<n.config.showMonths;fe++){const Le=new Date(n.currentYear,n.currentMonth,1);Le.setMonth(n.currentMonth+fe),se.appendChild(pt(Le.getFullYear(),Le.getMonth()))}n.daysContainer.appendChild(se),n.days=n.daysContainer.firstChild,n.config.mode==="range"&&n.selectedDates.length===1&&We()}function ot(){if(n.config.showMonths>1||n.config.monthSelectorType!=="dropdown")return;const se=function(fe){return n.config.minDate!==void 0&&n.currentYear===n.config.minDate.getFullYear()&&fe<n.config.minDate.getMonth()?!1:!(n.config.maxDate!==void 0&&n.currentYear===n.config.maxDate.getFullYear()&&fe>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(let fe=0;fe<12;fe++){if(!se(fe))continue;const Le=ai("option","flatpickr-monthDropdown-month");Le.value=new Date(n.currentYear,fe).getMonth().toString(),Le.textContent=Ax(fe,n.config.shorthandCurrentMonth,n.l10n),Le.tabIndex=-1,n.currentMonth===fe&&(Le.selected=!0),n.monthsDropdownContainer.appendChild(Le)}}function kt(){const se=ai("div","flatpickr-month"),fe=window.document.createDocumentFragment();let Le;n.config.showMonths>1||n.config.monthSelectorType==="static"?Le=ai("span","cur-month"):(n.monthsDropdownContainer=ai("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),j(n.monthsDropdownContainer,"change",X=>{const N=es(X),H=parseInt(N.value,10);n.changeMonth(H-n.currentMonth),An("onMonthChange")}),ot(),Le=n.monthsDropdownContainer);const Qe=kx("cur-year",{tabindex:"-1"}),Et=Qe.getElementsByTagName("input")[0];Et.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&Et.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(Et.setAttribute("max",n.config.maxDate.getFullYear().toString()),Et.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());const ft=ai("div","flatpickr-current-month");return ft.appendChild(Le),ft.appendChild(Qe),fe.appendChild(ft),se.appendChild(fe),{container:se,yearElement:Et,monthElement:Le}}function Ne(){Mx(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(let se=n.config.showMonths;se--;){const fe=kt();n.yearElements.push(fe.yearElement),n.monthElements.push(fe.monthElement),n.monthNav.appendChild(fe.container)}n.monthNav.appendChild(n.nextMonthNav)}function Ve(){return n.monthNav=ai("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=ai("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=ai("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,Ne(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:()=>n.__hidePrevMonthArrow,set(se){n.__hidePrevMonthArrow!==se&&(xo(n.prevMonthNav,"flatpickr-disabled",se),n.__hidePrevMonthArrow=se)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:()=>n.__hideNextMonthArrow,set(se){n.__hideNextMonthArrow!==se&&(xo(n.nextMonthNav,"flatpickr-disabled",se),n.__hideNextMonthArrow=se)}}),n.currentYearElement=n.yearElements[0],Ur(),n.monthNav}function tt(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");const se=pT(n.config);n.timeContainer=ai("div","flatpickr-time"),n.timeContainer.tabIndex=-1;const fe=ai("span","flatpickr-time-separator",":"),Le=kx("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=Le.getElementsByTagName("input")[0];const Qe=kx("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=Qe.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=Fo(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?se.hours:w(se.hours)),n.minuteElement.value=Fo(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():se.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(Le),n.timeContainer.appendChild(fe),n.timeContainer.appendChild(Qe),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");const Et=kx("flatpickr-second");n.secondElement=Et.getElementsByTagName("input")[0],n.secondElement.value=Fo(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():se.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(ai("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(Et)}return n.config.time_24hr||(n.amPM=ai("span","flatpickr-am-pm",n.l10n.amPM[ws((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function ct(){n.weekdayContainer?Mx(n.weekdayContainer):n.weekdayContainer=ai("div","flatpickr-weekdays");for(let se=n.config.showMonths;se--;){const fe=ai("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(fe)}return Ot(),n.weekdayContainer}function Ot(){if(!n.weekdayContainer)return;const se=n.l10n.firstDayOfWeek;let fe=[...n.l10n.weekdays.shorthand];se>0&&se<fe.length&&(fe=[...fe.splice(se,fe.length),...fe.splice(0,se)]);for(let Le=n.config.showMonths;Le--;)n.weekdayContainer.children[Le].innerHTML=`
      <span class='flatpickr-weekday'>
        ${fe.join("</span><span class='flatpickr-weekday'>")}
      </span>
      `}function Ut(){n.calendarContainer.classList.add("hasWeeks");const se=ai("div","flatpickr-weekwrapper");se.appendChild(ai("span","flatpickr-weekday",n.l10n.weekAbbreviation));const fe=ai("div","flatpickr-weeks");return se.appendChild(fe),{weekWrapper:se,weekNumbers:fe}}function un(se,fe=!0){const Le=fe?se:se-n.currentMonth;Le<0&&n._hidePrevMonthArrow===!0||Le>0&&n._hideNextMonthArrow===!0||(n.currentMonth+=Le,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,An("onYearChange"),ot()),mt(),An("onMonthChange"),Ur())}function st(se=!0,fe=!0){if(n.input.value="",n.altInput!==void 0&&(n.altInput.value=""),n.mobileInput!==void 0&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,fe===!0&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),n.config.enableTime===!0){const{hours:Le,minutes:Qe,seconds:Et}=pT(n.config);O(Le,Qe,Et)}n.redraw(),se&&An("onChange")}function at(){n.isOpen=!1,n.isMobile||(n.calendarContainer!==void 0&&n.calendarContainer.classList.remove("open"),n._input!==void 0&&n._input.classList.remove("active")),An("onClose")}function xt(){n.config!==void 0&&An("onDestroy");for(let se=n._handlers.length;se--;)n._handlers[se].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){const se=n.calendarContainer.parentNode;if(se.lastChild&&se.removeChild(se.lastChild),se.parentNode){for(;se.firstChild;)se.parentNode.insertBefore(se.firstChild,se);se.parentNode.removeChild(se)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(se=>{try{delete n[se]}catch{}})}function Vt(se){return n.config.appendTo&&n.config.appendTo.contains(se)?!0:n.calendarContainer.contains(se)}function Gt(se){if(n.isOpen&&!n.config.inline){const fe=es(se),Le=Vt(fe),Qe=fe===n.input||fe===n.altInput||n.element.contains(fe)||se.path&&se.path.indexOf&&(~se.path.indexOf(n.input)||~se.path.indexOf(n.altInput)),Et=se.type==="blur"?Qe&&se.relatedTarget&&!Vt(se.relatedTarget):!Qe&&!Le&&!Vt(se.relatedTarget),ft=!n.config.ignoredFocusElements.some(X=>X.contains(fe));Et&&ft&&(n.timeContainer!==void 0&&n.minuteElement!==void 0&&n.hourElement!==void 0&&n.input.value!==""&&n.input.value!==void 0&&o(),n.close(),n.config&&n.config.mode==="range"&&n.selectedDates.length===1&&(n.clear(!1),n.redraw()))}}function hn(se){if(!se||n.config.minDate&&se<n.config.minDate.getFullYear()||n.config.maxDate&&se>n.config.maxDate.getFullYear())return;const fe=se,Le=n.currentYear!==fe;n.currentYear=fe||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),Le&&(n.redraw(),An("onYearChange"),ot())}function Tn(se,fe=!0){var Le;const Qe=n.parseDate(se,void 0,fe);if(n.config.minDate&&Qe&&ts(Qe,n.config.minDate,fe!==void 0?fe:!n.minDateHasTime)<0||n.config.maxDate&&Qe&&ts(Qe,n.config.maxDate,fe!==void 0?fe:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&n.config.disable.length===0)return!0;if(Qe===void 0)return!1;const Et=!!n.config.enable,ft=(Le=n.config.enable)!==null&&Le!==void 0?Le:n.config.disable;for(let X=0,N;X<ft.length;X++){if(N=ft[X],typeof N=="function"&&N(Qe))return Et;if(N instanceof Date&&Qe!==void 0&&N.getTime()===Qe.getTime())return Et;if(typeof N=="string"){const H=n.parseDate(N,void 0,!0);return H&&H.getTime()===Qe.getTime()?Et:!Et}else if(typeof N=="object"&&Qe!==void 0&&N.from&&N.to&&Qe.getTime()>=N.from.getTime()&&Qe.getTime()<=N.to.getTime())return Et}return!Et}function ci(se){return n.daysContainer!==void 0?se.className.indexOf("hidden")===-1&&se.className.indexOf("flatpickr-disabled")===-1&&n.daysContainer.contains(se):!1}function Oi(se){se.target===n._input&&(n.selectedDates.length>0||n._input.value.length>0)&&!(se.relatedTarget&&Vt(se.relatedTarget))&&n.setDate(n._input.value,!0,se.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function Ie(se){const fe=es(se),Le=n.config.wrap?e.contains(fe):fe===n._input,Qe=n.config.allowInput,Et=n.isOpen&&(!Qe||!Le),ft=n.config.inline&&Le&&!Qe;if(se.keyCode===13&&Le){if(Qe)return n.setDate(n._input.value,!0,fe===n.altInput?n.config.altFormat:n.config.dateFormat),fe.blur();n.open()}else if(Vt(fe)||Et||ft){const X=!!n.timeContainer&&n.timeContainer.contains(fe);switch(se.keyCode){case 13:X?(se.preventDefault(),o(),sr()):xr(se);break;case 27:se.preventDefault(),sr();break;case 8:case 46:Le&&!n.config.allowInput&&(se.preventDefault(),n.clear());break;case 37:case 39:if(!X&&!Le){if(se.preventDefault(),n.daysContainer!==void 0&&(Qe===!1||document.activeElement&&ci(document.activeElement))){const H=se.keyCode===39?1:-1;se.ctrlKey?(se.stopPropagation(),un(H),ze(Ce(1),0)):ze(void 0,H)}}else n.hourElement&&n.hourElement.focus();break;case 38:case 40:se.preventDefault();const N=se.keyCode===40?1:-1;n.daysContainer&&fe.$i!==void 0||fe===n.input||fe===n.altInput?se.ctrlKey?(se.stopPropagation(),hn(n.currentYear-N),ze(Ce(1),0)):X||ze(void 0,N*7):fe===n.currentYearElement?hn(n.currentYear-N):n.config.enableTime&&(!X&&n.hourElement&&n.hourElement.focus(),o(se),n._debouncedChange());break;case 9:if(X){const H=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter(he=>he),Q=H.indexOf(fe);if(Q!==-1){const he=H[Q+(se.shiftKey?-1:1)];se.preventDefault(),(he||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(fe)&&se.shiftKey&&(se.preventDefault(),n._input.focus());break}}if(n.amPM!==void 0&&fe===n.amPM)switch(se.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],M(),Pr();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],M(),Pr();break}(Le||Vt(fe))&&An("onKeyDown",se)}function We(se){if(n.selectedDates.length!==1||se&&(!se.classList.contains("flatpickr-day")||se.classList.contains("flatpickr-disabled")))return;const fe=se?se.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),Le=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),Qe=Math.min(fe,n.selectedDates[0].getTime()),Et=Math.max(fe,n.selectedDates[0].getTime());let ft=!1,X=0,N=0;for(let H=Qe;H<Et;H+=OQ.DAY)Tn(new Date(H),!0)||(ft=ft||H>Qe&&H<Et,H<Le&&(!X||H>X)?X=H:H>Le&&(!N||H<N)&&(N=H));for(let H=0;H<n.config.showMonths;H++){const Q=n.daysContainer.children[H];for(let he=0,ye=Q.children.length;he<ye;he++){const Ae=Q.children[he],we=Ae.dateObj.getTime(),Oe=X>0&&we<X||N>0&&we>N;if(Oe){Ae.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(Je=>{Ae.classList.remove(Je)});continue}else if(ft&&!Oe)continue;["startRange","inRange","endRange","notAllowed"].forEach(Je=>{Ae.classList.remove(Je)}),se!==void 0&&(se.classList.add(fe<=n.selectedDates[0].getTime()?"startRange":"endRange"),Le<fe&&we===Le?Ae.classList.add("startRange"):Le>fe&&we===Le&&Ae.classList.add("endRange"),we>=X&&(N===0||we<=N)&&PQ(we,Le,fe)&&Ae.classList.add("inRange"))}}}function qe(){n.isOpen&&!n.config.static&&!n.config.inline&&Fn()}function Lt(se,fe=n._positionElement){if(n.isMobile===!0){if(se){se.preventDefault();const Qe=es(se);Qe&&Qe.blur()}n.mobileInput!==void 0&&(n.mobileInput.focus(),n.mobileInput.click()),An("onOpen");return}else if(n._input.disabled||n.config.inline)return;const Le=n.isOpen;n.isOpen=!0,Le||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),An("onOpen"),Fn(fe)),n.config.enableTime===!0&&n.config.noCalendar===!0&&n.config.allowInput===!1&&(se===void 0||!n.timeContainer.contains(se.relatedTarget))&&setTimeout(()=>n.hourElement.select(),50)}function gt(se){return fe=>{const Le=n.config[`_${se}Date`]=n.parseDate(fe,n.config.dateFormat),Qe=n.config[`_${se==="min"?"max":"min"}Date`];Le!==void 0&&(n[se==="min"?"minDateHasTime":"maxDateHasTime"]=Le.getHours()>0||Le.getMinutes()>0||Le.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter(Et=>Tn(Et)),!n.selectedDates.length&&se==="min"&&k(Le),Pr()),n.daysContainer&&(Ir(),Le!==void 0?n.currentYearElement[se]=Le.getFullYear().toString():n.currentYearElement.removeAttribute(se),n.currentYearElement.disabled=!!Qe&&Le!==void 0&&Qe.getFullYear()===Le.getFullYear())}}function _t(){const se=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],fe=Object.assign(Object.assign({},JSON.parse(JSON.stringify(e.dataset||{}))),t),Le={};n.config.parseDate=fe.parseDate,n.config.formatDate=fe.formatDate,Object.defineProperty(n.config,"enable",{get:()=>n.config._enable,set:ft=>{n.config._enable=Zn(ft)}}),Object.defineProperty(n.config,"disable",{get:()=>n.config._disable,set:ft=>{n.config._disable=Zn(ft)}});const Qe=fe.mode==="time";if(!fe.dateFormat&&(fe.enableTime||Qe)){const ft=hr.defaultConfig.dateFormat||hf.dateFormat;Le.dateFormat=fe.noCalendar||Qe?"H:i"+(fe.enableSeconds?":S":""):ft+" H:i"+(fe.enableSeconds?":S":"")}if(fe.altInput&&(fe.enableTime||Qe)&&!fe.altFormat){const ft=hr.defaultConfig.altFormat||hf.altFormat;Le.altFormat=fe.noCalendar||Qe?"h:i"+(fe.enableSeconds?":S K":" K"):ft+` h:i${fe.enableSeconds?":S":""} K`}Object.defineProperty(n.config,"minDate",{get:()=>n.config._minDate,set:gt("min")}),Object.defineProperty(n.config,"maxDate",{get:()=>n.config._maxDate,set:gt("max")});const Et=ft=>X=>{n.config[ft==="min"?"_minTime":"_maxTime"]=n.parseDate(X,"H:i:S")};Object.defineProperty(n.config,"minTime",{get:()=>n.config._minTime,set:Et("min")}),Object.defineProperty(n.config,"maxTime",{get:()=>n.config._maxTime,set:Et("max")}),fe.mode==="time"&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,Le,fe);for(let ft=0;ft<se.length;ft++)n.config[se[ft]]=n.config[se[ft]]===!0||n.config[se[ft]]==="true";cT.filter(ft=>n.config[ft]!==void 0).forEach(ft=>{n.config[ft]=uT(n.config[ft]||[]).map(u)}),n.isMobile=!n.config.disableMobile&&!n.config.inline&&n.config.mode==="single"&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let ft=0;ft<n.config.plugins.length;ft++){const X=n.config.plugins[ft](n)||{};for(const N in X)cT.indexOf(N)>-1?n.config[N]=uT(X[N]).map(u).concat(n.config[N]):typeof fe[N]=="undefined"&&(n.config[N]=X[N])}fe.altInputClass||(n.config.altInputClass=Ft().className+" "+n.config.altInputClass),An("onParseConfig")}function Ft(){return n.config.wrap?e.querySelector("[data-input]"):e}function Sn(){typeof n.config.locale!="object"&&typeof hr.l10ns[n.config.locale]=="undefined"&&n.config.errorHandler(new Error(`flatpickr: invalid locale ${n.config.locale}`)),n.l10n=Object.assign(Object.assign({},hr.l10ns.default),typeof n.config.locale=="object"?n.config.locale:n.config.locale!=="default"?hr.l10ns[n.config.locale]:void 0),dT.K=`(${n.l10n.amPM[0]}|${n.l10n.amPM[1]}|${n.l10n.amPM[0].toLowerCase()}|${n.l10n.amPM[1].toLowerCase()})`,Object.assign(Object.assign({},t),JSON.parse(JSON.stringify(e.dataset||{}))).time_24hr===void 0&&hr.defaultConfig.time_24hr===void 0&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=c5(n),n.parseDate=fT({config:n.config,l10n:n.l10n})}function Fn(se){if(typeof n.config.position=="function")return void n.config.position(n,se);if(n.calendarContainer===void 0)return;An("onPreCalendarPosition");const fe=se||n._positionElement,Le=Array.prototype.reduce.call(n.calendarContainer.children,(wt,rt)=>wt+rt.offsetHeight,0),Qe=n.calendarContainer.offsetWidth,Et=n.config.position.split(" "),ft=Et[0],X=Et.length>1?Et[1]:null,N=fe.getBoundingClientRect(),H=window.innerHeight-N.bottom,Q=ft==="above"||ft!=="below"&&H<Le&&N.top>Le,he=window.pageYOffset+N.top+(Q?-Le-2:fe.offsetHeight+2);if(xo(n.calendarContainer,"arrowTop",!Q),xo(n.calendarContainer,"arrowBottom",Q),n.config.inline)return;let ye=window.pageXOffset+N.left,Ae=!1,De=!1;X==="center"?(ye-=(Qe-N.width)/2,Ae=!0):X==="right"&&(ye-=Qe-N.width,De=!0),xo(n.calendarContainer,"arrowLeft",!Ae&&!De),xo(n.calendarContainer,"arrowCenter",Ae),xo(n.calendarContainer,"arrowRight",De);const we=window.document.body.offsetWidth-(window.pageXOffset+N.right),Oe=ye+Qe>window.document.body.offsetWidth,Je=we+Qe>window.document.body.offsetWidth;if(xo(n.calendarContainer,"rightMost",Oe),!n.config.static)if(n.calendarContainer.style.top=`${he}px`,!Oe)n.calendarContainer.style.left=`${ye}px`,n.calendarContainer.style.right="auto";else if(!Je)n.calendarContainer.style.left="auto",n.calendarContainer.style.right=`${we}px`;else{const wt=Li();if(wt===void 0)return;const rt=window.document.body.offsetWidth,Yt=Math.max(0,rt/2-Qe/2),Xt=".flatpickr-calendar.centerMost:before",$t=".flatpickr-calendar.centerMost:after",Jt=wt.cssRules.length,gn=`{left:${N.left}px;right:auto;}`;xo(n.calendarContainer,"rightMost",!1),xo(n.calendarContainer,"centerMost",!0),wt.insertRule(`${Xt},${$t}${gn}`,Jt),n.calendarContainer.style.left=`${Yt}px`,n.calendarContainer.style.right="auto"}}function Li(){let se=null;for(let fe=0;fe<document.styleSheets.length;fe++){const Le=document.styleSheets[fe];try{Le.cssRules}catch{continue}se=Le;break}return se!=null?se:dn()}function dn(){const se=document.createElement("style");return document.head.appendChild(se),se.sheet}function Ir(){n.config.noCalendar||n.isMobile||(ot(),Ur(),mt())}function sr(){n._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(n.close,0):n.close()}function xr(se){se.preventDefault(),se.stopPropagation();const fe=X=>X.classList&&X.classList.contains("flatpickr-day")&&!X.classList.contains("flatpickr-disabled")&&!X.classList.contains("notAllowed"),Le=l5(es(se),fe);if(Le===void 0)return;const Qe=Le,Et=n.latestSelectedDateObj=new Date(Qe.dateObj.getTime()),ft=(Et.getMonth()<n.currentMonth||Et.getMonth()>n.currentMonth+n.config.showMonths-1)&&n.config.mode!=="range";if(n.selectedDateElem=Qe,n.config.mode==="single")n.selectedDates=[Et];else if(n.config.mode==="multiple"){const X=co(Et);X?n.selectedDates.splice(parseInt(X),1):n.selectedDates.push(Et)}else n.config.mode==="range"&&(n.selectedDates.length===2&&n.clear(!1,!1),n.latestSelectedDateObj=Et,n.selectedDates.push(Et),ts(Et,n.selectedDates[0],!0)!==0&&n.selectedDates.sort((X,N)=>X.getTime()-N.getTime()));if(M(),ft){const X=n.currentYear!==Et.getFullYear();n.currentYear=Et.getFullYear(),n.currentMonth=Et.getMonth(),X&&(An("onYearChange"),ot()),An("onMonthChange")}if(Ur(),mt(),Pr(),!ft&&n.config.mode!=="range"&&n.config.showMonths===1?xe(Qe):n.selectedDateElem!==void 0&&n.hourElement===void 0&&n.selectedDateElem&&n.selectedDateElem.focus(),n.hourElement!==void 0&&n.hourElement!==void 0&&n.hourElement.focus(),n.config.closeOnSelect){const X=n.config.mode==="single"&&!n.config.enableTime,N=n.config.mode==="range"&&n.selectedDates.length===2&&!n.config.enableTime;(X||N)&&sr()}G()}const Mt={locale:[Sn,Ot],showMonths:[Ne,d,ct],minDate:[U],maxDate:[U],clickOpens:[()=>{n.config.clickOpens===!0?(j(n._input,"focus",n.open),j(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function tn(se,fe){if(se!==null&&typeof se=="object"){Object.assign(n.config,se);for(const Le in se)Mt[Le]!==void 0&&Mt[Le].forEach(Qe=>Qe())}else n.config[se]=fe,Mt[se]!==void 0?Mt[se].forEach(Le=>Le()):cT.indexOf(se)>-1&&(n.config[se]=uT(fe));n.redraw(),Pr(!0)}function ti(se,fe){let Le=[];if(se instanceof Array)Le=se.map(Qe=>n.parseDate(Qe,fe));else if(se instanceof Date||typeof se=="number")Le=[n.parseDate(se,fe)];else if(typeof se=="string")switch(n.config.mode){case"single":case"time":Le=[n.parseDate(se,fe)];break;case"multiple":Le=se.split(n.config.conjunction).map(Qe=>n.parseDate(Qe,fe));break;case"range":Le=se.split(n.l10n.rangeSeparator).map(Qe=>n.parseDate(Qe,fe));break}else n.config.errorHandler(new Error(`Invalid date supplied: ${JSON.stringify(se)}`));n.selectedDates=n.config.allowInvalidPreload?Le:Le.filter(Qe=>Qe instanceof Date&&Tn(Qe,!1)),n.config.mode==="range"&&n.selectedDates.sort((Qe,Et)=>Qe.getTime()-Et.getTime())}function bi(se,fe=!1,Le=n.config.dateFormat){if(se!==0&&!se||se instanceof Array&&se.length===0)return n.clear(fe);ti(se,Le),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),U(void 0,fe),k(),n.selectedDates.length===0&&n.clear(!1),Pr(fe),fe&&An("onChange")}function Zn(se){return se.slice().map(fe=>typeof fe=="string"||typeof fe=="number"||fe instanceof Date?n.parseDate(fe,void 0,!0):fe&&typeof fe=="object"&&fe.from&&fe.to?{from:n.parseDate(fe.from,void 0),to:n.parseDate(fe.to,void 0)}:fe).filter(fe=>fe)}function ar(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;const se=n.config.defaultDate||((n.input.nodeName==="INPUT"||n.input.nodeName==="TEXTAREA")&&n.input.placeholder&&n.input.value===n.input.placeholder?null:n.input.value);se&&ti(se,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),n.config.minTime!==void 0&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),n.config.maxTime!==void 0&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function br(){if(n.input=Ft(),!n.input){n.config.errorHandler(new Error("Invalid input element specified"));return}n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=ai(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),n._positionElement=n.config.positionElement||n._input}function ns(){const se=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=ai("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=se,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr=se==="datetime-local"?"Y-m-d\\TH:i:S":se==="date"?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",n.altInput!==void 0&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch{}j(n.mobileInput,"change",fe=>{n.setDate(es(fe).value,!1,n.mobileFormatStr),An("onChange"),An("onClose")})}function tr(se){if(n.isOpen===!0)return n.close();n.open(se)}function An(se,fe){if(n.config===void 0)return;const Le=n.config[se];if(Le!==void 0&&Le.length>0)for(let Qe=0;Le[Qe]&&Qe<Le.length;Qe++)Le[Qe](n.selectedDates,n.input.value,n,fe);se==="onChange"&&(n.input.dispatchEvent(lo("change")),n.input.dispatchEvent(lo("input")))}function lo(se){const fe=document.createEvent("Event");return fe.initEvent(se,!0,!0),fe}function co(se){for(let fe=0;fe<n.selectedDates.length;fe++)if(ts(n.selectedDates[fe],se)===0)return""+fe;return!1}function Bo(se){return n.config.mode!=="range"||n.selectedDates.length<2?!1:ts(se,n.selectedDates[0])>=0&&ts(se,n.selectedDates[1])<=0}function Ur(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((se,fe)=>{const Le=new Date(n.currentYear,n.currentMonth,1);Le.setMonth(n.currentMonth+fe),n.config.showMonths>1||n.config.monthSelectorType==="static"?n.monthElements[fe].textContent=Ax(Le.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=Le.getMonth().toString(),se.value=Le.getFullYear().toString()}),n._hidePrevMonthArrow=n.config.minDate!==void 0&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=n.config.maxDate!==void 0&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function bo(se){return n.selectedDates.map(fe=>n.formatDate(fe,se)).filter((fe,Le,Qe)=>n.config.mode!=="range"||n.config.enableTime||Qe.indexOf(fe)===Le).join(n.config.mode!=="range"?n.config.conjunction:n.l10n.rangeSeparator)}function Pr(se=!0){n.mobileInput!==void 0&&n.mobileFormatStr&&(n.mobileInput.value=n.latestSelectedDateObj!==void 0?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=bo(n.config.dateFormat),n.altInput!==void 0&&(n.altInput.value=bo(n.config.altFormat)),se!==!1&&An("onValueUpdate")}function gl(se){const fe=es(se),Le=n.prevMonthNav.contains(fe),Qe=n.nextMonthNav.contains(fe);Le||Qe?un(Le?-1:1):n.yearElements.indexOf(fe)>=0?fe.select():fe.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):fe.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function Sc(se){se.preventDefault();const fe=se.type==="keydown",Le=es(se),Qe=Le;n.amPM!==void 0&&Le===n.amPM&&(n.amPM.textContent=n.l10n.amPM[ws(n.amPM.textContent===n.l10n.amPM[0])]);const Et=parseFloat(Qe.getAttribute("min")),ft=parseFloat(Qe.getAttribute("max")),X=parseFloat(Qe.getAttribute("step")),N=parseInt(Qe.value,10),H=se.delta||(fe?se.which===38?1:-1:0);let Q=N+X*H;if(typeof Qe.value!="undefined"&&Qe.value.length===2){const he=Qe===n.hourElement,ye=Qe===n.minuteElement;Q<Et?(Q=ft+Q+ws(!he)+(ws(he)&&ws(!n.amPM)),ye&&re(void 0,-1,n.hourElement)):Q>ft&&(Q=Qe===n.hourElement?Q-ft-ws(!n.amPM):Et,ye&&re(void 0,1,n.hourElement)),n.amPM&&he&&(X===1?Q+N===23:Math.abs(Q-N)>X)&&(n.amPM.textContent=n.l10n.amPM[ws(n.amPM.textContent===n.l10n.amPM[0])]),Qe.value=Fo(Q)}}return s(),n}function df(e,t){const n=Array.prototype.slice.call(e).filter(s=>s instanceof HTMLElement),r=[];for(let s=0;s<n.length;s++){const u=n[s];try{if(u.getAttribute("data-fp-omit")!==null)continue;u._flatpickr!==void 0&&(u._flatpickr.destroy(),u._flatpickr=void 0),u._flatpickr=zQ(u,t||{}),r.push(u._flatpickr)}catch(d){console.error(d)}}return r.length===1?r[0]:r}typeof HTMLElement!="undefined"&&typeof HTMLCollection!="undefined"&&typeof NodeList!="undefined"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return df(this,e)},HTMLElement.prototype.flatpickr=function(e){return df([this],e)});var hr=function(e,t){return typeof e=="string"?df(window.document.querySelectorAll(e),t):e instanceof Node?df([e],t):df(e,t)};hr.defaultConfig={};hr.l10ns={en:Object.assign({},Bg),default:Object.assign({},Bg)};hr.localize=e=>{hr.l10ns.default=Object.assign(Object.assign({},hr.l10ns.default),e)};hr.setDefaults=e=>{hr.defaultConfig=Object.assign(Object.assign({},hr.defaultConfig),e)};hr.parseDate=fT({});hr.formatDate=c5({});hr.compareDates=ts;typeof jQuery!="undefined"&&typeof jQuery.fn!="undefined"&&(jQuery.fn.flatpickr=function(e){return df(this,e)});Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof e=="string"?parseInt(e,10):e))};typeof window!="undefined"&&(window.flatpickr=hr);var RQ=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:hr}),FQ=HM(RQ);(function(e){function t(Ne){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(tt){return typeof tt}:t=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},t(Ne)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(ke.exports),r=u(TE.exports),s=u(FQ);function u(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}function d(){if(typeof WeakMap!="function")return null;var Ne=new WeakMap;return d=function(){return Ne},Ne}function o(Ne){if(Ne&&Ne.__esModule)return Ne;if(Ne===null||t(Ne)!=="object"&&typeof Ne!="function")return{default:Ne};var Ve=d();if(Ve&&Ve.has(Ne))return Ve.get(Ne);var tt={},ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ot in Ne)if(Object.prototype.hasOwnProperty.call(Ne,Ot)){var Ut=ct?Object.getOwnPropertyDescriptor(Ne,Ot):null;Ut&&(Ut.get||Ut.set)?Object.defineProperty(tt,Ot,Ut):tt[Ot]=Ne[Ot]}return tt.default=Ne,Ve&&Ve.set(Ne,tt),tt}function y(){return y=Object.assign||function(Ne){for(var Ve=1;Ve<arguments.length;Ve++){var tt=arguments[Ve];for(var ct in tt)Object.prototype.hasOwnProperty.call(tt,ct)&&(Ne[ct]=tt[ct])}return Ne},y.apply(this,arguments)}function w(Ne,Ve){if(Ne==null)return{};var tt=M(Ne,Ve),ct,Ot;if(Object.getOwnPropertySymbols){var Ut=Object.getOwnPropertySymbols(Ne);for(Ot=0;Ot<Ut.length;Ot++)ct=Ut[Ot],!(Ve.indexOf(ct)>=0)&&(!Object.prototype.propertyIsEnumerable.call(Ne,ct)||(tt[ct]=Ne[ct]))}return tt}function M(Ne,Ve){if(Ne==null)return{};var tt={},ct=Object.keys(Ne),Ot,Ut;for(Ut=0;Ut<ct.length;Ut++)Ot=ct[Ut],!(Ve.indexOf(Ot)>=0)&&(tt[Ot]=Ne[Ot]);return tt}function k(Ne,Ve){var tt=Object.keys(Ne);if(Object.getOwnPropertySymbols){var ct=Object.getOwnPropertySymbols(Ne);Ve&&(ct=ct.filter(function(Ot){return Object.getOwnPropertyDescriptor(Ne,Ot).enumerable})),tt.push.apply(tt,ct)}return tt}function O(Ne){for(var Ve=1;Ve<arguments.length;Ve++){var tt=arguments[Ve]!=null?arguments[Ve]:{};Ve%2?k(Object(tt),!0).forEach(function(ct){Ce(Ne,ct,tt[ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ne,Object.getOwnPropertyDescriptors(tt)):k(Object(tt)).forEach(function(ct){Object.defineProperty(Ne,ct,Object.getOwnPropertyDescriptor(tt,ct))})}return Ne}function $(Ne,Ve){if(!(Ne instanceof Ve))throw new TypeError("Cannot call a class as a function")}function j(Ne,Ve){for(var tt=0;tt<Ve.length;tt++){var ct=Ve[tt];ct.enumerable=ct.enumerable||!1,ct.configurable=!0,"value"in ct&&(ct.writable=!0),Object.defineProperty(Ne,ct.key,ct)}}function G(Ne,Ve,tt){return Ve&&j(Ne.prototype,Ve),tt&&j(Ne,tt),Ne}function B(Ne,Ve){if(typeof Ve!="function"&&Ve!==null)throw new TypeError("Super expression must either be null or a function");Ne.prototype=Object.create(Ve&&Ve.prototype,{constructor:{value:Ne,writable:!0,configurable:!0}}),Ve&&U(Ne,Ve)}function U(Ne,Ve){return U=Object.setPrototypeOf||function(ct,Ot){return ct.__proto__=Ot,ct},U(Ne,Ve)}function Z(Ne){var Ve=de();return function(){var ct=xe(Ne),Ot;if(Ve){var Ut=xe(this).constructor;Ot=Reflect.construct(ct,arguments,Ut)}else Ot=ct.apply(this,arguments);return re(this,Ot)}}function re(Ne,Ve){return Ve&&(t(Ve)==="object"||typeof Ve=="function")?Ve:ie(Ne)}function ie(Ne){if(Ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ne}function de(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xe(Ne){return xe=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},xe(Ne)}function Ce(Ne,Ve,tt){return Ve in Ne?Object.defineProperty(Ne,Ve,{value:tt,enumerable:!0,configurable:!0,writable:!0}):Ne[Ve]=tt,Ne}var je=["onChange","onOpen","onClose","onMonthChange","onYearChange","onReady","onValueUpdate","onDayCreate"],ze=r.default.oneOfType([r.default.func,r.default.arrayOf(r.default.func)]),pt=["onCreate","onDestroy"],mt=r.default.func,ot=function(Ne){B(tt,Ne);var Ve=Z(tt);function tt(){var ct;$(this,tt);for(var Ot=arguments.length,Ut=new Array(Ot),un=0;un<Ot;un++)Ut[un]=arguments[un];return ct=Ve.call.apply(Ve,[this].concat(Ut)),Ce(ie(ct),"createFlatpickrInstance",function(){var st=O({onClose:function(){ct.node.blur&&ct.node.blur()}},ct.props.options);je.forEach(function(xt){ct.props[xt]&&(st[xt]=ct.props[xt])}),ct.flatpickr=(0,s.default)(ct.node,st),ct.props.hasOwnProperty("value")&&ct.flatpickr.setDate(ct.props.value,!1);var at=ct.props.onCreate;at&&at(ct.flatpickr)}),Ce(ie(ct),"destroyFlatpickrInstance",function(){var st=ct.props.onDestroy;st&&st(ct.flatpickr),ct.flatpickr.destroy(),ct.flatpickr=null}),Ce(ie(ct),"handleNodeChange",function(st){ct.node=st,ct.flatpickr&&(ct.destroyFlatpickrInstance(),ct.createFlatpickrInstance())}),ct}return G(tt,[{key:"componentDidUpdate",value:function(Ot){var Ut=this,un=this.props.options,st=Ot.options;je.forEach(function(hn){Ut.props.hasOwnProperty(hn)&&(un[hn]=Ut.props[hn]),Ot.hasOwnProperty(hn)&&(st[hn]=Ot[hn])});for(var at=Object.getOwnPropertyNames(un),xt=at.length-1;xt>=0;xt--){var Vt=at[xt],Gt=un[Vt];Gt!==st[Vt]&&(je.indexOf(Vt)!==-1&&!Array.isArray(Gt)&&(Gt=[Gt]),this.flatpickr.set(Vt,Gt))}this.props.hasOwnProperty("value")&&this.props.value!==Ot.value&&this.flatpickr.setDate(this.props.value,!1)}},{key:"componentDidMount",value:function(){this.createFlatpickrInstance()}},{key:"componentWillUnmount",value:function(){this.destroyFlatpickrInstance()}},{key:"render",value:function(){var Ot=this.props,Ut=Ot.options,un=Ot.defaultValue,st=Ot.value,at=Ot.children,xt=Ot.render,Vt=w(Ot,["options","defaultValue","value","children","render"]);return je.forEach(function(Gt){delete Vt[Gt]}),pt.forEach(function(Gt){delete Vt[Gt]}),xt?xt(O(O({},Vt),{},{defaultValue:un,value:st}),this.handleNodeChange):Ut.wrap?n.default.createElement("div",y({},Vt,{ref:this.handleNodeChange}),at):n.default.createElement("input",y({},Vt,{defaultValue:un,ref:this.handleNodeChange}))}}]),tt}(n.Component);Ce(ot,"propTypes",{defaultValue:r.default.string,options:r.default.object,onChange:ze,onOpen:ze,onClose:ze,onMonthChange:ze,onYearChange:ze,onReady:ze,onValueUpdate:ze,onDayCreate:ze,onCreate:mt,onDestroy:mt,value:r.default.oneOfType([r.default.string,r.default.array,r.default.object,r.default.number]),children:r.default.node,className:r.default.string,render:r.default.func}),Ce(ot,"defaultProps",{options:{}});var kt=ot;e.default=kt})(s5);var nee=B4(s5);export{W6 as A,l2 as B,YP as C,UQ as D,kN as F,QQ as G,bN as L,cR as M,NQ as N,K2 as P,Zr as R,KQ as S,ev as T,YQ as a,Bm as b,GQ as c,$Q as d,ZQ as e,j0 as f,Fu as g,WQ as h,gO as i,MN as j,B2 as k,J0 as l,HQ as m,XQ as n,KX as o,qQ as p,tee as q,ke as r,AQ as s,Fg as t,rI as u,JQ as v,eee as w,jQ as x,nee as y,VQ as z};
